function reverse(e){return e.toString().split("").reverse().join("")}function interpret_iframe_transport(e,t){if(void 0!=t.dataType&&t.dataType.match(/iframe/)){var i=t.result[0].body.innerText;try{t.result=$.parseJSON(i,{throwError:!0})}catch(a){return e.responseText=JSON.stringify({error:i}),t.error(e,t),!1}}return!0}function check_control_bar(){var e=$("#wrapper").width(),t=$("#content .control-bar"),i=$(t).find(".ui-pagination").width(),a=$(t).find(".controls").width(),n=$(t).find(".ui-search").width();i>0&&a>0&&n>0&&i+a+n>e&&$(t).addClass("center")}function check_control_bar_ie(){var e=$("#content .control-bar"),t=27,i=$(e).find(".ui-pagination").height();i>t&&($(e).find(".controls").after('<br class="clear" />'),$(e).addClass("center"))}function loadFunCaptcha(){}function updateHexCodeLength(e){return 6!=e.length?e.charAt(0).hex_code.charAt(0).hex_code.charAt(1).hex_code.charAt(1).hex_code.charAt(2).hex_code.charAt(2):e}function cleanField(e,t,i){if(e=checkForDefaultValue(e,t),"color"==t||"background-color"==t||"border-color"==t){if("#"==e.charAt(0))return e.slice(1)}else if(("background-image"==t||"banner-image"==t)&&"url("==e.slice(0,4))return e.slice(5,-2);return e}function checkForDefaultValue(e,t){if(e=$.trim(e),""===e)switch(t){case"background":e="none";break;case"background-color":e="transparent";break;case"background-image":e="none";break;case"banner-image":e="none";break;case"background-attachment":e="scroll";break;case"background-repeat":e="repeat";break;case"background-position":e="0% 0%";break;case"border":e="0";break;case"border-width":e="medium";break;case"border-style":e="none";break;case"border-color":e="transparent";break;case"border-radius":e="0";break;case"box-shadow":e="none";break;case"color":e="transparent";break;case"height":e="0px";break;case"width":e="0px";break;case"font":case"font-style":case"font-variant":case"text-transform":case"font-weight":case"font-size":case"font-family":case"text-decoration":case"text-align":case"text-shadow":default:e="inherit"}return e}function ssHelper(e){var t=theme_settings,i=$("#preview iframe").contents(),a=proboards.data("base_path"),n=i.get(0);if(a.indexOf(n.location.host)!=-1&&0!=n.location.pathname.indexOf(proboards.route("admin"))){if(!i.find("#forum_style").length)return setTimeout(function(){ssHelper(e)},500);if(1!=e){$("#settings .section.active").removeClass("active");for(var o=$("#settings .property"),r=0;r<o.length;++r){var s=$(o[r]),l=s.data("item").variable;if(!s.closest(".section").hasClass("active")&&"undefined"!=typeof t.options.variableSelectors[l]){var d=t.options.variableSelectors[l];$("html").is(".ie7")&&(d=d.replace(/:[a-z-]+/g,"")),d&&i.find(d).length&&s.parents(".section").addClass("active")}}}i.find(".editors .visual-editor").length&&$("#wysiwyg-related .section").addClass("active");var c=i;if(!c.find("#custom-style").length){var u=$('<style type="text/css" id="custom-style" />');c.find("head").append(u),t.options.styleElem=u}var p=i.find(".visual-editor iframe").contents();if(p.length&&!p.find("#custom-wysiwyg-style").length){var u=$('<style type="text/css" id="custom-wysiwyg-style" />');p.find("head").append(u),t.options.styleElemW=u}t.updateLivePreview(),t.options.zoomSetup?$(window).trigger("resize"):setTimeout(function(){t.setup_zoom_controls()},500),t.resizeIframeWindow()}}function saveButton(e,t,i,a){t.preventDefault(),proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight");var n={};n.css=theme_settings.options.stylesheet;try{n.css_parsed=proboards.css.clean(theme_settings.options.stylesheetData.toCSS({compress:!0}))}catch(t){proboards.error(t.message)}var o=proboards.css.parse(theme_settings.options.stylesheetW);proboards.css.extendVariables(o,theme_settings.options.stylesheetData),proboards.css.extendVariables(o,proboards.css.parse(proboards.data("css_required_vars")));try{n.wysiwyg_css_parsed=proboards.css.clean(o.toCSS({compress:!0}))}catch(t){proboards.error(t.message)}var r=proboards.css.parse(theme_settings.options.stylesheetM);proboards.css.extendVariables(r,theme_settings.options.stylesheetData),proboards.css.extendVariables(r,proboards.css.parse(proboards.data("css_required_vars")));try{n.css_mobile=proboards.css.clean(r.toCSS({compress:!0}))}catch(t){proboards.error(t.message)}$('input[name="default"]').attr("checked")&&(n["default"]=1),$('input[name="disabled"]').attr("checked")&&(n.disabled=1);for(var s=[],l=JSON.parse(proboards.data("unfiltered_vars")),d=proboards.css.variables(proboards.css.parse(theme_settings.options.stylesheet)),c=0;c<l.length;c++)"undefined"!=typeof d[l[c].variable]&&s.push(l[c]);for(var u={scheme_id:"theme_preview"},p=0;p<s.length;p++)u[s[p].variable.slice(1)]=d[s[p].variable].value.slice(1);n.color_scheme=JSON.stringify(u),"undefined"!=typeof a&&(n.favorites=JSON.stringify(a)),proboards.saving(i,!0),proboards.ajax({method:"post",url:proboards.data("css_save_url"),data:n,success:function(e){n["default"]&&updateThemeDropdown(e.old_default),$(".admin-theme-color-bar td").empty().append(proboards.color_scheme.build(u,0));var t=/^\s*$/;$("#settings .custom input").filter(function(e){return t.test($(this).val())}).replaceWith("<span>This property has been removed.</span>")},complete:function(e,t){proboards.saving(i,!1,t)}})}function update_radio(e){$("#"+e).attr("checked","checked")}function change(e,t){"r0"==e?(remove_forum_avatar(),remove_image_avatar(),remove_flash_avatar()):"r1"==e?(remove_forum_avatar(),remove_flash_avatar(),add_image_avatar()):"r2"==e?(remove_forum_avatar(),remove_image_avatar(),add_flash_avatar()):"r3"==e?(remove_forum_avatar(),add_image_avatar(),add_flash_avatar()):"r4"==e&&(remove_image_avatar(),remove_flash_avatar(),add_forum_avatar(),$('input[name="forum_avatar"]').val()!=$("#forum-avatar img").attr("src")&&($('input[name="forum_avatar"]').val($("#forum-avatar img").attr("src")),t||$('input[name="forum_avatar"]').change())),update_radio(e),update_empty_avatar()}function update_empty_avatar(){imageAdded?$previewImageAvatar.toggleClass("hide",!1):$previewImageAvatar.toggleClass("hide",!0),flashAdded?$previewFlashAvatar.toggleClass("hide",!1):$previewFlashAvatar.toggleClass("hide",!0),imageAdded||flashAdded||forumImageAdded?$previewNoAvatar.toggleClass("hide",!0):$previewNoAvatar.toggleClass("hide",!1)}function remove_image_avatar(){$previewImageAvatar.toggleClass("hide",!0),$("#avatar-preview").removeClass("image_present"),imageAdded=!1}function remove_flash_avatar(){$previewFlashAvatar.toggleClass("hide",!0),$("#avatar-preview").removeClass("flash_present"),flashAdded=!1}function remove_forum_avatar(){$previewForumAvatar.toggleClass("hide",!0),forumImageAdded=!1}function add_image_avatar(){$previewImageAvatar.toggleClass("hide",!1),$("#avatar-preview").addClass("image_present"),imageAdded=!0}function add_flash_avatar(){$previewFlashAvatar.toggleClass("hide",!1),$("#avatar-preview").addClass("flash_present"),flashAdded=!0}function add_forum_avatar(){$previewForumAvatar.toggleClass("hide",!1),forumImageAdded=!0}function edit_flash_avatar(){proboards.data("user").id==proboards.data("profile_id")&&($("#flash-avatar-editor-container").dialog("open"),0==is_loaded&&(proboards.avatar.loadEditor("flash-avatar-editor-container"),is_loaded=1))}function edit_image_avatar(){$("#image-avatar-editor-container").dialog("open")}function delete_image(){proboards.confirm("Are you sure you want to remove your current avatar image?",function(){proboards.loading(!0),proboards.ajax({url:proboards.data("remove_uploaded_avatar_url"),data:{user_id:proboards.data("profile_id")},success:function(e){$("#image-avatar").html(""),$("#image-avatar-preview").html("")},complete:function(){proboards.loading(!1)}})})}function edit_forum_avatar(){isForumAvatarsLoaded||(proboards.ajax({async:!1,url:proboards.data("forum_avatar_url"),success:function(e){$("#forum-avatar-editor-container").html(e.html)}}),isForumAvatarsLoaded=!0),$("#forum-avatar-editor-container").dialog("open")}function select_forum_avatar(e){$("#forum-avatar").html('<img class="max-size" src="'+e+'" />'),change("r4"),$("#forum-avatar-editor-container").dialog("close")}function check_image_link(url){var msg="The link entered is not valid.",patt=/^(https?:\/\/)/i;patt.test(url)||(url="http://"+url),patt=/^(https?:\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?\/.*\./i;var patt_basic=/^(https?:\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?[\w\~\!\@\#\$\%\^\&\*\(\)\-\+\=\/\:\;\?\.\,]*/i;if(patt.test(url)){if(patt=new RegExp(eval(proboards.data("image_regex"))),!patt.test(url))return link_image_error(msg),!1}else if(!patt_basic.test(url))return link_image_error(msg),!1;return!0}function link_image_error(e){$("#link-error").html(e).clearQueue().fadeIn().delay(4e3).fadeOut()}!function(e,t){function i(t,i){var n=t.nodeName.toLowerCase();if("area"===n){var o,r=t.parentNode,s=r.name;return!(!t.href||!s||"map"!==r.nodeName.toLowerCase())&&(o=e("img[usemap=#"+s+"]")[0],!!o&&a(o))}return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"==n?t.href||i:i)&&a(t)}function a(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.13",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var a=this;setTimeout(function(){e(a).focus(),i&&i.call(a)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var a,n,o=e(this[0]);o.length&&o[0]!==document;){if(a=o.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(i,a){function n(t,i,a,n){return e.each(o,function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,a&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),n&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),i}var o="Width"===a?["Left","Right"]:["Top","Bottom"],r=a.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+a]=function(i){return i===t?s["inner"+a].call(this):this.each(function(){e(this).css(r,n(this,i)+"px")})},e.fn["outer"+a]=function(t,i){return"number"!=typeof t?s["outer"+a].call(this,t):this.each(function(){e(this).css(r,n(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:function(t,i,a){return!!e.data(t,a[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var a=e.attr(t,"tabindex"),n=isNaN(a);return(n||a>=0)&&i(t,!n)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,i,a){var n=e.ui[t].prototype;for(var o in a)n.plugins[o]=n.plugins[o]||[],n.plugins[o].push([i,a[o]])},call:function(e,t,i){var a=e.plugins[t];if(a&&e.element[0].parentNode)for(var n=0;n<a.length;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var a=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[a]>0||(t[a]=1,n=t[a]>0,t[a]=0,n)},isOverAxis:function(e,t,i){return e>t&&e<t+i},isOver:function(t,i,a,n,o,r){return e.ui.isOverAxis(t,a,o)&&e.ui.isOverAxis(i,n,r)}}))}(jQuery),function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var a,n=0;null!=(a=t[n]);n++)e(a).triggerHandler("remove");i(t)}}else{var a=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||t&&!e.filter(t,[this]).length||e("*",this).add([this]).each(function(){e(this).triggerHandler("remove")}),a.call(e(this),t,i)})}}e.widget=function(t,i,a){var n,o=t.split(".")[0];t=t.split(".")[1],n=o+"-"+t,a||(a=i,i=e.Widget),e.expr[":"][n]=function(i){return!!e.data(i,t)},e[o]=e[o]||{},e[o][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var r=new i;r.options=e.extend(!0,{},r.options),e[o][t].prototype=e.extend(!0,r,{namespace:o,widgetName:t,widgetEventPrefix:e[o][t].prototype.widgetEventPrefix||t,widgetBaseClass:n},a),e.widget.bridge(t,e[o][t])},e.widget.bridge=function(i,a){e.fn[i]=function(n){var o="string"==typeof n,r=Array.prototype.slice.call(arguments,1),s=this;return n=!o&&r.length?e.extend.apply(null,[!0,n].concat(r)):n,o&&"_"===n.charAt(0)?s:(o?this.each(function(){var a=e.data(this,i),o=a&&e.isFunction(a[n])?a[n].apply(a,r):a;if(o!==a&&o!==t)return s=o,!1}):this.each(function(){var t=e.data(this,i);t?t.option(n||{})._init():e.data(this,i,new a(n,this))}),s)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var a=this;this.element.bind("remove."+this.widgetName,function(){a.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,a){var n=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(a===t)return this.options[i];n={},n[i]=a}return this._setOptions(n),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,a){var n=this.options[t];if(i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),a=a||{},i.originalEvent)for(var o,r=e.event.props.length;r;)o=e.event.props[--r],i[o]=i.originalEvent[o];return this.element.trigger(i,a),!(e.isFunction(n)&&n.call(this.element[0],i,a)===!1||i.isDefaultPrevented())}}}(jQuery),function(e,t){var i=!1;e(document).mousedown(function(e){i=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var a=this,n=1==t.which,o="string"==typeof this.options.cancel&&e(t.target).parents().add(t.target).filter(this.options.cancel).length;return!(n&&!o&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return a._mouseMove(e)},this._mouseUpDelegate=function(e){return a._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(t),!!this.handle&&(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var a=this._uiHash();if(this._trigger("drag",t,a)===!1)return this._mouseUp({}),!1;this.position=a.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;if(e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var a=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){a._trigger("stop",t)!==!1&&a._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,a=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),a[0]==this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute"),a},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=[("document"==t.containment?0:e(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,("document"==t.containment?0:e(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),a=i[0];if(!a)return;var n=(i.offset(),"hidden"!=e(a).css("overflow"));this.containment=[(parseInt(e(a).css("borderLeftWidth"),10)||0)+(parseInt(e(a).css("paddingLeft"),10)||0),(parseInt(e(a).css("borderTopWidth"),10)||0)+(parseInt(e(a).css("paddingTop"),10)||0),(n?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(e(a).css("borderLeftWidth"),10)||0)-(parseInt(e(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(e(a).css("borderTopWidth"),10)||0)-(parseInt(e(a).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var a="absolute"==t?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*a+this.offset.parent.top*a-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*a),left:i.left+this.offset.relative.left*a+this.offset.parent.left*a-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*a)}},_generatePosition:function(t){var i=this.options,a="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(a[0].tagName),o=t.pageX,r=t.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();s=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else s=this.containment;t.pageX-this.offset.click.left<s[0]&&(o=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(r=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(o=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(r=s[3]+this.offset.click.top)}if(i.grid){var d=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1];r=s&&(d-this.offset.click.top<s[1]||d-this.offset.click.top>s[3])?d-this.offset.click.top<s[1]?d+i.grid[1]:d-i.grid[1]:d;var c=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=s&&(c-this.offset.click.left<s[0]||c-this.offset.click.left>s[2])?c-this.offset.click.left<s[0]?c+i.grid[0]:c-i.grid[0]:c}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,a){return a=a||this._uiHash(),e.ui.plugin.call(this,t,[i,a]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,a)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.13"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var a=e(this).data("draggable"),n=a.options,o=e.extend({},i,{item:a.element});a.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(a.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var a=e(this).data("draggable"),n=e.extend({},i,{item:a.element});e.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var a=e(this).data("draggable"),n=this;e.each(a.sortables,function(o){this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",t),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),a._trigger("fromSortable",t),a.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i){var a=e("body"),n=e(this).data("draggable").options;a.css("cursor")&&(n._cursor=a.css("cursor")),a.css("cursor",n.cursor)},stop:function(t,i){var a=e(this).data("draggable").options;a._cursor&&e("body").css("cursor",a._cursor)}}),e.ui.plugin.add("draggable","opacity",{
start:function(t,i){var a=e(i.helper),n=e(this).data("draggable").options;a.css("opacity")&&(n._opacity=a.css("opacity")),a.css("opacity",n.opacity)},stop:function(t,i){var a=e(this).data("draggable").options;a._opacity&&e(i.helper).css("opacity",a._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,i){var a=e(this).data("draggable");a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(t,i){var a=e(this).data("draggable"),n=a.options,o=!1;a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(a.overflowOffset.top+a.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?a.scrollParent[0].scrollTop=o=a.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-a.overflowOffset.top<n.scrollSensitivity&&(a.scrollParent[0].scrollTop=o=a.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(a.overflowOffset.left+a.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?a.scrollParent[0].scrollLeft=o=a.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-a.overflowOffset.left<n.scrollSensitivity&&(a.scrollParent[0].scrollLeft=o=a.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(a,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i){var a=e(this).data("draggable"),n=a.options;a.snapElements=[],e(n.snap.constructor!=String?n.snap.items||":data(draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i){for(var a=e(this).data("draggable"),n=a.options,o=n.snapTolerance,r=i.offset.left,s=r+a.helperProportions.width,l=i.offset.top,d=l+a.helperProportions.height,c=a.snapElements.length-1;c>=0;c--){var u=a.snapElements[c].left,p=u+a.snapElements[c].width,h=a.snapElements[c].top,f=h+a.snapElements[c].height;if(u-o<r&&r<p+o&&h-o<l&&l<f+o||u-o<r&&r<p+o&&h-o<d&&d<f+o||u-o<s&&s<p+o&&h-o<l&&l<f+o||u-o<s&&s<p+o&&h-o<d&&d<f+o){if("inner"!=n.snapMode){var m=Math.abs(h-d)<=o,g=Math.abs(f-l)<=o,v=Math.abs(u-s)<=o,b=Math.abs(p-r)<=o;m&&(i.position.top=a._convertPositionTo("relative",{top:h-a.helperProportions.height,left:0}).top-a.margins.top),g&&(i.position.top=a._convertPositionTo("relative",{top:f,left:0}).top-a.margins.top),v&&(i.position.left=a._convertPositionTo("relative",{top:0,left:u-a.helperProportions.width}).left-a.margins.left),b&&(i.position.left=a._convertPositionTo("relative",{top:0,left:p}).left-a.margins.left)}var _=m||g||v||b;if("outer"!=n.snapMode){var m=Math.abs(h-l)<=o,g=Math.abs(f-d)<=o,v=Math.abs(u-r)<=o,b=Math.abs(p-s)<=o;m&&(i.position.top=a._convertPositionTo("relative",{top:h,left:0}).top-a.margins.top),g&&(i.position.top=a._convertPositionTo("relative",{top:f-a.helperProportions.height,left:0}).top-a.margins.top),v&&(i.position.left=a._convertPositionTo("relative",{top:0,left:u}).left-a.margins.left),b&&(i.position.left=a._convertPositionTo("relative",{top:0,left:p-a.helperProportions.width}).left-a.margins.left)}!a.snapElements[c].snapping&&(m||g||v||b||_)&&a.options.snap.snap&&a.options.snap.snap.call(a.element,t,e.extend(a._uiHash(),{snapItem:a.snapElements[c].item})),a.snapElements[c].snapping=m||g||v||b||_}else a.snapElements[c].snapping&&a.options.snap.release&&a.options.snap.release.call(a.element,t,e.extend(a._uiHash(),{snapItem:a.snapElements[c].item})),a.snapElements[c].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(t,i){var a=e(this).data("draggable").options,n=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(n.length){var o=parseInt(n[0].style.zIndex)||0;e(n).each(function(e){this.style.zIndex=o+e}),this[0].style.zIndex=o+n.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var a=e(i.helper),n=e(this).data("draggable").options;a.css("zIndex")&&(n._zIndex=a.css("zIndex")),a.css("zIndex",n.zIndex)},stop:function(t,i){var a=e(this).data("draggable").options;a._zIndex&&e(i.helper).css("zIndex",a._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var a=i||e.ui.ddmanager.current;if(!a||(a.currentItem||a.element)[0]==this.element[0])return!1;var n=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==a.options.scope&&t.accept.call(t.element[0],a.currentItem||a.element)&&e.ui.intersect(a,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return n=!0,!1}),!n&&(!!this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(a)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.13"}),e.ui.intersect=function(t,i,a){if(!i.offset)return!1;var n=(t.positionAbs||t.position.absolute).left,o=n+t.helperProportions.width,r=(t.positionAbs||t.position.absolute).top,s=r+t.helperProportions.height,l=i.offset.left,d=l+i.proportions.width,c=i.offset.top,u=c+i.proportions.height;switch(a){case"fit":return l<=n&&o<=d&&c<=r&&s<=u;case"intersect":return l<n+t.helperProportions.width/2&&o-t.helperProportions.width/2<d&&c<r+t.helperProportions.height/2&&s-t.helperProportions.height/2<u;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,h=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(h,p,c,l,i.proportions.height,i.proportions.width);return f;case"touch":return(r>=c&&r<=u||s>=c&&s<=u||r<c&&s>u)&&(n>=l&&n<=d||o>=l&&o<=d||n<l&&o>d);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var a=e.ui.ddmanager.droppables[t.options.scope]||[],n=i?i.type:null,o=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var r=0;r<a.length;r++)if(!(a[r].options.disabled||t&&!a[r].accept.call(a[r].element[0],t.currentItem||t.element))){for(var s=0;s<o.length;s++)if(o[s]==a[r].element[0]){a[r].proportions.height=0;continue e}a[r].visible="none"!=a[r].element.css("display"),a[r].visible&&("mousedown"==n&&a[r]._activate.call(a[r],i),a[r].offset=a[r].element.offset(),a[r].proportions={width:a[r].element[0].offsetWidth,height:a[r].element[0].offsetHeight})}},drop:function(t,i){var a=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(a=a||this._drop.call(this,i)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),a},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var a=e.ui.intersect(t,this,this.options.tolerance),n=a||1!=this.isover?a&&0==this.isover?"isover":null:"isout";if(n){var o;if(this.options.greedy){var r=this.element.parents(":data(droppable):eq(0)");r.length&&(o=e.data(r[0],"droppable"),o.greedyChild="isover"==n?1:0)}o&&"isover"==n&&(o.isover=0,o.isout=1,o._out.call(o,i)),this[n]=1,this["isout"==n?"isover":"isout"]=0,this["isover"==n?"_over":"_out"].call(this,i),o&&"isout"==n&&(o.isout=0,o.isover=1,o._over.call(o,i))}}})}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var a=this.handles.split(",");this.handles={};for(var n=0;n<a.length;n++){var o=e.trim(a[n]),r="ui-resizable-"+o,s=e('<div class="ui-resizable-handle '+r+'"></div>');/sw|se|ne|nw/.test(o)&&s.css({zIndex:++i.zIndex}),"se"==o&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(s)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var a=e(this.handles[i],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(i)?a.outerHeight():a.outerWidth();var o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(o,n),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var a in this.handles)e(this.handles[a])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var a=this.options,n=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:n.top,left:n.left}),e.browser.opera&&/relative/.test(o.css("position"))&&o.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var r=i(this.helper.css("left")),s=i(this.helper.css("top"));a.containment&&(r+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:s},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:r,top:s},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i=this.helper,a=(this.options,this.originalMousePosition),n=this.axis,o=t.pageX-a.left||0,r=t.pageY-a.top||0,s=this._change[n];if(!s)return!1;var l=s.apply(this,[t,o,r]);e.browser.msie&&e.browser.version<7,this.sizeDiff;return(this._aspectRatio||t.shiftKey)&&(l=this._updateRatio(l,t)),l=this._respectSize(l,t),this._propagate("resize",t),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,a=this;if(this._helper){var n=this._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),r=o&&e.ui.hasScroll(n[0],"left")?0:a.sizeDiff.height,s=o?0:a.sizeDiff.width,l={width:a.helper.width()-s,height:a.helper.height()-r},d=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||null,c=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:c,left:d})),a.helper.height(a.size.height),a.helper.width(a.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateCache:function(e){this.options;this.offset=this.helper.offset(),a(e.left)&&(this.position.left=e.left),a(e.top)&&(this.position.top=e.top),a(e.height)&&(this.size.height=e.height),a(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var i=(this.options,this.position),a=this.size,n=this.axis;return e.height?e.width=a.height*this.aspectRatio:e.width&&(e.height=a.width/this.aspectRatio),"sw"==n&&(e.left=i.left+(a.width-e.width),e.top=null),"nw"==n&&(e.top=i.top+(a.height-e.height),e.left=i.left+(a.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this.options),n=(this._aspectRatio||t.shiftKey,this.axis),o=a(e.width)&&i.maxWidth&&i.maxWidth<e.width,r=a(e.height)&&i.maxHeight&&i.maxHeight<e.height,s=a(e.width)&&i.minWidth&&i.minWidth>e.width,l=a(e.height)&&i.minHeight&&i.minHeight>e.height;s&&(e.width=i.minWidth),l&&(e.height=i.minHeight),o&&(e.width=i.maxWidth),r&&(e.height=i.maxHeight);var d=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),p=/nw|ne|n/.test(n);s&&u&&(e.left=d-i.minWidth),o&&u&&(e.left=d-i.maxWidth),l&&p&&(e.top=c-i.minHeight),r&&p&&(e.top=c-i.maxHeight);var h=!e.width&&!e.height;return h&&!e.left&&e.top?e.top=null:h&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var a=this._proportionallyResizeElements[i];if(!this.borderDif){var n=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],o=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];this.borderDif=e.map(n,function(e,t){var i=parseInt(e,10)||0,a=parseInt(o[t],10)||0;return i+a})}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||a.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var a=e.browser.msie&&e.browser.version<7,n=a?1:0,o=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,i){return{width:this.originalSize.width+t}},w:function(e,t,i){var a=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+t,width:a.width-t}},n:function(e,t,i){var a=(this.options,this.originalSize),n=this.originalPosition;return{top:n.top+i,height:a.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,a){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,a]))},sw:function(t,i,a){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,a]))},ne:function(t,i,a){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,a]))},nw:function(t,i,a){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,a]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.13"}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("resizable"),a=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),r=o&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,s=o?0:i.sizeDiff.width,l={width:i.size.width-s,height:i.size.height-r},d=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:a.animateDuration,easing:a.animateEasing,step:function(){var a={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:a.width,height:a.height}),i._updateCache(a),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,a,n,o,r,s,l,d=e(this).data("resizable"),c=d.options,u=d.element,p=c.containment,h=p instanceof e?p.get(0):/parent/.test(p)?u.parent().get(0):p;h&&(d.containerElement=e(h),/document/.test(p)||p===document?(d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),a=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){a[e]=i(t.css("padding"+n))}),d.containerOffset=t.offset(),d.containerPosition=t.position(),d.containerSize={height:t.innerHeight()-a[3],width:t.innerWidth()-a[1]},n=d.containerOffset,o=d.containerSize.height,r=d.containerSize.width,s=e.ui.hasScroll(h,"left")?h.scrollWidth:r,l=e.ui.hasScroll(h)?h.scrollHeight:o,d.parentData={element:h,left:n.left,top:n.top,width:s,height:l}))},resize:function(t){var i,a,n,o,r=e(this).data("resizable"),s=r.options,l=r.containerOffset,d=r.position,c=r._aspectRatio||t.shiftKey,u={top:0,left:0},p=r.containerElement;p[0]!==document&&/static/.test(p.css("position"))&&(u=l),d.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-u.left),c&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=s.helper?l.left:0),d.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-u.left:r.offset.left-u.left)+r.sizeDiff.width),a=Math.abs((r._helper?r.offset.top-u.top:r.offset.top-l.top)+r.sizeDiff.height),n=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),n&&o&&(i-=Math.abs(r.parentData.left)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,c&&(r.size.height=r.size.width/r.aspectRatio)),a+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-a,c&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("resizable"),i=t.options,a=t.containerOffset,n=t.containerPosition,o=t.containerElement,r=e(t.helper),s=r.offset(),l=r.outerWidth()-t.sizeDiff.width,d=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-n.left-a.left,width:l,height:d}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-n.left-a.left,width:l,height:d})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),i=t.options,a=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?a(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],a(i.alsoResize)):e.each(i.alsoResize,function(e){a(e)})},resize:function(t,i){var a=e(this).data("resizable"),n=a.options,o=a.originalSize,r=a.originalPosition,s={height:a.size.height-o.height||0,width:a.size.width-o.width||0,top:a.position.top-r.top||0,left:a.position.left-r.left||0},l=function(t,a){e(t).each(function(){var t=e(this),n=e(this).data("resizable-alsoresize"),o={},r=a&&a.length?a:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(n[t]||0)+(s[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?l(n.alsoResize):e.each(n.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),i=t.options,a=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("resizable"),i=t.options,a=t.size,n=t.originalSize,o=t.originalPosition,r=t.axis,s="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=s[0]||1,d=s[1]||1,c=Math.round((a.width-n.width)/l)*l,u=Math.round((a.height-n.height)/d)*d,p=n.width+c,h=n.height+u,f=i.maxWidth&&i.maxWidth<p,m=i.maxHeight&&i.maxHeight<h,g=i.minWidth&&i.minWidth>p,v=i.minHeight&&i.minHeight>h;i.grid=s,g&&(p+=l),v&&(h+=d),f&&(p-=l),m&&(h-=d),/^(se|s|e)$/.test(r)?(t.size.width=p,t.size.height=h):/^(ne)$/.test(r)?(t.size.width=p,t.size.height=h,t.position.top=o.top-u):/^(sw)$/.test(r)?(t.size.width=p,t.size.height=h,t.position.left=o.left-c):(h-d>0?(t.size.height=h,t.position.top=o.top-u):(t.size.height=d,t.position.top=o.top+n.height-d),p-l>0?(t.size.width=p,t.position.left=o.left-c):(t.size.width=l,t.position.left=o.left+n.width-l))}});var i=function(e){return parseInt(e,10)||0},a=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var a=this.options;this.selectees=e(a.filter,this.element[0]),this._trigger("start",t),e(a.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),a.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var a=e.data(this,"selectable-item");a.startselected=!0,t.metaKey||(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,i._trigger("unselecting",t,{unselecting:a.element}))}),e(t.target).parents().andSelf().each(function(){var a=e.data(this,"selectable-item");if(a){var n=!t.metaKey||!a.$element.hasClass("ui-selected");return a.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),a.unselecting=!n,a.selecting=n,a.selected=n,n?i._trigger("selecting",t,{selecting:a.element}):i._trigger("unselecting",t,{unselecting:a.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var a=this.options,n=this.opos[0],o=this.opos[1],r=t.pageX,s=t.pageY;if(n>r){var l=r;r=n,n=l}if(o>s){var l=s;s=o,o=l}return this.helper.css({left:n,top:o,width:r-n,height:s-o}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var d=!1;"touch"==a.tolerance?d=!(l.left>r||l.right<n||l.top>s||l.bottom<o):"fit"==a.tolerance&&(d=l.left>n&&l.right<r&&l.top>o&&l.bottom<s),d?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&(t.metaKey&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element}))))}}),!1}},_mouseStop:function(t){var i=this;this.dragged=!1;this.options;return e(".ui-unselecting",this.element[0]).each(function(){var a=e.data(this,"selectable-item");a.$element.removeClass("ui-unselecting"),a.unselecting=!1,a.startselected=!1,i._trigger("unselected",t,{unselected:a.element})}),e(".ui-selecting",this.element[0]).each(function(){var a=e.data(this,"selectable-item");a.$element.removeClass("ui-selecting").addClass("ui-selected"),a.selecting=!1,a.selected=!0,a.startselected=!0,i._trigger("selected",t,{selected:a.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.13"})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData("sortable-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments);
},_mouseCapture:function(t,i){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var a=null,n=this;e(t.target).parents().each(function(){if(e.data(this,"sortable-item")==n)return a=e(this),!1});if(e.data(t.target,"sortable-item")==n&&(a=e(t.target)),!a)return!1;if(this.options.handle&&!i){var o=!1;if(e(this.options.handle,a).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=a,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,a){var n=this.options,o=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!a)for(var r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,o._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,a=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var n=this.items.length-1;n>=0;n--){var o=this.items[n],r=o.item[0],s=this._intersectsWithPointer(o);if(s&&!(r==this.currentItem[0]||this.placeholder[1==s?"next":"prev"]()[0]==r||e.ui.contains(this.placeholder[0],r)||"semi-dynamic"==this.options.type&&e.ui.contains(this.element[0],r))){if(this.direction=1==s?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var a=this,n=a.placeholder.offset();a.reverting=!0,e(this.helper).animate({left:n.left-this.offset.parent.left-a.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:n.top-this.offset.parent.top-a.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){a._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,t._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,t._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),a=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&a.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!a.length&&t.key&&a.push(t.key+"="),a.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),a=[];return t=t||{},i.each(function(){a.push(e(t.item||this).attr(t.attribute||"id")||"")}),a},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,a=this.positionAbs.top,n=a+this.helperProportions.height,o=e.left,r=o+e.width,s=e.top,l=s+e.height,d=this.offset.click.top,c=this.offset.click.left,u=a+d>s&&a+d<l&&t+c>o&&t+c<r;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&s<a+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),a=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&a,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!n&&(this.floating?r&&"right"==r||"down"==o?2:1:o&&("down"==o?2:1))},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),a=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&a||"left"==o&&!a:n&&("down"==n&&i||"up"==n&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],a=[],n=this._connectWith();if(n&&t)for(var o=n.length-1;o>=0;o--)for(var r=e(n[o]),s=r.length-1;s>=0;s--){var l=e.data(r[s],"sortable");l&&l!=this&&!l.options.disabled&&a.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=a.length-1;o>=0;o--)a[o][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data(sortable-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,a=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],n=this._connectWith();if(n)for(var o=n.length-1;o>=0;o--)for(var r=e(n[o]),s=r.length-1;s>=0;s--){var l=e.data(r[s],"sortable");l&&l!=this&&!l.options.disabled&&(a.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var o=a.length-1;o>=0;o--)for(var d=a[o][1],c=a[o][0],s=0,u=c.length;s<u;s++){var p=e(c[s]);p.data("sortable-item",d),i.push({item:p,instance:d,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var a=this.items[i];if(a.instance==this.currentContainer||!this.currentContainer||a.item[0]==this.currentItem[0]){var n=this.options.toleranceElement?e(this.options.toleranceElement,a.item):a.item;t||(a.width=n.outerWidth(),a.height=n.outerHeight());var o=n.offset();a.left=o.left,a.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var o=this.containers[i].element.offset();this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){var i=t||this,a=i.options;if(!a.placeholder||a.placeholder.constructor==String){var n=a.placeholder;a.placeholder={element:function(){var t=e(document.createElement(i.currentItem[0].nodeName)).addClass(n||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(t.style.visibility="hidden"),t},update:function(e,t){n&&!a.forcePlaceholderSize||(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=e(a.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),a.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var i=null,a=null,n=this.containers.length-1;n>=0;n--)if(!e.ui.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(i&&e.ui.contains(this.containers[n].element[0],i.element[0]))continue;i=this.containers[n],a=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[a]._trigger("over",t,this._uiHash(this)),this.containers[a].containerCache.over=1;else if(this.currentContainer!=this.containers[a]){for(var o=1e4,r=null,s=this.positionAbs[this.containers[a].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[a].element[0],this.items[l].item[0])){var d=this.items[l][this.containers[a].floating?"left":"top"];Math.abs(d-s)<o&&(o=Math.abs(d-s),r=this.items[l])}if(!r&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[a],r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[a].element,!0),this._trigger("change",t,this._uiHash()),this.containers[a]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[a]._trigger("over",t,this._uiHash(this)),this.containers[a].containerCache.over=1}},_createHelper:function(t){var i=this.options,a=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return a.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]),a[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==a[0].style.width||i.forceHelperSize)&&a.width(this.currentItem.width()),(""==a[0].style.height||i.forceHelperSize)&&a.height(this.currentItem.height()),a},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],a=e(t.containment).offset(),n="hidden"!=e(i).css("overflow");this.containment=[a.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,a.left+(n?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(n?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var a="absolute"==t?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*a+this.offset.parent.top*a-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*a),left:i.left+this.offset.relative.left*a+this.offset.parent.left*a-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*a)}},_generatePosition:function(t){var i=this.options,a="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(a[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=t.pageX,r=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid)){var s=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1];r=this.containment&&(s-this.offset.click.top<this.containment[1]||s-this.offset.click.top>this.containment[3])?s-this.offset.click.top<this.containment[1]?s+i.grid[1]:s-i.grid[1]:s;var l=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())}},_rearrange:function(e,t,i,a){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this,o=this.counter;window.setTimeout(function(){o==n.counter&&n.refreshPositions(!a)},0)},_clear:function(t,i){this.reverting=!1;var a=[];if(!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS)"auto"!=this._storedCSS[n]&&"static"!=this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||a.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){i||a.push(function(e){this._trigger("remove",e,this._uiHash())});for(var n=this.containers.length-1;n>=0;n--)e.ui.contains(this.containers[n].element[0],this.currentItem[0])&&!i&&(a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[n])),a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[n])))}for(var n=this.containers.length-1;n>=0;n--)i||a.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(a.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var n=0;n<a.length;n++)a[n].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var n=0;n<a.length;n++)a[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.13"})}(jQuery),jQuery.effects||function(e,t){function i(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:(i=/rgba\(0, 0, 0, 0\)/.exec(t))?d.transparent:d[e.trim(t).toLowerCase()]}function a(t,a){var n;do{if(n=e.curCSS(t,a),""!=n&&"transparent"!=n||e.nodeName(t,"body"))break;a="backgroundColor"}while(t=t.parentNode);return i(n)}function n(){var e,t,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,a={};if(i&&i.length&&i[0]&&i[i[0]])for(var n=i.length;n--;)e=i[n],"string"==typeof i[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),a[t]=i[e]);else for(e in i)"string"==typeof i[e]&&(a[e]=i[e]);return a}function o(t){var i,a;for(i in t)a=t[i],(null==a||e.isFunction(a)||i in u||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(a)))&&delete t[i];return t}function r(e,t){var i,a={_:0};for(i in t)e[i]!=t[i]&&(a[i]=t[i]);return a}function s(t,i,a,n){return"object"==typeof t&&(n=i,a=null,i=t,t=i.effect),e.isFunction(i)&&(n=i,a=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=a,a=i,i={}),e.isFunction(a)&&(n=a,a=null),i=i||{},a=a||i.duration,a=e.fx.off?0:"number"==typeof a?a:a in e.fx.speeds?e.fx.speeds[a]:e.fx.speeds._default,n=n||i.complete,[t,i,a,n]}function l(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects[t]}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,n){e.fx.step[n]=function(e){e.colorInit||(e.start=a(e.elem,n),e.end=i(e.end),e.colorInit=!0),e.elem.style[n]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},c=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,i,a,s){return e.isFunction(a)&&(s=a,a=null),this.queue(function(){var l,d=e(this),u=d.attr("style")||" ",p=o(n.call(this)),h=d.attr("class");e.each(c,function(e,i){t[i]&&d[i+"Class"](t[i])}),l=o(n.call(this)),d.attr("class",h),d.animate(r(p,l),{queue:!1,duration:i,easding:a,complete:function(){e.each(c,function(e,i){t[i]&&d[i+"Class"](t[i])}),"object"==typeof d.attr("style")?(d.attr("style").cssText="",d.attr("style").cssText=u):d.attr("style",u),s&&s.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,a,n){return i?e.effects.animateClass.apply(this,[{add:t},i,a,n]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,a,n){return i?e.effects.animateClass.apply(this,[{remove:t},i,a,n]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,a,n,o,r){return"boolean"==typeof a||a===t?n?e.effects.animateClass.apply(this,[a?{add:i}:{remove:i},n,o,r]):this._toggleClass(i,a):e.effects.animateClass.apply(this,[{toggle:i},a,n,o])},switchClass:function(t,i,a,n,o){return e.effects.animateClass.apply(this,[{add:i,remove:t},a,n,o])}}),e.extend(e.effects,{version:"1.8.13",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,a;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":a=0;break;case"center":a=.5;break;case"right":a=1;break;default:a=e[1]/t.width}return{x:a,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},a=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return t.wrap(a),a=t.parent(),"static"==t.css("position")?(a.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,a){i[a]=t.css(a),isNaN(parseInt(i[a],10))&&(i[a]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),a.css(i).show()},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(t,i,a,n){return n=n||{},e.each(i,function(e,i){unit=t.cssUnit(i),unit[0]>0&&(n[i]=unit[0]*a+unit[1])}),n}}),e.fn.extend({effect:function(t,i,a,n){var o=s.apply(this,arguments),r={options:o[1],duration:o[2],callback:o[3]},l=r.options.mode,d=e.effects[t];return e.fx.off||!d?l?this[l](r.duration,r.callback):this.each(function(){r.callback&&r.callback.call(this)}):d.call(this,r)},_show:e.fn.show,show:function(e){if(l(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(l(e))return this._hide.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(l(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(t){var i=this.css(t),a=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(a=[parseFloat(i),t])}),a}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,i,a,n,o){return e.easing[e.easing.def](t,i,a,n,o)},easeInQuad:function(e,t,i,a,n){return a*(t/=n)*t+i},easeOutQuad:function(e,t,i,a,n){return-a*(t/=n)*(t-2)+i},easeInOutQuad:function(e,t,i,a,n){return(t/=n/2)<1?a/2*t*t+i:-a/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,a,n){return a*(t/=n)*t*t+i},easeOutCubic:function(e,t,i,a,n){return a*((t=t/n-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,a,n){return(t/=n/2)<1?a/2*t*t*t+i:a/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,a,n){return a*(t/=n)*t*t*t+i},easeOutQuart:function(e,t,i,a,n){return-a*((t=t/n-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,a,n){return(t/=n/2)<1?a/2*t*t*t*t+i:-a/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,a,n){return a*(t/=n)*t*t*t*t+i},easeOutQuint:function(e,t,i,a,n){return a*((t=t/n-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,a,n){return(t/=n/2)<1?a/2*t*t*t*t*t+i:a/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,a,n){return-a*Math.cos(t/n*(Math.PI/2))+a+i},easeOutSine:function(e,t,i,a,n){return a*Math.sin(t/n*(Math.PI/2))+i},easeInOutSine:function(e,t,i,a,n){return-a/2*(Math.cos(Math.PI*t/n)-1)+i},easeInExpo:function(e,t,i,a,n){return 0==t?i:a*Math.pow(2,10*(t/n-1))+i},easeOutExpo:function(e,t,i,a,n){return t==n?i+a:a*(-Math.pow(2,-10*t/n)+1)+i},easeInOutExpo:function(e,t,i,a,n){return 0==t?i:t==n?i+a:(t/=n/2)<1?a/2*Math.pow(2,10*(t-1))+i:a/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,a,n){return-a*(Math.sqrt(1-(t/=n)*t)-1)+i},easeOutCirc:function(e,t,i,a,n){return a*Math.sqrt(1-(t=t/n-1)*t)+i},easeInOutCirc:function(e,t,i,a,n){return(t/=n/2)<1?-a/2*(Math.sqrt(1-t*t)-1)+i:a/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,a,n){var o=1.70158,r=0,s=a;if(0==t)return i;if(1==(t/=n))return i+a;if(r||(r=.3*n),s<Math.abs(a)){s=a;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(a/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-o)*Math.PI/r))+i},easeOutElastic:function(e,t,i,a,n){var o=1.70158,r=0,s=a;if(0==t)return i;if(1==(t/=n))return i+a;if(r||(r=.3*n),s<Math.abs(a)){s=a;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(a/s);return s*Math.pow(2,-10*t)*Math.sin(2*(t*n-o)*Math.PI/r)+a+i},easeInOutElastic:function(e,t,i,a,n){var o=1.70158,r=0,s=a;if(0==t)return i;if(2==(t/=n/2))return i+a;if(r||(r=.3*n*1.5),s<Math.abs(a)){s=a;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(a/s);return t<1?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-o)*Math.PI/r)+i:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-o)*Math.PI/r)*.5+a+i},easeInBack:function(e,i,a,n,o,r){return r==t&&(r=1.70158),n*(i/=o)*i*((r+1)*i-r)+a},easeOutBack:function(e,i,a,n,o,r){return r==t&&(r=1.70158),n*((i=i/o-1)*i*((r+1)*i+r)+1)+a},easeInOutBack:function(e,i,a,n,o,r){
return r==t&&(r=1.70158),(i/=o/2)<1?n/2*i*i*(((r*=1.525)+1)*i-r)+a:n/2*((i-=2)*i*(((r*=1.525)+1)*i+r)+2)+a},easeInBounce:function(t,i,a,n,o){return n-e.easing.easeOutBounce(t,o-i,0,n,o)+a},easeOutBounce:function(e,t,i,a,n){return(t/=n)<1/2.75?7.5625*a*t*t+i:t<2/2.75?a*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?a*(7.5625*(t-=2.25/2.75)*t+.9375)+i:a*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(t,i,a,n,o){return i<o/2?.5*e.easing.easeInBounce(t,2*i,0,n,o)+a:.5*e.easing.easeOutBounce(t,2*i-o,0,n,o)+.5*n+a}})}(jQuery),function(e,t){e.effects.blind=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right"],n=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.direction||"vertical";e.effects.save(i,a),i.show();var r=e.effects.createWrapper(i).css({overflow:"hidden"}),s="vertical"==o?"height":"width",l="vertical"==o?r.height():r.width();"show"==n&&r.css(s,0);var d={};d[s]="show"==n?l:0,r.animate(d,t.duration,t.options.easing,function(){"hide"==n&&i.hide(),e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e,t){e.effects.bounce=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right"],n=e.effects.setMode(i,t.options.mode||"effect"),o=t.options.direction||"up",r=t.options.distance||20,s=t.options.times||5,l=t.duration||250;/show|hide/.test(n)&&a.push("opacity"),e.effects.save(i,a),i.show(),e.effects.createWrapper(i);var d="up"==o||"down"==o?"top":"left",c="up"==o||"left"==o?"pos":"neg",r=t.options.distance||("top"==d?i.outerHeight({margin:!0})/3:i.outerWidth({margin:!0})/3);if("show"==n&&i.css("opacity",0).css(d,"pos"==c?-r:r),"hide"==n&&(r/=2*s),"hide"!=n&&s--,"show"==n){var u={opacity:1};u[d]=("pos"==c?"+=":"-=")+r,i.animate(u,l/2,t.options.easing),r/=2,s--}for(var p=0;p<s;p++){var h={},f={};h[d]=("pos"==c?"-=":"+=")+r,f[d]=("pos"==c?"+=":"-=")+r,i.animate(h,l/2,t.options.easing).animate(f,l/2,t.options.easing),r="hide"==n?2*r:r/2}if("hide"==n){var u={opacity:0};u[d]=("pos"==c?"-=":"+=")+r,i.animate(u,l/2,t.options.easing,function(){i.hide(),e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}else{var h={},f={};h[d]=("pos"==c?"-=":"+=")+r,f[d]=("pos"==c?"+=":"-=")+r,i.animate(h,l/2,t.options.easing).animate(f,l/2,t.options.easing,function(){e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(e,t){e.effects.clip=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right","height","width"],n=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.direction||"vertical";e.effects.save(i,a),i.show();var r=e.effects.createWrapper(i).css({overflow:"hidden"}),s="IMG"==i[0].tagName?r:i,l={size:"vertical"==o?"height":"width",position:"vertical"==o?"top":"left"},d="vertical"==o?s.height():s.width();"show"==n&&(s.css(l.size,0),s.css(l.position,d/2));var c={};c[l.size]="show"==n?d:0,c[l.position]="show"==n?0:d/2,s.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==n&&i.hide(),e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}})})}}(jQuery),function(e,t){e.effects.drop=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right","opacity"],n=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.direction||"left";e.effects.save(i,a),i.show(),e.effects.createWrapper(i);var r="up"==o||"down"==o?"top":"left",s="up"==o||"left"==o?"pos":"neg",l=t.options.distance||("top"==r?i.outerHeight({margin:!0})/2:i.outerWidth({margin:!0})/2);"show"==n&&i.css("opacity",0).css(r,"pos"==s?-l:l);var d={opacity:"show"==n?1:0};d[r]=("show"==n?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,i.animate(d,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==n&&i.hide(),e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e,t){e.effects.explode=function(t){return this.queue(function(){var i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,a=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var n=e(this).show().css("visibility","hidden"),o=n.offset();o.top-=parseInt(n.css("marginTop"),10)||0,o.left-=parseInt(n.css("marginLeft"),10)||0;for(var r=n.outerWidth(!0),s=n.outerHeight(!0),l=0;l<i;l++)for(var d=0;d<a;d++)n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-d*(r/a),top:-l*(s/i)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r/a,height:s/i,left:o.left+d*(r/a)+("show"==t.options.mode?(d-Math.floor(a/2))*(r/a):0),top:o.top+l*(s/i)+("show"==t.options.mode?(l-Math.floor(i/2))*(s/i):0),opacity:"show"==t.options.mode?0:1}).animate({left:o.left+d*(r/a)+("show"==t.options.mode?0:(d-Math.floor(a/2))*(r/a)),top:o.top+l*(s/i)+("show"==t.options.mode?0:(l-Math.floor(i/2))*(s/i)),opacity:"show"==t.options.mode?1:0},t.duration||500);setTimeout(function(){"show"==t.options.mode?n.css({visibility:"visible"}):n.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(n[0]),n.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e,t){e.effects.fade=function(t){return this.queue(function(){var i=e(this),a=e.effects.setMode(i,t.options.mode||"hide");i.animate({opacity:a},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e,t){e.effects.fold=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right"],n=e.effects.setMode(i,t.options.mode||"hide"),o=t.options.size||15,r=!!t.options.horizFirst,s=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(i,a),i.show();var l=e.effects.createWrapper(i).css({overflow:"hidden"}),d="show"==n!=r,c=d?["width","height"]:["height","width"],u=d?[l.width(),l.height()]:[l.height(),l.width()],p=/([0-9]+)%/.exec(o);p&&(o=parseInt(p[1],10)/100*u["hide"==n?0:1]),"show"==n&&l.css(r?{height:0,width:o}:{height:o,width:0});var h={},f={};h[c[0]]="show"==n?u[0]:o,f[c[1]]="show"==n?u[1]:0,l.animate(h,s,t.options.easing).animate(f,s,t.options.easing,function(){"hide"==n&&i.hide(),e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e,t){e.effects.highlight=function(t){return this.queue(function(){var i=e(this),a=["backgroundImage","backgroundColor","opacity"],n=e.effects.setMode(i,t.options.mode||"show"),o={backgroundColor:i.css("backgroundColor")};"hide"==n&&(o.opacity=0),e.effects.save(i,a),i.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==n&&i.hide(),e.effects.restore(i,a),"show"==n&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e,t){e.effects.pulsate=function(t){return this.queue(function(){var i=e(this),a=e.effects.setMode(i,t.options.mode||"show");times=2*(t.options.times||5)-1,duration=t.duration?t.duration/2:e.fx.speeds._default/2,isVisible=i.is(":visible"),animateTo=0,isVisible||(i.css("opacity",0).show(),animateTo=1),("hide"==a&&isVisible||"show"==a&&!isVisible)&&times--;for(var n=0;n<times;n++)i.animate({opacity:animateTo},duration,t.options.easing),animateTo=(animateTo+1)%2;i.animate({opacity:animateTo},duration,t.options.easing,function(){0==animateTo&&i.hide(),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),function(e,t){e.effects.puff=function(t){return this.queue(function(){var i=e(this),a=e.effects.setMode(i,t.options.mode||"hide"),n=parseInt(t.options.percent,10)||150,o=n/100,r={height:i.height(),width:i.width()};e.extend(t.options,{fade:!0,mode:a,percent:"hide"==a?n:100,from:"hide"==a?r:{height:r.height*o,width:r.width*o}}),i.effect("scale",t.options,t.duration,t.callback),i.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var i=e(this),a=e.extend(!0,{},t.options),n=e.effects.setMode(i,t.options.mode||"effect"),o=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)?0:"hide"==n?0:100),r=t.options.direction||"both",s=t.options.origin;"effect"!=n&&(a.origin=s||["middle","center"],a.restore=!0);var l={height:i.height(),width:i.width()};i.from=t.options.from||("show"==n?{height:0,width:0}:l);var d={y:"horizontal"!=r?o/100:1,x:"vertical"!=r?o/100:1};i.to={height:l.height*d.y,width:l.width*d.x},t.options.fade&&("show"==n&&(i.from.opacity=0,i.to.opacity=1),"hide"==n&&(i.from.opacity=1,i.to.opacity=0)),a.from=i.from,a.to=i.to,a.mode=n,i.effect("size",a,t.duration,t.callback),i.dequeue()})},e.effects.size=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],n=["position","top","bottom","left","right","overflow","opacity"],o=["width","height","overflow"],r=["fontSize"],s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=e.effects.setMode(i,t.options.mode||"effect"),c=t.options.restore||!1,u=t.options.scale||"both",p=t.options.origin,h={height:i.height(),width:i.width()};if(i.from=t.options.from||h,i.to=t.options.to||h,p){var f=e.effects.getBaseline(p,h);i.from.top=(h.height-i.from.height)*f.y,i.from.left=(h.width-i.from.width)*f.x,i.to.top=(h.height-i.to.height)*f.y,i.to.left=(h.width-i.to.width)*f.x}var m={from:{y:i.from.height/h.height,x:i.from.width/h.width},to:{y:i.to.height/h.height,x:i.to.width/h.width}};"box"!=u&&"both"!=u||(m.from.y!=m.to.y&&(a=a.concat(s),i.from=e.effects.setTransition(i,s,m.from.y,i.from),i.to=e.effects.setTransition(i,s,m.to.y,i.to)),m.from.x!=m.to.x&&(a=a.concat(l),i.from=e.effects.setTransition(i,l,m.from.x,i.from),i.to=e.effects.setTransition(i,l,m.to.x,i.to))),"content"!=u&&"both"!=u||m.from.y!=m.to.y&&(a=a.concat(r),i.from=e.effects.setTransition(i,r,m.from.y,i.from),i.to=e.effects.setTransition(i,r,m.to.y,i.to)),e.effects.save(i,c?a:n),i.show(),e.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),"content"!=u&&"both"!=u||(s=s.concat(["marginTop","marginBottom"]).concat(r),l=l.concat(["marginLeft","marginRight"]),o=a.concat(s).concat(l),i.find("*[width]").each(function(){child=e(this),c&&e.effects.save(child,o);var i={height:child.height(),width:child.width()};child.from={height:i.height*m.from.y,width:i.width*m.from.x},child.to={height:i.height*m.to.y,width:i.width*m.to.x},m.from.y!=m.to.y&&(child.from=e.effects.setTransition(child,s,m.from.y,child.from),child.to=e.effects.setTransition(child,s,m.to.y,child.to)),m.from.x!=m.to.x&&(child.from=e.effects.setTransition(child,l,m.from.x,child.from),child.to=e.effects.setTransition(child,l,m.to.x,child.to)),child.css(child.from),child.animate(child.to,t.duration,t.options.easing,function(){c&&e.effects.restore(child,o)})})),i.animate(i.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==d&&i.hide(),e.effects.restore(i,c?a:n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e,t){e.effects.shake=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right"],n=(e.effects.setMode(i,t.options.mode||"effect"),t.options.direction||"left"),o=t.options.distance||20,r=t.options.times||3,s=t.duration||t.options.duration||140;e.effects.save(i,a),i.show(),e.effects.createWrapper(i);var l="up"==n||"down"==n?"top":"left",d="up"==n||"left"==n?"pos":"neg",c={},u={},p={};c[l]=("pos"==d?"-=":"+=")+o,u[l]=("pos"==d?"+=":"-=")+2*o,p[l]=("pos"==d?"-=":"+=")+2*o,i.animate(c,s,t.options.easing);for(var h=1;h<r;h++)i.animate(u,s,t.options.easing).animate(p,s,t.options.easing);i.animate(u,s,t.options.easing).animate(c,s/2,t.options.easing,function(){e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),function(e,t){e.effects.slide=function(t){return this.queue(function(){var i=e(this),a=["position","top","bottom","left","right"],n=e.effects.setMode(i,t.options.mode||"show"),o=t.options.direction||"left";e.effects.save(i,a),i.show(),e.effects.createWrapper(i).css({overflow:"hidden"});var r="up"==o||"down"==o?"top":"left",s="up"==o||"left"==o?"pos":"neg",l=t.options.distance||("top"==r?i.outerHeight({margin:!0}):i.outerWidth({margin:!0}));"show"==n&&i.css(r,"pos"==s?isNaN(l)?"-"+l:-l:l);var d={};d[r]=("show"==n?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,i.animate(d,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==n&&i.hide(),e.effects.restore(i,a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),function(e,t){e.effects.transfer=function(t){return this.queue(function(){var i=e(this),a=e(t.options.to),n=a.offset(),o={top:n.top,left:n.left,height:a.innerHeight(),width:a.innerWidth()},r=i.offset(),s=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:r.top,left:r.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(o,t.duration,t.options.easing,function(){s.remove(),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(e,t){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,i=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){i.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var a=t.element.find("a").filter(i.navigationFilter).eq(0);if(a.length){var n=a.closest(".ui-accordion-header");n.length?t.active=n:t.active=a.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),i.event&&t.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&i.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(i),"icons"==t&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var i=e.ui.keyCode,a=this.headers.length,n=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%a];break;case i.LEFT:case i.UP:o=this.headers[(n-1+a)%a];break;case i.SPACE:case i.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return!o||(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),!1)}},resize:function(){var t,i=this.options;if(i.fillSpace){if(e.browser.msie){var a=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",a),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else i.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var a=this.options;if(!a.disabled){if(!t.target){if(!a.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(a.icons.headerSelected).addClass(a.icons.header),this.active.next().addClass("ui-accordion-content-active");var n=this.active.next(),o={options:a,newHeader:e([]),oldHeader:a.active,newContent:e([]),oldContent:n},r=this.active=e([]);return void this._toggle(r,n,o)}var s=e(t.currentTarget||i),l=s[0]===this.active[0];if(a.active=(!a.collapsible||!l)&&this.headers.index(s),!(this.running||!a.collapsible&&l)){var d=this.active,r=s.next(),n=this.active.next(),o={options:a,newHeader:l&&a.collapsible?e([]):s,oldHeader:this.active,newContent:l&&a.collapsible?e([]):r,oldContent:n},c=this.headers.index(this.active[0])>this.headers.index(s[0]);this.active=l?e([]):s,this._toggle(r,n,o,l,c),d.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(a.icons.headerSelected).addClass(a.icons.header),l||(s.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(a.icons.header).addClass(a.icons.headerSelected),s.next().addClass("ui-accordion-content-active"))}}},_toggle:function(t,i,a,n,o){var r=this,s=r.options;r.toShow=t,r.toHide=i,r.data=a;var l=function(){if(r)return r._completed.apply(r,arguments)};if(r._trigger("changestart",null,r.data),r.running=0===i.size()?t.size():i.size(),s.animated){var d={};d=s.collapsible&&n?{toShow:e([]),toHide:i,complete:l,down:o,autoHeight:s.autoHeight||s.fillSpace}:{toShow:t,toHide:i,complete:l,down:o,autoHeight:s.autoHeight||s.fillSpace},s.proxied||(s.proxied=s.animated),s.proxiedDuration||(s.proxiedDuration=s.duration),s.animated=e.isFunction(s.proxied)?s.proxied(d):s.proxied,s.duration=e.isFunction(s.proxiedDuration)?s.proxiedDuration(d):s.proxiedDuration;var c=e.ui.accordion.animations,u=s.duration,p=s.animated;!p||c[p]||e.easing[p]||(p="slide"),c[p]||(c[p]=function(e){this.slide(e,{easing:p,duration:u||700})}),c[p](d)}else s.collapsible&&n?t.toggle():(i.hide(),t.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),e.extend(e.ui.accordion,{version:"1.8.13",animations:{slide:function(t,i){if(t=e.extend({easing:"swing",duration:300},t,i),!t.toHide.size())return void t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);if(!t.toShow.size())return void t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);var a,n=t.toShow.css("overflow"),o=0,r={},s={},l=["height","paddingTop","paddingBottom"],d=t.toShow;a=d[0].style.width,d.width(parseInt(d.parent().width(),10)-parseInt(d.css("paddingLeft"),10)-parseInt(d.css("paddingRight"),10)-(parseInt(d.css("borderLeftWidth"),10)||0)-(parseInt(d.css("borderRightWidth"),10)||0)),e.each(l,function(i,a){s[a]="hide";var n=(""+e.css(t.toShow[0],a)).match(/^([\d+-.]+)(.*)$/);r[a]={value:n[1],unit:n[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(s,{step:function(e,i){"height"==i.prop&&(o=i.end-i.start===0?0:(i.now-i.start)/(i.end-i.start)),t.toShow[0].style[i.prop]=o*r[i.prop].value+r[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:a,overflow:n}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e,t){var i=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,i=this,a=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(a){if(!i.options.disabled&&!i.element.attr("readonly")){t=!1;var n=e.ui.keyCode;switch(a.keyCode){case n.PAGE_UP:i._move("previousPage",a);break;case n.PAGE_DOWN:i._move("nextPage",a);break;case n.UP:i._move("previous",a),a.preventDefault();break;case n.DOWN:i._move("next",a),a.preventDefault();break;case n.ENTER:case n.NUMPAD_ENTER:i.menu.active&&(t=!0,a.preventDefault());case n.TAB:if(!i.menu.active)return;i.menu.select(a);break;case n.ESCAPE:i.element.val(i.term),i.close(a);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,a))},i.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(e),i._change(e)},150))}),this._initSource(),this.response=function(){return i._response.apply(i,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",a)[0]).mousedown(function(t){var a=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target===i.element[0]||t.target===a||e.ui.contains(a,t.target)||i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(e,t){var a=t.item.data("item.autocomplete");!1!==i._trigger("focus",e,{item:a})&&/^key/.test(e.originalEvent.type)&&i.element.val(a.value)},selected:function(e,t){var n=t.item.data("item.autocomplete"),o=i.previous;i.element[0]!==a.activeElement&&(i.element.focus(),i.previous=o,setTimeout(function(){i.previous=o,i.selectedItem=n},1)),!1!==i._trigger("select",e,{item:n})&&i.element.val(n.value),i.term=i.element.val(),i.close(e),i.selectedItem=n},blur:function(e,t){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var t,a,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,a){a(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(a=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:a,data:t,dataType:"json",autocompleteRequest:++i,success:function(e,t){this.autocompleteRequest===i&&o(e)},error:function(){this.autocompleteRequest===i&&o([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(t,i){var a=this;e.each(i,function(e,i){a._renderItem(t,i)})},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var a=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return a.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){e(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))}),this.refresh()},refresh:function(){var t=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,a=this.element.scrollTop(),n=this.element.height();i<0?this.element.scrollTop(a+i):i>=n&&this.element.scrollTop(a+i-n+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(!this.active)return void this.activate(i,this.element.children(t));var a=this.active[e+"All"](".ui-menu-item").eq(0);a.length?this.activate(i,a):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(t,this.element.children(".ui-menu-item:first"));var i=this.active.offset().top,a=this.element.height(),n=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i-a+e(this).height();return t<10&&t>-10});n.length||(n=this.element.children(".ui-menu-item:last")),this.activate(t,n)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(t,this.element.children(".ui-menu-item:last"));var i=this.active.offset().top,a=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i+a-e(this).height();return t<10&&t>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e,t){var i,a="ui-button ui-widget ui-state-default ui-corner-all",n="ui-state-hover ui-state-active ",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",r=function(t){e(":ui-button",t.target.form).each(function(){var t=e(this).data("button");setTimeout(function(){t.refresh()},1)})},s=function(t){var i=t.name,a=t.form,n=e([]);return i&&(n=a?e(a).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",r),
"boolean"!=typeof this.options.disabled&&(this.options.disabled=this.element.attr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,o="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(o?"":" ui-state-active"),d="ui-state-focus";null===n.label&&(n.label=this.buttonElement.html()),this.element.is(":disabled")&&(n.disabled=!0),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter.button",function(){n.disabled||(e(this).addClass("ui-state-hover"),this===i&&e(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){n.disabled||e(this).removeClass(l)}).bind("focus.button",function(){e(this).addClass(d)}).bind("blur.button",function(){e(this).removeClass(d)}).bind("click.button",function(e){n.disabled&&e.stopImmediatePropagation()}),o&&this.element.bind("change.button",function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return!n.disabled&&(e(this).toggleClass("ui-state-active"),void t.buttonElement.attr("aria-pressed",t.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed",!0);var i=t.element[0];s(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",!1)}):(this.buttonElement.bind("mousedown.button",function(){return!n.disabled&&(e(this).addClass("ui-state-active"),i=this,void e(document).one("mouseup",function(){i=null}))}).bind("mouseup.button",function(){return!n.disabled&&void e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){return!n.disabled&&void(t.keyCode!=e.ui.keyCode.SPACE&&t.keyCode!=e.ui.keyCode.ENTER||e(this).addClass("ui-state-active"))}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",n.disabled)},_determineButtonType:function(){if(this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for="+this.element.attr("id")+"]";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var i=this.element.is(":checked");i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",i)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+n+" "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t&&(i?this.element.attr("disabled",!0):this.element.removeAttr("disabled")),this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?s(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed",!0):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",!1)}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",!0):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",!1))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(o),i=e("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),a=this.options.icons,n=a.primary&&a.secondary,r=[];a.primary||a.secondary?(this.options.text&&r.push("ui-button-text-icon"+(n?"s":a.primary?"-primary":"-secondary")),a.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(r.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",i))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,i){"disabled"===t&&this.buttons.button("option",t,i),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t)null!=t[i]&&t[i]!=undefined||(e[i]=t[i]);return e}function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.13"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,a){t.settings[i]=a}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t))},_attachments:function(e,t){var i=this._get(t,"appendText"),a=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[a?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var n=this._get(t,"showOn");if("focus"!=n&&"both"!=n||e.focus(this._showDatepicker),"button"==n||"both"==n){var o=this._get(t,"buttonText"),r=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:r,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==r?o:$("<img/>").attr({src:r,alt:o,title:o}))),e[a?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var a=function(e){for(var t=0,i=0,a=0;a<e.length;a++)e[a].length>t&&(t=e[a].length,i=a);return i};t.setMonth(a(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(a(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,a){t.settings[i]=a}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.dpDiv.show())},_dialogDatepicker:function(e,t,i,a,n){var o=this._dialogInst;if(!o){this.uuid+=1;var r="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+r+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},$.data(this._dialogInput[0],PROP_NAME,o)}if(extendRemove(o.settings,a||{}),t=t&&t.constructor==Date?this._formatDate(o,t):t,this._dialogInput.val(t),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,!this._pos){var s=document.documentElement.clientWidth,l=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+d,l/2-150+c]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,o),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var a=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==a?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=a&&"span"!=a||t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var a=e.nodeName.toLowerCase();if("input"==a)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==a||"span"==a){var n=t.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var a=e.nodeName.toLowerCase();if("input"==a)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==a||"span"==a){var n=t.children("."+this._inlineClass);n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var a=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):a?"all"==t?$.extend({},a.settings):this._get(a,t):null;var n=t||{};if("string"==typeof t&&(n={},n[t]=i),a){this._curInst==a&&this._hideDatepicker();var o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max");extendRemove(a.settings,n),null!==r&&n.dateFormat!==undefined&&n.minDate===undefined&&(a.settings.minDate=this._formatDate(a,r)),null!==s&&n.dateFormat!==undefined&&n.maxDate===undefined&&(a.settings.maxDate=this._formatDate(a,s)),this._attachments($(e),a),this._autoSize(a),this._setDate(a,o),this._updateAlternate(a),this._updateDatepicker(a)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,a=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var n=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);return n[0]?$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,n[0]):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,a?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,a?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),a=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||a<" "||!i||i.indexOf(a)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(e){$.datepicker.log(e)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&$.datepicker._curInst.dpDiv.stop(!0,!0);var i=$.datepicker._get(t,"beforeShow");extendRemove(t.settings,i?i.apply(e,[e,t]):{}),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var a=!1;$(e).parents().each(function(){return a|="fixed"==$(this).css("position"),!a}),a&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var n={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),n=$.datepicker._checkOffset(t,n,a),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":a?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),r=$.datepicker._get(t,"duration"),s=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),r,s):t.dpDiv[o||"show"](o?r:null,s),o&&r||s(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}},_updateDatepicker:function(e){var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e));var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var a=this._getNumberOfMonths(e),n=a[1],o=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",o*n+"em"),e.dpDiv[(1!=a[0]||1!=a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var r=e.yearshtml;setTimeout(function(){r===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),r=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var a=e.dpDiv.outerWidth(),n=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+$(document).scrollLeft(),l=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?a-o:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+r?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+a>s&&s>a?Math.abs(t.left+a-s):0),t.top-=Math.min(t.top,t.top+n>l&&l>n?Math.abs(n+r):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var a=$(e).offset();return[a.left,a.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),a=this._get(t,"duration"),n=function(){$.datepicker._tidyDialog(t),this._curInst=null};$.effects&&$.effects[i]?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),a,n):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?a:null,n),i||n();var o=this._get(t,"onClose");o&&o.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target);t[0].id==$.datepicker._mainDivId||0!=t.parents("#"+$.datepicker._mainDivId).length||t.hasClass($.datepicker.markerClassName)||t.hasClass($.datepicker._triggerClass)||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI||$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var a=$(e),n=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(n,t+("M"==i?this._get(n,"showCurrentAtPos"):0),i),this._updateDatepicker(n))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var a=new Date;i.selectedDay=a.getDate(),i.drawMonth=i.selectedMonth=a.getMonth(),i.drawYear=i.selectedYear=a.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var a=$(e),n=this._getInst(a[0]);n._selectingMonthYear=!1,n["selected"+("M"==i?"Month":"Year")]=n["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(a)},_clickMonthYear:function(e){var t=$(e),i=this._getInst(t[0]);i.input&&i._selectingMonthYear&&setTimeout(function(){i.input.focus()},0),i._selectingMonthYear=!i._selectingMonthYear},_selectDay:function(e,t,i,a){var n=$(e);if(!$(a).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(n[0])){var o=this._getInst(n[0]);o.selectedDay=o.currentDay=$("a",a).html(),o.selectedMonth=o.currentMonth=t,o.selectedYear=o.currentYear=i,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),a=this._getInst(i[0]);t=null!=t?t:this._formatDate(a),a.input&&a.input.val(t),this._updateAlternate(a);var n=this._get(a,"onSelect");n?n.apply(a.input?a.input[0]:null,[t,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),n=this.formatDate(i,a,this._getFormatConfig(e));$(t).each(function(){$(this).val(n)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var a=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;a="string"!=typeof a?a:(new Date).getFullYear()%100+parseInt(a,10);for(var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,d=-1,c=-1,u=-1,p=!1,h=function(t){var i=b+1<e.length&&e.charAt(b+1)==t;return i&&b++,i},f=function(e){var i=h(e),a="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,n=new RegExp("^\\d{1,"+a+"}"),o=t.substring(v).match(n);if(!o)throw"Missing number at position "+v;return v+=o[0].length,parseInt(o[0],10)},m=function(e,i,a){var n=$.map(h(e)?a:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),o=-1;if($.each(n,function(e,i){var a=i[1];if(t.substr(v,a.length).toLowerCase()==a.toLowerCase())return o=i[0],v+=a.length,!1}),o!=-1)return o+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;b<e.length;b++)if(p)"'"!=e.charAt(b)||h("'")?g():p=!1;else switch(e.charAt(b)){case"d":c=f("d");break;case"D":m("D",n,o);break;case"o":u=f("o");break;case"m":d=f("m");break;case"M":d=m("M",r,s);break;case"y":l=f("y");break;case"@":var _=new Date(f("@"));l=_.getFullYear(),d=_.getMonth()+1,c=_.getDate();break;case"!":var _=new Date((f("!")-this._ticksTo1970)/1e4);l=_.getFullYear(),d=_.getMonth()+1,c=_.getDate();break;case"'":h("'")?g():p=!0;break;default:g()}if(l==-1?l=(new Date).getFullYear():l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=a?0:-100)),u>-1)for(d=1,c=u;;){var y=this._getDaysInMonth(l,d-1);if(c<=y)break;d++,c-=y}var _=this._daylightSavingAdjust(new Date(l,d-1,c));if(_.getFullYear()!=l||_.getMonth()+1!=d||_.getDate()!=c)throw"Invalid date";return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,s=function(t){var i=p+1<e.length&&e.charAt(p+1)==t;return i&&p++,i},l=function(e,t,i){var a=""+t;if(s(e))for(;a.length<i;)a="0"+a;return a},d=function(e,t,i,a){return s(e)?a[t]:i[t]},c="",u=!1;if(t)for(var p=0;p<e.length;p++)if(u)"'"!=e.charAt(p)||s("'")?c+=e.charAt(p):u=!1;else switch(e.charAt(p)){case"d":c+=l("d",t.getDate(),2);break;case"D":c+=d("D",t.getDay(),a,n);break;case"o":c+=l("o",(t.getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5,3);break;case"m":c+=l("m",t.getMonth()+1,2);break;case"M":c+=d("M",t.getMonth(),o,r);break;case"y":c+=s("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":s("'")?c+="'":u=!0;break;default:c+=e.charAt(p)}return c},_possibleChars:function(e){for(var t="",i=!1,a=function(t){var i=n+1<e.length&&e.charAt(n+1)==t;return i&&n++,i},n=0;n<e.length;n++)if(i)"'"!=e.charAt(n)||a("'")?t+=e.charAt(n):i=!1;else switch(e.charAt(n)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":a("'")?t+="'":i=!0;break;default:t+=e.charAt(n)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,a,n=this._get(e,"dateFormat"),o=e.lastVal=e.input?e.input.val():null;i=a=this._getDefaultDate(e);var r=this._getFormatConfig(e);try{i=this.parseDate(n,o,r)||a}catch(s){this.log(s),o=t?"":o}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=o?i.getDate():0,e.currentMonth=o?i.getMonth():0,e.currentYear=o?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var a=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var a=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,n=a.getFullYear(),o=a.getMonth(),r=a.getDate(),s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(t);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(n,o));break;case"y":case"Y":n+=parseInt(l[1],10),r=Math.min(r,$.datepicker._getDaysInMonth(n,o))}l=s.exec(t)}return new Date(n,o,r)},o=null==t||""===t?i:"string"==typeof t?n(t):"number"==typeof t?isNaN(t)?i:a(t):new Date(t.getTime());return o=o&&"Invalid Date"==o.toString()?i:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,n=e.selectedMonth,o=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),n==e.selectedMonth&&o==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));
var i=this._get(e,"isRTL"),a=this._get(e,"showButtonPanel"),n=this._get(e,"hideIfNoPrevNext"),o=this._get(e,"navigationAsDateFormat"),r=this._getNumberOfMonths(e),s=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),d=1!=r[0]||1!=r[1],c=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max"),h=e.drawMonth-s,f=e.drawYear;if(h<0&&(h+=12,f--),p){var m=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-r[0]*r[1]+1,p.getDate()));for(m=u&&m<u?u:m;this._daylightSavingAdjust(new Date(f,h,1))>m;)h--,h<0&&(h=11,f--)}e.drawMonth=h,e.drawYear=f;var g=this._get(e,"prevText");g=o?this.formatDate(g,this._daylightSavingAdjust(new Date(f,h-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,f,h)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', -"+l+", 'M');\" title=\""+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":n?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",b=this._get(e,"nextText");b=o?this.formatDate(b,this._daylightSavingAdjust(new Date(f,h+l,1)),this._getFormatConfig(e)):b;var _=this._canAdjustMonth(e,1,f,h)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', +"+l+", 'M');\" title=\""+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>":n?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>",y=this._get(e,"currentText"),A=this._get(e,"gotoCurrent")&&e.currentDay?c:t;y=o?this.formatDate(y,A,this._getFormatConfig(e)):y;var w=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",x=a?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?w:"")+(this._isInRange(e,A)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+e.id+"');\">"+y+"</button>":"")+(i?"":w)+"</div>":"",k=parseInt(this._get(e,"firstDay"),10);k=isNaN(k)?0:k;for(var C=this._get(e,"showWeek"),S=this._get(e,"dayNames"),T=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),D=this._get(e,"monthNames"),I=this._get(e,"monthNamesShort"),E=this._get(e,"beforeShowDay"),P=this._get(e,"showOtherMonths"),M=this._get(e,"selectOtherMonths"),O=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),L="",N=0;N<r[0];N++){for(var j="",R=0;R<r[1];R++){var z=this._daylightSavingAdjust(new Date(f,h,e.selectedDay)),F=" ui-corner-all",q="";if(d){if(q+='<div class="ui-datepicker-group',r[1]>1)switch(R){case 0:q+=" ui-datepicker-group-first",F=" ui-corner-"+(i?"right":"left");break;case r[1]-1:q+=" ui-datepicker-group-last",F=" ui-corner-"+(i?"left":"right");break;default:q+=" ui-datepicker-group-middle",F=""}q+='">'}q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+F+'">'+(/all|left/.test(F)&&0==N?i?_:v:"")+(/all|right/.test(F)&&0==N?i?v:_:"")+this._generateMonthYearHeader(e,h,f,u,p,N>0||R>0,D,I)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var H=C?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",V=0;V<7;V++){var W=(V+k)%7;H+="<th"+((V+k+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+S[W]+'">'+T[W]+"</span></th>"}q+=H+"</tr></thead><tbody>";var U=this._getDaysInMonth(f,h);f==e.selectedYear&&h==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,U));for(var B=(this._getFirstDayOfMonth(f,h)-k+7)%7,Y=d?6:Math.ceil((B+U)/7),K=this._daylightSavingAdjust(new Date(f,h,1-B)),J=0;J<Y;J++){q+="<tr>";for(var G=C?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(K)+"</td>":"",V=0;V<7;V++){var X=E?E.apply(e.input?e.input[0]:null,[K]):[!0,""],Q=K.getMonth()!=h,Z=Q&&!M||!X[0]||u&&K<u||p&&K>p;G+='<td class="'+((V+k+6)%7>=5?" ui-datepicker-week-end":"")+(Q?" ui-datepicker-other-month":"")+(K.getTime()==z.getTime()&&h==e.selectedMonth&&e._keyEvent||O.getTime()==K.getTime()&&O.getTime()==z.getTime()?" "+this._dayOverClass:"")+(Z?" "+this._unselectableClass+" ui-state-disabled":"")+(Q&&!P?"":" "+X[1]+(K.getTime()==c.getTime()?" "+this._currentClass:"")+(K.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Q&&!P||!X[2]?"":' title="'+X[2]+'"')+(Z?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+e.id+"',"+K.getMonth()+","+K.getFullYear()+', this);return false;"')+">"+(Q&&!P?"&#xa0;":Z?'<span class="ui-state-default">'+K.getDate()+"</span>":'<a class="ui-state-default'+(K.getTime()==t.getTime()?" ui-state-highlight":"")+(K.getTime()==c.getTime()?" ui-state-active":"")+(Q?" ui-priority-secondary":"")+'" href="#">'+K.getDate()+"</a>")+"</td>",K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K)}q+=G+"</tr>"}h++,h>11&&(h=0,f++),q+="</tbody></table>"+(d?"</div>"+(r[0]>0&&R==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),j+=q}L+=j}return L+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,L},_generateMonthYearHeader:function(e,t,i,a,n,o,r,s){var l=this._get(e,"changeMonth"),d=this._get(e,"changeYear"),c=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',p="";if(o||!l)p+='<span class="ui-datepicker-month">'+r[t]+"</span>";else{var h=a&&a.getFullYear()==i,f=n&&n.getFullYear()==i;p+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'M');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+e.id+"');\">";for(var m=0;m<12;m++)(!h||m>=a.getMonth())&&(!f||m<=n.getMonth())&&(p+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+s[m]+"</option>");p+="</select>"}if(c||(u+=p+(!o&&l&&d?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!d)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},_=b(g[0]),y=Math.max(_,b(g[1]||""));for(_=a?Math.max(_,a.getFullYear()):_,y=n?Math.min(y,n.getFullYear()):y,e.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+e.id+"');\">";_<=y;_++)e.yearshtml+='<option value="'+_+'"'+(_==i?' selected="selected"':"")+">"+_+"</option>";e.yearshtml+="</select>",u+=e.yearshtml,e.yearshtml=null}return u+=this._get(e,"yearSuffix"),c&&(u+=(!o&&l&&d?"":"&#xa0;")+p),u+="</div>"},_adjustInstDate:function(e,t,i){var a=e.drawYear+("Y"==i?t:0),n=e.drawMonth+("M"==i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(a,n))+("D"==i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,n,o)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),"M"!=i&&"Y"!=i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),n=i&&t<i?i:t;return n=a&&n>a?a:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var n=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,a+(t<0?t:n[0]*n[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!a||t.getTime()<=a.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.13",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",a={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},o=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,a=t.options,n=a.title||"&#160;",o=e.ui.dialog.getTitleId(t.element),r=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(i+a.dialogClass).css({zIndex:a.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){a.closeOnEscape&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":o}).mousedown(function(e){t.moveToTop(!1,e)}),s=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(r),(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(r)),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(s);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(a.closeText).appendTo(l),e("<span></span>").addClass("ui-dialog-title").attr("id",o).html(n).prependTo(s);e.isFunction(a.beforeclose)&&!e.isFunction(a.beforeClose)&&(a.beforeClose=a.beforeclose),s.find("*").add(s).disableSelection(),a.draggable&&e.fn.draggable&&t._makeDraggable(),a.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(a.buttons),t._isOpen=!1,e.fn.bgiframe&&r.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var i,a,n=this;if(!1!==n._trigger("beforeClose",t))return n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",t)}):(n.uiDialog.hide(),n._trigger("close",t)),e.ui.dialog.overlay.resize(),n.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(a=e(this).css("z-index"),isNaN(a)||(i=Math.max(i,a)))}),e.ui.dialog.maxZ=i),n},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var a,n=this,o=n.options;return o.modal&&!t||!o.stack&&!o.modal?n._trigger("focus",i):(o.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=o.zIndex),n.overlay&&(e.ui.dialog.maxZ+=1,n.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),a={scrollTop:n.element.attr("scrollTop"),scrollLeft:n.element.attr("scrollLeft")},e.ui.dialog.maxZ+=1,n.uiDialog.css("z-index",e.ui.dialog.maxZ),n.element.attr(a),n._trigger("focus",i),n)},open:function(){if(!this._isOpen){var t=this,i=t.options,a=t.uiDialog;return t.overlay=i.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(i.position),a.show(i.show),t.moveToTop(!0),i.modal&&a.bind("keypress.ui-dialog",function(t){if(t.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",this),a=i.filter(":first"),n=i.filter(":last");return t.target!==n[0]||t.shiftKey?t.target===a[0]&&t.shiftKey?(n.focus(1),!1):void 0:(a.focus(1),!1)}}),e(t.element.find(":tabbable").get().concat(a.find(".ui-dialog-buttonpane :tabbable").get().concat(a.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var i=this,a=!1,n=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),r=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(n);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(a=!0)}),a&&(e.each(t,function(t,a){a=e.isFunction(a)?{click:a,text:t}:a;var n=e('<button type="button"></button>').click(function(){a.click.apply(i.element[0],arguments)}).appendTo(r);e.each(a,function(e,t){"click"!==e&&(e in o?n[e](t):n.attr(e,t))}),e.fn.button&&n.button()}),n.appendTo(i.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i,a=this,n=a.options,o=e(document);a.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(o,r){i="auto"===n.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),a._trigger("dragStart",o,t(r))},drag:function(e,i){a._trigger("drag",e,t(i))},stop:function(r,s){n.position=[s.position.left-o.scrollLeft(),s.position.top-o.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),a._trigger("dragStop",r,t(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var n=this,o=n.options,r=n.uiDialog.css("position"),s="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";n.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:n.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:n._minHeight(),handles:s,start:function(t,i){e(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",t,a(i))},resize:function(e,t){n._trigger("resize",e,a(t))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),o.height=e(this).height(),o.width=e(this).width(),n._trigger("resizeStop",t,a(i)),e.ui.dialog.overlay.resize()}}).css("position",r).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,a=[],n=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(a=t.split?t.split(" "):[t[0],t[1]],1===a.length&&(a[1]=a[0]),e.each(["left","top"],function(e,t){+a[e]===a[e]&&(n[e]=a[e],a[e]=t)}),t={my:a.join(" "),at:a.join(" "),offset:n.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,o={},r=!1;e.each(t,function(e,t){i._setOption(e,t),e in a&&(r=!0),e in n&&(o[e]=t)}),r&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,a){var n=this,o=n.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":n._createButtons(a);break;case"closeText":n.uiDialogTitlebarCloseText.text(""+a);break;case"dialogClass":o.removeClass(n.options.dialogClass).addClass(i+a);break;case"disabled":a?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":var r=o.is(":data(draggable)");r&&!a&&o.draggable("destroy"),!r&&a&&n._makeDraggable();break;case"position":n._position(a);break;case"resizable":var s=o.is(":data(resizable)");s&&!a&&o.resizable("destroy"),s&&"string"==typeof a&&o.resizable("option","handles",a),s||a===!1||n._makeResizable(a);break;case"title":e(".ui-dialog-title",n.uiDialogTitlebar).html(""+(a||"&#160;"))}e.Widget.prototype._setOption.apply(n,arguments)},_size:function(){var t,i,a=this.options,n=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),a.minWidth>a.width&&(a.width=a.minWidth),t=this.uiDialog.css({height:"auto",width:a.width}).height(),i=Math.max(0,a.minHeight-t),"auto"===a.height)if(e.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var o=this.element.css("height","auto").height();n||this.uiDialog.hide(),this.element.height(Math.max(o,i))}else this.element.height(Math.max(a.height-t,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.13",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances);i!=-1&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var a=0;e.each(this.instances,function(){a=Math.max(a,this.css("z-index"))}),this.maxZ=a},height:function(){var t,i;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<i?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,i;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<i?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(h.test(e[0])?t/100:1),parseFloat(e[1])*(h.test(e[1])?i/100:1)]}function a(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r=Math.max,s=Math.abs,l=Math.round,d=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,h=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var i,a,n=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return e("body").append(n),i=r.offsetWidth,n.css("overflow","scroll"),a=r.offsetWidth,i===a&&(a=n[0].clientWidth),n.remove(),o=i-a},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),a=t.isWindow?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===a||"auto"===a&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),a=e.isWindow(i[0]);return{element:i,isWindow:a,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:a?i.width():i.outerWidth(),height:a?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,h,m,g,v,b,_=e(t.of),y=e.position.getWithinInfo(t.within),A=e.position.getScrollInfo(y),w=(t.collision||"flip").split(" "),x={};return b=n(_),_[0].preventDefault&&(t.at="left top"),h=b.width,m=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,a=(t[this]||"").split(" ");1===a.length&&(a=d.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]),a[0]=d.test(a[0])?a[0]:"center",a[1]=c.test(a[1])?a[1]:"center",e=u.exec(a[0]),i=u.exec(a[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[p.exec(a[0])[0],p.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?v.left+=h:"center"===t.at[0]&&(v.left+=h/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),o=i(x.at,h,m),v.left+=o[0],v.top+=o[1],this.each(function(){var n,d,c=e(this),u=c.outerWidth(),p=c.outerHeight(),f=a(this,"marginLeft"),b=a(this,"marginTop"),k=u+f+a(this,"marginRight")+A.width,$=p+b+a(this,"marginBottom")+A.height,C=e.extend({},v),S=i(x.my,c.outerWidth(),c.outerHeight());if(t.offset){var T=t.offset.split(" ");T.length>0&&(S[0]+=parseInt(T[0]),1==T.length?S[1]+=parseInt(T[0]):S[1]+=parseInt(T[1]))}"right"===t.my[0]?C.left-=u:"center"===t.my[0]&&(C.left-=u/2),"bottom"===t.my[1]?C.top-=p:"center"===t.my[1]&&(C.top-=p/2),C.left+=S[0],C.top+=S[1],e.support.offsetFractions||(C.left=l(C.left),C.top=l(C.top)),n={marginLeft:f,marginTop:b},e.each(["left","top"],function(i,a){e.ui.position[w[i]]&&e.ui.position[w[i]][a](C,{targetWidth:h,targetHeight:m,elemWidth:u,elemHeight:p,collisionPosition:n,collisionWidth:k,collisionHeight:$,offset:[o[0]+S[0],o[1]+S[1]],my:t.my,at:t.at,within:y,elem:c})}),t.using&&(d=function(e){var i=g.left-C.left,a=i+h-u,n=g.top-C.top,o=n+m-p,l={target:{element:_,left:g.left,top:g.top,width:h,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:p},horizontal:a<0?"left":i>0?"right":"center",vertical:o<0?"top":n>0?"bottom":"middle"};h<u&&s(i+a)<h&&(l.horizontal="center"),m<p&&s(n+o)<m&&(l.vertical="middle"),r(s(i),s(a))>r(s(n),s(o))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),c.offset(e.extend(C,{using:d}))})},e.ui.position={fit:{left:function(e,t){var i,a=t.within,n=a.isWindow?a.scrollLeft:a.offset.left,o=a.width,s=e.left-t.collisionPosition.marginLeft,l=n-s,d=s+t.collisionWidth-o-n;t.collisionWidth>o?l>0&&d<=0?(i=e.left+l+t.collisionWidth-o-n,e.left+=l-i):d>0&&l<=0?e.left=n:l>d?e.left=n+o-t.collisionWidth:e.left=n:l>0?e.left+=l:d>0?e.left-=d:e.left=r(e.left-s,e.left)},top:function(e,t){var i,a=t.within,n=a.isWindow?a.scrollTop:a.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,l=n-s,d=s+t.collisionHeight-o-n;t.collisionHeight>o?l>0&&d<=0?(i=e.top+l+t.collisionHeight-o-n,e.top+=l-i):d>0&&l<=0?e.top=n:l>d?e.top=n+o-t.collisionHeight:e.top=n:l>0?e.top+=l:d>0?e.top-=d:e.top=r(e.top-s,e.top)}},flip:{left:function(e,t){var i,a,n=t.within,o=n.offset.left+n.scrollLeft,r=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-r-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];c<0?(i=e.left+p+h+f+t.collisionWidth-r-o,(i<0||i<s(c))&&(e.left+=p+h+f)):u>0&&(a=e.left-t.collisionPosition.marginLeft+p+h+f-l,(a>0||s(a)<u)&&(e.left+=p+h+f))},top:function(e,t){var i,a,n=t.within,o=n.offset.top+n.scrollTop,r=n.height,l=n.isWindow?n.scrollTop:n.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-r-l,p="top"===t.my[1],h=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];c<0?(a=e.top+h+f+m+t.collisionHeight-r-o,e.top+h+f+m>c&&(a<0||a<s(c))&&(e.top+=h+f+m)):u>0&&(i=e.top-t.collisionPosition.marginTop+h+f+m-l,e.top+h+f+m>u&&(i>0||s(i)<u)&&(e.top+=h+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,a,n,o,r=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(r?"div":"body"),a={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(a,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in a)t.style[o]=a[o];t.appendChild(s),i=r||document.documentElement,i.insertBefore(t,i.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",n=e(s).offset().left,e.support.offsetFractions=n>10&&n<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,i){"value"===t&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.13"})}(jQuery),function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,a=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=a.values&&a.values.length||1,s=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(a.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),a.range&&(a.range===!0&&(a.values||(a.values=[this._valueMin(),this._valueMin()]),a.values.length&&2!==a.values.length&&(a.values=[a.values[0],a.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===a.range||"max"===a.range?" ui-slider-range-"+a.range:"")));for(var l=n.length;l<r;l+=1)s.push(o);this.handles=n.add(e(s.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){a.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){a.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(a){var n,o,r,s,l=!0,d=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(a.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(l=!1,!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),n=t._start(a,d),n===!1))return}switch(s=t.options.step,o=r=t.options.values&&t.options.values.length?t.values(d):t.value(),a.keyCode){case e.ui.keyCode.HOME:r=t._valueMin();break;case e.ui.keyCode.END:r=t._valueMax();break;case e.ui.keyCode.PAGE_UP:r=t._trimAlignValue(o+(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:r=t._trimAlignValue(o-(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===t._valueMax())return;r=t._trimAlignValue(o+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===t._valueMin())return;r=t._trimAlignValue(o-s)}return t._slide(a,d,r),l}}).keyup(function(i){var a=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(i,a),t._change(i,a),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){
var i,a,n,o,r,s,l,d,c,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},a=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,r=this,this.handles.each(function(t){var i=Math.abs(a-r.values(t));n>i&&(n=i,o=e(this),s=t)}),u.range===!0&&this.values(1)===u.min&&(s+=1,o=e(this.handles[s])),l=this._start(t,s),l!==!1&&(this._mouseSliding=!0,r._handleIndex=s,o.addClass("ui-state-active").focus(),d=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-d.left-o.width()/2,top:t.pageY-d.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,a),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,a,n,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),a=i/t,a>1&&(a=1),a<0&&(a=0),"vertical"===this.orientation&&(a=1-a),n=this._valueMax()-this._valueMin(),o=this._valueMin()+a*n,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var a,n,o;this.options.values&&this.options.values.length?(a=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>a||1===t&&i<a)&&(i=a),i!==this.values(t)&&(n=this.values(),n[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),a=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var a,n,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(a=this.options.values,n=arguments[0],o=0;o<a.length;o+=1)a[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var a,n=0;switch(e.isArray(this.options.values)&&(n=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),a=0;a<n;a+=1)this._change(null,a);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,a;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(i[a]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t;return alignValue=e-i,2*Math.abs(i)>=t&&(alignValue+=i>0?t:-t),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,a,n,o,r=this.options.range,s=this.options,l=this,d=!this._animateOff&&s.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(a,n){t=(l.values(a)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[d?"animate":"css"](c,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===a&&l.range.stop(1,1)[d?"animate":"css"]({left:t+"%"},s.animate),1===a&&l.range[d?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:s.animate})):(0===a&&l.range.stop(1,1)[d?"animate":"css"]({bottom:t+"%"},s.animate),1===a&&l.range[d?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:s.animate}))),i=t}):(a=this.value(),n=this._valueMin(),o=this._valueMax(),t=o!==n?(a-n)/(o-n)*100:0,c["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[d?"animate":"css"](c,s.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:t+"%"},s.animate),"max"===r&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:s.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:t+"%"},s.animate),"max"===r&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:s.animate}))}}),e.extend(e.ui.slider,{version:"1.8.13"})}(jQuery),function(e,i){function a(){return++o}function n(){return++r}var o=0,r=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+a()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+n());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function a(t,i){t.css("display",""),!e.support.opacity&&i.opacity&&t[0].style.removeAttribute("filter")}var n=this,o=this.options,r=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,i){var a,s=e(i).attr("href"),l=s.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(a=e("base")[0])&&l===a.href)&&(s=i.hash,i.href=s),r.test(s))n.panels=n.panels.add(n.element.find(n._sanitizeSelector(s)));else if(s&&"#"!==s){e.data(i,"href.tabs",s),e.data(i,"load.tabs",s.replace(/#.*$/,""));var d=n._tabId(i);i.href="#"+d;var c=n.element.find("#"+d);c.length||(c=e(o.panelTemplate).attr("id",d).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(n.panels[t-1]||n.list),c.data("destroy.tabs",!0)),n.panels=n.panels.add(c)}else o.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),o.selected===i?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return o.selected=e,!1}),"number"!=typeof o.selected&&o.cookie&&(o.selected=parseInt(n._cookie(),10)),"number"!=typeof o.selected&&this.lis.filter(".ui-tabs-selected").length&&(o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),o.selected=o.selected||(this.lis.length?0:-1)):null===o.selected&&(o.selected=-1),o.selected=o.selected>=0&&this.anchors[o.selected]||o.selected<0?o.selected:0,o.disabled=e.unique(o.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return n.lis.index(e)}))).sort(),e.inArray(o.selected,o.disabled)!=-1&&o.disabled.splice(e.inArray(o.selected,o.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),o.selected>=0&&this.anchors.length&&(n.element.find(n._sanitizeSelector(n.anchors[o.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active"),n.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[o.selected],n.element.find(n._sanitizeSelector(n.anchors[o.selected].hash))[0]))}),this.load(o.selected)),e(window).bind("unload",function(){n.lis.add(n.anchors).unbind(".tabs"),n.lis=n.anchors=n.panels=null})):o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[o.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),o.cookie&&this._cookie(o.selected,o.cookie);for(var s,l=0;s=this.lis[l];l++)e(s)[e.inArray(l,o.disabled)==-1||e(s).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(o.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==o.event){var d=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},c=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){d("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){c("hover",e(this))}),this.anchors.bind("focus.tabs",function(){d("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){c("focus",e(this).closest("li"))})}var u,p;o.fx&&(e.isArray(o.fx)?(u=o.fx[0],p=o.fx[1]):u=p=o.fx);var h=p?function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",function(){a(i,p),n._trigger("show",null,n._ui(t,i[0]))})}:function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),n._trigger("show",null,n._ui(t,i[0]))},f=u?function(e,t){t.animate(u,u.duration||"normal",function(){n.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),a(t,u),n.element.dequeue("tabs")})}:function(e,t,i){n.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),n.element.dequeue("tabs")};this.anchors.bind(o.event+".tabs",function(){var t=this,i=e(t).closest("li"),a=n.panels.filter(":not(.ui-tabs-hide)"),r=n.element.find(n._sanitizeSelector(t.hash));if(i.hasClass("ui-tabs-selected")&&!o.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||n.panels.filter(":animated").length||n._trigger("select",null,n._ui(this,r[0]))===!1)return this.blur(),!1;if(o.selected=n.anchors.index(this),n.abort(),o.collapsible){if(i.hasClass("ui-tabs-selected"))return o.selected=-1,o.cookie&&n._cookie(o.selected,o.cookie),n.element.queue("tabs",function(){f(t,a)}).dequeue("tabs"),this.blur(),!1;if(!a.length)return o.cookie&&n._cookie(o.selected,o.cookie),n.element.queue("tabs",function(){h(t,r)}),n.load(n.anchors.index(this)),this.blur(),!1}if(o.cookie&&n._cookie(o.selected,o.cookie),!r.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";a.length&&n.element.queue("tabs",function(){f(t,a)}),n.element.queue("tabs",function(){h(t,r)}),n.load(n.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$="+e+"]"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var i=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){i.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,a,n){n===i&&(n=this.anchors.length);var o=this,r=this.options,s=e(r.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,a)),l=t.indexOf("#")?this._tabId(e("a",s)[0]):t.replace("#","");s.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var d=o.element.find("#"+l);return d.length||(d=e(r.panelTemplate).attr("id",l).data("destroy.tabs",!0)),d.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),n>=this.lis.length?(s.appendTo(this.list),d.appendTo(this.list[0].parentNode)):(s.insertBefore(this.lis[n]),d.insertBefore(this.panels[n])),r.disabled=e.map(r.disabled,function(e,t){return e>=n?++e:e}),this._tabify(),1==this.anchors.length&&(r.selected=0,s.addClass("ui-tabs-selected ui-state-active"),d.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[0],o.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[n],this.panels[n])),this},remove:function(t){t=this._getIndex(t);var i=this.options,a=this.lis.eq(t).remove(),n=this.panels.eq(t).remove();return a.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e,i){return e!=t}),function(e,i){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(a.find("a")[0],n[0])),this},enable:function(t){t=this._getIndex(t);var i=this.options;if(e.inArray(t,i.disabled)!=-1)return this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=e.grep(i.disabled,function(e,i){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(e=this._getIndex(e),e==-1){if(!this.options.collapsible||this.options.selected==-1)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var i=this,a=this.options,n=this.anchors.eq(t)[0],o=e.data(n,"load.tabs");if(this.abort(),!o||0!==this.element.queue("tabs").length&&e.data(n,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(t).addClass("ui-state-processing"),a.spinner){var r=e("span",n);r.data("label.tabs",r.html()).html(a.spinner)}return this.xhr=e.ajax(e.extend({},a.ajaxOptions,{url:o,success:function(o,r){i.element.find(i._sanitizeSelector(n.hash)).html(o),i._cleanup(),a.cache&&e.data(n,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{a.ajaxOptions.success(o,r)}catch(s){}},error:function(e,o,r){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{a.ajaxOptions.error(e,o,t,n)}catch(r){}}})),i.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.13"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,i){var a=this,n=this.options,o=a._rotate||(a._rotate=function(t){clearTimeout(a.rotation),a.rotation=setTimeout(function(){var e=n.selected;a.select(++e<a.anchors.length?e:0)},e),t&&t.stopPropagation()}),r=a._unrotate||(a._unrotate=i?function(e){t=n.selected,o()}:function(e){e.clientX&&a.rotate(null)});return e?(this.element.bind("tabsshow",o),this.anchors.bind(n.event+".tabs",r),o()):(clearTimeout(a.rotation),this.element.unbind("tabsshow",o),this.anchors.unbind(n.event+".tabs",r),delete this._rotate,delete this._unrotate),this}})}(jQuery),function(e){"use strict";e.widget("blueimp.fileupload",{options:{namespace:void 0,dropZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,sequentialUploads:!1,forceIframeTransport:!1,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},fail:function(e,t){},processData:!1,contentType:!1,cache:!1,dataType:"json"},fail:function(e,t){},_refreshOptionsList:["namespace","dropZone","fileInput"],_isXHRUpload:function(e){var t="undefined";return!(e.forceIframeTransport||typeof XMLHttpRequestUpload===t||typeof File===t||e.multipart&&typeof FormData===t)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_onProgress:function(e,t){if(e.lengthComputable){var i=t.total||this._getTotal(t.files),a=parseInt(e.loaded/e.total*(t.chunkSize||i),10)+(t.uploadedBytes||0);this._loaded+=a-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=a,t.total=i,this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(t){var i=this,a=t.xhr?t.xhr():e.ajaxSettings.xhr();a.upload&&a.upload.addEventListener&&(a.upload.addEventListener("progress",function(e){i._onProgress(e,t)},!1),t.xhr=function(){return a})},_initXHRData:function(t){var i,a=t.files[0];t.multipart&&!t.blob||(t.headers=e.extend(t.headers,{"X-File-Name":a.name,"X-File-Type":a.type,"X-File-Size":a.size}),t.blob?t.multipart||(t.contentType="application/octet-stream",t.data=t.blob):(t.contentType=a.type,t.data=a)),t.multipart&&(t.formData instanceof FormData?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(t.paramName,t.blob):e.each(t.files,function(e,a){a instanceof Blob&&i.append(t.paramName,a)}),t.data=i),t.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e)},_initDataSettings:function(e){this._isXHRUpload(e)?this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)):this._initIframeSettings(e)},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form"))),t.paramName||(t.paramName=t.fileInput.prop("name")||"files[]"),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&(t.type="POST")},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i){var a=e.Deferred(),n=a.promise();return i=i||this.options.context||n,t===!0?a.resolveWith(i):t===!1&&a.rejectWith(i),n.abort=a.promise,this._enhancePromise(n)},_chunkedUpload:function(t,i){var a,n,o,r,s=this,l=t.files[0],d=l.size,c=t.uploadedBytes=t.uploadedBytes||0,u=t.maxChunkSize||d,p=l.webkitSlice||l.mozSlice||l.slice;return!(!(this._isXHRUpload(t)&&p&&(c||u<d))||t.data)&&(!!i||(c>=d?(l.error="uploadedBytes",this._getXHRPromise(!1)):(n=Math.ceil((d-c)/u),a=function(i){return i?a(i-=1).pipe(function(){var a=e.extend({},t);return a.blob=p.call(l,c+i*u,c+(i+1)*u),a.chunkSize=a.blob.size,s._initXHRData(a),s._initProgressListener(a),o=(proboards.ajax(a)||s._getXHRPromise(!1,a.context)).done(function(){a.loaded||s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:a.chunkSize,total:a.chunkSize}),a),t.uploadedBytes=a.uploadedBytes+=a.chunkSize})}):s._getXHRPromise(!0)},r=a(n),r.abort=function(){return o.abort()},this._enhancePromise(r))))},_beforeSend:function(t,i){0===this._active&&this._trigger("start"),e(".fileupload-content").css("display","block"),this._active+=1,this._loaded+=i.uploadedBytes||0,this._total+=this._getTotal(i.files)},_onDone:function(t,i,a,n){this._isXHRUpload(n)||this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:1,total:1}),n),n.result=t,n.textStatus=i,n.jqXHR=a,this._trigger("done",null,n)},_onFail:function(e,t,i,a){a.jqXHR=e,a.result=e,a.textStatus=t,a.errorThrown=i,this._trigger("fail",null,a),a.recalculateProgress&&(this._loaded-=a.loaded||a.uploadedBytes||0,this._total-=a.total||this._getTotal(a.files))},_onAlways:function(e,t,i,a){this._active-=1,a.result=e,a.textStatus=t,a.jqXHR=i,this._trigger("always",null,a),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(e,t){var i,a,n=this,o=n._getAJAXSettings(t),r=function(){return i=(n._trigger("send",e,o)!==!1&&(n._chunkedUpload(o)||proboards.ajax(o))||n._getXHRPromise(!1,o.context)).done(function(e,t,i){n._onDone(e,t,i,o)}).fail(function(e,t,i){n._onFail(e,t,i,o)}).always(function(e,t,i){n._onAlways(e,t,i,o)})};return this._beforeSend(e,o),this.options.sequentialUploads?(a=this._sequence=this._sequence.pipe(r,r),a.abort=function(){return i.abort()},this._enhancePromise(a)):r()},_onAdd:function(t,i){var a=this,n=!0,o=e.extend({},this.options,i);return o.singleFileUploads&&this._isXHRUpload(o)?(e.each(i.files,function(o,r){var s=e.extend({},i,{files:[r]});return s.submit=function(){return a._onSend(t,s)},n=a._trigger("add",t,s)}),n):i.files.length?(i=e.extend({},i),i.submit=function(){return a._onSend(t,i)},this._trigger("add",t,i)):void 0},_normalizeFile:function(e,t){void 0===t.name&&void 0===t.size&&(t.name=t.fileName,t.size=t.fileSize)},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,a){return a===t[0]?i[0]:a}),t[0]===this.element[0]&&(this.element=i)},_onChange:function(t){var i=t.data.fileupload,a={files:e.each(e.makeArray(t.target.files),i._normalizeFile),fileInput:e(t.target),form:e(t.target.form)};if(a.files.length||(a.files=[{name:t.target.value.replace(/^.*\\/,"")}]),a.form.length?a.fileInput.data("blueimp.fileupload.form",a.form):a.form=a.fileInput.data("blueimp.fileupload.form"),i.options.replaceFileInput&&i._replaceFileInput(a.fileInput),i._trigger("change",t,a)===!1||i._onAdd(t,a)===!1)return!1},_onDrop:function(t){var i=t.data.fileupload,a=t.dataTransfer=t.originalEvent.dataTransfer,n={files:e.each(e.makeArray(a.files),i._normalizeFile)};return i._trigger("drop",t,n)!==!1&&i._onAdd(t,n)!==!1&&void t.preventDefault()},_onDragOver:function(e){var t=e.data.fileupload,i=e.dataTransfer=e.originalEvent.dataTransfer;return t._trigger("dragover",e)!==!1&&(i.dropEffect=i.effectAllowed="copy",void e.preventDefault())},_initEventHandlers:function(){var t=this.options.namespace||this.name;e.browser.msie||navigator.userAgent.indexOf("Trident")!=-1||this.options.dropZone.bind("dragover."+t,{fileupload:this},this._onDragOver).bind("drop."+t,{fileupload:this},this._onDrop),this.options.fileInput.bind("change."+t,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var e=this.options.namespace||this.name;this.options.dropZone.unbind("dragover."+e,this._onDragOver).unbind("drop."+e,this._onDrop),this.options.fileInput.unbind("change."+e,this._onChange)},_beforeSetOption:function(e,t){this._destroyEventHandlers()},_afterSetOption:function(t,i){var a=this.options;a.fileInput||(a.fileInput=e()),a.dropZone||(a.dropZone=e()),this._initEventHandlers()},_setOption:function(t,i){var a=e.inArray(t,this._refreshOptionsList)!==-1;a&&this._beforeSetOption(t,i),e.Widget.prototype._setOption.call(this,t,i),a&&this._afterSetOption(t,i)},_create:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):t.fileInput||(t.fileInput=e()),(e.browser.msie||navigator.userAgent.indexOf("Trident")!=-1)&&t.fileInput.prop("multiple",!1),t.dropZone||(t.dropZone=e()),this._sequence=this._getXHRPromise(!0),this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),e.Widget.prototype.destroy.call(this)},enable:function(){e.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),e.Widget.prototype.disable.call(this)},add:function(t){t&&!this.options.disabled&&(t.files=e.each(e.makeArray(t.files),this._normalizeFile),this._onAdd(null,t))},send:function(t){return t&&!this.options.disabled&&(t.files=e.each(e.makeArray(t.files),this._normalizeFile),t.files.length)?this._onSend(null,t):this._getXHRPromise(!1,t&&t.context)}})}(jQuery),function(e){"use strict";e.widget("blueimpUI.fileupload",e.blueimp.fileupload,{options:{autoUpload:!0,maxNumberOfFiles:3,maxFileSize:10485760,minFileSize:1,acceptFileTypes:/.+$/i,previewFileTypes:/^image\/(gif|jpeg|png)$/,previewMaxWidth:50,previewMaxHeight:50,previewAsCanvas:!0,uploadTemplate:e("#template-upload"),downloadTemplate:e("#template-download"),filesContainer:void 0,dataType:"json",updateLimits:function(){},getNumberOfFiles:function(){return e(".template-download, .template-upload",this.filesContainer).not(".ui-state-error").length},add:function(t,i){var a=e(this).data("fileupload");i.isValidated=a._validate(i.files),i.context=a._renderUpload(i.files).appendTo(e(this).find(".files")).fadeIn(function(){e(this).show()}).data("data",i),(a.options.autoUpload||i.autoUpload)&&i.isValidated?i.jqXHR=i.submit():i.context.each(function(t){if("abort"!==i.errorThrown){var a=this;window.setTimeout(function(){e(a).hide()},4e3)}})},send:function(t,i){if("function"!=typeof i.error&&(i.error=function(){}),!i.isValidated){var a=e(this).data("fileupload");if(!a._validate(i.files))return!1}i.context&&i.dataType&&"iframe"===i.dataType.substr(0,6)&&i.context.find(".ui-progressbar").progressbar("value",parseInt(100,10)),e(".ui-progressbar-value").show().css("width","100%")},done:function(t,i){var a=e(this).data("fileupload");i.context?i.context.each(function(t){var n;n=e.isArray(i.result)&&i.result[t]?i.result[t]:{error:i.result&&i.result.error||"emptyResult"},e(this).fadeOut(function(){a._renderDownload([n]).css("display","none").replaceAll(this).fadeIn(function(){e(this).show()}),a.options.updateLimits.call(a.element)})}):(a._renderDownload(i.result).css("display","none").appendTo(e(this).find(".files")).fadeIn(function(){e(this).show()}),a.options.updateLimits.call(a.element))},fail:function(t,i){var a=e(this).data("fileupload");i.context?i.context.each(function(t){e(this).fadeOut(function(){if("abort"!==i.errorThrown){var n=i.files[t];try{var o=i.result.responseText;o=e.parseJSON(o,{throwError:!0}),n.error=o.error}catch(r){}n.error=n.error||i.errorThrown||!0,a._renderDownload([n]).css("display","none").replaceAll(this).fadeIn(function(){e(this).show()}).delay(7e3).fadeOut(function(){e(this).remove(),e(".fileupload-buttonbar").show()})}i.context.remove(),a.options.updateLimits.call(a.element)})}):"abort"!==i.errorThrown&&(i.context=a._renderUpload(i.files).css("display","none").appendTo(e(this).find(".files")).fadeIn(function(){e(this).show()}).data("data",i))},progress:function(e,t){t.context&&t.context.find(".ui-progressbar").progressbar("value",parseInt(t.loaded/t.total*100,10))},destroy:function(t,i){var a=e(this).data("fileupload");i.url?proboards.ajax(e.extend(i,{success:function(){e(this).fadeOut(function(){e(this).remove(),a.options.updateLimits.call(a.element)})}})):i.context.fadeOut(function(){e(this).remove(),a.options.updateLimits.call(a.element)})}},_scaleImage:function(e,t){t=t||{};var i=document.createElement("canvas"),a=Math.min((t.maxWidth||e.width)/e.width,(t.maxHeight||e.height)/e.height);return a>=1&&(a=Math.max((t.minWidth||e.width)/e.width,(t.minHeight||e.height)/e.height)),e.width=parseInt(e.width*a,10),e.height=parseInt(e.height*a,10),t.canvas&&i.getContext?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height),i):e},_createObjectURL:function(e){var t="undefined",i=typeof window.createObjectURL!==t&&window||typeof URL!==t&&URL||typeof webkitURL!==t&&webkitURL,a=i?i.createObjectURL(e):"";return a},_revokeObjectURL:function(e){var t="undefined",i=typeof window.revokeObjectURL!==t&&window||typeof URL!==t&&URL||typeof webkitURL!==t&&webkitURL;return!!i&&i.revokeObjectURL(e)},_loadFile:function(e,t){if("undefined"!=typeof FileReader&&FileReader.prototype.readAsDataURL){var i=new FileReader;return i.onload=function(e){t(e.target.result)},i.readAsDataURL(e),!0}return!1},_loadImage:function(t,i,a){var n,o,r=this;a&&a.fileTypes&&!a.fileTypes.test(t.type)||(n=this._createObjectURL(t),o=e("<img>").bind("load",function(){e(this).unbind("load"),r._revokeObjectURL(n),i(r._scaleImage(o[0],a))}).prop("src",n),n||this._loadFile(t,function(e){o.prop("src",e)}),o.prop("alt","Thumbnail Preview"))},_enableDragToDesktop:function(){var t=e(this),i=t.prop("href"),a=decodeURIComponent(i.split("/").pop()).replace(/:/g,"-"),n="application/octet-stream";t.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[n,a,i].join(":"))}catch(t){}})},_formatFileSize:function(e){var t=1024,i=1024*t,a=1024*i;return"undefined"==typeof e.size?"":e.size>=a?(e.size/a).toFixed(2)+" GB":e.size>=i?(e.size/i).toFixed(2)+" MB":(e.size/t).toFixed(2)+" KB"},_validate:function(t){var i=this.options,a=!0;return e.each(t,function(n,o){o.error||("number"===e.type(i.maxNumberOfFiles)&&(i.getNumberOfFiles()||0)+t.length>i.maxNumberOfFiles?o.error="maxNumberOfFiles":i.acceptFileTypes.test(o.type)||i.acceptFileTypes.test(o.name)?i.maxFileSize&&o.size>i.maxFileSize?o.error="maxFileSize":"number"==typeof o.size&&o.size<i.minFileSize&&(o.error="minFileSize"):o.error="acceptFileTypes"),a=a&&!o.error}),a},_uploadTemplateHelper:function(e){return e.sizef=this._formatFileSize(e),e},_renderUploadTemplate:function(t){var i=this;return e.tmpl(this.options.uploadTemplate,e.map(t,function(e){return i._uploadTemplateHelper(e)}))},_renderUpload:function(t){var i=this,a=this.options,n=this._renderUploadTemplate(t);return n instanceof e?(n.css("display","none"),n.find(".name div").slice(1).remove().end().first().progressbar(),
n.find(".start button").slice(this.options.autoUpload?0:1).remove().end().first().button({text:!1,icons:{primary:"ui-icon-circle-arrow-e"}}),n.find(".cancel button").slice(1).remove().end().first().button({text:!1}),n.find(".preview").each(function(n,o){var r=e(this);a.previewFileTypes&&a.previewFileTypes.test(t[n].type)||r.addClass("none"),i._loadImage(t[n],function(t){e(t).hide().appendTo(o).fadeIn();var i=!("CANVAS"==t.nodeName||t&&e(t).attr("src"));r.toggleClass("none",i)},{maxWidth:a.previewMaxWidth,maxHeight:a.previewMaxHeight,fileTypes:a.previewFileTypes,canvas:a.previewAsCanvas})}),n):e()},_downloadTemplateHelper:function(e){return e.sizef=this._formatFileSize(e),e.name||(e.name=""),e},_renderDownloadTemplate:function(t){var i=this;return e.tmpl(this.options.downloadTemplate,e.map(t,function(e){return i._downloadTemplateHelper(e)}))},_renderDownload:function(t){var i=this._renderDownloadTemplate(t);if(!(i instanceof e))return e();i.css("display","none"),i.find(".delete button").button({text:!1}),i.find(".insert button").button({text:!1});var a=i.find(".preview img")[0];return"undefined"!=typeof a&&i.find(".preview").toggleClass("none",!t[0].thumbnail_url),i.find(".preview img").fadeOut(5),i.find("a").each(this._enableDragToDesktop),i},_startHandler:function(t){t.preventDefault();var i=e(this).closest(".template-upload"),a=i.data("data");a&&a.submit&&!a.jqXHR&&(a.jqXHR=a.submit(),e(this).fadeOut())},_cancelHandler:function(t){t.preventDefault();var i=e(this).closest(".template-upload"),a=i.data("data")||{};a.jqXHR?a.jqXHR.abort():(a.errorThrown="abort",t.data.fileupload._trigger("fail",t,a))},_deleteHandler:function(t){t.preventDefault();var i=e(this);t.data.fileupload._trigger("destroy",t,{context:i.closest(".template-download"),url:i.attr("data-url"),type:i.attr("data-type"),dataType:t.data.fileupload.options.dataType})},_initEventHandlers:function(){e.blueimp.fileupload.prototype._initEventHandlers.call(this);var t=this.element.find(".files"),i={fileupload:this},a="click."+this.options.namespace;t.on(a,".start button",i,this._startHandler).on(a,".cancel button",i,this._cancelHandler).on(a,".delete button",i,this._deleteHandler)},_destroyEventHandlers:function(){var t=this.element.find(".files");t.off("click."+this.options.namespace),e.blueimp.fileupload.prototype._destroyEventHandlers.call(this)},_initFileUploadButtonBar:function(){var t=this.element.find(".fileupload-buttonbar"),i=this.element.find(".files"),a=this.options.namespace;t.addClass("ui-widget-header ui-corner-top"),this.element.find(".fileinput-button").each(function(){var t=e(this).find("input:file").detach();e(this).button().append(t)}),t.find(".start").button().bind("click."+a,function(e){e.preventDefault(),i.find(".start button").click()}),t.find(".cancel").button().bind("click."+a,function(e){e.preventDefault(),i.find(".cancel button").click()}),t.find(".delete").button().bind("click."+a,function(e){e.preventDefault(),i.find(".delete button").click()})},_destroyFileUploadButtonBar:function(){this.element.find(".fileupload-buttonbar").removeClass("ui-widget-header ui-corner-top"),this.element.find(".fileinput-button").each(function(){var t=e(this).find("input:file").detach();e(this).button("destroy").append(t)}),this.element.find(".fileupload-buttonbar button").unbind("click."+this.options.namespace).button("destroy")},_enableFileInputButton:function(){this.element.find(".fileinput-button input:file:disabled").each(function(){var t=e(this),i=t.parent();t.detach().prop("disabled",!1),i.button("enable").append(t)})},_disableFileInputButton:function(){this.element.find(".fileinput-button input:file:enabled").each(function(){var t=e(this),i=t.parent();t.detach().prop("disabled",!0),i.button("disable").append(t)})},_initFilesContainer:function(){var t=this.options;t.filesContainer?t.filesContainer instanceof e||(t.filesContainer=e(t.filesContainer)):t.filesContainer=this.element.find(".files"),t.updateLimits.call(this.element)},_initTemplates:function(){this.options.uploadTemplate instanceof e&&!this.options.uploadTemplate.length&&(this.options.uploadTemplate=e(this.options.uploadTemplate.selector)),this.options.downloadTemplate instanceof e&&!this.options.downloadTemplate.length&&(this.options.downloadTemplate=e(this.options.downloadTemplate.selector))},_create:function(){e.blueimp.fileupload.prototype._create.call(this),this._initTemplates(),this.element.addClass("ui-widget"),this._initFileUploadButtonBar(),this.element.find(".fileupload-content").addClass("ui-widget-content ui-corner-bottom"),this.element.find(".fileupload-progressbar").hide().progressbar(),this._initFilesContainer()},destroy:function(){this.element.find(".fileupload-progressbar").progressbar("destroy"),this.element.find(".fileupload-content").removeClass("ui-widget-content ui-corner-bottom"),this._destroyFileUploadButtonBar(),this.element.removeClass("ui-widget"),e.blueimp.fileupload.prototype.destroy.call(this)},enable:function(){e.blueimp.fileupload.prototype.enable.call(this),this.element.find(":ui-button").not(".fileinput-button").button("enable"),this._enableFileInputButton()},disable:function(){this.element.find(":ui-button").not(".fileinput-button").button("disable"),this._disableFileInputButton(),e.blueimp.fileupload.prototype.disable.call(this)}})}(jQuery),function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i,a,n){if("POST"===i.type||"GET"===i.type){var o,r;return{send:function(a,n){o=e('<form style="display:none;"></form>'),r=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t;r.unbind("load").bind("load",function(){n(200,"success",{iframe:r.contents()}),e('<iframe src="javascript:false;"></iframe>').appendTo(o),o.remove()}),o.prop("target",r.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&(e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(o)}),e('<input type="hidden" name="csrf_token" />').val(proboards.data("csrf_token")||"null").appendTo(o),e('<input type="hidden" name="accepts" />').val("text-json").appendTo(o)),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),o.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),o.submit(),t&&t.length&&i.fileInput.each(function(i,a){e(t[i]).replaceWith(a)})}),o.append(r).appendTo("body")},abort:function(){r&&r.unbind("load").prop("src","javascript".concat(":false;")),o&&o.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(e){return e.text()},"iframe json":function(t){return e.parseJSON(t.text())},"iframe html":function(e){return e.find("body").html()}}})}(jQuery),function(e,t){function i(t,i,a,n){var o={data:n||0===n||n===!1?n:i?i.data:{},_wrap:i?i._wrap:null,tmpl:null,parent:i||null,nodes:[],calls:c,nest:u,wrap:p,html:h,update:f};return t&&e.extend(o,t,{nodes:[],parent:i}),"function"==typeof a&&(o.tmpl=a,o._ctnt=o._ctnt||o.tmpl(e,o),o.key=++w,(k.length?y:_)[w]=o),o}function a(t,i,o){var r,s=o?e.map(o,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+v+'="'+t.key+'" $2'):e:a(e,t,e._ctnt)}):t;return i?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,i,a,o){r=e(a).get(),d(r),i&&(r=n(i).concat(r)),o&&(r=r.concat(n(o)))}),r?r:n(s))}function n(t){var i=document.createElement("div");return i.innerHTML=t,e.makeArray(i.childNodes)}function o(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,i,a,n,o,r,l){var d,c,u,p=e.tmpl.tag[a];if(!p)throw"Unknown template tag: "+a;return d=p._default||[],r&&!/\w$/.test(o)&&(o+=r,r=""),o?(o=s(o),l=l?","+s(l)+")":r?")":"",c=r?o.indexOf(".")>-1?o+s(r):"("+o+").call($item"+l:o,u=r?c:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):u=c=d.$1||"null",n=s(n),"');"+p[i?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(u).split("$1").join(c).split("$2").join(n||d.$2||"")+"__.push('"})+"');}return __;")}function r(t,i){t._wrap=a(t,!0,e.isArray(i)?i:[b.test(i)?i:e(i).html()]).join("")}function s(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function l(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function d(t){function a(t){function a(e){e+=d,r=c[e]=c[e]||i(r,_[r.parent.key+d]||r.parent)}var n,o,r,s,l=t;if(s=t.getAttribute(v)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(n=l.getAttribute(v)););n!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(v)||0:0,(r=_[s])||(r=y[s],r=i(r,_[l]||y[l]),r.key=++w,_[w]=r),x&&a(s)),t.removeAttribute(v)}else x&&(r=e.data(t,"tmplItem"))&&(a(r.key),_[r.key]=r,l=e.data(t.parentNode,"tmplItem"),l=l?l.key:0);if(r){for(o=r;o&&o.key!=l;)o.nodes.push(t),o=o.parent;delete r._ctnt,delete r._wrap,e.data(t,"tmplItem",r)}}var n,o,r,s,l,d="_"+x,c={};for(r=0,s=t.length;r<s;r++)if(1===(n=t[r]).nodeType){for(o=n.getElementsByTagName("*"),l=o.length-1;l>=0;l--)a(o[l]);a(n)}}function c(e,t,i,a){return e?void k.push({_:e,tmpl:t,item:this,data:i,options:a}):k.pop()}function u(t,i,a){return e.tmpl(e.template(t),i,a,this)}function p(t,i){var a=t.options||{};return a.wrapped=i,e.tmpl(e.template(t.tmpl),t.data,a,t.item)}function h(t,i){var a=this._wrap;return e.map(e(e.isArray(a)?a.join(""):a).filter(t||"*"),function(e){return i?e.innerText||e.textContent:e.outerHTML||l(e)})}function f(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var m,g=e.fn.domManip,v="_tmplitem",b=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,_={},y={},A={key:0,data:{}},w=0,x=0,k=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,i){e.fn[t]=function(a){var n,o,r,s,l=[],d=e(a),c=1===this.length&&this[0].parentNode;if(m=_||{},c&&11===c.nodeType&&1===c.childNodes.length&&1===d.length)d[i](this[0]),l=this;else{for(o=0,r=d.length;o<r;o++)x=o,n=(o>0?this.clone(!0):this).get(),e(d[o])[i](n),l=l.concat(n);x=0,l=this.pushStack(l,t,d.selector)}return s=m,m=null,e.tmpl.complete(s),l}}),e.fn.extend({tmpl:function(t,i,a){return e.tmpl(this[0],t,i,a)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,i,a,n){if(t[0]&&e.isArray(t[0])){for(var o,r=e.makeArray(arguments),s=t[0],l=s.length,d=0;d<l&&!(o=e.data(s[d++],"tmplItem")););o&&x&&(r[2]=function(t){e.tmpl.afterManip(this,t,a)}),g.apply(this,r)}else g.apply(this,arguments);return x=0,m||e.tmpl.complete(_),this}}),e.extend({tmpl:function(t,n,o,s){var l,d=!s;if(d)s=A,t=e.template[t]||e.template(null,t),y={};else if(!t)return t=s.tmpl,_[s.key]=s,s.nodes=[],s.wrapped&&r(s,s.wrapped),e(a(s,null,s.tmpl(e,s)));return t?("function"==typeof n&&(n=n.call(s||{})),o&&o.wrapped&&r(o,o.wrapped),l=e.isArray(n)?e.map(n,function(e){return e?i(o,s,t,e):null}):[i(o,s,t,n)],d?e(a(s,null,l)):l):[]},tmplItem:function(t){var i;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(i=e.data(t,"tmplItem"))&&(t=t.parentNode););return i||A},template:function(t,i){return i?("string"==typeof i?i=o(i):i instanceof e&&(i=i[0]||{}),i.nodeType&&(i=e.data(i,"tmpl")||e.data(i,"tmpl",o(i.innerHTML))),"string"==typeof t?e.template[t]=i:i):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,b.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(e){_={}},afterManip:function(t,i,a){var n=11===i.nodeType?e.makeArray(i.childNodes):1===i.nodeType?[i]:[];a.call(t,i),d(n),x++}})}(jQuery),function(e){function t(){return{cntr:++t.cntr,settings:e.extend({},e.tree.defaults),init:function(i,a){var n=this;if(this.container=e(i),0==this.container.size)return!1;if(t.inst[this.cntr]=this,this.container.attr("id")||this.container.attr("id","jstree_"+this.cntr),t.inst[this.container.attr("id")]=t.inst[this.cntr],t.focused=this.cntr,this.settings=e.extend(!0,{},this.settings,a),this.settings.languages&&this.settings.languages.length){this.current_lang=this.settings.languages[0];for(var o=!1,r="#"+this.container.attr("id"),s=0;s<this.settings.languages.length;s++)o=t.add_css(r+" ."+this.settings.languages[s]),o!==!1&&(o.style.display=this.settings.languages[s]==this.current_lang?"":"none")}else this.current_lang=!1;this.container.addClass("tree"),this.settings.ui.theme_name!==!1&&(this.settings.ui.theme_path===!1&&e("script").each(function(){if(this.src.toString().match(/jquery\.tree.*?js$/))return n.settings.ui.theme_path=this.src.toString().replace(/jquery\.tree.*?js$/,"")+"themes/"+n.settings.ui.theme_name+"/style.css",!1}),""!=this.settings.ui.theme_path&&e.inArray(this.settings.ui.theme_path,t.themes)==-1&&(t.add_sheet({url:this.settings.ui.theme_path}),t.themes.push(this.settings.ui.theme_path)),this.container.addClass("tree-"+this.settings.ui.theme_name));var l="";for(var d in this.settings.types)this.settings.types.hasOwnProperty(d)&&this.settings.types[d].icon&&(this.settings.types[d].icon.image||this.settings.types[d].icon.position)&&(l+="default"==d?"#"+this.container.attr("id")+" li > a ins { ":"#"+this.container.attr("id")+" li[rel="+d+"] > a ins { ",this.settings.types[d].icon.image&&(l+=" background-image:url("+this.settings.types[d].icon.image+"); "),this.settings.types[d].icon.position&&(l+=" background-position:"+this.settings.types[d].icon.position+"; "),l+="} ");""!=l&&t.add_sheet({str:l}),this.settings.rules.multiple&&(this.selected_arr=[]),this.offset=!1,this.hovered=!1,this.locked=!1,t.drag_drop.marker===!1&&(t.drag_drop.marker=e("<div>").attr({id:"jstree-marker"}).hide().appendTo("body")),this.callback("oninit",[this]),this.refresh(),this.attach_events(),this.focus()},refresh:function(t){if(this.locked)return this.error("LOCKED");var i=this;if(t&&!this.settings.data.async&&(t=!1),this.is_partial_refresh=!!t,this.opened=Array(),0!=this.settings.opened?(e.each(this.settings.opened,function(e,t){this.replace(/^#/,"").length>0&&i.opened.push("#"+this.replace(/^#/,""))}),this.settings.opened=!1):this.container.find("li.open").each(function(e){this.id&&i.opened.push("#"+this.id)}),this.selected)this.settings.selected=Array(),t?e(t).find("li:has(a.clicked)").each(function(){this.id&&i.settings.selected.push("#"+this.id)}):this.selected_arr?e.each(this.selected_arr,function(){this.attr("id")&&i.settings.selected.push("#"+this.attr("id"))}):this.selected.attr("id")&&this.settings.selected.push("#"+this.selected.attr("id"));else if(this.settings.selected!==!1){var a=Array();"object"==(typeof this.settings.selected).toLowerCase()?e.each(this.settings.selected,function(){this.replace(/^#/,"").length>0&&a.push("#"+this.replace(/^#/,""))}):this.settings.selected.replace(/^#/,"").length>0&&a.push("#"+this.settings.selected.replace(/^#/,"")),this.settings.selected=a}if(t&&this.settings.data.async)return this.opened=Array(),t=this.get_node(t),t.find("li.open").each(function(e){i.opened.push("#"+this.id)}),t.hasClass("open")&&t.removeClass("open").addClass("closed"),t.hasClass("leaf")&&t.removeClass("leaf"),t.children("ul:eq(0)").html(""),this.open_branch(t,!0,function(){i.reselect.apply(i)});var i=this,n=new e.tree.datastores[this.settings.data.type];0==this.container.children("ul").size()&&this.container.html("<ul class='ltr' style='direction:ltr;'><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(this.settings.lang.loading||"Loading ...")+"</a></li></ul>"),n.load(this.callback("beforedata",[!1,this]),this,this.settings.data.opts,function(t){t=i.callback("ondata",[t,i]),n.parse(t,i,i.settings.data.opts,function(t){t=i.callback("onparse",[t,i]),i.container.empty().append(e("<ul class='ltr'>").html(t)),i.container.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),i.container.find("li").not(".open").not(".closed").addClass("leaf"),i.reselect()})})},reselect:function(t){var i=this;if(t?this.cl_count--:this.cl_count=0,this.opened&&this.opened.length){for(var a=!1,n=0;this.opened&&n<this.opened.length;n++)if(this.settings.data.async){var o=this.get_node(this.opened[n]);if(o.size()&&o.hasClass("closed")>0){a=!0;var o=this.opened[n].toString().replace("/","\\/");delete this.opened[n],this.open_branch(o,!0,function(){i.reselect.apply(i,[!0])}),this.cl_count++}}else this.open_branch(this.opened[n],!0);if(this.settings.data.async&&a)return;if(this.cl_count>0)return;delete this.opened}this.cl_count>0||(this.container.css("direction","ltr").children("ul:eq(0)").addClass("ltr"),0==this.settings.ui.dots&&this.container.children("ul:eq(0)").addClass("no_dots"),this.scrtop&&(this.container.scrollTop(i.scrtop),delete this.scrtop),this.settings.selected!==!1&&(e.each(this.settings.selected,function(t){i.is_partial_refresh?i.select_branch(e(i.settings.selected[t].toString().replace("/","\\/"),i.container),i.settings.rules.multiple!==!1):i.select_branch(e(i.settings.selected[t].toString().replace("/","\\/"),i.container),i.settings.rules.multiple!==!1&&t>0)}),this.settings.selected=!1),this.callback("onload",[i]))},get:function(t,i,a){return i||(i=this.settings.data.type),a||(a=this.settings.data.opts),(new e.tree.datastores[i]).get(t,this,a)},attach_events:function(){var i=this;this.container.bind("mousedown.jstree",function(e){if(t.drag_drop.isdown)return t.drag_drop.move_type=!1,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}).bind("mouseup.jstree",function(e){setTimeout(function(){i.focus.apply(i)},5)}).bind("click.jstree",function(e){return!0}),e("#"+this.container.attr("id")+" li").live("click",function(t){return"LI"!=t.target.tagName||(i.off_height(),t.pageY-e(t.target).offset().top>i.li_height||(i.toggle_branch.apply(i,[t.target]),t.stopPropagation(),!1))}),e("#"+this.container.attr("id")+" li a").live("click.jstree",function(t){return!(!t.which||3!=t.which)||(i.locked?(t.preventDefault(),t.target.blur(),i.error("LOCKED")):(e(t.target).hasClass("controls")||e(t.target).parentsUntil("li").hasClass("controls")||(i.select_branch.apply(i,[t.target,t.ctrlKey||t.metaKey||"on"==i.settings.rules.multiple]),i.inp&&i.inp.blur()),t.preventDefault(),t.target.blur(),!1))}).live("dblclick.jstree",function(e){return i.locked?(e.preventDefault(),e.stopPropagation(),e.target.blur(),i.error("LOCKED")):(i.callback("ondblclk",[i.get_node(e.target).get(0),i]),e.preventDefault(),e.stopPropagation(),void e.target.blur())}).live("contextmenu.jstree",function(e){return i.locked?(e.target.blur(),i.error("LOCKED")):i.callback("onrgtclk",[i.get_node(e.target).get(0),i,e])}).live("mouseover.jstree",function(e){return i.locked?(e.preventDefault(),e.stopPropagation(),i.error("LOCKED")):(i.hovered===!1||"A"!=e.target.tagName&&"INS"!=e.target.tagName||(i.hovered.children("a").removeClass("hover"),i.hovered=!1),void i.callback("onhover",[i.get_node(e.target).get(0),i]))}).live("mousedown.jstree",function(a){if("left"==i.settings.rules.drag_button&&a.which&&1!=a.which)return!0;if("right"==i.settings.rules.drag_button&&a.which&&3!=a.which)return!0;if(i.focus.apply(i),i.locked)return i.error("LOCKED");var n=i.get_node(a.target);if(!e(a.target).hasClass("controls")&&!e(a.target).parentsUntil("li").hasClass("controls"))if(0!=i.settings.rules.multiple&&i.selected_arr.length>1&&n.children("a:eq(0)").hasClass("clicked")){var o=0;for(var r in i.selected_arr)i.selected_arr.hasOwnProperty(r)&&i.check("draggable",i.selected_arr[r])&&(i.selected_arr[r].addClass("dragged"),t.drag_drop.origin_tree=i,o++);if(o>0){i.check("draggable",n)?t.drag_drop.drag_node=n:t.drag_drop.drag_node=i.container.find("li.dragged:eq(0)"),t.drag_drop.isdown=!0,t.drag_drop.drag_help=e("<div id='jstree-dragged' class='tree "+(""!=i.settings.ui.theme_name?" tree-"+i.settings.ui.theme_name:"")+"' />").append("<ul class='"+i.container.children("ul:eq(0)").get(0).className+"' />");var s=t.drag_drop.drag_node.clone();i.settings.languages.length>0&&s.find("a").not("."+i.current_lang).hide(),t.drag_drop.drag_help.children("ul:eq(0)").append(s),t.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last").children("a").html("<ins>&nbsp;</ins>Multiple selection").end().children("ul").remove(),t.drag_drop.dragged=i.container.find("li.dragged")}}else if(i.check("draggable",n)){t.drag_drop.drag_node=n,t.drag_drop.drag_help=e("<div id='jstree-dragged' class='tree "+(""!=i.settings.ui.theme_name?" tree-"+i.settings.ui.theme_name:"")+"' />").append("<ul class='"+i.container.children("ul:eq(0)").get(0).className+"' />");var s=n.clone();i.settings.languages.length>0&&s.find("a").not("."+i.current_lang).hide(),t.drag_drop.drag_help.children("ul:eq(0)").append(s),t.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last"),t.drag_drop.isdown=!0,t.drag_drop.foreign=!1,t.drag_drop.origin_tree=i,n.addClass("dragged"),t.drag_drop.dragged=i.container.find("li.dragged")}return t.drag_drop.init_x=a.pageX,t.drag_drop.init_y=a.pageY,n.blur(),a.preventDefault(),a.stopPropagation(),!1})},focus:function(){return!this.locked&&void(t.focused!=this.cntr&&(t.focused=this.cntr,this.callback("onfocus",[this])))},off_height:function(){if(this.offset===!1){this.container.css({position:"relative"}),this.offset=this.container.offset();var t=0;t=parseInt(e.curCSS(this.container.get(0),"paddingTop",!0),10),t&&(this.offset.top+=t),t=parseInt(e.curCSS(this.container.get(0),"borderTopWidth",!0),10),t&&(this.offset.top+=t),this.container.css({position:""})}if(!this.li_height){var t=this.container.find("ul li.open, ul li.leaf").eq(0);this.li_height=t.height(),t.children("ul:eq(0)").size()&&(this.li_height-=t.children("ul:eq(0)").height()),this.li_height||(this.li_height=10)}},scroll_check:function(e,i){var a=this,n=a.container,o=a.container.offset(),r=n.scrollTop(),s=n.scrollLeft(),l=n.get(0).scrollWidth>n.width()?40:20;i-o.top<20&&n.scrollTop(Math.max(r-a.settings.ui.scroll_spd,0)),n.height()-(i-o.top)<l&&n.scrollTop(r+a.settings.ui.scroll_spd),e-o.left<20&&n.scrollLeft(Math.max(s-a.settings.ui.scroll_spd,0)),n.width()-(e-o.left)<40&&n.scrollLeft(s+a.settings.ui.scroll_spd),n.scrollLeft()==s&&n.scrollTop()==r||(t.drag_drop.move_type=!1,t.drag_drop.ref_node=!1,t.drag_drop.marker.hide()),t.drag_drop.scroll_time=setTimeout(function(){a.scroll_check(e,i)},50)},scroll_into_view:function(e){if(e=e?this.get_node(e):this.selected,!e)return!1;var t=e.offset().top,i=this.container.offset().top,a=i+this.container.height(),n=this.container.get(0).scrollWidth>this.container.width()?40:20;t+5<i&&this.container.scrollTop(this.container.scrollTop()-(i-t+5)),t+n>a&&this.container.scrollTop(this.container.scrollTop()+(t+n-a))},get_node:function(t){return e(t).closest("li")},get_type:function(e){if(e=e?this.get_node(e):this.selected){var t=e.attr(this.settings.rules.type_attr);return t||"default"}},set_type:function(e,t){t=t?this.get_node(t):this.selected,t&&e&&t.attr(this.settings.rules.type_attr,e)},get_text:function(e,t){if(e=this.get_node(e),!e||0==e.size())return"";this.settings.languages&&this.settings.languages.length?(t=t?t:this.current_lang,e=e.children("a."+t)):e=e.children("a:visible");var i="";return e.contents().each(function(){if(3==this.nodeType)return i=this.data,!1}),i},check:function(e,t){if(this.locked)return!1;var i=!1;if(t===-1)"undefined"!=typeof this.settings.rules[e]&&(i=this.settings.rules[e]);else{if(t=t?this.get_node(t):this.selected,!t)return;var a=this.get_type(t);"undefined"!=typeof this.settings.types[a]&&"undefined"!=typeof this.settings.types[a][e]?i=this.settings.types[a][e]:"undefined"!=typeof this.settings.types["default"]&&"undefined"!=typeof this.settings.types["default"][e]&&(i=this.settings.types["default"][e])}return"function"==typeof i&&(i=i.call(null,t,this)),i=this.callback("check",[e,t,i,this])},check_move:function(i,a,n){if(this.locked)return!1;if(e(a).closest("li.dragged").size())return!1;var o=i.parents(".tree:eq(0)").get(0),r=a.parents(".tree:eq(0)").get(0);if(o&&o!=r){var s=e.tree.reference(r.id).settings.rules.multitree;if("none"==s||e.isArray(s)&&e.inArray(o.id,s)==-1)return!1}var l="inside"!=n?this.parent(a):this.get_node(a);if(i=this.get_node(i),0==l)return!1;var d={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",l):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",l):-1,valid_children:this.check("valid_children",l)},c="string"==typeof i?i:this.get_type(i);if("undefined"!=typeof d.valid_children&&("none"==d.valid_children||"object"==typeof d.valid_children&&e.inArray(c,e.makeArray(d.valid_children))==-1))return!1;if(this.settings.rules.use_max_children&&"undefined"!=typeof d.max_children&&d.max_children!=-1){if(0==d.max_children)return!1;var u=1;if(1==t.drag_drop.moving&&0==t.drag_drop.foreign&&(u=t.drag_drop.dragged.size(),u-=l.find("> ul > li.dragged").size()),d.max_children<l.find("> ul > li").size()+u)return!1}if(this.settings.rules.use_max_depth){if("undefined"!=typeof d.max_depth&&0===d.max_depth)return this.error("MOVE: MAX-DEPTH REACHED");for(var p=d.max_depth>0&&d.max_depth,h=0,f=l;f!==-1;){f=this.parent(f),h++;var s=this.check("max_depth",f);if(s>=0&&(p=p===!1?s-h:Math.min(p,s-h)),p!==!1&&p<=0)return this.error("MOVE: MAX-DEPTH REACHED")}if(p!==!1&&p<=0)return this.error("MOVE: MAX-DEPTH REACHED");if(p!==!1){var m=1;if("string"!=typeof i)for(var f=i;f.size()>0;){if(p-m<0)return this.error("MOVE: MAX-DEPTH REACHED");f=f.children("ul").children("li"),m++}}}return 0!=this.callback("check_move",[i,a,n,this])},hover_branch:function(e){if(this.locked)return this.error("LOCKED");var t=this,e=t.get_node(e);return e.size()?t.check("clickable",e)?(this.hovered&&this.hovered.children("A").removeClass("hover"),this.hovered=e,this.hovered.children("a").addClass("hover"),void this.scroll_into_view(this.hovered)):this.error("SELECT: NODE NOT SELECTABLE"):this.error("HOVER: NOT A VALID NODE")},select_branch:function(e,t){if(this.locked)return this.error("LOCKED");e||this.hovered===!1||(e=this.hovered);var i=this;if(e=i.get_node(e),!e.size())return this.error("SELECT: NOT A VALID NODE");if(e.children("a").removeClass("hover"),!i.check("clickable",e))return this.error("SELECT: NODE NOT SELECTABLE");if(i.callback("beforechange",[e.get(0),i])===!1)return this.error("SELECT: STOPPED BY USER");if(0!=this.settings.rules.multiple&&t&&e.children("a.clicked").size()>0)return this.deselect_branch(e);if(0!=this.settings.rules.multiple&&t&&this.selected_arr.push(e),0!=this.settings.rules.multiple&&!t){for(var a in this.selected_arr)this.selected_arr.hasOwnProperty(a)&&(this.selected_arr[a].children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected_arr[a].get(0),i]));this.selected_arr=[],this.selected_arr.push(e),this.selected&&this.selected.children("A").hasClass("clicked")&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i]))}this.settings.rules.multiple||this.selected&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i])),this.selected=e,this.hovered!==!1&&(this.hovered.children("A").removeClass("hover"),this.hovered=e),this.selected.children("a").addClass("clicked").end().parents("li.closed").each(function(){i.open_branch(this,!0)}),this.scroll_into_view(this.selected),this.callback("onselect",[this.selected.get(0),i]),this.callback("onchange",[this.selected.get(0),i])},deselect_branch:function(t){if(this.locked)return this.error("LOCKED");var i=this,t=this.get_node(t);return 0==t.children("a.clicked").size()?this.error("DESELECT: NODE NOT SELECTED"):(t.children("a").removeClass("clicked"),this.callback("ondeselect",[t.get(0),i]),0!=this.settings.rules.multiple&&this.selected_arr.length>1?(this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){i.selected_arr.push(e(this))}),t.get(0)==this.selected.get(0)&&(this.selected=this.selected_arr[0])):(0!=this.settings.rules.multiple&&(this.selected_arr=[]),this.selected=!1),void this.callback("onchange",[t.get(0),i]))},toggle_branch:function(e){if(this.locked)return this.error("LOCKED");var e=this.get_node(e);return e.hasClass("closed")?this.open_branch(e):e.hasClass("open")?this.close_branch(e):void 0},open_branch:function(t,i,a){var n=this;if(this.locked)return this.error("LOCKED");var t=this.get_node(t);if(!t.size())return this.error("OPEN: NO SUCH NODE");if(t.hasClass("leaf"))return this.error("OPEN: OPENING LEAF NODE");if(this.settings.data.async&&0==t.find("li").size()){if(this.callback("beforeopen",[t.get(0),this])===!1)return this.error("OPEN: STOPPED BY USER");t.children("ul:eq(0)").remove().end().append("<ul><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(n.settings.lang.loading||"Loading ...")+"</a></li></ul>"),t.removeClass("closed").addClass("open");var o=new e.tree.datastores[this.settings.data.type];return o.load(this.callback("beforedata",[t,this]),this,this.settings.data.opts,function(i){return i=n.callback("ondata",[i,n]),i&&0!=i.length?void o.parse(i,n,n.settings.data.opts,function(i){i=n.callback("onparse",[i,n]),t.children("ul:eq(0)").replaceWith(e("<ul>").html(i)),t.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),t.find("li").not(".open").not(".closed").addClass("leaf"),n.open_branch.apply(n,[t]),a&&a.call()}):(t.removeClass("closed").removeClass("open").addClass("leaf").children("ul").remove(),void(a&&a.call()))}),!0}return this.settings.data.async||this.callback("beforeopen",[t.get(0),this])!==!1?(parseInt(this.settings.ui.animation)>0&&!i?(t.children("ul:eq(0)").css("display","none"),t.removeClass("closed").addClass("open"),t.children("ul:eq(0)").slideDown(parseInt(this.settings.ui.animation),function(){e(this).css("display",""),a&&a.call()})):(t.removeClass("closed").addClass("open"),a&&a.call()),this.callback("onopen",[t.get(0),this]),!0):this.error("OPEN: STOPPED BY USER")},close_branch:function(t,i){if(this.locked)return this.error("LOCKED");var a=this,t=this.get_node(t);return t.size()?a.callback("beforeclose",[t.get(0),a])===!1?this.error("CLOSE: STOPPED BY USER"):(parseInt(this.settings.ui.animation)>0&&!i&&1==t.children("ul:eq(0)").size()?t.children("ul:eq(0)").slideUp(parseInt(this.settings.ui.animation),function(){t.hasClass("open")&&t.removeClass("open").addClass("closed"),e(this).css("display","")}):t.hasClass("open")&&t.removeClass("open").addClass("closed"),this.selected&&this.settings.ui.selected_parent_close!==!1&&t.children("ul:eq(0)").find("a.clicked").size()>0&&(t.find("li:has(a.clicked)").each(function(){a.deselect_branch(this)}),"select_parent"==this.settings.ui.selected_parent_close&&0==t.children("a.clicked").size()&&this.select_branch(t,0!=this.settings.rules.multiple&&this.selected_arr.length>0)),void this.callback("onclose",[t.get(0),this])):this.error("CLOSE: NO SUCH NODE")},open_all:function(e,t){if(this.locked)return this.error("LOCKED");var i=this;e=e?this.get_node(e):this.container;var a=e.find("li.closed").size();t?this.cl_count--:this.cl_count=0,a>0?(this.cl_count+=a,e.find("li.closed").each(function(){
var e=this;i.open_branch.apply(i,[this,!0,function(){i.open_all.apply(i,[e,!0])}])})):0==this.cl_count&&this.callback("onopen_all",[this])},close_all:function(e){if(this.locked)return this.error("LOCKED");var t=this;e=e?this.get_node(e):this.container,e.find("li.open").each(function(){t.close_branch(this,!0)}),this.callback("onclose_all",[this])},set_lang:function(i){if(!e.isArray(this.settings.languages)||0==this.settings.languages.length)return!1;if(this.locked)return this.error("LOCKED");if(e.inArray(i,this.settings.languages)||"undefined"==typeof this.settings.languages[i]||(i=this.settings.languages[i]),"undefined"==typeof i)return!1;if(i==this.current_lang)return!0;var a=!1,n="#"+this.container.attr("id");return a=t.get_css(n+" ."+this.current_lang),a!==!1&&(a.style.display="none"),a=t.get_css(n+" ."+i),a!==!1&&(a.style.display=""),this.current_lang=i,!0},get_lang:function(){return!(!e.isArray(this.settings.languages)||0==this.settings.languages.length)&&this.current_lang},create:function(t,i,a){if(this.locked)return this.error("LOCKED");var n=!1;if(i==-1?(n=!0,i=this.container):i=i?this.get_node(i):this.selected,!(n||i&&i.size()))return this.error("CREATE: NO NODE SELECTED");var o=a,r=i;if("before"==a&&(a=i.parent().children().index(i),i=i.parents("li:eq(0)")),"after"==a&&(a=i.parent().children().index(i)+1,i=i.parents("li:eq(0)")),n||0!=i.size()||(n=!0,i=this.container),!n){if(!this.check("creatable",i))return this.error("CREATE: CANNOT CREATE IN NODE");if(i.hasClass("closed")){if(this.settings.data.async&&0==i.children("ul").size()){var s=this;return this.open_branch(i,!0,function(){s.create.apply(s,[t,i,a])})}this.open_branch(i,!0)}}var l=!1;if(t=t?e.extend(!0,{},t):{},t.attributes||(t.attributes={}),t.attributes[this.settings.rules.type_attr]||(t.attributes[this.settings.rules.type_attr]=this.get_type(r)||"default"),this.settings.languages.length){t.data||(t.data={},l=!0);for(var d=0;d<this.settings.languages.length;d++)t.data[this.settings.languages[d]]||(t.data[this.settings.languages[d]]="string"!=(typeof this.settings.lang.new_node).toLowerCase()&&this.settings.lang.new_node[d]?this.settings.lang.new_node[d]:this.settings.lang.new_node)}else t.data||(t.data=this.settings.lang.new_node,l=!0);t=this.callback("ondata",[t,this]);var c=e.tree.datastores.json().parse(t,this);c=this.callback("onparse",[c,this]);var u=e(c);u.children("ul").size()?u.is(".open")||u.addClass("closed"):u.addClass("leaf"),u.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),u.find("li").not(".open").not(".closed").addClass("leaf");var p={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",n?-1:i):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",n?-1:i):-1,valid_children:this.check("valid_children",n?-1:i)},h=this.get_type(u);if("undefined"!=typeof p.valid_children&&("none"==p.valid_children||e.isArray(p.valid_children)&&e.inArray(h,p.valid_children)==-1))return this.error("CREATE: NODE NOT A VALID CHILD");if(this.settings.rules.use_max_children&&"undefined"!=typeof p.max_children&&p.max_children!=-1&&p.max_children>=this.children(i).size())return this.error("CREATE: MAX_CHILDREN REACHED");if(this.settings.rules.use_max_depth){if("undefined"!=typeof p.max_depth&&0===p.max_depth)return this.error("CREATE: MAX-DEPTH REACHED");for(var f=p.max_depth>0&&p.max_depth,d=0,m=i;m!==-1&&!n;){m=this.parent(m),d++;var g=this.check("max_depth",m);if(g>=0&&(f=f===!1?g-d:Math.min(f,g-d)),f!==!1&&f<=0)return this.error("CREATE: MAX-DEPTH REACHED")}if(f!==!1&&f<=0)return this.error("CREATE: MAX-DEPTH REACHED");if(f!==!1)for(var v=1,m=u;m.size()>0;){if(f-v<0)return this.error("CREATE: MAX-DEPTH REACHED");m=m.children("ul").children("li"),v++}}if("undefined"!=(typeof a).toLowerCase()&&"inside"!=a||(a="top"==this.settings.rules.createat?0:i.children("ul:eq(0)").children("li").size()),0==i.children("ul").size()||1==n&&0==i.children("ul").children("li").size())if(n)var b=this.moved(u,this.container.children("ul:eq(0)"),"inside",!0);else var b=this.moved(u,i.children("a:eq(0)"),"inside",!0);else if("before"==o&&i.children("ul:eq(0)").children("li:nth-child("+(a+1)+")").size())var b=this.moved(u,i.children("ul:eq(0)").children("li:nth-child("+(a+1)+")").children("a:eq(0)"),"before",!0);else if("after"==o&&i.children("ul:eq(0)").children("li:nth-child("+a+")").size())var b=this.moved(u,i.children("ul:eq(0)").children("li:nth-child("+a+")").children("a:eq(0)"),"after",!0);else if(i.children("ul:eq(0)").children("li:nth-child("+(a+1)+")").size())var b=this.moved(u,i.children("ul:eq(0)").children("li:nth-child("+(a+1)+")").children("a:eq(0)"),"before",!0);else var b=this.moved(u,i.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!0);return b===!1?this.error("CREATE: ABORTED"):(l&&(this.select_branch(u.children("a:eq(0)")),this.rename()),u)},rename:function(t,i){if(this.locked)return this.error("LOCKED");t=t?this.get_node(t):this.selected;var a=this;if(!t||!t.size())return this.error("RENAME: NO NODE SELECTED");if(!this.check("renameable",t))return this.error("RENAME: NODE NOT RENAMABLE");if(!this.callback("beforerename",[t.get(0),a.current_lang,a]))return this.error("RENAME: STOPPED BY USER");t.parents("li.closed").each(function(){a.open_branch(this)}),t=this.current_lang?t.find("a."+this.current_lang):t.find("a:first");var n={};n[this.container.attr("id")]=this.get_rollback();var o=t.children("ins").clone();if("string"==(typeof i).toLowerCase())t.text(i).prepend(o),a.callback("onrename",[a.get_node(t).get(0),a,n]);else{var r="";t.contents().each(function(){if(3==this.nodeType)return r=this.data,!1}),a.inp=e("<input type='text' autocomplete='off' />"),a.inp.val(r.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")).bind("mousedown",function(e){e.stopPropagation()}).bind("mouseup",function(e){e.stopPropagation()}).bind("click",function(e){e.stopPropagation()}).bind("keyup",function(e){var t=e.keyCode||e.which;return 27==t?(this.value=r,void this.blur()):13==t?void this.blur():void 0}),a.inp.blur(function(e){""==this.value&&(this.value=r),t.text(this.value).prepend(o),t.get(0).style.display="",t.prevAll("span").remove(),a.inp=!1,a.callback("onrename",[a.get_node(t).get(0),a,n])});var s=e("<span />").addClass(t.attr("class")).append(o).append(a.inp);t.get(0).style.display="none",t.parent().prepend(s),a.inp.get(0).focus(),a.inp.get(0).select()}},remove:function(t){if(this.locked)return this.error("LOCKED");var i=this,a={};if(a[this.container.attr("id")]=this.get_rollback(),!t||this.selected&&this.get_node(t).get(0)==this.selected.get(0)){if(!this.selected)return this.error("DELETE: NO NODE SELECTED");if(!this.check("deletable",this.selected))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[this.selected.get(0),i]))return this.error("DELETE: STOPPED BY USER");$parent=this.selected.parent();var t=this.selected;if(0==this.settings.rules.multiple||1==this.selected_arr.length)var n=!0,o="select_previous"==this.settings.ui.selected_delete&&this.prev(this.selected);if(t=t.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),!n&&0!=this.settings.rules.multiple){var i=this;this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){i.selected_arr.push(e(this))}),this.selected_arr.length>0&&(this.selected=this.selected_arr[0],this.remove())}n&&o&&this.select_branch(o),this.callback("ondelete",[t.get(0),this,a])}else if(t=this.get_node(t),t.size()){if(!this.check("deletable",t))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[t.get(0),i]))return this.error("DELETE: STOPPED BY USER");if($parent=t.parent(),t.find("a.clicked").size()){var r=!1;i.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each(function(){return r||this!=i.selected.get(0)||(r=!0),e(this).parents().index(t)!=-1||void i.selected_arr.push(e(this))}),r&&(this.selected=this.selected_arr[0]||!1)}t=t.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),this.callback("ondelete",[t.get(0),this,a])}},next:function(e,t){return e=this.get_node(e),!!e.size()&&(t?e.nextAll("li").size()>0&&e.nextAll("li:eq(0)"):e.hasClass("open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parents("li").next("li").eq(0))},prev:function(e,t){if(e=this.get_node(e),!e.size())return!1;if(t)return e.prevAll("li").size()>0&&e.prevAll("li:eq(0)");if(e.prev("li").size()){for(var e=e.prev("li").eq(0);e.hasClass("open");)e=e.children("ul:eq(0)").children("li:last");return e}return!!e.parents("li:eq(0)").size()&&e.parents("li:eq(0)")},parent:function(e){return e=this.get_node(e),!!e.size()&&(e.parents("li:eq(0)").size()?e.parents("li:eq(0)"):-1)},children:function(e){return e===-1?this.container.children("ul:eq(0)").children("li"):(e=this.get_node(e),!!e.size()&&e.children("ul:eq(0)").children("li"))},toggle_dots:function(){this.settings.ui.dots?(this.settings.ui.dots=!1,this.container.children("ul:eq(0)").addClass("no_dots")):(this.settings.ui.dots=!0,this.container.children("ul:eq(0)").removeClass("no_dots"))},callback:function(t,i){var a=!1,n=null;for(var o in this.settings.plugins)if("object"==typeof e.tree.plugins[o]&&(a=e.tree.plugins[o],a.callbacks&&"function"==typeof a.callbacks[t]&&(n=a.callbacks[t].apply(this,i)),"undefined"!=typeof n&&null!==n)){if("ondata"!=t&&"onparse"!=t)return n;i[0]=n}if(a=this.settings.callback[t],"function"==typeof a)return a.apply(null,i)},get_rollback:function(){var e={};return e.html=this.container.html(),e.selected=!!this.selected&&this.selected.attr("id"),e},moved:function(i,a,n,o,r,s,l){var i=e(i),d=e(i).parents("ul:eq(0)"),c=e(a);if(c.is("ins")&&(c=c.parent()),"undefined"==typeof l&&(l=0),!s){var s={};if(s[this.container.attr("id")]=this.get_rollback(),!o){var u=i.size()>1?i.eq(0).parents(".tree:eq(0)"):i.parents(".tree:eq(0)");u.get(0)!=this.container.get(0)&&(u=t.inst[u.attr("id")],s[u.container.attr("id")]=u.get_rollback()),delete u}}if("inside"==n&&this.settings.data.async){var p=this;if(this.get_node(c).hasClass("closed"))return this.open_branch(this.get_node(c),!0,function(){p.moved.apply(p,[i,a,n,o,r,s])});if(1==this.get_node(c).find("> ul > li > a.loading").size())return void setTimeout(function(){p.moved.apply(p,[i,a,n,o,r])},200)}if(i.size()>1){var p=this,u=this.moved(i.eq(0),a,n,!1,r,s,1),h=[];return i.each(function(t){h.push(e(this)),0!=t&&u&&(u=p.moved(this,u.children("a:eq(0)"),"after",!1,r,s,1))}),this.callback("onmove",[h,this.get_node(a).get(0),n,this,s]),i}if(r?(_what=i.clone(),_what.each(function(t){this.id=this.id+"_copy",e(this).find("li").each(function(){this.id=this.id+"_copy"}),e(this).removeClass("dragged").find("a.clicked").removeClass("clicked").end().find("li.dragged").removeClass("dragged")})):_what=i,o){if(!this.callback("beforecreate",[this.get_node(i).get(0),this.get_node(a).get(0),n,this]))return!1}else if(!this.callback("beforemove",[this.get_node(i).get(0),this.get_node(a).get(0),n,this]))return!1;if(!o){var u=i.parents(".tree:eq(0)");if(u.get(0)!=this.container.get(0)){if(u=t.inst[u.attr("id")],u.settings.languages.length){var f=[];if(0==this.settings.languages.length)f.push("."+u.current_lang);else for(var m in this.settings.languages)if(this.settings.languages.hasOwnProperty(m))for(var g in u.settings.languages)u.settings.languages.hasOwnProperty(g)&&this.settings.languages[m]==u.settings.languages[g]&&f.push("."+this.settings.languages[m]);if(0==f.length)return this.error("MOVE: NO COMMON LANGUAGES");_what.find("a").not(f.join(",")).remove()}_what.find("a.clicked").removeClass("clicked")}}switch(i=_what,n){case"before":c.parents("ul:eq(0)").children("li.last").removeClass("last"),c.parent().before(i.removeClass("last")),c.parents("ul:eq(0)").children("li:last").addClass("last");break;case"after":c.parents("ul:eq(0)").children("li.last").removeClass("last"),c.parent().after(i.removeClass("last")),c.parents("ul:eq(0)").children("li:last").addClass("last");break;case"inside":c.parent().children("ul:first").size()?"top"==this.settings.rules.createat?c.parent().children("ul:first").prepend(i.removeClass("last")).children("li:last").addClass("last"):c.parent().children("ul:first").children(".last").removeClass("last").end().append(i.removeClass("last")).children("li:last").addClass("last"):(i.addClass("last"),c.parent().removeClass("leaf").append("<ul/>"),c.parent().hasClass("open")||c.parent().addClass("closed"),c.parent().children("ul:first").prepend(i)),c.parent().hasClass("closed")&&this.open_branch(c)}if(0==d.find("li").size()){var v=d.parent();v.removeClass("open").removeClass("closed").addClass("leaf"),v.is(".tree")||v.children("ul").remove(),v.parents("ul:eq(0)").children("li.last").removeClass("last").end().children("li:last").addClass("last")}else d.children("li.last").removeClass("last"),d.children("li:last").addClass("last");return r?this.callback("oncopy",[this.get_node(i).get(0),this.get_node(a).get(0),n,this,s]):o?this.callback("oncreate",[this.get_node(i).get(0),c.is("ul")?-1:this.get_node(a).get(0),n,this,s]):l||this.callback("onmove",[this.get_node(i).get(0),this.get_node(a).get(0),n,this,s]),i},error:function(e){return this.callback("error",[e,this]),!1},lock:function(e){this.locked=e,this.locked?this.container.children("ul:eq(0)").addClass("locked"):this.container.children("ul:eq(0)").removeClass("locked")},cut:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent(),e&&e.size()?(t.cut_copy.copy_nodes=!1,void(t.cut_copy.cut_nodes=e)):this.error("CUT: NO NODE SELECTED"))},copy:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent(),e&&e.size()?(t.cut_copy.copy_nodes=e,void(t.cut_copy.cut_nodes=!1)):this.error("COPY: NO NODE SELECTED"))},paste:function(e,i){if(this.locked)return this.error("LOCKED");var a=!1;if(e==-1?(a=!0,e=this.container):e=e?this.get_node(e):this.selected,!(a||e&&e.size()))return this.error("PASTE: NO NODE SELECTED");if(!t.cut_copy.copy_nodes&&!t.cut_copy.cut_nodes)return this.error("PASTE: NOTHING TO DO");var n=i;if("before"==i?(i=e.parent().children().index(e),e=e.parents("li:eq(0)")):"after"==i?(i=e.parent().children().index(e)+1,e=e.parents("li:eq(0)")):"undefined"!=(typeof i).toLowerCase()&&"inside"!=i||(i="top"==this.settings.rules.createat?0:e.children("ul:eq(0)").children("li").size()),a||0!=e.size()||(a=!0,e=this.container),t.cut_copy.copy_nodes&&t.cut_copy.copy_nodes.size()){var o=!0;if(!a&&!this.check_move(t.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside"))return!1;if(0==e.children("ul").size()||1==a&&0==e.children("ul").children("li").size())if(a){this.moved(t.cut_copy.copy_nodes,this.container.children("ul:eq(0)"),"inside",!1,!0)}else{this.moved(t.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside",!1,!0)}else if("before"==n&&e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()){this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!1,!0)}else if("after"==n&&e.children("ul:eq(0)").children("li:nth-child("+i+")").size()){this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+i+")").children("a:eq(0)"),"after",!1,!0)}else if(e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()){this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!1,!0)}else{this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!1,!0)}t.cut_copy.copy_nodes=!1}if(t.cut_copy.cut_nodes&&t.cut_copy.cut_nodes.size()){var o=!0;if(e.parents().andSelf().each(function(){if(t.cut_copy.cut_nodes.index(this)!=-1)return o=!1,!1}),!o)return this.error("Invalid paste");if(!a&&!this.check_move(t.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside"))return!1;if(0==e.children("ul").size()||1==a&&0==e.children("ul").children("li").size())if(a){this.moved(t.cut_copy.cut_nodes,this.container.children("ul:eq(0)"),"inside")}else{this.moved(t.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside")}else if("before"==n&&e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()){this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before")}else if("after"==n&&e.children("ul:eq(0)").children("li:nth-child("+i+")").size()){this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+i+")").children("a:eq(0)"),"after")}else if(e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()){this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before")}else{this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after")}t.cut_copy.cut_nodes=!1}},search:function(t,i){var a=this;if((!t||this.srch&&t!=this.srch)&&(this.srch="",this.srch_opn=!1,this.container.find("a.search").removeClass("search")),this.srch=t,t)if(i||(i="contains"),this.settings.data.async)if(this.srch_opn)if(this.srch_opn.length){if(this.srch_opn&&this.srch_opn.length){for(var n=!1,o=0;o<this.srch_opn.length;o++)if(this.get_node("#"+this.srch_opn[o]).size()>0){n=!0;var r="#"+this.srch_opn[o];delete this.srch_opn[o],this.open_branch(r,!0,function(){a.search.apply(a,[t,i])})}n||(this.srch_opn=[],a.search.apply(a,[t,i]))}}else{this.srch_opn=!1;var s="a";this.settings.languages.length&&(s+="."+this.current_lang),this.callback("onsearch",[this.container.find(s+":"+i+"('"+t+"')"),this])}else{var l=e.extend({search:t},this.callback("beforedata",[!1,this]));e.ajax({type:this.settings.data.opts.method,url:this.settings.data.opts.url,data:l,dataType:"text",success:function(n){a.srch_opn=e.unique(n.split(",")),a.search.apply(a,[t,i])}})}else{var s="a";this.settings.languages.length&&(s+="."+this.current_lang);var d=this.container.find(s+":"+i+"('"+t+"')");d.parents("li.closed").each(function(){a.open_branch(this,!0)}),this.callback("onsearch",[d,this])}},add_sheet:t.add_sheet,destroy:function(){if(this.callback("ondestroy",[this]),this.container.unbind(".jstree"),e("#"+this.container.attr("id")).die("click.jstree").die("dblclick.jstree").die("mouseover.jstree").die("mouseout.jstree").die("mousedown.jstree"),this.container.removeClass("tree ui-widget ui-widget-content tree-default tree-"+this.settings.ui.theme_name).children("ul").removeClass("no_dots ltr locked").find("li").removeClass("leaf").removeClass("open").removeClass("closed").removeClass("last").children("a").removeClass("clicked hover search"),this.cntr==t.focused)for(var i in t.inst)if(i!=this.cntr&&i!=this.container.attr("id")){t.inst[i].focus();break}t.inst[this.cntr]=!1,t.inst[this.container.attr("id")]=!1,delete t.inst[this.cntr],delete t.inst[this.container.attr("id")],t.cntr--}}}e.tree={datastores:{},plugins:{},defaults:{data:{async:!1,type:"html",opts:{method:"GET",url:!1}},selected:!1,opened:[],languages:[],ui:{dots:!0,animation:0,scroll_spd:4,theme_path:!1,theme_name:"default",selected_parent_close:"select_parent",selected_delete:"select_previous"},types:{"default":{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:"all",icon:{image:!1,position:!1}}},rules:{multiple:!1,multitree:"none",type_attr:"rel",createat:"bottom",drag_copy:"ctrl",drag_button:"left",use_max_children:!0,use_max_depth:!0,max_children:-1,max_depth:-1,valid_children:"all"},lang:{new_node:"New folder",loading:"Loading ..."},callback:{beforechange:function(e,t){return!0},beforeopen:function(e,t){return!0},beforeclose:function(e,t){return!0},beforemove:function(e,t,i,a){return!0},beforecreate:function(e,t,i,a){return!0},beforerename:function(e,t,i){return!0},beforedelete:function(e,t){return!0},beforedata:function(t,i){return{id:e(t).attr("id")||0}},ondata:function(e,t){return e},onparse:function(e,t){return e},onhover:function(e,t){},onselect:function(e,t){},ondeselect:function(e,t){},onchange:function(e,t){},onrename:function(e,t,i){},onmove:function(e,t,i,a,n){},oncopy:function(e,t,i,a,n){},oncreate:function(e,t,i,a,n){},ondelete:function(e,t,i){},onopen:function(e,t){},onopen_all:function(e){},onclose_all:function(e){},onclose:function(e,t){},error:function(e,t){},ondblclk:function(e,t){t.toggle_branch.call(t,e),t.select_branch.call(t,e)},onrgtclk:function(e,t,i){},onload:function(e){},oninit:function(e){},onfocus:function(e){},ondestroy:function(e){},onsearch:function(e,t){e.addClass("search")},ondrop:function(e,t,i,a){},check:function(e,t,i,a){return i},check_move:function(e,t,i,a){return!0}},plugins:{}},create:function(){return new t},focused:function(){return t.inst[t.focused]},reference:function(i){var a=e(i);return a.size()||(a=e("#"+i)),a.size()?(a=a.is(".tree")?a.attr("id"):a.parents(".tree:eq(0)").attr("id"),t.inst[a]||null):null},rollback:function(i){for(var a in i)if(i.hasOwnProperty(a)){var n=t.inst[a],o=!n.locked;o&&n.lock(!0),n.inp=!1,n.container.html(i[a].html).find(".dragged").removeClass("dragged").end().find(".hover").removeClass("hover"),i[a].selected&&(n.selected=e("#"+i[a].selected),n.selected_arr=[],n.container.find("a.clicked").each(function(){n.selected_arr.push(n.get_node(this))})),o&&n.lock(!1),delete o,delete n}},drop_mode:function(i){i=e.extend(i,{show:!1,type:"default",str:"Foreign node"}),t.drag_drop.foreign=!0,t.drag_drop.isdown=!0,t.drag_drop.moving=!0,t.drag_drop.appended=!1,t.drag_drop.f_type=i.type,t.drag_drop.f_data=i,i.show?(t.drag_drop.drag_help=e("<div id='jstree-dragged' class='tree tree-default'><ul><li class='last dragged foreign'><a href='#'><ins>&nbsp;</ins>"+i.str+"</a></li></ul></div>"),t.drag_drop.drag_node=t.drag_drop.drag_help.find("li:eq(0)")):(t.drag_drop.drag_help=!1,t.drag_drop.drag_node=!1),e.tree.drag_start!==!1&&e.tree.drag_start.call(null,!1)},drag_start:!1,drag:!1,drag_end:!1},e.fn.tree=function(i){return this.each(function(){var a=e.extend({},i);t.inst&&t.inst[e(this).attr("id")]&&t.inst[e(this).attr("id")].destroy(),a!==!1&&(new t).init(this,a)})},t.cntr=0,t.inst={},t.themes=[],t.drag_drop={isdown:!1,drag_node:!1,drag_help:!1,dragged:!1,init_x:!1,init_y:!1,moving:!1,origin_tree:!1,marker:!1,move_type:!1,ref_node:!1,appended:!1,foreign:!1,droppable:[],open_time:!1,scroll_time:!1},t.mouseup=function(i){var a=t.drag_drop;if(a.open_time&&clearTimeout(a.open_time),a.scroll_time&&clearTimeout(a.scroll_time),a.moving&&e.tree.drag_end!==!1&&e.tree.drag_end.call(null,i,a),a.foreign===!1&&a.drag_node&&a.drag_node.size()){if(a.drag_help.remove(),a.move_type){var n=t.inst[a.ref_node.parents(".tree:eq(0)").attr("id")];n&&n.moved(a.dragged,a.ref_node,a.move_type,!1,"on"==a.origin_tree.settings.rules.drag_copy||"ctrl"==a.origin_tree.settings.rules.drag_copy&&(i.ctrlKey||i.metaKey))}a.move_type=!1,a.ref_node=!1}if(a.foreign!==!1){if(a.drag_help&&a.drag_help.remove(),a.move_type){var n=t.inst[a.ref_node.parents(".tree:eq(0)").attr("id")];n&&n.callback("ondrop",[a.f_data,n.get_node(a.ref_node).get(0),a.move_type,n])}a.foreign=!1,a.move_type=!1,a.ref_node=!1}if(t.drag_drop.marker&&t.drag_drop.marker.hide(),a.dragged&&a.dragged.size()&&a.dragged.removeClass("dragged"),a.dragged=!1,a.drag_help=!1,a.drag_node=!1,a.f_type=!1,a.f_data=!1,a.init_x=!1,a.init_y=!1,a.moving=!1,a.appended=!1,a.origin_tree=!1,a.isdown)return a.isdown=!1,i.preventDefault(),i.stopPropagation(),!1},t.mousemove=function(i){var a=t.drag_drop,n=!1;if(a.isdown){if(!a.moving&&Math.abs(a.init_x-i.pageX)<5&&Math.abs(a.init_y-i.pageY)<5)return i.preventDefault(),i.stopPropagation(),!1;if(a.moving||(t.drag_drop.moving=!0,n=!0),a.open_time&&clearTimeout(a.open_time),a.drag_help!==!1&&(a.appended||(a.foreign!==!1&&(a.origin_tree=e.tree.focused()),e("body").append(a.drag_help),a.w=a.drag_help.width(),a.appended=!0),a.drag_help.css({left:i.pageX+5,top:i.pageY+15})),n&&e.tree.drag_start!==!1&&e.tree.drag_start.call(null,i,a),e.tree.drag!==!1&&e.tree.drag.call(null,i,a),"DIV"==i.target.tagName&&"jstree-marker"==i.target.id)return!1;var o=e(i.target);o.is("ins")&&(o=o.parent());var r=o.is(".tree")?o:o.parents(".tree:eq(0)");if(0==r.size()||!t.inst[r.attr("id")])return a.scroll_time&&clearTimeout(a.scroll_time),a.drag_help!==!1&&a.drag_help.find("li:eq(0) ins").addClass("forbidden"),a.move_type=!1,a.ref_node=!1,t.drag_drop.marker.hide(),!1;var s=t.inst[r.attr("id")];s.off_height(),a.scroll_time&&clearTimeout(a.scroll_time),a.scroll_time=setTimeout(function(){s.scroll_check(i.pageX,i.pageY)},50);var l=!1;r.scrollTop();if("A"==i.target.tagName||"INS"==i.target.tagName){if(o.is("#jstree-dragged"))return!1;s.get_node(i.target).hasClass("closed")&&(a.open_time=setTimeout(function(){s.open_branch(o)},500));var d=o.offset(),c={x:d.left-1,y:i.pageY-d.top},u=[];u=c.y<s.li_height/3+1?["before","inside","after"]:c.y>2*s.li_height/3-1?["after","inside","before"]:c.y<s.li_height/2?["inside","before","after"]:["inside","after","before"];var p=!1,h=0==a.foreign?a.origin_tree.container.find("li.dragged"):a.f_type;if(e.each(u,function(e,t){if(s.check_move(h,o,t))return l=t,p=!0,!1}),p){switch(l){case"before":c.y=d.top-2,t.drag_drop.marker.attr("class","marker");break;case"after":c.y=d.top-2+s.li_height,t.drag_drop.marker.attr("class","marker");break;case"inside":c.x-=2,c.y=d.top-2+s.li_height/2,t.drag_drop.marker.attr("class","marker_plus")}a.move_type=l,a.ref_node=e(i.target),a.drag_help!==!1&&a.drag_help.find(".forbidden").removeClass("forbidden"),t.drag_drop.marker.css({left:c.x,top:c.y}).show()}}if((o.is(".tree")||o.is("ul"))&&0==o.find("li:eq(0)").size()){var d=o.offset();a.move_type="inside",a.ref_node=r.children("ul:eq(0)"),a.drag_help!==!1&&a.drag_help.find(".forbidden").removeClass("forbidden"),t.drag_drop.marker.attr("class","marker_plus"),t.drag_drop.marker.css({left:d.left+10,top:d.top+15}).show()}else("A"!=i.target.tagName&&"INS"!=i.target.tagName||!p)&&(a.drag_help!==!1&&a.drag_help.find("li:eq(0) ins").addClass("forbidden"),a.move_type=!1,a.ref_node=!1,t.drag_drop.marker.hide());return i.preventDefault(),i.stopPropagation(),!1}return!0},e(function(){e(document).bind("mousemove.jstree",t.mousemove),e(document).bind("mouseup.jstree",t.mouseup)}),t.cut_copy={copy_nodes:!1,cut_nodes:!1},t.css=!1,t.get_css=function(e,a){e=e.toLowerCase();var n=t.css.cssRules||t.css.rules,o=0;do{if(n.length&&o>n.length+5)return!1;if(n[o].selectorText&&n[o].selectorText.toLowerCase()==e)return 1==a?(t.css.removeRule&&document.styleSheets[i].removeRule(o),t.css.deleteRule&&document.styleSheets[i].deleteRule(o),!0):n[o]}while(n[++o]);return!1},t.add_css=function(e){return!t.get_css(e)&&(t.css.insertRule?t.css.insertRule(e+" { }",0):t.css.addRule(e,null,0),t.get_css(e))},t.remove_css=function(e){return t.get_css(e,!0)},t.add_sheet=function(e){if(e.str){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e.str:t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t),t.sheet}if(e.url){if(!document.createStyleSheet){var i=document.createElement("link");return i.rel="stylesheet",i.type="text/css",i.media="all",i.href=e.url,document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet}try{document.createStyleSheet(e.url)}catch(a){}}},e(function(){var e=navigator.userAgent.toLowerCase(),i=(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],a="";/msie/.test(e)&&!/opera/.test(e)&&6==parseInt(i)&&(a+='.tree li { height:18px; zoom:1; } .tree li li { overflow:visible; } .tree .ltr li.last { margin-top: expression( (this.previousSibling && /open/.test(this.previousSibling.className) ) ? "-2px" : "0"); } .marker { width:45px; background-position:-32px top; } .marker_plus { width:5px; background-position:right top; }'),/opera/.test(e)&&(a+='.tree > ul > li.last:after { content:"."; display: block; height:1px; clear:both; visibility:hidden; }'),/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)&&0==i.indexOf("1.8")&&(a+=".tree .ltr li a { display:inline; float:left; } .tree li ul { clear:both; }"),t.css=t.add_sheet({str:a})})}(jQuery),function(e){e.extend(e.tree.datastores,{html:function(){return{get:function(t,i,a){return t&&e(t).size()?e("<div>").append(i.get_node(t).clone()).html():i.container.children("ul:eq(0)").html()},parse:function(e,t,i,a){return a&&a.call(null,e),e},load:function(t,i,a,n){a.url?e.ajax({type:a.method,url:a.url,data:t,dataType:"html",success:function(e,t){n.call(null,e)},error:function(e,t,a){n.call(null,!1),i.error(a+" "+t)}}):n.call(null,a["static"]||i.container.children("ul:eq(0)").html())}}},json:function(){return{get:function(t,i,a){var n=this;if(t=t&&0!=e(t).size()?e(t):i.container.children("ul").children("li"),a||(a={}),a.outer_attrib||(a.outer_attrib=["id","rel","class"]),a.inner_attrib||(a.inner_attrib=[]),t.size()>1){var o=[];return t.each(function(){o.push(n.get(this,i,a))}),o}if(0==t.size())return[];var r={attributes:{},data:{}};t.hasClass("open")&&(r.data.state="open"),t.hasClass("closed")&&(r.data.state="closed");for(var s in a.outer_attrib)if(a.outer_attrib.hasOwnProperty(s)){var l="class"==a.outer_attrib[s]?t.attr(a.outer_attrib[s]).replace(/(^| )last( |$)/gi," ").replace(/(^| )(leaf|closed|open)( |$)/gi," "):t.attr(a.outer_attrib[s]);"undefined"!=typeof l&&l.toString().replace(" ","").length>0&&(r.attributes[a.outer_attrib[s]]=l),delete l}if(i.settings.languages.length){for(var s in i.settings.languages)if(i.settings.languages.hasOwnProperty(s)){var d=t.children("a."+i.settings.languages[s]);if(a.force||a.inner_attrib.length||d.children("ins").get(0).style.backgroundImage.toString().length||d.children("ins").get(0).className.length){if(r.data[i.settings.languages[s]]={},r.data[i.settings.languages[s]].title=i.get_text(t,i.settings.languages[s]),d.children("ins").get(0).style.className.length&&(r.data[i.settings.languages[s]].icon=d.children("ins").get(0).style.className),d.children("ins").get(0).style.backgroundImage.length&&(r.data[i.settings.languages[s]].icon=d.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),a.inner_attrib.length){r.data[i.settings.languages[s]].attributes={};for(var c in a.inner_attrib)if(a.inner_attrib.hasOwnProperty(c)){var l=d.attr(a.inner_attrib[c]);"undefined"!=typeof l&&l.toString().replace(" ","").length>0&&(r.data[i.settings.languages[s]].attributes[a.inner_attrib[c]]=l),delete l}}}else r.data[i.settings.languages[s]]=i.get_text(t,i.settings.languages[s])}}else{var d=t.children("a");if(r.data.title=i.get_text(t),d.children("ins").size()&&d.children("ins").get(0).className.length&&(r.data.icon=d.children("ins").get(0).className),d.children("ins").size()&&d.children("ins").get(0).style.backgroundImage.length&&(r.data.icon=d.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),a.inner_attrib.length){r.data.attributes={};for(var c in a.inner_attrib)if(a.inner_attrib.hasOwnProperty(c)){var l=d.attr(a.inner_attrib[c]);"undefined"!=typeof l&&l.toString().replace(" ","").length>0&&(r.data.attributes[a.inner_attrib[c]]=l),delete l}}}return t.children("ul").size()>0&&(r.children=[],t.children("ul").children("li").each(function(){r.children.push(n.get(this,i,a))})),r},parse:function(e,t,i,a){if("[object Array]"===Object.prototype.toString.apply(e)){for(var n="",o=0;o<e.length;o++)"function"!=typeof e[o]&&(n+=this.parse(e[o],t,i));return a&&a.call(null,n),n}if(!e||!e.data&&""!=e.data)return a&&a.call(null,!1),"";var n="";n+="<li ";var r=!1;if(e.attributes)for(var o in e.attributes)e.attributes.hasOwnProperty(o)&&("class"==o?(n+=" class='"+e.attributes[o]+" ","closed"!=e.state&&"open"!=e.state||(n+=" "+e.state+" "),
n+="' ",r=!0):n+=" "+o+"='"+e.attributes[o]+"' ");if(r||"closed"!=e.state&&"open"!=e.state||(n+=" class='"+e.state+"' "),n+=">",t.settings.languages.length)for(var o=0;o<t.settings.languages.length;o++){var s={};if(s.href="",s.style="",s["class"]=t.settings.languages[o],e.data[t.settings.languages[o]]&&"undefined"!=(typeof e.data[t.settings.languages[o]].attributes).toLowerCase())for(var l in e.data[t.settings.languages[o]].attributes)e.data[t.settings.languages[o]].attributes.hasOwnProperty(l)&&("style"==l||"class"==l?s[l]+=" "+e.data[t.settings.languages[o]].attributes[l]:s[l]=e.data[t.settings.languages[o]].attributes[l]);n+="<a";for(var l in s)s.hasOwnProperty(l)&&(n+=" "+l+'="'+s[l]+'" ');n+=">",n+=e.data[t.settings.languages[o]]&&e.data[t.settings.languages[o]].icon?"<ins "+(e.data[t.settings.languages[o]].icon.indexOf("/")==-1?" class='"+e.data[t.settings.languages[o]].icon+"' ":" style='background-image:url(\""+e.data[t.settings.languages[o]].icon+"\");' ")+">&nbsp;</ins>":"<ins>&nbsp;</ins>",n+=("undefined"!=(typeof e.data[t.settings.languages[o]].title).toLowerCase()?e.data[t.settings.languages[o]].title:e.data[t.settings.languages[o]])+"</a>"}else{var s={};if(s.href="",s.style="",s["class"]="","undefined"!=(typeof e.data.attributes).toLowerCase())for(var o in e.data.attributes)e.data.attributes.hasOwnProperty(o)&&("style"==o||"class"==o?s[o]+=" "+e.data.attributes[o]:s[o]=e.data.attributes[o]);n+="<a";for(var o in s)s.hasOwnProperty(o)&&(n+=" "+o+'="'+s[o]+'" ');n+=">",n+=e.data.icon?"<ins "+(e.data.icon.indexOf("/")==-1?" class='"+e.data.icon+"' ":" style='background-image:url(\""+e.data.icon+"\");' ")+">&nbsp;</ins>":"<ins>&nbsp;</ins>",n+=("undefined"!=(typeof e.data.title).toLowerCase()?e.data.title:e.data)+"</a>"}if(e.children&&e.children.length){n+="<ul>";for(var o=0;o<e.children.length;o++)n+=this.parse(e.children[o],t,i);n+="</ul>"}return n+="</li>",a&&a.call(null,n),n},load:function(t,i,a,n){a["static"]?n.call(null,a["static"]):e.ajax({type:a.method,url:a.url,data:t,dataType:"json",success:function(e,t){n.call(null,e)},error:function(e,t,a){n.call(null,!1),i.error(a+" "+t)}})}}}})}(jQuery);var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,a,n,o,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;i<o;i+=1)r[i]=str(i,l)||"null";return n=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,n}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;i<o;i+=1)"string"==typeof rep[i]&&(a=rep[i],n=str(a,l),n&&r.push(quote(a)+(gap?": ":":")+n));else for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(n=str(a,l),n&&r.push(quote(a)+(gap?": ":":")+n));return n=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var a;if(gap="",indent="","number"==typeof i)for(a=0;a<i;a+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,a,n=e[t];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a=walk(n,i),void 0!==a?n[i]=a:delete n[i]);return reviver.call(e,t,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t,i){function a(i,a,n){var o=t.createElement(i);return a&&(o.id=ee+a),n&&(o.style.cssText=n),e(o)}function n(){return i.innerHeight?i.innerHeight:e(i).height()}function o(e){var t=$.length,i=(V+e)%t;return 0>i?t+i:i}function r(e,t){return Math.round((/%/.test(e)?("x"===t?C.width():n())/100:1)*parseInt(e,10))}function s(e,t){return e.photo||e.photoRegex.test(t)}function l(e,t){return e.retinaUrl&&i.devicePixelRatio>1?t.replace(e.photoRegex,e.retinaSuffix):t}function d(e){"contains"in b[0]&&!b[0].contains(e.target)&&(e.stopPropagation(),b.focus())}function c(){var t,i=e.data(H,Z);null==i?(j=e.extend({},Q),console&&console.log&&console.log("Error: cboxElement missing settings object")):j=e.extend({},i);for(t in j)e.isFunction(j[t])&&"on"!==t.slice(0,2)&&(j[t]=j[t].call(H));j.rel=j.rel||H.rel||e(H).data("rel")||"nofollow",j.href=j.href||e(H).attr("href"),j.title=j.title||H.title,"string"==typeof j.href&&(j.href=e.trim(j.href))}function u(i,a){e(t).trigger(i),ue.trigger(i),e.isFunction(a)&&a.call(H)}function p(){var e,t,i,a,n,o=ee+"Slideshow_",r="click."+ee;j.slideshow&&$[1]?(t=function(){clearTimeout(e)},i=function(){(j.loop||$[V+1])&&(e=setTimeout(J.next,j.slideshowSpeed))},a=function(){P.html(j.slideshowStop).unbind(r).one(r,n),ue.bind(ne,i).bind(ae,t).bind(oe,n),b.removeClass(o+"off").addClass(o+"on")},n=function(){t(),ue.unbind(ne,i).unbind(ae,t).unbind(oe,n),P.html(j.slideshowStart).unbind(r).one(r,function(){J.next(),a()}),b.removeClass(o+"on").addClass(o+"off")},j.slideshowAuto?a():n()):b.removeClass(o+"off "+o+"on")}function h(i){Y||(H=i,c(),$=e(H),V=0,"nofollow"!==j.rel&&($=e("."+te).filter(function(){var t,i=e.data(this,Z);return i&&(t=e(this).data("rel")||i.rel||this.rel),t===j.rel}),V=$.index(H),-1===V&&($=$.add(H),V=$.length-1)),v.css({opacity:parseFloat(j.opacity),cursor:j.overlayClose?"pointer":"auto",visibility:"visible"}).show(),G&&b.add(v).removeClass(G),j.className&&b.add(v).addClass(j.className),G=j.className,L.html(j.close).show(),U||(U=B=!0,b.css({visibility:"hidden",display:"block"}),S=a(pe,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(y),R=A.height()+k.height()+y.outerHeight(!0)-y.height(),z=w.width()+x.width()+y.outerWidth(!0)-y.width(),F=S.outerHeight(!0),q=S.outerWidth(!0),j.w=r(j.initialWidth,"x"),j.h=r(j.initialHeight,"y"),J.position(),de&&C.bind("resize."+ce+" scroll."+ce,function(){v.css({width:C.width(),height:n(),top:C.scrollTop(),left:C.scrollLeft()})}).trigger("resize."+ce),p(),u(ie,j.onOpen),N.add(I).hide(),b.focus(),t.addEventListener&&(t.addEventListener("focus",d,!0),ue.one(re,function(){t.removeEventListener("focus",d,!0)})),j.returnFocus&&ue.one(re,function(){e(H).focus()})),g())}function f(){!b&&t.body&&(X=!1,C=e(i),b=a(pe).attr({id:Z,"class":le?ee+(de?"IE6":"IE"):"",role:"dialog",tabindex:"-1"}).hide(),v=a(pe,"Overlay",de?"position:absolute":"").hide(),D=a(pe,"LoadingOverlay").add(a(pe,"LoadingGraphic")),_=a(pe,"Wrapper"),y=a(pe,"Content").append(I=a(pe,"Title"),E=a(pe,"Current"),O=a("button","Previous"),M=a("button","Next"),P=a("button","Slideshow"),D,L=a("button","Close")),_.append(a(pe).append(a(pe,"TopLeft"),A=a(pe,"TopCenter"),a(pe,"TopRight")),a(pe,!1,"clear:left").append(w=a(pe,"MiddleLeft"),y,x=a(pe,"MiddleRight")),a(pe,!1,"clear:left").append(a(pe,"BottomLeft"),k=a(pe,"BottomCenter"),a(pe,"BottomRight"))).find("div div").css({"float":"left"}),T=a(pe,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),N=M.add(O).add(E).add(P),e(t.body).append(v,b.append(_,T)))}function m(){function i(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),h(this))}return!!b&&(X||(X=!0,M.click(function(){J.next()}),O.click(function(){J.prev()}),L.click(function(){J.close()}),v.click(function(){j.overlayClose&&J.close()}),e(t).bind("keydown."+ee,function(e){var t=e.keyCode;U&&j.escKey&&27===t&&(e.preventDefault(),J.close()),U&&j.arrowKey&&$[1]&&!e.altKey&&(37===t?(e.preventDefault(),O.click()):39===t&&(e.preventDefault(),M.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+ee,"."+te,i):e("."+te).live("click."+ee,i)),!0)}function g(){var t,n,o,d=J.prep,p=++he;B=!0,W=!1,H=$[V],c(),u(se),u(ae,j.onLoad),j.h=j.height?r(j.height,"y")-F-R:j.innerHeight&&r(j.innerHeight,"y"),j.w=j.width?r(j.width,"x")-q-z:j.innerWidth&&r(j.innerWidth,"x"),j.mw=j.w,j.mh=j.h,j.maxWidth&&(j.mw=r(j.maxWidth,"x")-q-z,j.mw=j.w&&j.w<j.mw?j.w:j.mw),j.maxHeight&&(j.mh=r(j.maxHeight,"y")-F-R,j.mh=j.h&&j.h<j.mh?j.h:j.mh),t=j.href,K=setTimeout(function(){D.show()},100),j.inline?(o=a(pe).hide().insertBefore(e(t)[0]),ue.one(se,function(){o.replaceWith(S.children())}),d(e(t))):j.iframe?d(" "):j.html?d(j.html):s(j,t)?(t=l(j,t),e(W=new Image).addClass(ee+"Photo").bind("error",function(){j.title=!1,d(a(pe,"Error").html(j.imgError))}).one("load",function(){var e;p===he&&(j.retinaImage&&i.devicePixelRatio>1&&(W.height=W.height/i.devicePixelRatio,W.width=W.width/i.devicePixelRatio),j.scalePhotos&&(n=function(){W.height-=W.height*e,W.width-=W.width*e},j.mw&&W.width>j.mw&&(e=(W.width-j.mw)/W.width,n()),j.mh&&W.height>j.mh&&(e=(W.height-j.mh)/W.height,n())),j.h&&(W.style.marginTop=Math.max(j.mh-W.height,0)/2+"px"),$[1]&&(j.loop||$[V+1])&&(W.style.cursor="pointer",W.onclick=function(){J.next()}),le&&(W.style.msInterpolationMode="bicubic"),setTimeout(function(){d(W)},1))}),setTimeout(function(){W.src=t},1)):t&&T.load(t,j.data,function(t,i){p===he&&d("error"===i?a(pe,"Error").html(j.xhrError):e(this).contents())})}var v,b,_,y,A,w,x,k,$,C,S,T,D,I,E,P,M,O,L,N,j,R,z,F,q,H,V,W,U,B,Y,K,J,G,X,Q={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},Z="colorbox",ee="cbox",te=ee+"Element",ie=ee+"_open",ae=ee+"_load",ne=ee+"_complete",oe=ee+"_cleanup",re=ee+"_closed",se=ee+"_purge",le=!e.support.leadingWhitespace,de=le&&!i.XMLHttpRequest,ce=ee+"_IE6",ue=e({}),pe="div",he=0;e.colorbox||(e(f),J=e.fn[Z]=e[Z]=function(t,i){var a=this;if(t=t||{},f(),m()){if(e.isFunction(a))a=e("<a/>"),t.open=!0;else if(!a[0])return a;i&&(t.onComplete=i),a.each(function(){e.data(this,Z,e.extend({},e.data(this,Z)||Q,t))}).addClass(te),(e.isFunction(t.open)&&t.open.call(a)||t.open)&&h(a[0])}return a},J.position=function(e,t){function i(e){A[0].style.width=k[0].style.width=y[0].style.width=parseInt(e.style.width,10)-z+"px",y[0].style.height=w[0].style.height=x[0].style.height=parseInt(e.style.height,10)-R+"px"}var a,o,s,l=0,d=0,c=b.offset();C.unbind("resize."+ee),b.css({top:-9e4,left:-9e4}),o=C.scrollTop(),s=C.scrollLeft(),j.fixed&&!de?(c.top-=o,c.left-=s,b.css({position:"fixed"})):(l=o,d=s,b.css({position:"absolute"})),d+=j.right!==!1?Math.max(C.width()-j.w-q-z-r(j.right,"x"),0):j.left!==!1?r(j.left,"x"):Math.round(Math.max(C.width()-j.w-q-z,0)/2),l+=j.bottom!==!1?Math.max(n()-j.h-F-R-r(j.bottom,"y"),0):j.top!==!1?r(j.top,"y"):Math.round(Math.max(n()-j.h-F-R,0)/2),b.css({top:c.top,left:c.left,visibility:"visible"}),e=b.width()===j.w+q&&b.height()===j.h+F?0:e||0,_[0].style.width=_[0].style.height="9999px",a={width:j.w+q+z,height:j.h+F+R,top:l,left:d},0===e&&b.css(a),b.dequeue().animate(a,{duration:e,complete:function(){i(this),B=!1,_[0].style.width=j.w+q+z+"px",_[0].style.height=j.h+F+R+"px",j.reposition&&setTimeout(function(){C.bind("resize."+ee,J.position)},1),t&&t()},step:function(){i(this)}})},J.resize=function(e){U&&(e=e||{},e.width&&(j.w=r(e.width,"x")-q-z),e.innerWidth&&(j.w=r(e.innerWidth,"x")),S.css({width:j.w}),e.height&&(j.h=r(e.height,"y")-F-R),e.innerHeight&&(j.h=r(e.innerHeight,"y")),e.innerHeight||e.height||(S.css({height:"auto"}),j.h=S.height()),S.css({height:j.h}),J.position("none"===j.transition?0:j.speed))},J.prep=function(t){function i(){return j.w=j.w||S.width(),j.w=j.mw&&j.mw<j.w?j.mw:j.w,j.w}function n(){return j.h=j.h||S.height(),j.h=j.mh&&j.mh<j.h?j.mh:j.h,j.h}if(U){var r,d="none"===j.transition?0:j.speed;S.empty().remove(),S=a(pe,"LoadedContent").append(t),S.hide().appendTo(T.show()).css({width:i(),overflow:j.scrolling?"auto":"hidden"}).css({height:n()}).prependTo(y),T.hide(),e(W).css({"float":"none"}),r=function(){function t(){le&&b[0].style.removeAttribute("filter")}var i,n,r=$.length,c="frameBorder",p="allowTransparency";U&&(n=function(){clearTimeout(K),D.hide(),u(ne,j.onComplete)},le&&W&&S.fadeIn(100),I.html(j.title).add(S).show(),r>1?("string"==typeof j.current&&E.html(j.current.replace("{current}",V+1).replace("{total}",r)).show(),M[j.loop||r-1>V?"show":"hide"]().html(j.next),O[j.loop||V?"show":"hide"]().html(j.previous),j.slideshow&&P.show(),j.preloading&&e.each([o(-1),o(1)],function(){var t,i,a=$[this],n=e.data(a,Z);n&&n.href?(t=n.href,e.isFunction(t)&&(t=t.call(a))):t=e(a).attr("href"),t&&s(n,t)&&(t=l(n,t),i=new Image,i.src=t)})):N.hide(),j.iframe?(i=a("iframe")[0],c in i&&(i[c]=0),p in i&&(i[p]="true"),j.scrolling||(i.scrolling="no"),e(i).attr({src:j.href,name:(new Date).getTime(),"class":ee+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",n).appendTo(S),ue.one(se,function(){i.src="//about:blank"}),j.fastIframe&&e(i).trigger("load")):n(),"fade"===j.transition?b.fadeTo(d,1,t):t())},"fade"===j.transition?b.fadeTo(d,0,function(){J.position(0,r)}):J.position(d,r)}},J.next=function(){!B&&$[1]&&(j.loop||$[V+1])&&(V=o(1),h($[V]))},J.prev=function(){!B&&$[1]&&(j.loop||V)&&(V=o(-1),h($[V]))},J.close=function(){U&&!Y&&(Y=!0,U=!1,u(oe,j.onCleanup),C.unbind("."+ee+" ."+ce),v.fadeTo(200,0),b.stop().fadeTo(300,0,function(){b.add(v).css({opacity:1,cursor:"auto"}).hide(),u(se),S.empty().remove(),setTimeout(function(){Y=!1,u(re,j.onClosed)},1)}))},J.remove=function(){e([]).add(b).add(v).remove(),b=null,e("."+te).removeData(Z).removeClass(te),e(t).unbind("click."+ee)},J.element=function(){return e(H)},J.settings=Q)}(jQuery,document,window),jQuery.fn.highlight=function(e){function t(e,i){var a=0;if(3==e.nodeType){var n=e.data.toUpperCase().indexOf(i);if(n>=0){var o=document.createElement("span");o.className="highlight";var r=e.splitText(n),s=(r.splitText(i.length),r.cloneNode(!0));o.appendChild(s),r.parentNode.replaceChild(o,r),a=1}}else if(1==e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=t(e.childNodes[l],i);return a}return this.each(function(){t(this,e.toUpperCase())})},jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){with(this.parentNode.firstChild.nodeName,this.parentNode)replaceChild(this.firstChild,this),normalize()}).end()},function(e){var t=new Date,i=2e4;e.setBaseDate=function(e){t=e},e.formatTime=function(e,t){if(!t)return"";var i=function(t){var i=o+1<e.length&&e.charAt(o+1)==t;return i&&o++,i},a=function(e,t,a){var n=""+t;if(i(e))for(;n.length<a;)n="0"+n;return n},n="";if(t)for(var o=0;o<e.length;o++)switch(e.charAt(o)){case"h":var r=t.getHours();0==r?r=12:r>12&&(r-=12),n+=a("h",r,2);break;case"H":n+=a("H",t.getHours(),2);break;case"m":n+=a("m",t.getMinutes(),2);break;case"s":n+=a("s",t.getSeconds(),2);break;case"p":n+=t.getHours()<12?"am":"pm";break;case"P":n+=t.getHours()<12?"AM":"PM";break;default:n+=e.charAt(o)}return n},e.fn.timeTag=function(){var a,n=new Date,o=(-t.getTimezoneOffset()/60,e(this).attr("datetime"));if(o)o.match(/^\d+$/)&&(o=parseInt(o,10)),a=new Date(o);else{var o=e(this).text();parseInt(o,10)>1e9&&(o=1e3*parseInt(o,10),e(this).attr("datetime",o)),a=new Date(o)}var n=new Date,r=(n.getTime()-a.getTime())/6e4;if(r<1){e(this).text("less than a minute ago");var s=this;setTimeout(function(){e(s).timeTag()},i)}else if(r<60){var l=Math.floor(r)+" minute";r>2&&(l+="s"),l+=" ago",e(this).text(l);var s=this;setTimeout(function(){e(s).timeTag()},i)}else{var d=r/60;if(d<2){e(this).text("about an hour ago");var s=this;setTimeout(function(){e(s).timeTag()},i)}else if(d<24){e(this).text(Math.floor(d)+" hours ago");var s=this;setTimeout(function(){e(s).timeTag()},i)}else{var c=d/24;if(c<2){e(this).text("yesterday at "+e.formatTime("h:mmp",a));var s=this;setTimeout(function(){e(s).timeTag()},i)}else e(this).text(e.datepicker.formatDate("M d, yy",a)+" at "+e.formatTime("h:mmp",a))}}e(this).attr("title",a.toString())},e.input_error=function(t,i){var a;e(t).is(":hidden")?(e(t).show(),a=e(t).offset(),e(t).hide()):a=e(t).offset(),a.top+=e(t).outerHeight();var n=e(t).data("error");n||(n=e('<div class="input-error"><div class="message"></div><div class="close"><span>close</span></div></div>').hide().css({position:"absolute","z-index":1e4}),e(".close",n).bind("click",function(){e(this).parent(".input-error").hide()}),e(t).data("error",n),e(n).data("input",t),e(document.body).append(n)),e(".message",n).text(i),e(n).css({top:a.top+"px",left:a.left+"px"}).show()},e.fn.fixDateInput=function(){e(this).datepicker({dateFormat:"mm-dd-yy",changeMonth:!0,changeYear:!0,yearRange:"1900:2100",onSelect:function(t,i){e(this).trigger("change")}})},e.fn.fixColorInput=function(){e(this).colorPicker()}}(jQuery),$("input").live("focus click",function(e){"date"==this.getAttribute("type")?Modernizr.inputtypes.date||$(this).fixDateInput():"color"==this.getAttribute("type")&&(Modernizr.inputtypes.color||$(this).fixColorInput())}),function(e){function t(){}function i(e){r=[e]}function a(e,t,i){return e&&e.apply&&e.apply(t.context||t,i)}function n(e){return/\?/.test(e)?"&":"?"}function o(o){function h(e){J++||(G(),W&&(C[B]={s:[e]}),F&&(e=F.apply(o,[e])),a(j,o,[e,A,o]),a(z,o,[o,A]))}function E(e){J++||(G(),W&&e!=w&&(C[B]=e),a(R,o,[o,e]),a(z,o,[o,e]))}o=e.extend({},T,o);var P,M,O,L,N,j=o.success,R=o.error,z=o.complete,F=o.dataFilter,q=o.callbackParameter,H=o.callback,V=o.cache,W=o.pageCache,U=o.charset,B=o.url,Y=o.data,K=o.timeout,J=0,G=t;return k&&k(function(e){e.done(j).fail(R),j=e.resolve,R=e.reject}).promise(o),o.abort=function(){!J++&&G()},a(o.beforeSend,o,[o])===!1||J?o:(B=B||d,Y=Y?"string"==typeof Y?Y:e.param(Y,o.traditional):d,B+=Y?n(B)+Y:d,q&&(B+=n(B)+encodeURIComponent(q)+"=?"),!V&&!W&&(B+=n(B)+"_"+(new Date).getTime()+"="),B=B.replace(/=\?(&|$)/,"="+H+"$1"),W&&(P=C[B])?P.s?h(P.s[0]):E(P):(x[H]=i,O=e(y)[0],O.id=p+S++,U&&(O[l]=U),D&&D.version()<11.6?(L=e(y)[0]).text="document.getElementById('"+O.id+"')."+m+"()":O[s]=s,I&&(O.htmlFor=O.id,O.event=f),O[g]=O[m]=O[v]=function(e){if(!O[b]||!/i/.test(O[b])){try{O[f]&&O[f]()}catch(t){}e=r,r=0,e?h(e[0]):E(c)}},O.src=B,G=function(e){N&&clearTimeout(N),O[v]=O[g]=O[m]=null,$[_](O),L&&$[_](L)},$[u](O,M=$.firstChild),L&&$[u](L,M),N=K>0&&setTimeout(function(){E(w)},K)),o)}var r,s="async",l="charset",d="",c="error",u="insertBefore",p="_jqjsp",h="on",f=h+"click",m=h+c,g=h+"load",v=h+"readystatechange",b="readyState",_="removeChild",y="<script>",A="success",w="timeout",x=window,k=e.Deferred,$=e("head")[0]||document.documentElement,C={},S=0,T={callback:p,url:location.href},D=x.opera,I=!!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;o.setup=function(t){e.extend(T,t)},e.jsonp=o}(jQuery),function(e){e.extend(e.fn,{livequery:function(t,i,a){var n,o=this;return e.isFunction(t)&&(a=i,i=t,t=void 0),e.each(e.livequery.queries,function(e,r){if(!(o.selector!=r.selector||o.context!=r.context||t!=r.type||i&&i.$lqguid!=r.fn.$lqguid||a&&a.$lqguid!=r.fn2.$lqguid))return(n=r)&&!1}),n=n||new e.livequery(this.selector,this.context,t,i,a),n.stopped=!1,n.run(),this},expire:function(t,i,a){var n=this;return e.isFunction(t)&&(a=i,i=t,t=void 0),e.each(e.livequery.queries,function(o,r){n.selector!=r.selector||n.context!=r.context||t&&t!=r.type||i&&i.$lqguid!=r.fn.$lqguid||a&&a.$lqguid!=r.fn2.$lqguid||this.stopped||e.livequery.stop(r.id)}),this}}),e.livequery=function(t,i,a,n,o){return this.selector=t,this.context=i,this.type=a,this.fn=n,this.fn2=o,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,n.$lqguid=n.$lqguid||e.livequery.guid++,o&&(o.$lqguid=o.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,i){e.fn2.apply(i)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var t=this,i=this.elements,a=e(this.selector,this.context),n=a.not(i);this.elements=a,this.type?(n.bind(this.type,this.fn),i.length>0&&e.each(i,function(i,n){e.inArray(n,a)<0&&e.event.remove(n,t.type,t.fn)})):(n.each(function(){t.fn.apply(this)}),this.fn2&&i.length>0&&e.each(i,function(i,n){e.inArray(n,a)<0&&t.fn2.apply(n)}))}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var t=e.livequery.queue.length;t--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,i){if(e.fn[i]){var a=e.fn[i];e.fn[i]=function(){var t=a.apply(this,arguments);return e.livequery.run(),t}}})},run:function(t){void 0!=t?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){void 0!=t?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),e(function(){e.livequery.play()})}(jQuery),function(e){function t(t){var i=[].slice.call(arguments,1),a=0;return t=e.event.fix(t||window.event),t.type="mousewheel",t.wheelDelta&&(a=t.wheelDelta/120),t.detail&&(a=-t.detail/3),i.unshift(t,a),e.event.handle.apply(this,i)}var i=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,a){e(window).scrollTo(t,i,a)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},i.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!i)return t;var a=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||"BackCompat"==a.compatMode?a.body:a.documentElement})},e.fn.scrollTo=function(a,n,o){return"object"==typeof n&&(o=n,n=0),"function"==typeof o&&(o={onAfter:o}),"max"==a&&(a=9e9),o=e.extend({},i.defaults,o),n=n||o.speed||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(n/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function r(e){d.animate(u,n,o.easing,e&&function(){e.call(this,a,o)})}var s,l=this,d=e(l),c=a,u={},p=d.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(c)){c=t(c);break}c=e(c,this);case"object":(c.is||c.style)&&(s=(c=e(c)).offset())}e.each(o.axis.split(""),function(e,t){var a="x"==t?"Left":"Top",n=a.toLowerCase(),h="scroll"+a,f=l[h],m=i.max(l,t);if(s)u[h]=s[n]+(p?0:f-d.offset()[n]),o.margin&&(u[h]-=parseInt(c.css("margin"+a))||0,u[h]-=parseInt(c.css("border"+a+"Width"))||0),u[h]+=o.offset[n]||0,o.over[n]&&(u[h]+=c["x"==t?"width":"height"]()*o.over[n]);else{var g=c[n];u[h]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}/^\d+$/.test(u[h])&&(u[h]=u[h]<=0?0:Math.min(u[h],m)),!e&&o.queue&&(f!=u[h]&&r(o.onAfterFirst),delete u[h])}),r(o.onAfter)}).end()},i.max=function(t,i){var a="x"==i?"Width":"Height",n="scroll"+a;if(!e(t).is("html,body"))return t[n]-e(t)[a.toLowerCase()]();var o="client"+a,r=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(r[n],s[n])-Math.min(r[o],s[o])}}(jQuery),function(e){var t=e.scrollTo;t.stopOnUserInput=function(e){var i=t.window();i.one("mousedown.scroll DOMMouseScroll.scroll mousewheel.scroll keydown.scroll touchstart.scroll",function(t){(t.which>0||"mousedown"===t.type||"mousewheel"===t.type||"touchstart"===t.type)&&(i.stop(!0).off(".scroll"),"function"==typeof e&&e.call(this,t))})}}(jQuery),function(e){e.widget("ui.selectbox",e.ui.mouse,{widgetEventPrefix:"edit",options:{options:[],placeholder:"",placeholderPersist:!1,selectCallback:function(){}},_create:function(){e(this.element).addClass("ui-selectbox"),this.box=e("<div><span>"+this.options.placeholder+"</span></div>").addClass("box").append(this.element),this.menu=e("<ul></ul>");for(var t=0;t<this.options.options.length;t++)this.addOption(this.options.options[t])},addOption:function(t){e('<li><span class="icon"><span>'+t.title+"</span></li>").appendTo(this.menu)}}),e.extend(e.ui.editable,{version:"1.8.2"})}(jQuery),function($){$.fn.selectbox=function(settings,extra){function build(){var e=this,t=$(this).data("selectbox/settings");$(this).addClass("ui-selectbox-container");var i=$('<div class="ui-selectbox-box"></div>').appendTo($(this));$('<div class="ui-selectbox-placeholder">'+t.placeholder+"</div>").appendTo(i),$('<div class="ui-selectbox-arrow">&nabla;</div>').appendTo(i);i.bind("click",function(t){box_click_callback.call(e,t)});var a="ui-selectbox-dropdown";null!=t["class"]&&(a+=" "+t["class"]);var n=$('<div class="'+a+'"><ul></ul></div>');$(this).append(n),$(this).data("selectbox/option_index",0);for(var o=0;o<t.options.length;o++)add_option.call(this,t.options[o]);$(document.body).bind("click",function(t){document_body_click_callback.call(e,t)}),n.hide()}function document_body_click_callback(e){$(this).hasClass("ui-active")&&$(e.target).parents(".ui-selectbox-container")[0]!==$(this)[0]&&($(".ui-selectbox-dropdown",this).hide(),$(this).removeClass("ui-active"))}function box_click_callback(e){var t=$(this).data("selectbox/settings");$(".ui-selectbox-dropdown",this).is(":hidden")&&"function"==typeof t.active_callback&&t.active_callback.call(this),$(".ui-selectbox-dropdown",this).toggle(),$(this).toggleClass("ui-active"),$(".ui-selectbox-dropdown",this).css({position:"absolute",top:$(".ui-selectbox-box",this).outerHeight(!0)+"px",left:parseInt($(this).css("padding-left"),10)-$(".tlc",$(".ui-selectbox-dropdown",this)).outerWidth(!1)+"px"});var i=$(".ui-selectbox-box",this).outerWidth(!1)-$(".ui-selectbox-dropdown .tlc",this).width()-$(".ui-selectbox-dropdown .trc",this).width()-parseInt($(".ui-selectbox-dropdown",this).css("padding-left"),10)-parseInt($(".ui-selectbox-dropdown",this).css("padding-right"),10);$(".ui-selectbox-dropdown",this).css({"min-width":i+"px"})}function option_click_callback(e,t){$(this).data("selectbox/settings");if(!$(t).hasClass("ui-disabled")){var i=/ui\-selectbox\-option\-(\d+)/.exec($(t).attr("class"));i[1];"function"==typeof $(t).data("selectbox/option/onclick")&&$(t).data("selectbox/option/onclick").call(this,e,t),change_placeholder.call(this,$(t).text()),$(".ui-selectbox-dropdown",this).hide(),$(this).removeClass("ui-active")}}function change_placeholder(e){var t=$(this).data("selectbox/settings");t.placeholder_persist||$(".ui-selectbox-placeholder",this).html(e)}function execute_option(option,settings){"function"==eval("typeof "+option)&&eval(option+".call(this, settings)")}function add_option(e){var t,i=this,a=$(this).data("selectbox/option_index");if("undefined"!=typeof e.optgroup&&e.optgroup===!0)t=$('<li class="ui-selectbox-optgroup ui-selectbox-optgroup-'+a+'">'+e.text+"</li>");else{var n="ui-selectbox-option ui-selectbox-option-"+a;"undefined"!=typeof e.noselect&&e.noselect===!0?(n+=" ui-selectbox-option-noselect",t=$('<li class="'+n+'">'+e.text+"</li>")):(t=$('<li class="'+n+'">'+e.text+"</li>"),t.bind("click",function(e){option_click_callback.call(i,e,this)}))}"string"==typeof e.id&&$(t).attr("id",e.id),"string"==typeof e["class"]&&$(t).addClass(e["class"]),"string"==typeof e.divider&&("above"==e.divider?$(t).addClass("ui-selectbox-option-divider-above"):"below"==e.divider?$(t).addClass("ui-selectbox-option-divider-below"):"both"==e.divider&&$(t).addClass("ui-selectbox-option-divider-both")),"string"==typeof e.after?$(e.after,this).after(t):"string"==typeof e.before?$(e.before,this).before(t):$(".ui-selectbox-dropdown ul",this).append(t),$(t).data("selectbox/option/value",e.value),"function"==typeof e.onclick&&$(t).data("selectbox/option/onclick",e.onclick),a++,$(this).data("selectbox/option_index",a)}if("string"==typeof settings){if("undefined"==typeof extra)return;return void execute_option.call(this,settings,extra)}var defaults={"class":null,options:[],placeholder:"",placeholder_persist:!1,active_callback:null};return settings=$.extend(defaults,settings),this.each(function(){$(this).data("selectbox/settings",settings),build.call(this)})}}(jQuery),function(e){function t(e){return n.test(e)}e.fn.tipTip=function(i){var a={activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:0,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},afterEnter:function(){},exit:function(){},afterExit:function(){},cssClass:"",detectTextDir:!0};if(e("#tiptip_holder").length<=0){var n=e("<div>",{id:"tiptip_arrow_inner"}),o=e("<div>",{id:"tiptip_arrow"}).append(n),r=e("<div>",{id:"tiptip_content"}),s=e("<div>",{id:"tiptip_holder"}).append(o).append(r);e("body").append(s)}else var s=e("#tiptip_holder"),r=e("#tiptip_content"),o=e("#tiptip_arrow");return this.each(function(){function n(){if(p.enter.call(c,h)!==!1){var t;p.content?t=e.isFunction(p.content)?p.content.call(c,h):p.content:(t=p.content=c.attr(p.attribute),c.removeAttr(p.attribute)),t&&(r.html(t),s.hide().css({"max-width":p.maxWidth}),p.cssClass&&s.addClass(p.cssClass),d(),f&&clearTimeout(f),f=setTimeout(function(){s.stop(!0,!0).fadeIn(p.fadeIn)},p.delay),e(window).bind("resize.tipTip scroll.tipTip",d),c.addClass("tiptip_visible"),p.afterEnter.call(c,h))}}function l(){p.exit.call(c,h)!==!1&&(f&&clearTimeout(f),s.fadeOut(p.fadeOut),e(window).unbind("resize.tipTip scroll.tipTip"),
c.removeClass("tiptip_visible"),p.afterExit.call(c,h))}function d(){function i(){h=x.top,d=v-w-p.edgeOffset-$/2,u=b+(_-A)/2}function a(){h=x.bottom,d=v+y+p.edgeOffset+$/2,u=b+(_-A)/2}function n(){h=x.left,d=v+(y-w)/2,u=b-A-p.edgeOffset-k/2}function l(){h=x.right,d=v+(y-w)/2,u=b+_+p.edgeOffset}s.removeAttr("class");var d,u,h,f,m,g=c.offset(),v=g.top,b=g.left,_=c.outerWidth(),y=c.outerHeight(),A=s.outerWidth(),w=s.outerHeight(),x={top:"tip_top",bottom:"tip_bottom",left:"tip_left",right:"tip_right"},k=12,$=12,C=e(window),S=C.scrollTop(),T=C.scrollLeft(),D=C.width(),I=C.height(),E=p.detectTextDir&&t(r.text());"bottom"==p.defaultPosition?a():"top"==p.defaultPosition?i():"left"!=p.defaultPosition||E?"left"==p.defaultPosition&&E?l():"right"!=p.defaultPosition||E?"right"==p.defaultPosition&&E?n():a():l():n(),h==x.left&&!E&&u<T?l():h==x.left&&E&&u-A<T?l():h==x.right&&!E&&u>T+D?n():h==x.right&&E&&u+A>T+D?n():h==x.top&&d<S?a():h==x.bottom&&d+w>S+I&&i(),h!=x.left&&h!=x.right||(d+w>I+S?d=v+y>I+S?v+y-w:I+S-w:d<S&&(d=v<S?v:S)),h!=x.top&&h!=x.bottom||(u+A>D+T?u=b+_>D+T?b+_-A:D+T-A:u<T&&(u=b<T?b:T)),s.css({left:Math.round(u),top:Math.round(d)}).removeClass(x.top).removeClass(x.bottom).removeClass(x.left).removeClass(x.right).addClass(h),h==x.top?(f=w,m=b-u+(_-k)/2):h==x.bottom?(f=0,m=b-u+(_-k)/2):h==x.left?(f=v-d+(y-$)/2,m=A):h==x.right&&(f=v-d+(y-$)/2,m=0),o.css({left:Math.round(m),top:Math.round(f)})}var c=e(this),u=c.data("tipTip"),p=u&&u.options||e.extend({},a,i),h={holder:s,content:r,arrow:o,options:p,position:d};if(u)switch(i){case"show":n();break;case"hide":l();break;case"destroy":c.unbind(".tipTip").removeData("tipTip");break;case"position":d()}else{var f=!1;c.data("tipTip",{options:p}),"hover"==p.activation?c.bind("mouseenter.tipTip",function(){n()}).bind("mouseleave.tipTip",function(){p.keepAlive?s.one("mouseleave.tipTip",function(){l()}):l()}):"focus"==p.activation?c.bind("focus.tipTip",function(){n()}).bind("blur.tipTip",function(){l()}):"click"==p.activation?c.bind("click.tipTip",function(e){return e.preventDefault(),n(),!1}).bind("mouseleave.tipTip",function(){p.keepAlive?s.one("mouseleave.tipTip",function(){l()}):l()}):"manual"==p.activation}})};var i="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff",a="\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc",n=new RegExp("^[^"+i+"]*["+a+"]")}(jQuery),function(e){function t(t,i,n){var o,r=this,s=t.add(this),l=t.find(n.tabs),d=i.jquery?i:t.children(i);l.length||(l=t.children()),d.length||(d=t.parent().find(i)),d.length||(d=e(i)),e.extend(this,{click:function(t,i){var d=l.eq(t);if("string"==typeof t&&t.replace("#","")&&(d=l.filter("[href*="+t.replace("#","")+"]"),t=Math.max(l.index(d),0)),n.rotate){var c=l.length-1;if(t<0)return r.click(c,i);if(t>c)return r.click(0,i)}if(!d.length){if(o>=0)return r;t=n.initialIndex,d=l.eq(t)}return t===o?r:(i=i||e.Event(),i.type="onBeforeClick",s.trigger(i,[t]),i.isDefaultPrevented()?void 0:(a[n.effect].call(r,t,function(){i.type="onClick",s.trigger(i,[t])}),o=t,l.removeClass(n.current),d.addClass(n.current),r))},getConf:function(){return n},getTabs:function(){return l},getPanes:function(){return d},getCurrentPane:function(){return d.eq(o)},getCurrentTab:function(){return l.eq(o)},getIndex:function(){return o},next:function(){return r.click(o+1)},prev:function(){return r.click(o-1)}}),e.each("onBeforeClick,onClick".split(","),function(t,i){e.isFunction(n[i])&&e(r).bind(i,n[i]),r[i]=function(t){return e(r).bind(i,t),r}}),n.history&&e.fn.history&&(e.tools.history.init(l),n.event="history"),l.each(function(t){e(this).bind(n.event,function(e){return r.click(t,e),e.preventDefault()})}),d.find("a[href^=#]").click(function(t){r.click(e(this).attr("href"),t)}),location.hash?r.click(location.hash):(0===n.initialIndex||n.initialIndex>0)&&r.click(n.initialIndex)}e.tools=e.tools||{version:"1.2.2"},e.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,history:!1},addEffect:function(e,t){a[e]=t}};var i,a={"default":function(e,t){this.getPanes().hide().eq(e).show(),t.call()},fade:function(e,t){var i=this.getConf(),a=i.fadeOutSpeed,n=this.getPanes();a?n.fadeOut(a):n.hide(),n.eq(e).fadeIn(i.fadeInSpeed,t)},slide:function(e,t){this.getPanes().slideUp(200),this.getPanes().eq(e).slideDown(400,t)},ajax:function(e,t){this.getPanes().eq(0).load(this.getTabs().eq(e).attr("href"),t)}};e.tools.tabs.addEffect("horizontal",function(t,a){i||(i=this.getPanes().eq(0).width()),this.getCurrentPane().animate({width:0},function(){e(this).hide()}),this.getPanes().eq(t).animate({width:i},function(){e(this).show(),a.call()})}),e.fn.tabs=function(i,a){var n=this.data("tabs");return n?n:(e.isFunction(a)&&(a={onBeforeClick:a}),a=e.extend({},e.tools.tabs.conf,a),this.each(function(){n=new t(e(this),i,a),e(this).data("tabs",n)}),a.api?n:this)}}(jQuery),function(e){function t(t,i){function a(i){var a=e(i);return a.length<2?a:t.parent().find(i)}var n,o,r,s=this,l=t.add(this),d=t.data("tabs"),c=!1,u=a(i.next).click(function(){d.next()}),p=a(i.prev).click(function(){d.prev()});if(e.extend(s,{getTabs:function(){return d},getConf:function(){return i},play:function(){if(!n){var t=e.Event("onBeforePlay");if(l.trigger(t),t.isDefaultPrevented())return s;c=!1,n=setInterval(d.next,i.interval),l.trigger("onPlay"),d.next()}},pause:function(){if(!n)return s;var t=e.Event("onBeforePause");return l.trigger(t),t.isDefaultPrevented()?s:(n=clearInterval(n),r=clearInterval(r),void l.trigger("onPause"))},stop:function(){s.pause(),c=!0}}),e.each("onBeforePlay,onPlay,onBeforePause,onPause".split(","),function(t,a){e.isFunction(i[a])&&s.bind(a,i[a]),s[a]=function(e){return s.bind(a,e)}}),i.autopause){var h=d.getTabs().add(u).add(p).add(d.getPanes());h.hover(function(){s.pause(),o=clearInterval(o)},function(){c||(o=setTimeout(s.play,i.interval))})}if(i.autoplay?r=setTimeout(s.play,i.interval):s.stop(),i.clickable&&d.getPanes().click(function(){d.next()}),!d.getConf().rotate){var f=i.disabledClass;d.getIndex()||p.addClass(f),d.onBeforeClick(function(e,t){t?(p.removeClass(f),t==d.getTabs().length-1?u.addClass(f):u.removeClass(f)):p.addClass(f)})}}var i;i=e.tools.tabs.slideshow={conf:{next:".forward",prev:".backward",disabledClass:"disabled",autoplay:!1,autopause:!0,interval:3e3,clickable:!0,api:!1}},e.fn.slideshow=function(a){var n=this.data("slideshow");return n?n:(a=e.extend({},i.conf,a),this.each(function(){n=new t(e(this),a),e(this).data("slideshow",n)}),a.api?n:this)}}(jQuery),function(e){function t(e,t,i){var a=i.relative?e.position().top:e.offset().top,n=i.relative?e.position().left:e.offset().left,o=i.position[0];a-=t.outerHeight()-i.offset[0],n+=e.outerWidth()+i.offset[1];var r=t.outerHeight()+e.outerHeight();return"center"==o&&(a+=r/2),"bottom"==o&&(a+=r),o=i.position[1],e=t.outerWidth()+e.outerWidth(),"center"==o&&(n-=e/2),"left"==o&&(n-=e),{top:a,left:n}}function i(i,n){var o,r,s=this,l=i.add(s),d=0,c=0,u=i.attr("title"),p=a[n.effect],h=i.is(":input"),f=h&&i.is(":checkbox, :radio, select, :button"),m=i.attr("type"),g=n.events[m]||n.events[h?f?"widget":"input":"def"];if(!p)throw'Nonexistent effect "'+n.effect+'"';if(g=g.split(/,\s*/),2!=g.length)throw"Tooltip: bad events configuration for "+m;i.bind(g[0],function(e){n.predelay?(clearTimeout(d),c=setTimeout(function(){s.show(e)},n.predelay)):s.show(e)}).bind(g[1],function(e){n.delay?(clearTimeout(c),d=setTimeout(function(){s.hide(e)},n.delay)):s.hide(e)}),u&&n.cancelDefault&&(i.removeAttr("title"),i.data("title",u)),e.extend(s,{show:function(a){if(!o&&(u?o=e(n.layout).addClass(n.tipClass).appendTo(document.body).hide().append(u):n.tip?o=e(n.tip).eq(0):(o=i.next(),o.length||(o=i.parent().next())),!o.length))throw"Cannot find tooltip for "+i;if(s.isShown())return s;o.stop(!0,!0);var h=t(i,o,n);return a=a||e.Event(),a.type="onBeforeShow",l.trigger(a,[h]),a.isDefaultPrevented()?s:(h=t(i,o,n),o.css({position:"absolute",top:h.top,left:h.left}),r=!0,p[0].call(s,function(){a.type="onShow",r="full",l.trigger(a)}),h=n.events.tooltip.split(/,\s*/),o.bind(h[0],function(){clearTimeout(d),clearTimeout(c)}),h[1]&&!i.is("input:not(:checkbox, :radio), textarea")&&o.bind(h[1],function(e){e.relatedTarget!=i[0]&&i.trigger(g[1].split(" ")[0])}),s)},hide:function(t){return o&&s.isShown()?(t=t||e.Event(),t.type="onBeforeHide",l.trigger(t),t.isDefaultPrevented()?void 0:(r=!1,a[n.effect][1].call(s,function(){t.type="onHide",r=!1,l.trigger(t)}),s)):s},isShown:function(e){return e?"full"==r:r},getConf:function(){return n},getTip:function(){return o},getTrigger:function(){return i}}),e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(t,i){e.isFunction(n[i])&&e(s).bind(i,n[i]),s[i]=function(t){return e(s).bind(i,t),s}})}e.tools=e.tools||{version:"1.2.2"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,t,i){a[e]=[t,i]}};var a={toggle:[function(e){var t=this.getConf(),i=this.getTip();t=t.opacity,t<1&&i.css({opacity:t}),i.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};e.fn.tooltip=function(t){var a=this.data("tooltip");return a?a:(t=e.extend(!0,{},e.tools.tooltip.conf,t),"string"==typeof t.position&&(t.position=t.position.split(/,?\s/)),this.each(function(){a=new i(e(this),t),e(this).data("tooltip",a)}),t.api?a:this)}}(jQuery),function(e){var t=e.tools.tooltip;e.extend(t.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!e.browser.msie});var i={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};t.addEffect("slide",function(e){var t=this.getConf(),a=this.getTip(),n=t.slideFade?{opacity:t.opacity}:{},o=i[t.direction]||i.up;n[o[1]]=o[0]+"="+t.slideOffset,t.slideFade&&a.css({opacity:0}),a.show().animate(n,t.slideInSpeed,e)},function(t){var a=this.getConf(),n=a.slideOffset,o=a.slideFade?{opacity:0}:{},r=i[a.direction]||i.up,s=""+r[0];a.bounce&&(s="+"==s?"-":"+"),o[r[1]]=s+"="+n,this.getTip().animate(o,a.slideOutSpeed,function(){e(this).hide(),t.call()})})}(jQuery),function(e){function t(t){var i=e(window),a=i.width()+i.scrollLeft(),n=i.height()+i.scrollTop();return[t.offset().top<=i.scrollTop(),a<=t.offset().left+t.width(),n<=t.offset().top+t.height(),i.scrollLeft()>=t.offset().left]}function i(e){for(var t=e.length;t--;)if(e[t])return!1;return!0}var a=e.tools.tooltip;a.dynamic={conf:{classNames:"top right bottom left"}},e.fn.dynamic=function(n){"number"==typeof n&&(n={speed:n}),n=e.extend({},a.dynamic.conf,n);var o,r=n.classNames.split(/\s/);return this.each(function(){var a=e(this).tooltip().onBeforeShow(function(a,s){a=this.getTip();var l=this.getConf();o||(o=[l.position[0],l.position[1],l.offset[0],l.offset[1],e.extend({},l)]),e.extend(l,o[4]),l.position=[o[0],o[1]],l.offset=[o[2],o[3]],a.css({visibility:"hidden",position:"absolute",top:s.top,left:s.left}).show(),s=t(a),i(s)||(s[2]&&(e.extend(l,n.top),l.position[0]="top",a.addClass(r[0])),s[3]&&(e.extend(l,n.right),l.position[1]="right",a.addClass(r[1])),s[0]&&(e.extend(l,n.bottom),l.position[0]="bottom",a.addClass(r[2])),s[1]&&(e.extend(l,n.left),l.position[1]="left",a.addClass(r[3])),(s[0]||s[2])&&(l.offset[0]*=-1),(s[1]||s[3])&&(l.offset[1]*=-1)),a.css({visibility:"visible"}).hide()});a.onBeforeShow(function(){var e=this.getConf();this.getTip(),setTimeout(function(){e.position=[o[0],o[1]],e.offset=[o[2],o[3]]},0)}),a.onHide(function(){var e=this.getTip();e.removeClass(n.classNames)}),ret=a}),n.api?ret:this}}(jQuery),function(e){function t(t,i){var a=e(i);return a.length<2?a:t.parent().find(i)}function i(i,n){var o=this,r=i.add(o),s=i.children(),l=0,d=n.vertical;if(a||(a=o),s.length>1&&(s=e(n.items,i)),e.extend(o,{getConf:function(){return n},getIndex:function(){return l},getSize:function(){return o.getItems().size()},getNaviButtons:function(){return p.add(h)},getRoot:function(){return i},getItemWrap:function(){return s},getItems:function(){return s.children(n.item).not("."+n.clonedClass)},move:function(e,t){return o.seekTo(l+e,t)},next:function(e){return o.move(1,e)},prev:function(e){return o.move(-1,e)},begin:function(e){return o.seekTo(0,e)},end:function(e){return o.seekTo(o.getSize()-1,e)},focus:function(){return a=o},addItem:function(t){return t=e(t),n.circular?(e(".cloned:last").before(t),e(".cloned:first").replaceWith(t.clone().addClass(n.clonedClass))):s.append(t),r.trigger("onAddItem",[t]),o},seekTo:function(t,i,c){if(n.circular&&0===t&&l==-1&&0!==i)return o;if(!n.circular&&t<0||t>o.getSize()||t<-1)return o;var u=t;t.jquery?t=o.getItems().index(t):u=o.getItems().eq(t);var p=e.Event("onBeforeSeek");return c||(r.trigger(p,[t,i]),!p.isDefaultPrevented()&&u.length)?(u=d?{top:-u.position().top}:{left:-u.position().left},l=t,a=o,void 0===i&&(i=n.speed),s.animate(u,i,n.easing,c||function(){r.trigger("onSeek",[t])}),o):o}}),e.each(["onBeforeSeek","onSeek","onAddItem"],function(t,i){e.isFunction(n[i])&&e(o).bind(i,n[i]),o[i]=function(t){return e(o).bind(i,t),o}}),n.circular){var c=o.getItems().slice(-1).clone().prependTo(s),u=o.getItems().eq(1).clone().appendTo(s);c.add(u).addClass(n.clonedClass),o.onBeforeSeek(function(e,t,i){if(!e.isDefaultPrevented()){if(t==-1)return o.seekTo(c,i,function(){o.end(0)}),e.preventDefault();t==o.getSize()&&o.seekTo(u,i,function(){o.begin(0)})}}),o.seekTo(0,0)}var p=t(i,n.prev).click(function(){o.prev()}),h=t(i,n.next).click(function(){o.next()});!n.circular&&o.getSize()>1&&o.onBeforeSeek(function(e,t){p.toggleClass(n.disabledClass,t<=0),h.toggleClass(n.disabledClass,t>=o.getSize()-1)}),n.mousewheel&&e.fn.mousewheel&&i.mousewheel(function(e,t){if(n.mousewheel)return o.move(t<0?1:-1,n.wheelSpeed||50),!1}),n.keyboard&&e(document).bind("keydown.scrollable",function(t){if(n.keyboard&&!t.altKey&&!t.ctrlKey&&!e(t.target).is(":input")&&("static"==n.keyboard||a==o)){var i=t.keyCode;if(d&&(38==i||40==i))return o.move(38==i?-1:1),t.preventDefault();if(!d&&(37==i||39==i))return o.move(37==i?-1:1),t.preventDefault()}}),e(o).trigger("onBeforeSeek",[n.initialIndex])}e.tools=e.tools||{version:"1.2.2"},e.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,vertical:!1,wheelSpeed:0}};var a;e.fn.scrollable=function(t){var a=this.data("scrollable");return a?a:(t=e.extend({},e.tools.scrollable.conf,t),this.each(function(){a=new i(e(this),t),e(this).data("scrollable",a)}),t.api?a:this)}}(jQuery),function(e){var t=e.tools.scrollable;t.autoscroll={conf:{autoplay:!0,interval:3e3,autopause:!0}},e.fn.autoscroll=function(i){"number"==typeof i&&(i={interval:i});var a,n=e.extend({},t.autoscroll.conf,i);return this.each(function(){var t=e(this).data("scrollable");t&&(a=t);var i,o,r=!0;t.play=function(){i||(r=!1,i=setInterval(function(){t.next()},n.interval),t.next())},t.pause=function(){i=clearInterval(i)},t.stop=function(){t.pause(),r=!0},n.autopause&&t.getRoot().add(t.getNaviButtons()).hover(function(){t.pause(),clearInterval(o)},function(){r||(o=setTimeout(t.play,n.interval))}),n.autoplay&&setTimeout(t.play,n.interval)}),n.api?a:this}}(jQuery),function(e){function t(t,i){var a=e(i);return a.length<2?a:t.parent().find(i)}var i=e.tools.scrollable;i.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:!1,idPrefix:null,history:!1}},e.fn.navigator=function(a){"string"==typeof a&&(a={navi:a}),a=e.extend({},i.navigator.conf,a);var n;return this.each(function(){function i(e,t,i){return l.seekTo(t),p?void(location.hash&&(location.hash=e.attr("href").replace("#",""))):i.preventDefault()}function o(){return d.find(a.naviItem||"> *")}function r(t){var n=e("<"+(a.naviItem||"a")+"/>").click(function(a){i(e(this),t,a)}).attr("href","#"+t);return 0===t&&n.addClass(u),a.indexed&&n.text(t+1),a.idPrefix&&n.attr("id",a.idPrefix+t),n.appendTo(d)}function s(e,t){e=o().eq(t.replace("#","")),e.length||(e=o().filter("[href="+t+"]")),e.click()}var l=e(this).data("scrollable"),d=t(l.getRoot(),a.navi),c=l.getNaviButtons(),u=a.activeClass,p=a.history&&e.fn.history;l&&(n=l),l.getNaviButtons=function(){return c.add(d)},o().length?o().each(function(t){e(this).click(function(a){i(e(this),t,a)})}):e.each(l.getItems(),function(e){r(e)}),l.onBeforeSeek(function(e,t){var i=o().eq(t);!e.isDefaultPrevented()&&i.length&&o().removeClass(u).eq(t).addClass(u)}),l.onAddItem(function(e,t){t=r(l.getItems().index(t)),p&&t.history(s)}),p&&o().history(s)}),a.api?n:this}}(jQuery),function(e){function t(t,n){var o,r,s,l=this,d=t.add(l),c=e(window),u=e.tools.expose&&(n.mask||n.expose),p=Math.random().toString().slice(10);u&&("string"==typeof u&&(u={color:u}),u.closeOnClick=u.closeOnEsc=!1);var h=n.target||t.attr("rel");if(r=h?e(h):t,!r.length)throw"Could not find Overlay: "+h;t&&t.index(r)==-1&&t.click(function(e){return l.load(e),e.preventDefault()}),e.extend(l,{load:function(t){if(l.isOpened())return l;var o=a[n.effect];if(!o)throw'Overlay: cannot find effect : "'+n.effect+'"';if(n.oneInstance&&e.each(i,function(){this.close(t)}),t=t||e.Event(),t.type="onBeforeLoad",d.trigger(t),t.isDefaultPrevented())return l;s=!0,u&&e(r).expose(u);var h=n.top,f=n.left,m=r.outerWidth({margin:!0}),g=r.outerHeight({margin:!0});return"string"==typeof h&&(h="center"==h?Math.max((c.height()-g)/2,0):parseInt(h,10)/100*c.height()),"center"==f&&(f=Math.max((c.width()-m)/2,0)),o[0].call(l,{top:h,left:f},function(){s&&(t.type="onLoad",d.trigger(t))}),u&&n.closeOnClick&&e.mask.getMask().one("click",l.close),n.closeOnClick&&e(document).bind("click."+p,function(t){e(t.target).parents(r).length||l.close(t)}),n.closeOnEsc&&e(document).bind("keydown."+p,function(e){27==e.keyCode&&l.close(e)}),l},close:function(t){return l.isOpened()?(t=t||e.Event(),t.type="onBeforeClose",d.trigger(t),t.isDefaultPrevented()?void 0:(s=!1,a[n.effect][1].call(l,function(){t.type="onClose",d.trigger(t)}),e(document).unbind("click."+p).unbind("keydown."+p),u&&e.mask.close(),l)):l},getOverlay:function(){return r},getTrigger:function(){return t},getClosers:function(){return o},isOpened:function(){return s},getConf:function(){return n}}),e.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(t,i){e.isFunction(n[i])&&e(l).bind(i,n[i]),l[i]=function(t){return e(l).bind(i,t),l}}),o=r.find(n.close||".close"),o.length||n.close||(o=e('<div class="close"></div>'),r.prepend(o)),o.click(function(e){l.close(e)}),n.load&&l.load()}e.tools=e.tools||{version:"1.2.2"},e.tools.overlay={addEffect:function(e,t,i){a[e]=[t,i]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!e.browser.msie||e.browser.version>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var i=[],a={};e.tools.overlay.addEffect("default",function(t,i){var a=this.getConf(),n=e(window);a.fixed||(t.top+=n.scrollTop(),t.left+=n.scrollLeft()),t.position=a.fixed?"fixed":"absolute",this.getOverlay().css(t).fadeIn(a.speed,i)},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e)}),e.fn.overlay=function(a){var n=this.data("overlay");return n?n:(e.isFunction(a)&&(a={onBeforeLoad:a}),a=e.extend(!0,{},e.tools.overlay.conf,a),this.each(function(){n=new t(e(this),a),i.push(n),e(this).data("overlay",n)}),a.api?n:this)}}(jQuery),function(e){function t(e){var t=e.offset();return{top:t.top+e.height()/2,left:t.left+e.width()/2}}function i(i,a){var n=this.getOverlay(),r=this.getConf(),s=this.getTrigger(),l=this,d=n.outerWidth({margin:!0}),c=n.data("img");if(!c){var u=n.css("backgroundImage");if(!u)throw"background-image CSS property not set for overlay";u=u.slice(u.indexOf("(")+1,u.indexOf(")")).replace(/\"/g,""),n.css("backgroundImage","none"),c=e('<img src="'+u+'"/>'),c.css({border:0,display:"none"}).width(d),e("body").append(c),n.data("img",c)}u=r.start.top||Math.round(o.height()/2);var p=r.start.left||Math.round(o.width()/2);s&&(s=t(s),u=s.top,p=s.left),c.css({position:"absolute",top:u,left:p,width:0,zIndex:r.zIndex}).show(),i.top+=o.scrollTop(),i.left+=o.scrollLeft(),i.position="absolute",n.css(i),c.animate({top:n.css("top"),left:n.css("left"),width:d},r.speed,function(){r.fixed&&(i.top-=o.scrollTop(),i.left-=o.scrollLeft(),i.position="fixed",c.add(n).css(i)),n.css("zIndex",r.zIndex+1).fadeIn(r.fadeInSpeed,function(){l.isOpened()&&!e(this).index(n)?a.call():n.hide()})})}function a(i){var a=this.getOverlay().hide(),n=this.getConf(),r=this.getTrigger();a=a.data("img");var s={top:n.start.top,left:n.start.left,width:0};r&&e.extend(s,t(r)),n.fixed&&a.css({position:"absolute"}).animate({top:"+="+o.scrollTop(),left:"+="+o.scrollLeft()},0),a.animate(s,n.closeSpeed,i)}var n=e.tools.overlay,o=e(window);e.extend(n.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999}),n.addEffect("apple",i,a)}(jQuery),function(e){function t(e,t){return 32-new Date(e,t,32).getDate()}function i(e,t){for(e=""+e,t=t||2;e.length<t;)e="0"+e;return e}function a(e,t,a){var n=e.getDate(),o=e.getDay(),r=e.getMonth();e=e.getFullYear();var s={d:n,dd:i(n),ddd:u[a].shortDays[o],dddd:u[a].days[o],m:r+1,mm:i(r+1),mmm:u[a].shortMonths[r],mmmm:u[a].months[r],yy:String(e).slice(2),yyyy:e};return t=t.replace(p,function(e){return e in s?s[e]:e.slice(1,e.length-1)}),h.html(t).html()}function n(e){return parseInt(e,10)}function o(e,t){return e.getYear()===t.getYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function r(e){if(e){if(e.constructor==Date)return e;if("string"==typeof e){var t=e.split("-");if(3==t.length)return new Date(n(t[0]),n(t[1])-1,n(t[2]));if(!/^-?\d+$/.test(e))return;e=n(e)}return t=new Date,t.setDate(t.getDate()+e),t}}function s(i,s){function l(t,n,o){C=t,g=t.getFullYear(),v=t.getMonth(),b=t.getDate(),o=o||e.Event("api"),o.type="change",I.trigger(o,[t]),o.isDefaultPrevented()||(i.val(a(t,n.format,n.lang)),i.data("date",t),y.hide(o))}function p(t){t.type="onShow",I.trigger(t),e(document).bind("keydown.d",function(t){var a=t.keyCode;if(8==a)return i.val(""),y.hide(t);if(27==a)return y.hide(t);if(e(c).index(a)>=0){if(!_)return y.show(t),t.preventDefault();var n=e("#"+w.weeks+" a"),o=e("."+w.focus),r=n.index(o);return o.removeClass(w.focus),74==a||40==a?r+=7:75==a||38==a?r-=7:76==a||39==a?r+=1:72!=a&&37!=a||(r-=1),r==-1?(y.addMonth(-1),o=e("#"+w.weeks+" a:last")):35==r?(y.addMonth(),o=e("#"+w.weeks+" a:first")):o=n.eq(r),o.addClass(w.focus),t.preventDefault()}return 34==a?y.addMonth():33==a?y.addMonth(-1):36==a?y.today():(13==a&&(e(t.target).is("select")||e("."+w.focus).click()),e([16,17,18,9]).index(a)>=0)}),e(document).bind("click.d",function(t){var a=t.target;e(a).parents("#"+w.root).length||a==i[0]||h&&a==h[0]||y.hide(t)})}var h,f,m,g,v,b,_,y=this,A=new Date,w=s.css,x=u[s.lang],k=e("#"+w.root),$=k.find("#"+w.title),C=i.attr("data-value")||s.value||i.val(),S=i.attr("min")||s.min,T=i.attr("max")||s.max;if(C=r(C)||A,S=r(S||365*s.yearRange[0]),T=r(T||365*s.yearRange[1]),!x)throw"Dateinput: invalid language: "+s.lang;if("date"==i.attr("type")){var D=e("<input/>");e.each("name,readonly,disabled,value,required".split(","),function(e,t){D.attr(t,i.attr(t))}),i.replaceWith(D),i=D}i.addClass(w.input);var I=i.add(y);if(!k.length){if(k=e("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",w.root),k.children().eq(0).attr("id",w.head).end().eq(1).attr("id",w.body).children().eq(0).attr("id",w.days).end().eq(1).attr("id",w.weeks).end().end().end().find("a").eq(0).attr("id",w.prev).end().eq(1).attr("id",w.next),$=k.find("#"+w.head).find("div").attr("id",w.title),s.selectors){var E=e("<select/>").attr("id",w.month),P=e("<select/>").attr("id",w.year);$.append(E.add(P))}for(var M=k.find("#"+w.days),O=0;O<7;O++)M.append(e("<span/>").text(x.shortDays[(O+s.firstDay)%7]));i.after(k)}s.trigger&&(h=e("<a/>").attr("href","#").addClass(w.trigger).click(function(e){return y.show(),e.preventDefault()}).insertAfter(i));var L=k.find("#"+w.weeks);P=k.find("#"+w.year),E=k.find("#"+w.month),e.extend(y,{show:function(t){if(!i.is("[readonly]")&&!_&&(t=t||e.Event(),t.type="onBeforeShow",I.trigger(t),!t.isDefaultPrevented())){e.each(d,function(){this.hide()}),_=!0,E.unbind("change").change(function(){y.setValue(P.val(),e(this).val())}),P.unbind("change").change(function(){y.setValue(e(this).val(),E.val())}),f=k.find("#"+w.prev).unbind("click").click(function(){return f.hasClass(w.disabled)||y.addMonth(-1),!1}),m=k.find("#"+w.next).unbind("click").click(function(){return m.hasClass(w.disabled)||y.addMonth(),!1}),y.setValue(C);var a=i.position();return k.css({top:a.top+i.outerHeight({margins:!0})+s.offset[0],left:a.left+s.offset[1]}),s.speed?k.show(s.speed,function(){p(t)}):(k.show(),p(t)),y}},setValue:function(i,a,r){var d;if(parseInt(a,10)>=-1?(i=n(i),a=n(a),r=n(r),d=new Date(i,a,r)):(d=i||C,i=d.getYear()+1900,a=d.getMonth(),r=d.getDate()),a==-1?(a=11,i--):12==a&&(a=0,i++),!_)return l(d,s),y;v=a,g=i,d=new Date(i,a,1-s.firstDay),r=d.getDay();var c,u=t(i,a),p=t(i,a-1);if(s.selectors){for(E.empty(),e.each(x.months,function(t,a){S<new Date(i,t+1,(-1))&&T>new Date(i,t,0)&&E.append(e("<option/>").html(a).attr("value",t))}),P.empty(),d=i+s.yearRange[0];d<i+s.yearRange[1];d++)S<new Date(d+1,(-1),0)&&T>new Date(d,0,0)&&P.append(e("<option/>").text(d));E.val(a),P.val(i)}else $.html(x.months[a]+" "+i);L.empty(),f.add(m).removeClass(w.disabled);for(var h,b,k=0;k<42;k++)h=e("<a/>"),k%7===0&&(c=e("<div/>").addClass(w.week),L.append(c)),k<r?(h.addClass(w.off),b=p-r+k+1,d=new Date(i,a-1,b)):k>=r+u?(h.addClass(w.off),b=k-u-r+1,d=new Date(i,a+1,b)):(b=k-r+1,d=new Date(i,a,b),o(C,d)?h.attr("id",w.current).addClass(w.focus):o(A,d)&&h.attr("id",w.today)),S&&d<S&&h.add(f).addClass(w.disabled),T&&d>T&&h.add(m).addClass(w.disabled),h.attr("href","#"+b).text(b).data("date",d),c.append(h),h.click(function(t){var i=e(this);return i.hasClass(w.disabled)||(e("#"+w.current).removeAttr("id"),i.attr("id",w.current),l(i.data("date"),s,t)),!1});return w.sunday&&L.find(w.week).each(function(){var t=s.firstDay?7-s.firstDay:0;e(this).children().slice(t,t+1).addClass(w.sunday)}),y},setMin:function(e,t){return S=r(e),t&&C<S&&y.setValue(S),y},setMax:function(e,t){return T=r(e),t&&C>T&&y.setValue(T),y},today:function(){return y.setValue(A)},addDay:function(e){return this.setValue(g,v,b+(e||1))},addMonth:function(e){return this.setValue(g,v+(e||1),b)},addYear:function(e){return this.setValue(g+(e||1),v,b)},hide:function(t){if(_){if(t=t||e.Event(),t.type="onHide",I.trigger(t),e(document).unbind("click.d").unbind("keydown.d"),t.isDefaultPrevented())return;k.hide(),_=!1}return y},getConf:function(){return s},getInput:function(){return i},getCalendar:function(){return k},getValue:function(e){return e?a(C,e,s.lang):C},isOpen:function(){return _}}),e.each(["onBeforeShow","onShow","change","onHide"],function(t,i){e.isFunction(s[i])&&e(y).bind(i,s[i]),y[i]=function(t){return e(y).bind(i,t),y}}),i.bind("focus click",y.show).keydown(function(t){var i=t.keyCode;return!_&&e(c).index(i)>=0?(y.show(t),t.preventDefault()):!!(t.shiftKey||t.ctrlKey||t.altKey||9==i)||t.preventDefault()}),r(i.val())&&l(C,s)}e.tools=e.tools||{version:"1.2.2"};var l,d=[],c=[75,76,38,39,74,72,40,37],u={};l=e.tools.dateinput={conf:{format:"mm/dd/yy",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:0,max:0,trigger:!1,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},localize:function(t,i){e.each(i,function(e,t){i[e]=t.split(",")}),u[t]=i}},l.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var p=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,h=e("<a/>");e.expr[":"].date=function(t){var i=t.getAttribute("type");return i&&"date"==i||!!e(t).data("dateinput")},e.fn.dateinput=function(t){if(this.data("dateinput"))return this;t=e.extend({},l.conf,t),e.each(t.css,function(e,i){i||"prefix"==e||(t.css[e]=(t.css.prefix||"")+(i||e))});var i;return this.each(function(){var a=new s(e(this),t);d.push(a),a=a.getInput().data("dateinput",a),i=i?i.add(a):a}),i?i:this}}(jQuery),function(e){function t(e,t){return t=Math.pow(10,t),Math.round(e*t)/t}function i(e,t){return(t=parseInt(e.css(t),10))?t:(e=e[0].currentStyle)&&e.width&&parseInt(e.width,10)}function a(e){return(e=e.data("events"))&&e.onSlide}function n(n,o){function r(e,i,a,r){if(void 0===a?a=i/p*_:r&&(a-=o.min),y&&(a=Math.round(a/y)*y),(void 0===i||y)&&(i=a*p/_),isNaN(a))return f;i=Math.max(0,Math.min(i,p)),a=i/p*_,!r&&d||(a+=o.min),d&&(r?i=p-i:a=o.max-a),a=t(a,A);var s="click"==e.type;return $&&void 0!==c&&!s&&(e.type="onSlide",k.trigger(e,[a,i]),e.isDefaultPrevented())?f:(r=s?o.speed:0,s=s?function(){e.type="change",k.trigger(e,[a])}:null,d?(v.animate({top:i},r,s),o.progress&&b.animate({height:p-i+v.width()/2},r)):(v.animate({left:i},r,s),o.progress&&b.animate({width:i+v.width()/2},r)),c=a,h=i,n.val(a),f)}function s(){(d=o.vertical||i(g,"height")>i(g,"width"))?(p=i(g,"height")-i(v,"height"),u=g.offset().top+p):(p=i(g,"width")-i(v,"width"),u=g.offset().left)}function l(){s(),f.setValue(o.value||o.min)}var d,c,u,p,h,f=this,m=o.css,g=e("<div><div/><a href='#'/></div>").data("rangeinput",f);n.before(g);var v=g.addClass(m.slider).find("a").addClass(m.handle),b=g.find("div").addClass(m.progress);e.each("min,max,step,value".split(","),function(e,t){e=n.attr(t),parseFloat(e)&&(o[t]=parseFloat(e,10))});var _=o.max-o.min,y="any"==o.step?0:o.step,A=o.precision;if(void 0===A)try{A=y.toString().split(".")[1].length}catch(w){A=0}if("range"==n.attr("type")){var x=e("<input/>");e.each("name,readonly,disabled,required".split(","),function(e,t){x.attr(t,n.attr(t))}),x.val(o.value),n.replaceWith(x),n=x}n.addClass(m.input);var k=e(f).add(n),$=!0;e.extend(f,{getValue:function(){return c},setValue:function(t,i){return r(i||e.Event("api"),void 0,t,!0)},getConf:function(){return o},getProgress:function(){return b},getHandle:function(){return v},getInput:function(){return n},step:function(t,i){i=i||e.Event();var a="any"==o.step?1:o.step;f.setValue(c+a*(t||1),i)},stepUp:function(e){return f.step(e||1)},stepDown:function(e){return f.step(-e||-1)}}),e.each("onSlide,change".split(","),function(t,i){e.isFunction(o[i])&&e(f).bind(i,o[i]),f[i]=function(t){return e(f).bind(i,t),f}}),v.drag({drag:!1}).bind("dragStart",function(){$=a(e(f))||a(n)}).bind("drag",function(e,t,i){return!n.is(":disabled")&&void r(e,d?t:i)}).bind("dragEnd",function(e){e.isDefaultPrevented()||(e.type="change",k.trigger(e,[c]))}).click(function(e){return e.preventDefault()}),g.click(function(e){if(n.is(":disabled")||e.target==v[0])return e.preventDefault();s();var t=v.width()/2;r(e,d?p-u-t+e.pageY:e.pageX-u-t)}),o.keyboard&&n.keydown(function(t){if(!n.attr("readonly")){var i=t.keyCode,a=e([75,76,38,33,39]).index(i)!=-1,o=e([74,72,40,34,37]).index(i)!=-1;if((a||o)&&!(t.shiftKey||t.altKey||t.ctrlKey))return a?f.step(33==i?10:1,t):o&&f.step(34==i?-10:-1,t),t.preventDefault()}}),n.blur(function(t){var i=e(this).val();i!==c&&f.setValue(i,t)}),e.extend(n[0],{stepUp:f.stepUp,stepDown:f.stepDown}),l(),p||e(window).load(l)}e.tools=e.tools||{version:"1.2.2"};var o;o=e.tools.rangeinput={conf:{min:0,max:100,step:"any",steps:0,value:0,precision:void 0,vertical:0,keyboard:!0,progress:!1,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}};var r,s;e.fn.drag=function(t){return document.ondragstart=function(){return!1;
},t=e.extend({x:!0,y:!0,drag:!0},t),r=r||e(document).bind("mousedown mouseup",function(i){var a=e(i.target);if("mousedown"==i.type&&a.data("drag")){var n=a.position(),o=i.pageX-n.left,l=i.pageY-n.top,d=!0;r.bind("mousemove.drag",function(e){var i=e.pageX-o;e=e.pageY-l;var n={};t.x&&(n.left=i),t.y&&(n.top=e),d&&(a.trigger("dragStart"),d=!1),t.drag&&a.css(n),a.trigger("drag",[e,i]),s=a}),i.preventDefault()}else try{s&&s.trigger("dragEnd")}finally{r.unbind("mousemove.drag"),s=null}}),this.data("drag",!0)},e.expr[":"].range=function(t){var i=t.getAttribute("type");return i&&"range"==i||!!e(t).filter("input").data("rangeinput")},e.fn.rangeinput=function(t){if(this.data("rangeinput"))return this;t=e.extend(!0,{},o.conf,t);var i;return this.each(function(){var a=new n(e(this),e.extend(!0,{},t));a=a.getInput().data("rangeinput",a),i=i?i.add(a):a}),i?i:this}}(jQuery),function(e){function t(e,t,i){var a=e.offset().top,n=e.offset().left,o=i.position.split(/,?\s+/),r=o[0];return o=o[1],a-=t.outerHeight()-i.offset[0],n+=e.outerWidth()+i.offset[1],i=t.outerHeight()+e.outerHeight(),"center"==r&&(a+=i/2),"bottom"==r&&(a+=i),e=e.outerWidth(),"center"==o&&(n-=(e+t.outerWidth())/2),"left"==o&&(n-=e),{top:a,left:n}}function i(e){function t(){return this.getAttribute("type")==e}return t.key="[type="+e+"]",t}function a(t,i,a){function o(t,i,o){if(a.grouped||!t.length){var r;o===!1||e.isArray(o)?(r=n.messages[i.key||i]||n.messages["*"],r=r[a.lang]||n.messages["*"].en,(i=r.match(/\$\d/g))&&e.isArray(o)&&e.each(i,function(e){r=r.replace(this,o[e])})):r=o[a.lang]||o,t.push(r)}}var r=this,s=i.add(r);t=t.not(":button, :image, :reset, :submit"),e.extend(r,{getConf:function(){return a},getForm:function(){return i},getInputs:function(){return t},invalidate:function(i,n){if(!n){var o=[];e.each(i,function(e,i){e=t.filter("[name="+e+"]"),e.length&&(e.trigger("OI",[i]),o.push({input:e,messages:[i]}))}),i=o,n=e.Event()}return n.type="onFail",s.trigger(n,[i]),n.isDefaultPrevented()||c[a.effect][0].call(r,i,n),r},reset:function(i){i=i||t,i.removeClass(a.errorClass).each(function(){var t=e(this).data("msg.el");t&&(t.remove(),e(this).data("msg.el",null))})},checkValidity:function(i,n){if(i=i||t,i=i.not(":disabled"),!i.length)return!0;if(n=n||e.Event(),n.type="onBeforeValidate",s.trigger(n,[i]),n.isDefaultPrevented())return n.result;var l=[],u=a.errorInputEvent+".v";i.each(function(){var t=[],i=e(this).unbind(u).data("messages",t);if(e.each(d,function(){var e=this,l=e[0];if(i.filter(l).length&&(e=e[1].call(r,i,i.val()),e!==!0)){if(n.type="onBeforeFail",s.trigger(n,[i,l]),n.isDefaultPrevented())return!1;var d=i.attr(a.messageAttr);if(d)return t=[d],!1;o(t,l,e)}}),t.length&&(l.push({input:i,messages:t}),i.trigger("OI",[t]),a.errorInputEvent&&i.bind(u,function(e){r.checkValidity(i,e)})),a.singleError&&l.length)return!1});var p=c[a.effect];if(!p)throw'Validator: cannot find effect "'+a.effect+'"';return l.length?(r.invalidate(l,n),!1):(p[1].call(r,i,n),n.type="onSuccess",s.trigger(n,[i]),i.unbind(u),!0)}}),e.each("onBeforeValidate,onBeforeFail,onFail,onSuccess".split(","),function(t,i){e.isFunction(a[i])&&e(r).bind(i,a[i]),r[i]=function(t){return e(r).bind(i,t),r}}),a.formEvent&&i.bind(a.formEvent,function(e){if(!r.checkValidity(null,e))return e.preventDefault()}),i.bind("reset",function(){r.reset()}),t[0]&&t[0].validity&&t.each(function(){this.oninvalid=function(){return!1}}),i[0]&&(i[0].checkValidity=r.checkValidity),a.inputEvent&&t.bind(a.inputEvent,function(t){r.checkValidity(e(this),t)}),t.filter(":checkbox, select").filter("[required]").change(function(t){var i=e(this);(this.checked||i.is("select")&&e(this).val())&&c[a.effect][1].call(r,i,t)})}e.tools=e.tools||{version:"1.2.2"};var n,o=/\[type=([a-z]+)\]/,r=/^-?[0-9]*(\.[0-9]+)?$/,s=/^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,l=/^(https?:\/\/)?([\da-z\.\-]+)\.([a-z\.]{2,6})([\/\w \.\-]*)*\/?$/i;n=e.tools.validator={conf:{grouped:!1,effect:"default",errorClass:"invalid",inputEvent:null,errorInputEvent:"keyup",formEvent:"submit",lang:"en",message:"<div/>",messageAttr:"data-message",messageClass:"error",offset:[0,0],position:"center right",singleError:!1,speed:"normal"},messages:{"*":{en:"Please correct this value"}},localize:function(t,i){e.each(i,function(e,i){n.messages[e]=n.messages[e]||{},n.messages[e][t]=i})},localizeFn:function(t,i){n.messages[t]=n.messages[t]||{},e.extend(n.messages[t],i)},fn:function(t,a,n){e.isFunction(a)?n=a:("string"==typeof a&&(a={en:a}),this.messages[t.key||t]=a),(a=o.exec(t))&&(t=i(a[1])),d.push([t,n])},addEffect:function(e,t,i){c[e]=[t,i]}};var d=[],c={"default":[function(i){var a=this.getConf();e.each(i,function(i,n){i=n.input,i.addClass(a.errorClass);var o=i.data("msg.el");o||(o=e(a.message).addClass(a.messageClass).appendTo(document.body),i.data("msg.el",o)),o.css({visibility:"hidden"}).find("span").remove(),e.each(n.messages,function(t,i){e("<span/>").html(i).appendTo(o)}),o.outerWidth()==o.parent().width()&&o.add(o.find("p")).css({display:"inline"}),n=t(i,o,a),o.css({visibility:"visible",position:"absolute",top:n.top,left:n.left}).fadeIn(a.speed)})},function(t){var i=this.getConf();t.removeClass(i.errorClass).each(function(){var t=e(this).data("msg.el");t&&t.css({visibility:"hidden"})})}]};e.each("email,url,number".split(","),function(t,i){e.expr[":"][i]=function(e){return e.getAttribute("type")===i}}),e.fn.oninvalid=function(e){return this[e?"bind":"trigger"]("OI",e)},n.fn(":email","Please enter a valid email address",function(e,t){return!t||s.test(t)}),n.fn(":url","Please enter a valid URL",function(e,t){return!t||l.test(t)}),n.fn(":number","Please enter a numeric value.",function(e,t){return r.test(t)}),n.fn("[max]","Please enter a value smaller than $1",function(e,t){return e=e.attr("max"),parseFloat(t)<=parseFloat(e)||[e]}),n.fn("[min]","Please enter a value larger than $1",function(e,t){return e=e.attr("min"),parseFloat(t)>=parseFloat(e)||[e]}),n.fn("[required]","Please complete this mandatory field.",function(e,t){return e.is(":checkbox")?e.is(":checked"):!!t}),n.fn("[pattern]",function(e){var t=new RegExp("^"+e.attr("pattern")+"$");return t.test(e.val())}),e.fn.validator=function(t){if(this.data("validator"))return this;if(t=e.extend(!0,{},n.conf,t),this.is("form"))return this.each(function(){var i=e(this),n=new a(i.find(":input"),i,t);i.data("validator",n)});var i=new a(this,this.eq(0).closest("form"),t);return this.data("validator",i)}}(jQuery),function(){function e(e,t){if(t)for(key in t)t.hasOwnProperty(key)&&(e[key]=t[key]);return e}function t(e,t){var i=[];for(var a in e)e.hasOwnProperty(a)&&(i[a]=t(e[a]));return i}function i(t,i,o){if(l.isSupported(i.version))t.innerHTML=l.getHTML(i,o);else if(i.expressInstall&&l.isSupported([6,65]))t.innerHTML=l.getHTML(e(i,{src:i.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title});else if(t.innerHTML.replace(/\s/g,"")||(t.innerHTML="<h2>Flash version "+i.version+" or greater is required</h2><h3>"+(d[0]>0?"Your version is "+d:"You have no flash plugin installed")+"</h3>"+("A"==t.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+n+"'>here</a></p>"),"A"==t.tagName&&(t.onclick=function(){location.href=n})),i.onFail){var r=i.onFail.call(this);"string"==typeof r&&(t.innerHTML=r)}a&&(window[i.id]=document.getElementById(i.id)),e(this,{getRoot:function(){return t},getOptions:function(){return i},getConf:function(){return o},getApi:function(){return t.firstChild}})}var a=document.all,n="http://www.adobe.com/go/getflashplayer",o="function"==typeof jQuery,r=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,s={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(t,a,n){if("string"==typeof t&&(t=document.getElementById(t.replace("#",""))),t)return"string"==typeof a&&(a={src:a}),new i(t,e(e({},s),a),n)};var l=e(window.flashembed,{conf:s,getVersion:function(){var e;try{e=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(t){try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");e=i&&i.GetVariable("$version")}catch(a){}}return(e=r.exec(e))?[e[1],e[3]]:[0,0]},asString:function(e){if(null===e||void 0===e)return null;var i=typeof e;switch("object"==i&&e.push&&(i="array"),i){case"string":return e=e.replace(new RegExp('(["\\\\])',"g"),"\\$1"),e=e.replace(/^\s?(\d+\.?\d+)%/,"$1pct"),'"'+e+'"';case"array":return"["+t(e,function(e){return l.asString(e)}).join(",")+"]";case"function":return'"function()"';case"object":i=[];for(var a in e)e.hasOwnProperty(a)&&i.push('"'+a+'":'+l.asString(e[a]));return"{"+i.join(",")+"}"}return String(e).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(t,i){t=e({},t);var n='<object width="'+t.width+'" height="'+t.height+'" id="'+t.id+'" name="'+t.id+'"';t.cachebusting&&(t.src+=(t.src.indexOf("?")!=-1?"&":"?")+Math.random()),n+=t.w3c||!a?' data="'+t.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',n+=">",(t.w3c||a)&&(n+='<param name="movie" value="'+t.src+'" />'),t.width=t.height=t.id=t.w3c=t.src=null,t.onFail=t.version=t.expressInstall=null;for(var o in t)t[o]&&(n+='<param name="'+o+'" value="'+t[o]+'" />');if(t="",i){for(var r in i)i[r]&&(o=i[r],t+=r+"="+(/function|object/.test(typeof o)?l.asString(o):o)+"&");t=t.slice(0,-1),n+='<param name="flashvars" value=\''+t+"' />"}return n+="</object>"},isSupported:function(e){return d[0]>e[0]||d[0]==e[0]&&d[1]>=e[1]}}),d=l.getVersion();o&&(jQuery.tools=jQuery.tools||{version:"1.2.2"},jQuery.tools.flashembed={conf:s},jQuery.fn.flashembed=function(e,t){return this.each(function(){$(this).data("flashembed",flashembed(this,e,t))})})}(),function(e){function t(e){if(e){var t=a.contentWindow.document;t.open().close(),t.location.hash=e}}var i,a,n,o;e.tools=e.tools||{version:"1.2.2"},e.tools.history={init:function(r){o||(e.browser.msie&&e.browser.version<"8"?a||(a=e("<iframe/>").attr("src","javascript:false;").hide().get(0),e("body").append(a),setInterval(function(){var t=a.contentWindow.document;t=t.location.hash,i!==t&&e.event.trigger("hash",t)},100),t(location.hash||"#")):setInterval(function(){var t=location.hash;t!==i&&e.event.trigger("hash",t)},100),n=n?n.add(r):r,r.click(function(i){var n=e(this).attr("href");if(a&&t(n),"#"!=n.slice(0,1))return location.href="#"+n,i.preventDefault()}),o=!0)}},e(window).bind("hash",function(t,a){a?n.filter(function(){var t=e(this).attr("href");return t==a||t==a.replace("#","")}).trigger("history",[a]):n.eq(0).trigger("history",[a]),i=a,window.location.hash=i}),e.fn.history=function(t){return e.tools.history.init(this),this.bind("history",t)}}(jQuery),function(e){function t(){if(e.browser.msie){var t=e(document).height(),i=e(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t-i<20?i:t]}return[e(window).width(),e(document).height()]}function i(t){if(t)return t.call(e.mask)}e.tools=e.tools||{version:"1.2.2"};var a;a=e.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var n,o,r,s,l;e.mask={load:function(d,c){if(r)return this;"string"==typeof d&&(d={color:d}),d=d||s,s=d=e.extend(e.extend({},a.conf),d),n=e("#"+d.maskId),n.length||(n=e("<div/>").attr("id",d.maskId),e("body").append(n));var u=t();return n.css({position:"absolute",top:0,left:0,width:u[0],height:u[1],display:"none",opacity:d.startOpacity,zIndex:d.zIndex}),d.color&&n.css("backgroundColor",d.color),i(d.onBeforeLoad)===!1?this:(d.closeOnEsc&&e(document).bind("keydown.mask",function(t){27==t.keyCode&&e.mask.close(t)}),d.closeOnClick&&n.bind("click.mask",function(t){e.mask.close(t)}),e(window).bind("resize.mask",function(){e.mask.fit()}),c&&c.length&&(l=c.eq(0).css("zIndex"),e.each(c,function(){var t=e(this);/relative|absolute|fixed/i.test(t.css("position"))||t.css("position","relative")}),o=c.css({zIndex:Math.max(d.zIndex+1,"auto"==l?0:l)})),n.css({display:"block"}).fadeTo(d.loadSpeed,d.opacity,function(){e.mask.fit(),i(d.onLoad)}),r=!0,this)},close:function(){if(r){if(i(s.onBeforeClose)===!1)return this;n.fadeOut(s.closeSpeed,function(){i(s.onClose),o&&o.css({zIndex:l})}),e(document).unbind("keydown.mask"),n.unbind("click.mask"),e(window).unbind("resize.mask"),r=!1}return this},fit:function(){if(r){var e=t();n.css({width:e[0],height:e[1]})}},getMask:function(){return n},isLoaded:function(){return r},getConf:function(){return s},getExposed:function(){return o}},e.fn.mask=function(t){return e.mask.load(t),this},e.fn.expose=function(t){return e.mask.load(t,this),this}}(jQuery),function(e){function t(t){switch(t.type){case"mousemove":return e.extend(t.data,{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY});case"DOMMouseScroll":e.extend(t,t.data),t.delta=-t.detail/3;break;case"mousewheel":t.delta=t.wheelDelta/120}return t.type="wheel",e.event.handle.call(this,t,t.delta)}e.fn.mousewheel=function(e){return this[e?"bind":"trigger"]("wheel",e)},e.event.special.wheel={setup:function(){e.event.add(this,i,t,{})},teardown:function(){e.event.remove(this,i,t)}};var i=e.browser.mozilla?"DOMMouseScroll"+(e.browser.version<"1.9"?" mousemove":""):"mousewheel"}(jQuery),function(e){e.extend(e.tree.plugins,{contextmenu:{object:e("<ul id='jstree-contextmenu' class='tree-context' />"),data:{t:!1,a:!1,r:!1},defaults:{class_name:"hover",items:{create:{label:"Create",icon:"create",visible:function(e,t){return 1!=e.length?0:t.check("creatable",e)},action:function(e,t){t.create(!1,t.get_node(e[0]))},separator_after:!0},rename:{label:"Rename",icon:"rename",visible:function(e,t){return 1==e.length&&t.check("renameable",e)},action:function(e,t){t.rename(e)}},remove:{label:"Delete",icon:"remove",visible:function(t,i){var a=!0;return e.each(t,function(){return 0==i.check("deletable",this)&&(a=!1),!1}),a},action:function(t,i){e.each(t,function(){i.remove(this)})}}}},show:function(t,i){var a=e.extend(!0,{},e.tree.plugins.contextmenu.defaults,i.settings.plugins.contextmenu);t=e(t),e.tree.plugins.contextmenu.object.empty();var n="",o=0;for(var r in a.items)if(a.items.hasOwnProperty(r)&&a.items[r]!==!1){var s=1;"function"==typeof a.items[r].visible&&(s=a.items[r].visible.call(null,e.tree.plugins.contextmenu.data.a,i)),s!=-1&&(o++,a.items[r].separator_before===!0&&(n+="<li class='separator'><span>&nbsp;</span></li>"),n+='<li><a href="#" rel="'+r+'" class="'+r+" "+(0==s?"disabled":"")+'">',n+=a.items[r].icon?"<ins "+(a.items[r].icon.indexOf("/")==-1?" class='"+a.items[r].icon+"' ":" style='background-image:url(\""+a.items[r].icon+"\");' ")+">&nbsp;</ins>":"<ins>&nbsp;</ins>",n+="<span>"+a.items[r].label+"</span></a></li>",a.items[r].separator_after===!0&&(n+="<li class='separator'><span>&nbsp;</span></li>"))}var l=t.children("a:visible").offset();e.tree.plugins.contextmenu.object.attr("class","tree-context tree-"+i.settings.ui.theme_name.toString()+"-context").html(n);var d=e.tree.plugins.contextmenu.object.height(),c=e.tree.plugins.contextmenu.object.width(),u=l.left,p=l.top+parseInt(t.children("a:visible").height())+2,h=e(window).height()+e(window).scrollTop(),f=e(window).width()+e(window).scrollLeft();p+d>h&&(p=Math.max(h-d-2,0)),u+c>f&&(u=Math.max(f-c-2,0)),e.tree.plugins.contextmenu.object.css({left:u,top:p}).stop(!1,!0).fadeIn("fast")},hide:function(){if(e.tree.plugins.contextmenu.data.t){var t=e.extend(!0,{},e.tree.plugins.contextmenu.defaults,e.tree.plugins.contextmenu.data.t.settings.plugins.contextmenu);e.tree.plugins.contextmenu.data.r&&e.tree.plugins.contextmenu.data.a&&e.tree.plugins.contextmenu.data.a.children("a, span").removeClass(t.class_name),e.tree.plugins.contextmenu.data={a:!1,r:!1,t:!1},e.tree.plugins.contextmenu.object.stop(!1,!0).fadeOut("fast")}},exec:function(t){if(0!=e.tree.plugins.contextmenu.data.t){var i=e.extend(!0,{},e.tree.plugins.contextmenu.defaults,e.tree.plugins.contextmenu.data.t.settings.plugins.contextmenu);try{i.items[t].action.apply(null,[e.tree.plugins.contextmenu.data.a,e.tree.plugins.contextmenu.data.t])}catch(a){}}},callbacks:{oninit:function(){if(!e.tree.plugins.contextmenu.css){var t="#jstree-contextmenu { display:none; position:absolute; z-index:2000; list-style-type:none; margin:0; padding:0; left:-2000px; top:-2000px; } .tree-context { margin:20px; padding:0; width:180px; border:1px solid #979797; padding:2px; background:#f5f5f5; list-style-type:none; }.tree-context li { height:22px; margin:0 0 0 27px; padding:0; background:#ffffff; border-left:1px solid #e0e0e0; }.tree-context li a { position:relative; display:block; height:22px; line-height:22px; margin:0 0 0 -28px; text-decoration:none; color:black; padding:0; }.tree-context li a ins { text-decoration:none; float:left; width:16px; height:16px; margin:0 0 0 0; background-color:#f0f0f0; border:1px solid #f0f0f0; border-width:3px 5px 3px 6px; line-height:16px; }.tree-context li a span { display:block; background:#f0f0f0; margin:0 0 0 29px; padding-left:5px; }.tree-context li.separator { background:#f0f0f0; height:2px; line-height:2px; font-size:1px; border:0; margin:0; padding:0; }.tree-context li.separator span { display:block; margin:0px 0 0px 27px; height:1px; border-top:1px solid #e0e0e0; border-left:1px solid #e0e0e0; line-height:1px; font-size:1px; background:white; }.tree-context li a:hover { border:1px solid #d8f0fa; height:20px; line-height:20px; }.tree-context li a:hover span { background:#e7f4f9; margin-left:28px; }.tree-context li a:hover ins { background-color:#e7f4f9; border-color:#e7f4f9; border-width:2px 5px 2px 5px; }.tree-context li a.disabled { color:gray; }.tree-context li a.disabled ins { }.tree-context li a.disabled:hover { border:0; height:22px; line-height:22px; }.tree-context li a.disabled:hover span { background:#f0f0f0; margin-left:29px; }.tree-context li a.disabled:hover ins { border-color:#f0f0f0; background-color:#f0f0f0; border-width:3px 5px 3px 6px; }";e.tree.plugins.contextmenu.css=this.add_sheet({str:t})}},onrgtclk:function(t,i,a){var n=e.extend(!0,{},e.tree.plugins.contextmenu.defaults,i.settings.plugins.contextmenu);t=e(t),0!=t.size()&&(e.tree.plugins.contextmenu.data.t=i,t.children("a:eq(0)").hasClass("clicked")?(e.tree.plugins.contextmenu.data.r=!1,e.tree.plugins.contextmenu.data.a=i.selected_arr&&i.selected_arr.length>1?i.selected_arr:i.selected):(e.tree.plugins.contextmenu.data.a=t,e.tree.plugins.contextmenu.data.r=!0,t.children("a").addClass(n.class_name),a.target.blur()),e.tree.plugins.contextmenu.show(t,i),a.preventDefault(),a.stopPropagation())},onchange:function(){e.tree.plugins.contextmenu.hide()},beforedata:function(){e.tree.plugins.contextmenu.hide()},ondestroy:function(){e.tree.plugins.contextmenu.hide()}}}}),e(function(){e.tree.plugins.contextmenu.object.hide().appendTo("body"),e("#jstree-contextmenu a").live("click",function(t){return e(this).hasClass("disabled")||(e.tree.plugins.contextmenu.exec.apply(null,[e(this).attr("rel")]),e.tree.plugins.contextmenu.hide()),t.stopPropagation(),t.preventDefault(),!1}),e(document).bind("mousedown",function(t){0==e(t.target).parents("#jstree-contextmenu").size()&&e.tree.plugins.contextmenu.hide()})})}(jQuery),function(e){e.widget("ui.autoform",{options:{createURL:"",createData:{},updateURL:"",updateData:{},deleteURL:"",deleteData:{},dataID:"id",itemData:[],fields:[],delay:2e3,shortDelay:500,duration:2e3,activeAjaxCalls:0,sortable:!1,sortableSelector:"",updateOrderURL:"",updateOrder:{},updateOrderData:null,undelete:!0,confirmDelete:null,doNotSave:!1,check:function(){},checkDelete:function(){},onCreateItem:function(){},onCreateExistingItem:function(){},onCreateNewItem:function(){},onCreate:function(){},onUpdate:function(){},onDelete:function(){},onBeforeCreate:function(){},onBeforeUpdate:function(){},onCreateError:function(){},onUpdateError:function(){}},_create:function(){var t=this;this.element.addClass("ui-autoform"),this.items={},this.updateItems=[],this.newIndex=1;var i=this.options.itemData.length;if(!t.options.doNotSave){var a=window.onbeforeunload;window.onbeforeunload=function(e){return t.options.activeAjaxCalls>0?"There are still some AJAX processes pending. If you leave the page now, you may lose any changes you have made.":a()}}for(var n=0;n<i;++n){var o=this._createItem(this.options.itemData[n]).appendTo(this.element);this.options.onCreateExistingItem.call(this.element,null,{item:o})}this._createNewItem().appendTo(this.element),t.options.sortable&&!t.options.doNotSave&&e(t.options.sortableSelector).sortable({items:"li:not(.ui-autoform-new-item)",cancel:"li.state-deleted",handle:".drag-handle",placeholder:"item ui-placeholder",create:function(e,i){t.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)")},update:function(i,a){var n=e(a.item).attr("id");t.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)",n),e(".list.sortable").sortable("option","disabled",!0),t._saveOrder()}});t.options.headers&&e(".sortable",t.options.headers).sortableList({container:t.element,exclude:".ui-autoform-new-item"})},_createNewItem:function(){var t=this;t.options.activeAjaxCalls++;var i={};i[this.options.dataID]="new"+this.newIndex,this.newIndex++;var a=this._createItem(i,1).addClass("ui-autoform-new-item");return this.options.sortable&&!t.options.doNotSave&&e(".drag-handle",a).hide(),e(".actions",a).hide(),this.options.onCreateNewItem.call(this.element,null,{item:a}),t.options.activeAjaxCalls--,a},_createItem:function(t,i){var a=this;a.options.activeAjaxCalls++,void 0===i&&(i=0),t=e.extend({},t);var n,o,r=t[this.options.dataID],s=this.options.fields.length,l='id="'+r+'" class="item item-'+r+' ui-helper-clearfix">';l=this.options.sortable&&!this.options.doNotSave?"<li "+l+"</li>":"<div "+l+"</div>";var d=e(l);this.items[r]={state:"",savedValues:{},changedValues:{},currentValues:{},requiredValues:{},numChangedValues:0,focus:0};for(var c=0;c<s;++c){if(n=jQuery.extend(!0,{},this.options.fields[c]),"string"==typeof t[n[1].name]?n[1].value=t[n[1].name].replace(/"/g,"&quot;")||"":n[1].value=t[n[1].name]||"",a.options.doNotSave&&(n[1].temp_name=n[1].name,n[1].name=n[1].name+"-"+r),this.items[r].savedValues[n[1].name]=t[n[1].name],this.items[r].currentValues[n[1].name]=t[n[1].name],n[1]["class"]="undefined"==typeof n[1]["class"]?"":n[1]["class"]+" ",n[1]["class"]+=n[1].name+"-input item item-"+r,n[1].required=n[1].required||0,a.options.doNotSave&&(n[1]["class"]+=" "+n[1].temp_name+"-input",delete n[1].temp_name),i?a.items[r].requiredValues[n[1].name]=n[1].required:a.items[r].requiredValues[n[1].name]=0,a.items[r].savedValues[n[1].name]=n[1].value,"input"==n[0]){n[1].type=n[1].type||"text",n[1].size=n[1].size||16;var u="checkbox"==n[1].type?"change":"blur",p="<input";for(var h in n[1])"required"!=h&&("checkbox"!=n[1].type||"value"!=h?p+=" "+h+'="'+n[1][h]+'"':("1"==n[1][h]||i)&&(p+=' checked="checked"'));"checkbox"==n[1].type&&(p+=' value="1"'),p+=" />"}else if("select"==n[0]){var u="change",p="<select";for(var h in n[1])"required"!=h&&"heading"!=h&&(p+=" "+h+'="'+n[1][h]+'"');p+=">",i&&"undefined"!=typeof n[1].heading&&(this.items[r].currentValues[n[1].name]="",p+='<option value="" disabled="disabled" selected="selected">'+n[1].heading+"</option>");for(var f in n[2])void 0==this.items[r].currentValues[n[1].name]&&(this.items[r].currentValues[n[1].name]=f),p+='<option value="'+f+'"',(f==n[1].value&&!i||f==n[1]["default"]&&i)&&(this.items[r].currentValues[n[1].name]=f,p+=' selected="selected"'),p+=">"+n[2][f]+"</option>";p+="</select>"}var o=e(p).bind(u,function(t){var i=e(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/),n=i[1];a.items[n].focus=!1,setTimeout(function(){0==a.items[n].focus&&a._checkDelete(n)},100)}).bind("focus",function(t){var i=e(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/),n=i[1];a.items[n].focus=!0}).bind("change keyup",function(t){var i=e(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/),n=i[1];a._checkItemChange(n,this,!1)}).bind("keydown",function(t){if("text"==e(this).attr("type")){var i=e(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/),n=i[1];13==t.keyCode&&a._checkItemChange(n,this,!0)}});e('<div class="ui-autoform-input-container '+n[1].name+'-container"></div>').append(o).appendTo(d)}a.options.sortable&&!a.options.doNotSave&&e('<div class="drag-handle" title="click and drag to reorder"></div>').appendTo(d);var m=e('<div class="actions"></div>').appendTo(d);return e('<div class="delete" title="delete"><span>delete</span></div>').click(function(t){var i=e(this),n=function(){var e=i.parents(".item").attr("class").match(/item\-([^\-\s]+)/),t=e[1];a._deleteItem(t,!a.options.undelete)};a.options.undelete?n():"function"==typeof a.options.confirmDelete?a.options.confirmDelete.call(i.parents(".item"),n):proboards.confirm("Are you sure you want to delete this entry?",n)}).appendTo(m),a.options.undelete&&e('<div class="undelete" title="undo delete"><span>undelete</span></div>').click(function(t){var i=e(this).parents(".item").attr("class").match(/item\-([^\-\s]+)/),n=i[1];a._undeleteItem(n)}).appendTo(m),e('<div class="state"><span></span></div>').appendTo(d),this.options.onCreateItem.call(this.element,null,{item:d}),a.options.activeAjaxCalls--,d},_checkDelete:function(t){var i=this;i.options.activeAjaxCalls++;var a=e("> .item-"+t,this.element),n=e("> .ui-autoform-new-item",this.element);if(!a.hasClass("ui-autoform-new-item")){var o=this.options.checkDelete.call(this.element,null,{item:a});o===!0&&this._deleteItem(t)}if(n.length>1)for(var r=0;r<n.length-1;++r){var o=this.options.checkDelete.call(this.element,null,{item:n[r]});if(1==o){var s=e(n[r]).attr("class").match(/item\-([^\-\s]+)/),t=s[1];this._deleteItem(t)}}i.options.activeAjaxCalls--},_checkItemChange:function(t,i,a){var n=this,o=i.getAttribute("name"),r=i.getAttribute("type"),i=n.getInputValue(i),s=0;if("checkbox"==r&&(s=1),n.options.activeAjaxCalls++,i==this.items[t].currentValues[o]&&!a)return void n.options.activeAjaxCalls--;if(this.items[t].currentValues[o]=i,i!=this.items[t].savedValues[o]||s?"undefined"!=typeof this.items[t].changedValues[o]&&0!=this.items[t].changedValues[o]||(this.items[t].changedValues[o]=!0,++this.items[t].numChangedValues,1==this.items[t].requiredValues[o]&&(this.items[t].requiredValues[o]=0)):"undefined"!=typeof this.items[t].changedValues[o]&&1==this.items[t].changedValues[o]&&(this.items[t].changedValues[o]=!1,--this.items[t].numChangedValues),"undefined"!=typeof this.items[t].saveTimeout&&n.options.activeAjaxCalls--,clearTimeout(this.items[t].saveTimeout),this.items[t].saveTimeout=void 0,0==this.items[t].numChangedValues)"saved"==this.items[t].state||this.options.doNotSave||this._changeItemState(t);else{if(e(".item-"+t,this.element).hasClass("ui-autoform-new-item")&&0==e(this.element).children(".item-"+t).next().length){var l=this._createNewItem();l.hide().css({opacity:0}).appendTo(this.element).slideDown(500,function(){l.animate({opacity:1},{duration:500})})}this._changeItemState(t,"editing");var d=0;for(var c in this.items[t].requiredValues)0!=this.items[t].requiredValues[c]&&d++;if(0==d){var u=n.options.check.call(n.element,null,{item:e("> .item-"+t,n.element)});if(u===!0||n.options.doNotSave){var p=0;for(var h in this.items[t].currentValues)if("undefined"==typeof this.items[t].currentValues[h]||""==this.items[t].currentValues[h]){p=1;break}n.options.sortable&&!n.options.doNotSave&&(n.options.createData[t]=e(".ui-autoform li:not(.state-deleted)").length-1),a?("undefined"!=typeof n.items[t].saveTimeout&&n.options.activeAjaxCalls--,clearTimeout(n.items[t].saveTimeout),n.items[t].saveTimeout=void 0,n._saveItem(t)):1==p?(n.options.activeAjaxCalls++,this.items[t].saveTimeout=setTimeout(function(){n._saveItem(t),n.items[t].saveTimeout=void 0,n.options.activeAjaxCalls--},this.options.delay)):(n.options.activeAjaxCalls++,this.items[t].saveTimeout=setTimeout(function(){n._saveItem(t),n.items[t].saveTimeout=void 0,n.options.activeAjaxCalls--},this.options.shortDelay))}else n._errorItem(t,u)}}n.options.activeAjaxCalls--},_changeItemState:function(t,i,a){var n=this;if(!this.options.doNotSave){n.options.activeAjaxCalls++;var o=e(".item-"+t,this.element);o.stop(!0,!0),o.removeClass("state-"+this.items[t].state),o.addClass("state-"+i),this.items[t].state=i,e("#"+t+" > .state > span").setStatus(i,{message:a}),"saved"==i&&setTimeout(function(){o.removeClass("state-"+i)},this.options.duration),n.options.activeAjaxCalls--}},setItemState:function(t,i){var a=e(t).attr("id");this._changeItemState(a,i)},_deleteItem:function(t,i){var a=this;a.options.activeAjaxCalls++,clearTimeout(a.items[t].saveTimeout),a.items[t].saveTimeout=void 0,a.options.activeAjaxCalls--;var n=e("#"+t,this.element),o=e.extend({id:t},this.options.deleteData);if(a.options.sortable&&!a.options.doNotSave){var r=/position-(\d+)/i;r.test(e(n).attr("class"))&&(o.position=RegExp.$1)}i?n.hasClass("ui-autoform-new-item")||a.options.doNotSave?a._removeItem(t):proboards.ajax({url:this.options.deleteURL,data:o,type:"POST",dataType:"json",success:function(i){var n=e("> .item-"+t,a.element);n.addClass("ui-autoform-deleted-item"),a.options.onDelete.call(this.element,null,{item:n,data:i}),a._removeItem(t)}}):(this._disableItem(t),this._changeItemState(t,"loading"),n.hasClass("ui-autoform-new-item")?(a._changeItemState(t,"deleted"),a.options.checkDelete.call(a.element,null,{item:e("> .item-"+t,a.element)})===!0&&(a._removeItem(t),a.options.onDelete.call(this.element,null,{item:e("> .item-"+t,a.element)})),e(".ui-autoform").children(".item.state-error").each(function(){var t=a.options.check.call(e(".ui-autoform"),null,{item:e(this)},1);t===!0?a._saveItem(e(this).attr("id")):a._errorItem(e(this).attr("id"),t)})):a.options.doNotSave?(a.options.undelete&&a.options.checkDelete.call(a.element,null,{item:e("> .item-"+t,a.element)})!==!0||a._removeItem(t),e(".ui-autoform").children(".item.state-error").each(function(){var t=a.options.check.call(e(".ui-autoform"),null,{item:e(this)},1);t===!0?a._saveItem(e(this).attr("id")):a._errorItem(e(this).attr("id"),t)})):proboards.ajax({url:this.options.deleteURL,data:o,type:"POST",dataType:"json",success:function(i,n,o){a._changeItemState(t,"deleted"),a.options.undelete&&a.options.checkDelete.call(a.element,null,{item:e("> .item-"+t,a.element)})!==!0||a._removeItem(t),a.options.sortable&&a.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)",t),e(".ui-autoform").children(".item.state-error").each(function(){var t=a.options.check.call(e(".ui-autoform"),null,{item:e(this)},1);t===!0?a._saveItem(e(this).attr("id")):a._errorItem(e(this).attr("id"),t)});var r=e("> .item-"+t,a.element);r.addClass("ui-autoform-deleted-item"),a.options.onDelete.call(this.element,null,{item:r,data:i})},error:function(e){a._errorItem(t,[null,e.error])}})),a.options.activeAjaxCalls--},_undeleteItem:function(t){var i=this;i.options.activeAjaxCalls++;var a=e(".item-"+t,this.element),n=0;for(var o in this.items[t].currentValues)this.items[t].changedValues[o]=!0,++n;this.items[t].numChangedValues=n,this._enableItem(t),"undefined"!=typeof this.items[t].saveTimeout&&i.options.activeAjaxCalls--,clearTimeout(this.items[t].saveTimeout),this.items[t].saveTimeout=void 0;var r=this.options.check.call(this.element,null,{item:e(".item-"+t,this.element)});if(r===!0){if(this.options.updateData.undelete=1,i.options.sortable){var s=e(".ui-autoform li").index(a),l=e(".ui-autoform li").slice(0,s).find(".state-deleted").length;s=s-l+1,this.options.updateData.position=s}this._saveItem(t)}else this._errorItem(t,r);i.options.activeAjaxCalls--},_saveItem:function(t){var i=this,a=e(".item-"+t,this.element);if(this.options.doNotSave)return void e(".actions",a).css("display","");i.options.activeAjaxCalls++;var n,o,r,s,l;a.hasClass("ui-autoform-new-item")?(requestURL=this.options.createURL,
n=this.options.sortable?{position:this.options.createData[t]}:e.extend({id:t},this.options.createData),o=!0,r=this.options.onBeforeCreate,s=this.options.onCreate,l=this.options.onCreateError):(requestURL=this.options.updateURL,n=e.extend({id:t},this.options.updateData),this.options.updateData.undelete=0,o=!1,r=this.options.onBeforeUpdate,s=this.options.onUpdate,l=this.options.onUpdateError);for(var d in i.items[t].changedValues)1==i.items[t].changedValues[d]&&(n[d]=i.items[t].savedValues[d]=i.getInputValue(e("."+d+"-input",a)[0]));this._changeItemState(t,"loading"),r.call(this.element,null,{item:a,settings:n}),proboards.ajax({url:requestURL,data:n,type:"POST",dataType:"json",success:function(a,r,l){i._changeItemState(t,"saved"),i.items[t].changedValues={},i.items[t].numChangedValues=0;var d=e(i.element).children(".item-"+t),c=e("> .item-"+t,i.element);o?(c.removeClass("item-"+t).removeClass("ui-autoform-new-item").addClass("item-"+a[i.options.dataID]),d.attr("id",a[i.options.dataID]),i.options.sortable&&d.addClass("position-"+n.position),i.items[a[i.options.dataID]]=i.items[t]):i.options.sortable&&1==n.undelete&&i.updateOrder(".ui-autoform li:not(.ui-autoform-new-item)",t),s.call(this.element,null,{item:d,data:a})},error:function(e){i._errorItem(t,[null,e.error]),l.call(this.element,null,{item:a,data:e})}}),e(".actions",a).css("display",""),this.options.sortable&&e(".drag-handle",a).css("display",""),i.options.activeAjaxCalls--},_errorItem:function(t,i){var a=this;if(!this.options.doNotSave){a.options.activeAjaxCalls++;var n=e("div#"+t,this.element);this._changeItemState(t,"error",i[1]),e(".actions",n).css("display",""),this.options.sortable&&e(".drag-handle",n).css("display",""),a.options.activeAjaxCalls--}},_removeItem:function(t){var i=this.options.sortable&&!this.options.doNotSave?"li":"div",a=e(i+"#"+t,this.element);a.stop(!0,!0).animate({opacity:0},{duration:500,complete:function(){a.slideUp(500,function(){a.remove()})}})},_enableItem:function(t){var i=e(".item-"+t,this.element);e("input",i).removeAttr("disabled"),e("select",i).removeAttr("disabled")},_disableItem:function(t){var i=e(".item-"+t,this.element);e("input",i).attr("disabled","disabled"),e("select",i).attr("disabled","disabled")},_saveOrder:function(){var t=this;t.options.activeAjaxCalls++,proboards.ajax({url:t.options.updateOrderURL,data:t.options.updateOrder,type:"POST",dataType:"json",success:function(i,a,n){t._changeItemState(t.options.updateOrder.id,"saved",""),t.options.updateOrder={},e(t.options.sortableSelector).sortable("option","disabled",!1)},error:function(e){var i=["",e.error];t._errorItem(t.options.updateOrder.id,i)}}),t.options.activeAjaxCalls--},updateOrder:function(t,i){var a=this;a.options.activeAjaxCalls++;var n=e(t);e(n).filter(":not(.state-deleted)").each(function(){var o=this,r=e(o).attr("id"),s=e(n).filter(":not(.state-deleted)").index(o)+1,l=e(o).attr("class"),d=/position-(\d+)/i,c=null;if(d.test(l)&&(c=RegExp.$1),null===c?e(o).addClass("position-"+s).attr("tabindex",s):c!=s&&e(o).removeClass("position-"+c).addClass("position-"+s),i==r){var u={id:r,newPos:s,oldPos:c};if("function"==typeof a.options.updateOrderData){var p=a.options.updateOrderData.call(a,t,i);"object"==typeof p&&e.extend(u,p)}e(".ui-autoform.list").autoform("option","updateOrder",u)}}),a.options.activeAjaxCalls--},ignoreChange:function(e,t){var i=t.attr("name");this.items[e].currentValues[i]=t.val()},getInputValue:function(e){var t="";return t="checkbox"==e.type?e.checked?1:0:e.value}}),e.extend(e.ui.autoform,{version:"1.8.5"})}(jQuery),function(e){e.widget("ui.autosearch",{options:{url:"/",data:{},cache:!0,pageCache:"",container:e(document),cacheExpiry:3e5,hash:!1,delay:500,nonDataKeys:["scrollTo","csrf_token","rc_challenge_field","rc_response_field","adcopy_challenge_field","adcopy_response_field"],minChars:3,defaultResponse:{total:0,page:1,limit:15,results:""},updateCache:function(e,t){return t.response},beforeSearch:null,search:null,afterSearch:null},_create:function(){this.baseData=e.extend({},this.options.data),this.cache={},this.data={},this.initialUrl=location.href,this.lastCallSuccess=!0,this.lastResponse={},this.lastRequestDataStr="",this.lastVal="",this.popped=!1,this.poppingState=!1,this.queue=[],this.queueTimeout=null,this.searching=!1;var t=this,i=this._getDataFromHash(this._getHash());if(this.element.val(i.q),this.element.addClass("ui-autosearch").bind("keyup.autosearch",function(i){var a=e.ui.keyCode;switch(i.keyCode){case a.ESCAPE:i.preventDefault();break;case a.ENTER:case a.NUMPAD_ENTER:return i.preventDefault(),!1;default:var n=t.element.val();n!=t.lastVal&&t.element.addClass("ui-typing"),clearTimeout(t.typing),t.typing=setTimeout(function(){t.element.removeClass("ui-typing");var e=t._cleanQuery(t.element.val());t._cleanQuery(t.data.q)!=e&&(0==e.length||e.length>=t.options.minChars)&&(t.data.page=1,t.search())},t.options.delay)}""==e(this).val()?e(this).removeClass("state-editing"):e(this).addClass("state-editing")}).bind("keydown.autosearch",function(i){var a=e.ui.keyCode;switch(i.keyCode){case a.UP:t._trigger("up",i),i.preventDefault();break;case a.DOWN:t._trigger("down",i),i.preventDefault();break;case a.PAGE_UP:t._trigger("pageUp",i),i.preventDefault();break;case a.PAGE_DOWN:t._trigger("pageDown",i),i.preventDefault();break;case a.ENTER:case a.NUMPAD_ENTER:t._trigger("enter",i),i.preventDefault();break;case a.TAB:t._trigger("tab",i);break;case a.ESCAPE:t._trigger("escape",i),i.preventDefault();break;default:var n=t.element.val();n!=t.lastVal&&t.element.addClass("ui-typing"),clearTimeout(t.typing),t.typing=setTimeout(function(){t.element.removeClass("ui-typing");var e=t._cleanQuery(t.element.val());t._cleanQuery(t.data.q)!=e&&(0==e.length||e.length>=t.options.minChars)&&(t.data.page=1,t.search())},t.options.delay)}}),e.pushStateSupport()&&t.options.hash&&(window.onpopstate=function(e){(t.popped||location.href!=t.initialUrl)&&(t.poppingState=!0,t.data=t._getDataFromHash(t._getHash()),t.data.q||(t.data.q=""),t.search(t.data.q,!0,e&&null!=e.state))}),this.options.hash&&!e.pushStateSupport()){void 0!=e("body").data("hash_interval")&&clearInterval(e("body").data("hash_interval"));var a=setInterval(function(){t.data=t._getDataFromHash(t._getHash()),t.data.q||(t.data.q="");var e=t._getDataStr(t._getRequestData());e!=t.lastRequestDataStr&&t.search(t.data.q)},100);e("body").data("hash_interval",a)}},destroy:function(){this.element.unbind(".autosearch"),this.options.hash&&!e.pushStateSupport()&&clearInterval(e("body").data("hash_interval"))},_getDataFromHash:function(e){if(""==e)return{};for(var t={},i=e.split("&"),a=0;a<i.length;a++)if(i[a].indexOf("=")!=-1){var n=i[a].split("="),o=decodeURIComponent(n[1].replace(/\+/g," "));n[0].indexOf("[]")!=-1&&n[0].indexOf("[]")==n[0].length-2?("undefined"==typeof t[n[0]]&&(t[n[0]]=[]),t[n[0]].push(o)):t[n[0]]=o}return t},setData:function(t,i,a){if(e.inArray(t,this.options.nonDataKeys)==-1){"object"==typeof i&&t.indexOf("[]")==-1&&(t+="[]"),this.data[t]=i;var n=a&&1==a.replaceState,o=("filters[]"==t||"page"==t||"view"==t)&&(!a||a.scrollToTop),r="page"==t&&(!a||a.refreshAds),s=a&&a.ignorePending;this._search(n,o,r,s)}},setDataLite:function(t,i){e.inArray(t,this.options.nonDataKeys)==-1&&("object"==typeof i&&t.indexOf("[]")==-1&&(t+="[]"),this.data[t]=i)},getData:function(e){return this.data[e]},_getRequestData:function(){var t=e.extend(t,this.baseData,this.data);return t.q="undefined"==typeof t.q?"":this._cleanQuery(t.q),t},clearCache:function(e){e&&""!=e?(this._getDataStr(this._getRequestData())==e&&(this.lastCallSuccess=!1),this.cache[e]=""):(this.cache={},this.lastCallSuccess=!1)},_updateCache:function(){var e={};for(var t in this.lastResponse)e[t]=this.lastResponse[t];e.page&&(this.lastRequestDataStr=this.lastRequestDataStr.replace(/page=\d+/,"page="+e.page)),this.cache[this.lastRequestDataStr]=this.options.updateCache.call(this.element,null,{response:e})},search:function(e,t,i){"undefined"==typeof e&&(e=this.element.val()),this.element.hasClass("state-editing")||e!=this.element.attr("placeholder")||(e=""),this.data.q=e,"undefined"==typeof this.data.q&&(this.data.q=""),(""==this.data.q||this.data.q.length>=this.options.minChars)&&this._search(t,i)},_search:function(t,i,a,n){var o,r,s=this;if("undefined"==typeof t&&(t=!1),"undefined"==typeof i&&(i=!1),"undefined"==typeof a&&(a=!1),"undefined"==typeof n&&(n=!1),this.searching)return clearTimeout(this.queueTimeout),void(this.queueTimeout=setTimeout(function(){s._search(t,i,a,n)},200));if(this.searching=!0,this.element.addClass("ui-loading"),this._trigger("beforeSearch",null),o=this._getRequestData(),r=this._getDataStr(o),o.q!=this._cleanQuery(this.element.val())&&(this.element.val(o.q),this._trigger("change",null)),!e.pushStateSupport()&&this.options.hash){var l=this._getDataStr(this.data);if(!this._sameArguments(this._getHash(),l)){var d=this._getDataStr(this.data);d&&(window.location.hash=d)}}else if(e.pushStateSupport()&&this.options.hash){var l=this._getDataStr(this.data);stateUrl=l?"?"+l:location.pathname,t?window.history.replaceState({},null,stateUrl):(window.history.pushState({},null,stateUrl),this.popped=!0)}if(this.options.cache&&this.lastCallSuccess&&this._updateCache(),this.lastCallSuccess=!1,this.options.cache&&"object"==typeof this.cache[r])this.lastResponse=this.cache[r],this._searchSuccess(o,this.cache[r],!0,i,a),this._searchComplete(o,this.cache[r]),this.lastCallSuccess=!0,s.poppingState=!1;else{var c={url:this.options.url,data:o,type:"POST",dataType:"json",ignorePending:n,success:function(e,t,n){s.lastCallSuccess=!0,s.lastResponse=e,s.options.cache&&setTimeout(function(){s.clearCache(r)},s.options.cacheExpiry),s._searchSuccess(o,e,!1,i,a)},complete:function(e){s._searchComplete(o,s.lastResponse),s.poppingState=!1}};"function"==typeof s.options.error&&(c.error=s.options.error),proboards.ajax(c)}this.lastRequestDataStr=r},_searchComplete:function(e,t){this.element.removeClass("ui-loading"),this.searching=!1,this._trigger("afterSearch",null,{request:e,response:t})},_searchSuccess:function(e,t,i,a,n){"undefined"==typeof i&&(i=!1),"undefined"==typeof a&&(a=!1),this._trigger("search",null,{request:e,response:t,cached:i,scrollToTop:a,refreshAds:n})},_getDataStr:function(t){var i=[];for(var a in t)if(e.inArray(a,this.options.nonDataKeys)==-1)if(e.isArray(t[a])){for(var n=0;n<t[a].length;n++)if(t[a][n]&&""!=t[a][n]){var o=a.replace(/\[\]$/,"");i.push(o+"[]="+encodeURIComponent(t[a][n]).replace(/%20/g,"+"))}}else t[a]&&""!=t[a]&&(e.pushStateSupport()&&"page"==a&&1==t[a]||i.push(a+"="+encodeURIComponent(t[a]).replace(/%20/g,"+")));return i.sort(),i.join("&")},_getHash:function(){if(!this.options.hash)return"";var t=e.pushStateSupport()?window.location.search:window.location.hash;return t&&(t=t.substr(1)),t},_cleanQuery:function(t){return e.trim(t).replace(/\s{2,}/," ")},_sameArguments:function(e,t){e=e.split("&"),t=t.split("&");for(n in e){var i=n.split("="),a=jQuery.inArray(n,t);if(a!=-1)t.splice(a,1);else if(jQuery.inArray(i[0],this.options.nonDataKeys)==-1)return!1}for(n in t){var i=n.split("=");if(jQuery.inArray(i[0],this.options.nonDataKeys)==-1)return!1}return!0}}),e.extend(e.ui.autosearch,{version:"1.8.5"})}(jQuery),function(e){e.widget("ui.colorPicker",e.ui.mouse,{options:{noElement:!1,update:function(){},beforeShow:function(){},show:function(){},hide:function(){},autoUpdate:!0,autoOpen:!1,hex:"1979e6",allowTransparent:!1,pos:{my:"left top",at:"left bottom",of:null,offset:"0 2",collision:"flipfit"}},_create:function(){var t=this;this.colorPickerID="colorPicker",this.body=e(this.element).closest("body").get(0),"undefined"==typeof this.body&&(this.body=document.body),this.colorPicker=e("#"+this.colorPickerID,this.body),0==this.colorPicker.length&&(e(this.body).append('<div id="'+this.colorPickerID+'"><div id="'+this.colorPickerID+'-container"><div id="'+this.colorPickerID+'-SV"></div><div id="'+this.colorPickerID+'-SV-selBG"><div id="'+this.colorPickerID+'-SV-selKnob"><div id="'+this.colorPickerID+'-SV-selKnobInside"></div></div></div><div id="'+this.colorPickerID+'-H"></div><div id="'+this.colorPickerID+'-H-selBG"><div id="'+this.colorPickerID+'-H-selKnob"></div></div><div id="'+this.colorPickerID+'-SV-selArea"></div><div id="'+this.colorPickerID+'-H-selArea"></div><div id="'+this.colorPickerID+'-faceplate"></div><div id="'+this.colorPickerID+'-text">Choose <span id="'+this.colorPickerID+'-title"></span> color:</div><div id="'+this.colorPickerID+'-preview" title="Currently selected color."></div><div id="'+this.colorPickerID+'-previous" title="Previous color: Click to reset."></div><div id="'+this.colorPickerID+'-input">Hex:<br /><input name="hex" type="text" value="" maxlength="6" /></div><div id="'+this.colorPickerID+'-ok-button"><input name="ok" type="button" value="OK" /></div><div id="'+this.colorPickerID+'-cancel-button"><input name="cancel" type="button" value="Cancel" /></div><div id="'+this.colorPickerID+'-close"><span>X</span></div><div id="'+this.colorPickerID+'-extras" class="hide"></div><div id="'+this.colorPickerID+'-transparent"><input id="transparent" name="transparent" type="checkbox" /><label for="transparent">transparent</label></div></div></div>'),this.colorPicker=e("#"+this.colorPickerID,this.body),e("#"+this.colorPickerID+"-transparent",this.colorPicker).height("19").css({bottom:"7px",left:"7px",position:"absolute"}).hide()),this.transparentDiv=e("#"+this.colorPickerID+"-transparent",this.colorPicker),this.transparentInput=this.colorPicker.find('input[name="transparent"]'),e("#"+this.colorPickerID+"-input input",this.colorPicker).bind("change.transparent keydown.transparent",function(){t.transparentInput.removeAttr("checked"),t.transparent=!1}),this.transparentInput.bind("click",function(){"checked"==e(this).attr("checked")?(t.setHex("ffffff"),t.transparent=!0):t.transparent=!1}),e(this.element).on("change",function(){var i=e(this),a=i.val();if("transparent"==a){t.transparent=!0;var n="ffffff";t._setPreviousHex(n),t.setHex(n),t._update()}else if(3==a.length||6==a.length){t.transparent=!1;var n=a;n=t._validateHex(n),t._setPreviousHex(n),t.setHex(n),t._update()}}),this.colorPicker.hide(),this.options.noElement||e(this.element).addClass("ui-colorPicker"),this.options.pos.of||(this.options.pos.of=this.element),this.options.noElement||e(this.element).bind("mousedown.colorPicker focus.colorPicker",function(e){setTimeout(function(){t.show()},1)}),e(this.body).bind("mousedown.colorPicker",function(e){if(t.showing&&!t.dragging){for(var i=!1,a=e.target;!i&&a;)a===t.element[0]&&!t.options.noElement||a===t.colorPicker[0]?i=!0:a=a.parentNode;return i?void e.stopPropagation():void t.hide()}}),e(this.body).bind("keydown.colorPicker",function(e){27==e.which&&t.hide()});var i;"input"==this.element[0].nodeName.toLowerCase()&&"text"==this.element[0].getAttribute("type")&&(i=e(this.element).val()),i||(i=this.options.hex),i=this._validateHex(i),this._setPreviousHex(i),this.setHex(i),this.options.autoOpen&&e(this.colorPicker).show()},_validateHex:function(e){return e.match(/[^a-f0-9]/i)?"ff0000":e},isShowing:function(){return!this.colorPicker.is(":hidden")},show:function(t){var i=this;if(t||(t={}),this.options.allowTransparent?(e("#"+this.colorPickerID+"-container",this.colorPicker).addClass("has-transparent-checkbox"),this.transparentDiv.show()):(e("#"+this.colorPickerID+"-container",this.colorPicker).removeClass("has-transparent-checkbox"),this.transparentDiv.hide()),e.extend(!0,this.options,t),this.showing){if(!this.options.noElement)return;this.hide()}if("function"!=typeof this.options.beforeShow||this.options.beforeShow.call(this.element,null,{})!==!1){this.options.title?e("#"+this.colorPickerID+"-title",this.colorPicker).text(this.options.title):e("#"+this.colorPickerID+"-title",this.colorPicker).hide(),this.colorPicker.show();var a=this.options.extraHTML;if("undefined"!=typeof a){"function"==typeof a&&(a=a.call(this.colorPicker));var n=this.colorPicker.width()-20;this.originalHeight=e("#"+this.colorPickerID+"-container",this.colorPicker).height(),e("#"+this.colorPickerID+"-extras",this.colorPicker).css({bottom:"inherit",left:"inherit",position:"relative",width:n+"px"}).html(a).show();var o=e("#"+this.colorPickerID+"-container",this.colorPicker).height()+e("#"+this.colorPickerID+"-extras",this.colorPicker).height()+10;e("#"+this.colorPickerID+"-container",this.colorPicker).height(o),e("#"+this.colorPickerID+"-extras",this.colorPicker).css({bottom:"10px",left:"10px",position:"absolute"})}if(this.colorPicker.position(i.options.pos),this.options.offset){var r={};"undefined"!=typeof this.options.offset.top&&(r.top=this.options.offset.top),"undefined"!=typeof this.options.offset.left&&(r.left=this.options.offset.left),this.colorPicker.css(r)}var s=null;s||"input"!=this.element[0].nodeName.toLowerCase()||"text"!=this.element[0].getAttribute("type")||(s=e(this.element).val()),s||(s=t.hex||this.hex||this.options.hex),this.options.allowTransparent&&("transparent"==s?(this.transparentInput.attr("checked","checked"),this.transparent=!0,s="ffffff"):(this.transparentInput.removeAttr("checked"),this.transparent=!1)),s=this._validateHex(s),this._setPreviousHex(s),this.setHex(s),this.options.autoUpdate?(e("#"+this.colorPickerID+"-ok-button",this.colorPicker).hide(),e("#"+this.colorPickerID+"-cancel-button",this.colorPicker).hide()):(e("#"+this.colorPickerID+"-ok-button input",this.colorPicker).unbind("click.colorPicker"),e("#"+this.colorPickerID+"-ok-button input",this.colorPicker).bind("click.colorPicker",function(){i._update()}),e("#"+this.colorPickerID+"-cancel-button input",this.colorPicker).unbind("click.colorPicker"),e("#"+this.colorPickerID+"-cancel-button input",this.colorPicker).bind("click.colorPicker",function(){i.hide()})),e("#"+this.colorPickerID+"-close",this.colorPicker).unbind("click.colorPicker"),e("#"+this.colorPickerID+"-close",this.colorPicker).bind("click.colorPicker",function(e){i.hide()}),e("#"+this.colorPickerID+"-previous",this.colorPicker).unbind("click.colorPicker"),e("#"+this.colorPickerID+"-previous",this.colorPicker).bind("click.colorPicker",function(e){i.setHex(i.previousHex),i.options.allowTransparent&&(i.previousTransparent?(i.transparentInput.attr("checked","checked"),i.transparent=!0):(i.transparentInput.removeAttr("checked"),i.transparent=!1))}),e("#"+this.colorPickerID+"-input input",this.colorPicker).unbind("keydown.colorPicker keyup.colorPicker change.colorPicker"),e("#"+this.colorPickerID+"-input input",this.colorPicker).bind("keydown.colorPicker keyup.colorPicker change.colorPicker",function(e){return"keydown"==e.type?!(!e.ctrlKey&&!e.altKey)||!(e.shiftKey&&e.which>=48&&e.which<=57)&&(32!=e.which&&(!(e.which>=71&&e.which<=90)&&(188!=e.which&&190!=e.which&&191!=e.which&&192!=e.which&&(59!=e.which&&222!=e.which&&(219!=e.which&&220!=e.which&&221!=e.which&&(111!=e.which&&106!=e.which&&109!=e.which&&107!=e.which&&110!=e.which)))))):("keyup"==e.type&&i.setHex(this.value),void i.setHex(this.value))}),e(this.body).unbind("mouseup.colorPicker"),e(this.body).bind("mouseup.colorPicker",function(e){i._onMouseUp(e)}),e("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).unbind("mousedown.colorPicker"),e("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).bind("mousedown.colorPicker",function(t){if(this.style.cursor="none",e(i.body).bind("mousemove.colorPicker",function(t){i.dragging=!0;var a=e("#"+i.colorPickerID+"-SV-selArea",i.colorPicker).offset(),n=t.pageX-a.left,o=t.pageY-a.top;n<0&&(n=0),o<0&&(o=0),n>e("#"+i.colorPickerID+"-SV-selArea",i.colorPicker).width()&&(n=e("#"+i.colorPickerID+"-SV-selArea",i.colorPicker).width()),o>e("#"+i.colorPickerID+"-SV-selArea",i.colorPicker).height()&&(o=e("#"+i.colorPickerID+"-SV-selArea",i.colorPicker).height()),i.S=n/1.5,i.V=(150-o)/1.5,n-=Math.ceil(e("#"+i.colorPickerID+"-SV-selKnob",i.colorPicker).width()/2),o-=Math.ceil(e("#"+i.colorPickerID+"-SV-selKnob",i.colorPicker).height()/2),e("#"+i.colorPickerID+"-SV-selKnob",i.colorPicker).css({left:n+"px",top:o+"px"}),i._updateColor()}),e(this).bind("mouseup.colorPicker",function(e){i._onMouseUp(e)}),!t.layerX){var a=e("#"+i.colorPickerID+"-SV-selArea",i.colorPicker).offset();t.layerX=t.clientX+i.body.scrollLeft+document.documentElement.scrollLeft-a.left,t.layerY=t.clientY+i.body.scrollTop+document.documentElement.scrollTop-a.top}i.S=t.layerX/1.5,i.V=(150-t.layerY)/1.5;var n=t.layerX-Math.ceil(e("#"+i.colorPickerID+"-SV-selKnob",i.colorPicker).width()/2),o=t.layerY-Math.ceil(e("#"+i.colorPickerID+"-SV-selKnob",i.colorPicker).height()/2);return e("#"+i.colorPickerID+"-SV-selKnob",i.colorPicker).css({left:n+"px",top:o+"px"}),i._updateColor(),t.stopPropagation(),!1}),e("#"+this.colorPickerID+"-H-selArea",this.colorPicker).unbind("mousedown.colorPicker"),e("#"+this.colorPickerID+"-H-selArea",this.colorPicker).bind("mousedown.colorPicker",function(t){if(this.style.cursor="none",e(i.body).bind("mousemove.colorPicker",function(t){i.dragging=!0;var a=e("#"+i.colorPickerID+"-H-selArea",i.colorPicker).offset(),n=t.pageY-a.top;n<0&&(n=0),n>e("#"+i.colorPickerID+"-H-selArea",i.colorPicker).height()&&(n=e("#"+i.colorPickerID+"-H-selArea",i.colorPicker).height()),i.H=n/1.5*360/100,360==i.H&&(i.H=0),n-=Math.ceil(e("#"+i.colorPickerID+"-H-selKnob",i.colorPicker).height()/2),e("#"+i.colorPickerID+"-H-selKnob",i.colorPicker).css({top:n+"px"}),i._updateColor()}),e(i.body).bind("mouseup.colorPicker",function(e){i._onMouseUp(e)}),!t.layerX){var a=e("#"+i.colorPickerID+"-SV-selArea",i.colorPicker).offset();t.layerX=t.clientX+i.body.scrollLeft+document.documentElement.scrollLeft-a.left,t.layerY=t.clientY+i.body.scrollTop+document.documentElement.scrollTop-a.top}i.H=t.layerY/1.5*360/100;var n=t.layerY-Math.ceil(e("#"+i.colorPickerID+"-H-selKnob",this.colorPicker).height()/2);return e("#"+i.colorPickerID+"-H-selKnob",this.colorPicker).css({top:n+"px"}),i._updateColor(),t.stopPropagation(),!1}),this.showing=!0,this.options.show&&this.options.show.call(this.element)}},hide:function(){if(this.showing){var t=e("#"+this.colorPickerID+"-input input",this.colorPicker).val();t&&""!=t&&this._setPreviousHex(t),e("#"+this.colorPickerID+"-extras",this.colorPicker).is(":visible")&&(e("#"+this.colorPickerID+"-container",this.colorPicker).height(this.originalHeight),e("#"+this.colorPickerID+"-extras",this.colorPicker).hide()),this.colorPicker.hide(),this.showing=!1,"function"==typeof this.options.hide&&this.options.hide()}},_onMouseUp:function(t){e("#"+this.colorPickerID+"-SV-selArea",this.b).unbind("mousemove.colorPicker"),e("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).unbind("mouseup.colorPicker"),e("#"+this.colorPickerID+"-SV-selArea",this.colorPicker).css({cursor:"default"}),e("#"+this.colorPickerID+"-H-selArea",this.colorPicker).unbind("mousemove.colorPicker"),e("#"+this.colorPickerID+"-H-selArea",this.colorPicker).unbind("mouseup.colorPicker"),e("#"+this.colorPickerID+"-H-selArea",this.colorPicker).css({cursor:"default"}),e(this.body).unbind("mousemove.colorPicker"),this.dragging=!1},_updateColor:function(t){this.H||(this.H=0);var i=this._HSVtoRGB(this.H,this.S/100,this.V/100),a=this._RGBtoHEX(i[0],i[1],i[2]);this.hex=a,e("#"+this.colorPickerID+"-preview",this.colorPicker).css({backgroundColor:"#"+a}),t||(e("#"+this.colorPickerID+"-input input",this.colorPicker).val(a),this.options.allowTransparent&&(this.transparentInput.removeAttr("checked"),this.transparent=!1));var i=this._HSVtoRGB(this.H,1,1),a=this._RGBtoHEX(i[0],i[1],i[2]);e("#"+this.colorPickerID+"-SV",this.colorPicker).css({backgroundColor:"#"+a}),this.options.autoUpdate&&this._update()},_update:function(){var e="";this.options.update&&(e=this.hex),this.options.allowTransparent&&this.transparent&&(e="transparent"),this.options.update.call(this.element,e)},getHex:function(){return e("#"+this.colorPickerID+"-input input",this.colorPicker).val()},setHex:function(t){if(t&&""!=t){var i=t.length;if(3==i||6==i){var a=3==i?t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2):t;e("#"+this.colorPickerID+"-input input",this.colorPicker).val()!=t&&e("#"+this.colorPickerID+"-input input",this.colorPicker).val(t);var n=this._HEXtoRGB(a),o=this._RGBtoHSV(n[0],n[1],n[2]);this.H=o[0],this.S=100*o[1],this.V=100*o[2],this._updateColor(!0),this._updateKnobs()}}},_setPreviousHex:function(t){e("#"+this.colorPickerID+"-previous",this.colorPicker).css({backgroundColor:"#"+t}),this.previousHex=t,this.options.allowTransparent&&(this.previousTransparent=!!this.transparent)},_updateKnobs:function(){var t,i;t=1.5*this.S-Math.ceil(e("#"+this.colorPickerID+"-SV-selKnob",this.colorPicker).width()/2),i=150-1.5*this.V-Math.ceil(e("#"+this.colorPickerID+"-SV-selKnob",this.colorPicker).height()/2),e("#"+this.colorPickerID+"-SV-selKnob",this.colorPicker).css({left:t,top:i}),i=this.H/360*150-Math.ceil(e("#"+this.colorPickerID+"-H-selKnob",this.colorPicker).height()/2),e("#"+this.colorPickerID+"-H-selKnob",this.colorPicker).css({top:i})},_HEXtoRGB:function(e){return e=e.replace(/^#/,""),[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]},_RGBtoHEX:function(e,t,i){return e=e.toString(16),t=t.toString(16),i=i.toString(16),e.length<2&&(e="0"+e),t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),e+t+i},_RGBtoHSV:function(e,t,i){var a,n=Math.max(e,t,i),o=Math.min(e,t,i),r=n-o;0==r?a=0:n==e?(a=(t-i)/r%6,a<0&&(a+=6)):n==t?a=(i-e)/r+2:n==i&&(a=(e-t)/r+4);var s,l=60*a,d=n/255;return s=0==r?0:r/d,s/=255,[l,s,d]},_HSVtoRGB:function(e,t,i){var a=i*t;Hp=e/60,X=a*(1-Math.abs(Hp%2-1));var n,o,r;Hp<1?(n=a,o=X,r=0):Hp<2?(n=X,o=a,r=0):Hp<3?(n=0,o=a,r=X):Hp<4?(n=0,o=X,r=a):Hp<5?(n=X,o=0,r=a):Hp<6&&(n=a,o=0,r=X);var s=i-a;return n+=s,o+=s,r+=s,n*=255,o*=255,r*=255,n=Math.round(n),o=Math.round(o),r=Math.round(r),[n,o,r]}}),e.colorPicker=function(t,i){return"string"==typeof t?e(document.body).colorPicker(t,i):void e(document.body).colorPicker({noElement:!0})},e.extend(e.ui.colorPicker,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.combobox",{options:{position:{my:"left top",at:"left bottom",of:"mouse",collision:"flip",offset:"0 2"},onOpen:null,onClick:null,menuId:null},_create:function(){var t=this,i=t.options.menuId||t.element.next().attr("class");if("undefined"!=typeof i){var a=e("#"+i);a.addClass("c-menu"),"undefined"!=typeof a&&t.element.on("click",function(i){if(a.is(":visible"))a.hide();else{e(".c-menu").hide();var n=e.extend({},t.options.position);"self"==n.of?n.of=t.element:"mouse"==n.of&&(n.of=i),e("html").is(".ie7")?(n.my="right top",n.at="right bottom"):a.width()<t.element.width()&&a.width(t.element.width()-6),t.options.onOpen&&t.options.onOpen.call(t.element,a),a.show(),a.position(n),a.unbind("click.cb").one("click.cb","li",function(){t.options.onClick&&t.options.onClick.call(t.element,this),a.hide()});var o=t.element.get(0).ownerDocument;e(o).on("mousedown.cb",function(t){0==e(t.target).closest(".c-menu").length&&e(t.target).closest(".combobox").get(0)!=e(i.target).closest(".combobox").get(0)&&(a.unbind("click.cb"),e(this).unbind("mousedown.cb"),a.hide())})}})}}}),e.extend(e.ui.combobox,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.contextMenu",e.ui.mouse,{options:{},_create:function(){var t=this;e(this.element).addClass("ui-menu-context"),e(document).bind("mouseup",function(e){t.documentMouseUp(e)}),e(this.element).bind("contextmenu.ui-contextMenu",function(e){return!1}),this.menu=e(this.element).menu()},documentMouseUp:function(t){for(var i=!1,a=t.target;!i&&a;)a===this.element[0]&&(i=!0),a=a.parentNode;i||e(this.element).hide()},attach:function(t){var i=this,a=t.type,n=t.selector,o=t.callback;if("bind"==a)e(n).bind("mousedown.ui-contextMenu",function(e){i._onElementMouseDown(e,this,o)}).bind("contextmenu.ui-contextMenu",function(e){return!1});else if("delegate"==a){var r=t.parent;e(r).on("mousedown.ui-contextMenu",n,function(e){i._onElementMouseDown(e,this,o)}).on("contextmenu.ui-contextMenu",n,function(e){return!1})}},detach:function(t,i){"unbind"==t?e(i).unbind("mousedown.ui-contextMenu").unbind("contextmenu.ui-contextMenu"):"die"==t&&e(i).die("mousedown.ui-contextMenu").die("contextmenu.ui-contextMenu")},_onElementMouseDown:function(t,i,a){var n=this;2==t.button&&(t.stopPropagation(),e(i).bind("mouseup.ui-contextMenu",function(o){o.stopPropagation(),e(i).unbind("mouseup.ui-contextMenu"),n.menu.menu("clearClickCallback"),n.menu.menu("setClickCallback",function(e){n._optionClick(e,t,i,a)});for(var r=t.clientX,s=t.clientY,l=t.target;l.ownerDocument&&l.ownerDocument.defaultView&&l.ownerDocument.defaultView.frameElement;){l=l.ownerDocument.defaultView.frameElement;var d=e(l).offset();r+=d.left,s+=d.top}return e(n.element).css({left:r,top:s}).show(),!1}))},_optionClick:function(t,i,a,n){for(var o=t.target;o&&"li"!=o.nodeName.toLowerCase();)o=o.parentNode;if(o){var r=e(o).attr("id");""!=r&&(n.call(this,i,r,a)||e(this.element).hide())}}}),e.extend(e.ui.sortable,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.counter",{options:{begin:null,end:null,toFixed:0,duration:null,interval:100,callback:function(){}},_create:function(){},_init:function(){var t=this;if(null!=this.options.end&&null!=this.options.duration&&(null==this.options.begin?(this.options.begin=Number(e(this.element).text()),"number"!=typeof this.options.begin&&(this.options.begin=0)):e(this.element).text(this.options.begin),this.options.begin!=this.options.end)){var i;this.options.begin<this.options.end?(this.direction="up",i=this.options.end-this.options.begin):(this.direction="down",i=this.options.begin-this.options.end);var a=Math.ceil(this.options.duration/this.options.interval);this.change_value=i/a,this.value=Number(this.options.begin),setTimeout(function(){t._tick()},this.options.interval)}},_tick:function(){var t=this;return"up"==this.direction?(this.value+=this.change_value,this.value>this.options.end&&(this.value=Number(this.options.end))):(this.value-=this.change_value,this.value<this.options.end&&(this.value=Number(this.options.end))),e(this.element).text(this.value.toFixed(this.options.toFixed)),"up"==this.direction&&this.value>=this.options.end||"down"==this.direction&&this.value<=this.options.end?void("function"==typeof this.options.callback&&this.options.callback.call(this)):void setTimeout(function(){t._tick()},this.options.interval)}}),e.extend(e.ui.counter,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.displaybox",{options:{friendlies:[],position:null},_create:function(){var t=this;this.element.addClass("ui-displaybox"),e(document).bind("mousedown.displaybox",function(i){if(!e(t.element).is(":hidden")&&i.target!=e(t.element)[0]&&e(i.target).parents(".ui-displaybox")[0]!=e(t.element)[0]){for(var a,n=i.target,o=t.options.friendlies.length;n&&"html"!=n.nodeName.toLowerCase();){for(a=0;a<o;++a)if(n===e(t.options.friendlies[a])[0])return;n=n.parentNode}t.element.hide()}})},toggle:function(e){this.element.is(":hidden")?this.show(e):this.hide()},hide:function(){this.element.hide()},show:function(e){e||(e=this.options.position),this.element.show(),e&&this.element.position(e)}}),e.extend(e.ui.displaybox,{version:"1.8.5"})}(jQuery),function(e){e.widget("ui.filterlist",{options:{filters:[],values:[],change:null,delay:200,filters_only:!1,datePlaceholder:"yyyy-mm-dd",dateValidation:function(e){var t=new RegExp(/(\d{4})-(\d{2})-(\d{2})/);if(!t.test(e))return!1;var i=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10)-1,n=parseInt(RegExp.$3,10),o=new Date(Date.UTC(i,a,n)),r=o.getUTCFullYear(),s=o.getUTCMonth(),l=o.getUTCDate();return i==r&&a==s&&l==n}},_create:function(){var t,i,a=this,n="";if(this.element.addClass("ui-filterlist"),this.filter_index={},t=this.options.filters.length,this.options.filters_only){for(i=0;i<t;++i)this.filter_index[this.options.filters[i].name]=i;for(this.list=e('<div class="list simple"></div>').appendTo(this.element),i=0;i<t;++i)a._addSimpleFilter(i)}else{for(e(this.element).append('<div class="filters-title">Add Filters</div>'),this.filters=e('<ul class="filters"></ul>').appendTo(this.element),i=0;i<t;++i)n+='<li class="filter filter-'+i+' button">'+this.options.filters[i].display+"</li>",
this.filter_index[this.options.filters[i].name]=i;this.filters.append(n),e("li",this.filters).bind("click.ui-filterlist",function(){if(!e(this).hasClass("title")){var t=e(this).attr("class").match(/filter\-([0-9]+)/);a._addFilter(t[1])}}),this.list=e('<div class="list"><table></table></div>').appendTo(this.element)}},cleanFilterVal:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},addFilter:function(t,i,a){if("undefined"==typeof this.filter_index[t])return!1;var n=this._addFilter(this.filter_index[t],i,a);return e(".filter-input",n).val(t+":"+i+":"+a),n},_addFilter:function(t,i,a){var n,o,r,s=this,l=this.options.filters[t],d=l.condition_input_options,c=l.value_input_type,u=parseInt(l.value_input_size)||16,p=l.value_input_options,h=e('<tr class="filter filter-'+t+'"></tr>');if(n='<td class="display">'+l.display+'<input class="filter-input" type="hidden" name="filters[]" value="" /></td>',d&&0!=d.length){for(n+='<td><select class="condition-input filter-condition-input">',o=d.length,r=0;r<o;++r){var f=d[r];n+='<option value="'+f[0]+'"'+(i&&i==f[0]?' selected="selected"':"")+">"+f[1]+"</option>"}n+="</select>"}else n+='<td class="condition-input">';if("date"==c){var m=a?this.cleanFilterVal(a):"";n+='<input class="filter-value-input date" type="text" value="'+m+'" size="'+u+'" placeholder="'+this.options.datePlaceholder+'" />'}else if("text"==c||"searchbox"==c||"ip"==c){var m=a?this.cleanFilterVal(a):"";n+='<input class="filter-value-input'+("text"==c?" count-value":"")+'" type="text" value="'+m+'" size="'+u+'" />'}else if("select"==c&&"object"==typeof p){for(n+='<select class="filter-value-input">',o=p.length,r=0;r<o;++r){var g=p[r];n+='<option value="'+g[0]+'"'+("undefined"!=typeof g[2]?' style="'+g[2]+'"':"")+(a&&a==g[0]?' selected="selected"':"")+">"+g[1]+"</option>"}n+="</select>"}return n+='<div class="ui-filter-loading hide"></div></td><td><div class="filter-remove"><span>remove</span></div></td>',h.append(n),l.add_class&&e(".filter-value-input",h).addClass(l.add_class),e("> table",this.list).append(h),"custom"==this.options.filters[t].value_input_type&&this.options.filters[t].callback.call(this.element,h,e(".filter-input",h)),e(".filter-remove",h).on("click.ui-filterlist",function(){s.removeFilter(this.parentNode.parentNode)}),e(".filter-condition-input, .filter-value-input",h).not(".ui-searchbox-input").on("change.ui-filterlist, keyup.ui-filterlist",function(){var t=this,i=e(t),a=this.parentNode.parentNode,n=e(".filter-input",a);clearTimeout(i.data("timeout")),s._updateFilter(a);var o=n.data("old_value")||"",r=n.val(),l=o.split(":",3),d=r.split(":",3);if((""!=d[2]||""!=l&&""!=l[2])&&r!=o){var c=!0,u="Make sure the date is valid and it is in the format: "+s.options.datePlaceholder+".";i.is(".date")&&!s.options.dateValidation(i.val())?(e.inputError(i,u),c=!1):i.is(".ip")&&!i.val().match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)?c=!1:i.is(".count-value")&&i.val().match(/[^\d,]/)&&(e.inputError(i,"This value must be a valid number."),c=!1),c&&(e(".ui-filter-loading",a).removeClass("hide"),clearTimeout(s.timeout),s.searching=!0,s.timeout=setTimeout(function(){e(".filter-input",a).data("old_value",r),s._change(),s.searching=!1},s.options.delay))}}),e(this.list).show(),h},addSimpleFilter:function(t,i,a){if("undefined"==typeof this.filter_index[t])return!1;var n=this._addSimpleFilter(this.filter_index[t],i,a);return e(".filter-input",n).val(t+":"+i+":"+a),n},_addSimpleFilter:function(t,i,a){var n=null;return 0==e(".filter-"+t).length?(n=e('<div class="filter filter-'+t+'"><div class="condition-input"></div><input class="filter-input" type="hidden" name="filters[]" value="" /></div>'),e(this.list).append(n),"custom"==this.options.filters[t].value_input_type&&this.options.filters[t].callback.call(this.element,n,e(".filter-input",n))):n=e(".filter-"+t),e(this.list).hide().show(),n},searching:function(){return this.searching},_updateFilter:function(t){var i=e(".filter-value-input",t).val()||"",a="";if(""!=i){var n=e(t).attr("class").match(/filter\-([0-9]+)/);a+=this.options.filters[n[1]].name+":",a+=(e(".filter-condition-input",t).val()||"eq")+":";var o=e(".filter-value-input",t)[0].getAttribute("placeholder");o&&o==e(".filter-value-input",t)[0].value||(a+=e(".filter-value-input",t).val()||"")}e(".filter-input",t).val(a)},refresh:function(){this._change()},_change:function(){var t,i=this,a=[],n=e(".filter-input",this.element),o=n.length;for(t=0;t<o;++t){var r=n[t].value.split(":",3);""!=n[t].value&&""!=r[2]&&a.push(n[t].value)}i._trigger("change",null,{values:a}),e(".ui-filter-loading",i.element).addClass("hide")},removeAll:function(t){var i,a=e(".list .filter",this.element),n=a.length;for(i=0;i<n;++i)this.removeFilter(a[i],t)},removeFilter:function(t,i){var a=this,n=e(".filter-input",t).val(),o=n.split(":",3);e(".filter-condition-input, .filter-value-input",t).unbind(".filter.edit"),clearTimeout(e(".filter-condition-input",t).data("timeout")),clearTimeout(e(".filter-value-input",t).data("timeout")),e(t).remove(),i||""==n||""==o[2]||this._change(),0==e("tr",a.list).length&&e(this.list).hide()}}),e.extend(e.ui.filterlist,{version:"1.8.5"})}(jQuery),function(e){e.widget("ui.form",{options:{create:function(){},beforeSubmit:function(){},submit:function(){},validations:[],errors:{},positionError:null},get_options:function(){return this.options},_create:function(){var t=this;this.existsRegexp=/(.*)\s+if\s+([^\s]+)\s+(!){0,1}exists/,this.inputIndex={},e('input[type="submit"]',this.element).removeData("form.disabled"),e(this.element).bind("submit",function(e){return t._submit(e)}),0==e(".ui-form-error").length&&e('<div class="ui-form-error"></div>').appendTo(document.body),e.style_checkboxes();var i;for(i in this.options.errors)break;i&&this.options.errors[i].length>0&&e.inputError(this.element[0].elements[i],this.options.errors[i][0],this.options.positionError)},_submit:function(t){return!e('input[type="submit"]:focus',this.element).data("form.disabled")&&(this.options.beforeSubmit.call(this.element[0],t)!==!1&&(!!this.validateAll()&&(e("input",this.element[0]).each(function(){e(this).attr("placeholder")!=e(this).val()||e(this).hasClass("state-editing")||e(this).val("")}),"undefined"!=typeof e.data(this.element[0],"events")&&"undefined"!=typeof e.data(this.element[0],"events").validated?(e(this.element).trigger("validated"),!1):this.options.submit.call(this.element[0],t)!==!1&&(e('input[type="submit"]',this.element).not(".no-disable").data("form.disabled",!0),!0))))},validateAll:function(){for(var e=this.options.validations,t=0,i=e.length;t<i&&t<100;t++)if(!this.validate(e[t]))return!1;return!0},validateSpecified:function(e){for(var t={},i=0,a=e.length;i<a;i++)t[e[i]]=!0;for(var n=this.options.validations,i=0,a=n.length;i<a;i++){var o=n[i];if(t[o.field]&&!this.validate(o))return!1}return!0},validate:function(t,i){if(e("input").removeAttr("aria-invalid"),e("input").removeClass("has-error"),i){if(!t.opts.if_exists)return!0;if("object"!=typeof t.opts.if_exists&&(t.opts.if_exists=[t.opts.if_exists]),e.inArray(i,t.opts.if_exists)==-1)return!0}if(t.opts.if_exists){"object"!=typeof t.opts.if_exists&&(t.opts.if_exists=[t.opts.if_exists]);for(var a=!0,n=0;n<t.opts.if_exists.length&&a;n++){var o=this.element[0].elements[t.opts.if_exists[n]];if("undefined"!=typeof o){if(o.name==i)continue;if(o.length&&o.length>0){for(var r=o,s=null,l=0;l<r.length&&!s;l++)r[l].checked&&!r[l].disabled&&(s=r[l]);s&&""!=s.value&&0!=s.value||(a=!1)}else a=!o.disabled&&("checkbox"==o.type?o.checked:e.check_exists(e.getInputValue(o)))}}if(!a)return!0}if(t.opts.if_not_exists){"object"!=typeof t.opts.if_not_exists&&(t.opts.if_not_exists=[t.opts.if_not_exists]);for(var d=!0,n=0;n<t.opts.if_not_exists.length&&d;n++){var o=this.element[0].elements[t.opts.if_not_exists[n]];if("undefined"!=typeof o){if(o.name==i)continue;if(o.length&&o.length>0){for(var r=o,s=null,l=0;l<r.length&&!s;l++)r[l].checked&&(s=r[l]);s&&""!=s.value&&0!=s.value&&(d=!1)}else d="checkbox"==o.type?!o.checked:!e.check_exists(e.getInputValue(o))}}if(!d)return!0}if("count"==t.name){for(var c,u=this.element[0].elements[t.field+"[]"],p=0,n=0;n<u.length;n++)""==e.trim(u[n].value)?c||(c=u[n]):p++;return!!e.check_amount(p,t.opts)||(c||(c=u[u.length-1]),e.inputError(c,t.message,this.options.positionError),!1)}var o=this.element[0].elements[t.field];if("undefined"!=typeof o){var h=e.getInputValue(o);if(t.opts.fields){t.opts.values={};for(var n=0;n<t.opts.fields.length;n++)t.opts.values[t.opts.fields[n]]=e.getInputValue(this.element[0].elements[t.opts.fields[n]])}if("function"!=typeof e["check_"+t.name])return alert("Invalid validation check: "+t.name+"."),!1;if(!e["check_"+t.name](h,t.opts)){if("undefined"!=typeof t.opts.area_of_effect){var f=e(t.opts.area_of_effect),m=f.offset();window.scrollTo(0,m.top),f.flashError(),o=f}return e.inputError(o,t.message,this.options.positionError),!1}}return!0}}),e.check_exists=function(t,i){if(i&&i.values)var a=i.values.message_mode;return"bbcode"==a?(t=t.replace(/\[\/?(b|i|p|u|s|em|div|sub|sup|font|span|strong)(\s+.*?)?\]/gim,""),t=t.replace(/\[br\]/gi,"")):"visual"==a&&(t=t.replace(/<\/?(b|i|p|u|s|em|div|sub|sup|font|span|strong)(\s+.*?)?>/gim,""),t=t.replace(/<br(\s?\/)?>/gi,"")),t=t.replace(/&nbsp;/g,""),t=e.trim(t),""!=t},e.check_date_format=function(e,t){if(""===e)return!0;var i=null,a=null,n=null;if(t.input_date_format&&t.input_date_regex){var o=new RegExp(t.input_date_regex),r=e.match(o);if(r){var s=t.input_date_format.replace(/[^dmY]/g,"").split("");for(r.shift();s.length;){var l=parseInt(r.shift(),10),d=s.shift();switch(d){case"d":n=l;break;case"m":a=l;break;case"Y":i=l}}}}if(!i||!a||!n)return!1;var c=proboards.time.createDate(e,"00:00",{utc:!0});if(!c)return!1;var u=c.getUTCFullYear(),p=c.getUTCMonth()+1,h=c.getUTCDate();return i==u&&a==p&&h==n},e.check_time_format=function(e,t){return!(""!==e&&!/^(?:(?:(?:(?:0?[1-9])|(?:1[0-2])):[0-5][0-9]\s?[ap]m)|(?:(?:(?:[01]?[0-9])|(?:20|21|22|23)):[0-5][0-9]))$/i.test(e))},e.check_url=function(e,t){var i=new RegExp("^(?:(?:https?:)?//)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff0-9-]{2,63})))(?::\\d{2,5})?(?:(?:/|\\?)\\S*)?$","i");return i.test(e)},e.check_matching_values=function(t,i){var a=e('[name|="'+i.field+'"]').val();return t==a},e.check_date_range=function(t,i){var a=i.start_date||"start_date";if(!e.check_date_format(t,i)||!e.check_date_format(i.values[a],i))return!1;var n=proboards.time.createDate(i.values[a],"00:00",{utc:!0}),o=proboards.time.createDate(t,"00:00",{utc:!0});return n<=o},e.check_date_and_time_range=function(t,i){if(!e.check_date_range(t,i))return!1;var a=proboards.time.createDate(i.values.start_date,"00:00",{utc:!0}),n=proboards.time.createDate(t,"00:00",{utc:!0}),o=a.getTime()==n.getTime(),r=i.values.start_time,s=i.values.end_time;if(!(o&&r&&s))return!0;var l=i.values.start_time.split(":"),d=i.values.end_time.split(":"),c=parseInt(l[0]),u=parseInt(l[1].substr(0,2)),p=/(am|pm)/i;if(p.test(l[1])){var h=RegExp.$1.toLowerCase();"pm"==h&&12!=c?c+=12:"am"==h&&12==c&&(c=0)}var f=parseInt(d[0]),m=parseInt(d[1].substr(0,2));if(p.test(d[1])){var g=RegExp.$1.toLowerCase();"pm"==g&&12!=f?f+=12:"am"==g&&12==f&&(f=0)}return 60*f+m>=60*c+u},e.check_email=function(e,t){var i=new RegExp("^[a-z0-9.!#$%&'\"*+-=?^`_{|}~\\\\ ]{1,63}@(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff0-9-]{2,63}))$","i");return!!(i.test(e)&&e.length<255)},e.check_value=function(e,t){return"undefined"!=typeof t.case_sensitive&&t.case_sensitive?e==t.value:e.toString().toLowerCase()==t.value.toString().toLowerCase()},e.check_dollar=function(e,t){var i="undefined"!=typeof t.allow_sign&&t.allow_sign?"^\\$?":"^";return i+="undefined"!=typeof t.allow_commas&&t.allow_commas?"(\\d+|[1-9]\\d{0,2}(,\\d{3})*)":"\\d+",i+="(\\.[0-9]{2})?$",i=new RegExp(i),!!i.test(e)},e.check_amount=function(t,i){if(!e.check_numeric(t,i))return!1;if("undefined"!=typeof i.allow_commas&&i.allow_commas&&(t=t.toString().replace(",","")),t=parseFloat(t,10),"undefined"!=typeof i.less_than){if(t<i.less_than)return!0}else if("undefined"!=typeof i.less_than_equal_to){if(t<=i.less_than_equal_to)return!0}else if("undefined"!=typeof i.equal_to){if(t==i.equal_to)return!0}else if("undefined"!=typeof i.not_equal_to){if(t!=i.not_equal_to)return!0}else if("undefined"!=typeof i.greater_than_equal_to){if(t>=i.greater_than_equal_to)return!0}else if("undefined"!=typeof i.greater_than){if(t>i.greater_than)return!0}else alert("Invalid amount check option provided.");return!1},e.check_length=function(e,t){if(e=e.toString(),"undefined"!=typeof t.less_than){if(e.length<t.less_than)return!0}else if("undefined"!=typeof t.less_than_equal_to){if(e.length<=t.less_than_equal_to)return!0}else if("undefined"!=typeof t.equal_to){if(e.length===t.equal_to)return!0}else if("undefined"!=typeof t.greater_than_equal_to){if(e.length>=t.greater_than_equal_to)return!0}else if("undefined"!=typeof t.greater_than){if(e.length>t.greater_than)return!0}else alert("Invalid amount check option provided.");return!1},e.check_message_length=function(t,i){return"bbcode"!=e('input[name="message_mode"]').val()&&!i.bbcode||(t=t.replace(/\n/gm,"[br]"),t=t.replace(/\r/gm,""),!(t.length>i.max_length))},e.check_numeric=function(e,t){var i="undefined"!=typeof t&&"undefined"!=typeof t.allow_commas&&t.allow_commas?"^(\\d*|[1-9]\\d{0,2}(,\\d{3})*)$":"^\\d*$";return i=new RegExp(i),!!i.test(e)},e.check_regex=function(e,t){var i=new RegExp(t.regex,t.case_insensitive?"i":""),a=!!i.test(e);return t.negate?!a:a},e.clearInputError=function(){e(".ui-form-error").hide()},e.getInputValue=function(t){if(t.length&&t.length>1&&!e(t).is("select")){for(var i=null,a=0;a<t.length&&!i;a++)t[a].checked&&(i=t[a]);if(null==i)return"";t=i}return("checkbox"!=e(t).attr("type")||"undefined"!=typeof e(t).attr("checked")&&""!=e(t).attr("checked"))&&(e(t).attr("placeholder")!=t.value||e(t).hasClass("state-editing"))&&t?t.value:""},e.inputError=function(t,i,a){var n=e(t),o=e(".ui-form-error");if(n.is(":hidden")){var r=e("."+n.attr("name")+"_alt");r.length>0&&(n=r.eq(0))}if(t=n.get(0),0==o.length&&(o=e('<div class="ui-form-error"></div>').appendTo(document.body)),o.one("click",e.clearInputError),n.addClass("has-error"),"function"==typeof a)a.call(n,i);else{var s;n.is(":hidden")?(n.show(),n.is('[type="hidden"]')?(t.type="text",s=n.offset(),s.top+=n.outerHeight(),t.type="hidden"):s=n.offset(),n.hide()):s=n.offset(),s&&(s.top+=n.outerHeight(),o.css({top:s.top+"px",left:s.left+"px"})),o.text(i).attr("role","alert").show(),n.attr("aria-invalid","true");var l=n.get(0).tagName.toLowerCase(),d=e.inArray(l,["a","input","select","textarea"])!=-1;if(d)n.focus().flashError();else{var c=n.offset().top-60;c<0&&(c=0),window.scrollTo(0,c)}}e.handleError(t)},e.handleError=function(t){t=e(t),0==t.filter(":visible").length&&(t=t.closest("body")),t.one("keypress.form click.form change.form",function(t){e.clearInputError()})},e.fn.flashError=function(t){var i=this;"undefined"==typeof t&&(t="ui-error"),e(i).addClass(t),clearTimeout(a);var a=setTimeout(function(){e(i).removeClass(t),a=setTimeout(function(){e(i).addClass(t),a=setTimeout(function(){e(i).removeClass(t)},200)},200)},200)},e.fn.input_placeholder=function(t){return""==e(this).val()&&(e(this).val(t),e(this).addClass("ui-active")),e(this).addClass("ui-input-placeholder"),e(this).bind("focus",function(){e(this).val()==t&&(e(this).val(""),e(this).removeClass("ui-active"))}),e(this).bind("blur",function(){""==e(this).val()&&e(this).val(t),e(this).val()==t&&e(this).addClass("ui-active")}),this},e.style_checkboxes=function(){var t=e(".styled_checkbox");t.each(function(){e(this);e(this).on("click",function(){var t=e(this).parent();t.find("label").toggleClass("checked",e(this).prop("checked"))})})},e.extend(e.ui.form,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.loadingStatus",{options:{loadingClass:"loading",loadingCss:null,loadingText:"Saving...",successClass:"success",successCss:null,successText:"Saved",errorClass:"error",errorCss:null,errorText:"Error",successDisplayTime:3e3,errorDisplayTime:4e3},_create:function(){this.element.addClass("ui-status")},_init:function(){this.timeout=null,this.originalStyle=this.element.attr("style"),this.element.css("display",""),this.element.css("opacity",""),this.baseStyle=this.element.attr("style"),this.element.css("opacity",0).hide(),this.visible=!1},_destroy:function(){this.element.removeClass("ui-status").attr("style",this.originalStyle),e.Widget.prototype.destroy.call(this)},setStatus:function(e,t){var i=this,a=this.options;this.clearStatus("loading"==e),"loading"==e?(this.element.html(t||a.loadingText).addClass(a.loadingClass),a.loadingCss&&this.element.css(a.loadingCss),this.toggle(!0)):"success"==e?(this.element.html(t||a.successText).addClass(a.successClass),a.successCss&&this.element.css(a.successCss),i.toggle(!0),this.timeout=setTimeout(function(){i.toggle(!1)},a.successDisplayTime)):"error"==e&&(this.element.html(t||a.errorText).addClass(a.errorClass),a.errorCss&&this.element.css(a.errorCss),i.toggle(!0),this.timeout=setTimeout(function(){i.toggle(!1)},a.errorDisplayTime))},classes:function(){var e=this.options;return[e.loadingClass,e.successClass,e.errorClass]},clearStatus:function(e){clearTimeout(this.timeout),this.element.html("").removeClass(this.classes().join(" ")).attr("style",this.baseStyle),e&&(this.element.css("opacity",0).hide(),this.visible=!1)},toggle:function(e){var t=this;if("undefined"==typeof e&&(e=!this.visible),e!==this.visible){var i=e?{opacity:1}:{opacity:0},a=e?null:function(){t.element.hide()};this.element.animate(i,a),this.visible=e}}})}(jQuery),function(e){e.widget("ui.menu",{options:{showOn:"hover",show:null,hide:null,beforeShow:null,onClose:null,button:null,click:null,clickHide:!0,position:{my:"left top",at:"left top",of:"mouse",collision:"flipfit"},addedMenu:null,showDelay:0},_create:function(){var t=this;this.element.addClass("ui-menu ui-helper-clearfix").hide(),e("li:has(ul)",this.element).addClass("ui-menu-has-sub-menu"),e("li > a",this.element).on("mouseenter",function(t){var i=e(this).closest("li");e("> ul",i).removeClass("state-timeout-hiding");var a,n=i.parents("li"),o=n.length;for(a=0;a<o;++a)e("> ul",n[a]).removeClass("state-timeout-hiding")}),e("li:has(ul) > a",this.element).on("mouseenter",function(i){var a=e(this).closest("li");return clearTimeout(t.hidingTimeout),t._hideTimedOutMenus(),t._showMenu(e("> ul",a)),!1}),e("li > a",this.element).on("blur",function(i){t.element.addClass("state-timeout-hiding"),e(this).parentsUntil(t.element,"ul").addClass("state-timeout-hiding"),clearTimeout(t.hidingTimeout),t.hidingTimeout=setTimeout(function(){t._hideTimedOutMenus()},500)}),e("li:has(ul)",this.element).on("mouseleave",function(i){e("> ul",this).addClass("state-timeout-hiding"),clearTimeout(t.hidingTimeout),t.hidingTimeout=setTimeout(function(){t._hideTimedOutMenus()},500)}),e("li",this.element).append('<span class="arrow right"><span></span></span>').live("click.menu",function(i){e(this).hasClass("state-disabled")||(t._trigger("click",i,{item:this}),(!e(this).hasClass("no-hide")&&!e(this).hasClass("ui-menu-has-sub-menu")||e(this).hasClass("actionable"))&&t.options.clickHide&&t.hide()),i.stopPropagation()}),e(this.element).bind("contextmenu.ui-menu",function(e){if(t.disableContextMenu)return t.disableContextMenu=!1,!1}).bind("mouseenter",function(){t.element.data("hotkey-open",!1)}),this.options.button&&"rightClick"==this.options.showOn&&e(this.options.button).bind("contextmenu.ui-menu",function(e){return e.preventDefault(),!1}),this.options.button&&(e("a:first",e(this.options.button)).on("mouseenter",function(i){if("hover"==t.options.showOn){var a=setTimeout(function(){t.show(i)},t.options.showDelay);e(this).data("timeout",a)}}),e("a:first",e(this.options.button)).on("mouseleave",function(i){"hover"==t.options.showOn&&clearTimeout(e(this).data("timeout"))}),e(this.options.button).bind("mousedown.ui-menu",function(e){("click"==t.options.showOn&&1==e.which||"rightClick"==t.options.showOn&&3==e.which)&&(t.element.is(":visible")?t.hide():t.show(e),t.disableContextMenu=!0)})),e(document).bind("mousedown.ui-menu",function(i){if(t.element.data("hotkey-open",!1),!t.element.is(":hidden")){for(var a=i.target,n=!1;!n&&a&&a.nodeName&&"body"!=a.nodeName.toLowerCase();)(a===t.element[0]||t.options.button&&a===e(t.options.button)[0]||t.options.addedMenu&&a===e(t.options.addedMenu)[0])&&(n=!0),a=a.parentNode;n||t.hide()}})},_showMenu:function(t){var i={my:"left top",at:"right top",of:e(t).parent("li"),offset:"-2 -3",collision:"flipfit"};e(t).show().position(i)},_hideMenu:function(t){e(t).hide()},_hideTimedOutMenus:function(){var t,i=e("ul.state-timeout-hiding",self.element),a=i.length;for(t=0;t<a;++t)e(i[t]).removeClass("state-timeout-hiding"),this._hideMenu(i[t])},show:function(t){if("function"!=typeof this.options.beforeShow||this.options.beforeShow.call(this.element)!==!1){if(this.element.show(),"rightClick"==this.options.showOn){var i=e.extend({},this.options.position);i.of=t,this.element.position(i)}else this.element.position(this.options.position);this._trigger("show")}},hide:function(){this.element.is(":hidden")||this.element.data("hotkey-open")||(this.element.hide(),this._trigger("hide"),this.options.onClose&&this.options.onClose.call())},clearClickCallback:function(){e("li",this.element).die("mouseup.ui-menu")},setClickCallback:function(t){var i=this;e("li",this.element).live("mouseup.ui-menu",function(e){e.stopPropagation(),t.call(i,e)})},showOption:function(t){e("li."+t,this.element).show()},hideOption:function(t){e("li."+t,this.element).hide()},showAllOptions:function(){e("li",this.element).show()},hideAllOptions:function(){e("li",this.element).hide()},enableOption:function(t){e("li."+t,this.element).removeClass("state-disabled")},disableOption:function(t){e("li."+t,this.element).addClass("state-disabled")},enableAllOptions:function(){e("li",this.element).removeClass("state-disabled")},disableAllOptions:function(){e("li",this.element).addClass("state-disabled")}}),e.extend(e.ui.menu,{version:"1.8.5"})}(jQuery),function(e){e.widget("ui.pagination",{options:{maxSlots:9,total:0,page:1,limit:10},_create:function(){var t=this;this.page=this.options.page,this.pages=Math.ceil(this.options.total/this.options.limit),this.options.limit<1&&(this.options.limit=1);var i=this.options.maxSlots;i<5&&(i=this.options.maxSlots=5),this.pivot=Math.ceil(i/2),this.evenSlots=i%2==0,this.element.hide().addClass("ui-pagination"),this.prevPage=e('<li class="ui-pagination-page ui-pagination-prev"><a>&laquo; Prev</a></li>');for(var a="",n=0;n<i;n++)a+='<li class="ui-pagination-page ui-pagination-slot"><a rel="norewrite"></a></li>';this.nextPage=e('<li class="ui-pagination-page ui-pagination-next"><a>Next &raquo;</a></li>'),this.element.append(this.prevPage,a,this.nextPage),e(".ui-pagination-page",this.element).hover(function(t){e(this).hasClass("state-disabled")||e(this).hasClass("state-selected")||e(this).addClass("state-hover")},function(t){e(this).removeClass("state-hover")}),e(this.element).on("click",".ui-pagination-page",function(i){if(!e(this).hasClass("state-disabled")&&!e(this).hasClass("state-selected")){var a=i.target;"a"==i.target.nodeName.toLowerCase()&&(a=a.parentNode);var n=e("a",a).text().replace(",","");if(n.indexOf("Prev")!=-1)o=t.page-1;else if(n.indexOf("Next")!=-1)o=t.page+1;else if(n.indexOf("..")!=-1){var o=parseInt(prompt("Enter a page number:",""),10);if(isNaN(o))return!1;o<1&&(o=1),o>t.pages&&(o=t.pages)}else o=n;t._trigger("change",i,{page:o,pages:t.pages})}return!1}),this.refresh(),this.element.show()},_commify:function(e){var t="";e=e.toString(),e=e.split(""),e=e.reverse();for(var i=0,a=0;i<e.length;i++)a>2&&(t+=",",a=0),t+=e[i],a++;return t=t.split(""),t=t.reverse(),t.join("")},gotoNextPage:function(){this.page!=this.pages&&this._trigger("change",null,{page:this.page+1,pages:this.pages})},gotoPreviousPage:function(){1!=this.page&&this._trigger("change",null,{page:this.page-1,pages:this.pages})},changeMaxSlots:function(t){this.options.maxSlots=t,this.pivot=Math.ceil(this.options.maxSlots/2),this.evenSlots=this.options.maxSlots%2==0,e(this.element).html(""),this.prevPage=e('<li class="ui-pagination-page ui-pagination-prev"><a href="">&laquo; Prev</a></li>').appendTo(e(this.element));for(var i=0;i<this.options.maxSlots;i++)e(this.element).append('<li class="ui-pagination-page ui-pagination-slot"><a></a></li>');this.nextPage=e('<li class="ui-pagination-page ui-pagination-next"><a href="">Next &raquo;</a></li>').appendTo(e(this.element))},refresh:function(t){t&&("undefined"!=typeof t.limit&&(this.options.limit=t.limit),"undefined"!=typeof t.page&&(this.options.page=t.page),"undefined"!=typeof t.total&&(this.options.total=t.total));var i=location.href;i.match(/page=\d+/)||(i+=location.search||location.hash?"&page=":"?page="),this.options.limit<1&&(this.options.limit=1);var a,n,o,r=this;if(a=Math.ceil(this.options.total/this.options.limit),a<1&&(a=1),n=parseInt(this.options.page,10),n>a?n=a:n<1&&(n=1),o=a,this.page=n,this.pages=a,1==n?this.prevPage.addClass("state-disabled").children("a").attr("href",""):this.prevPage.removeClass("state-disabled").children("a").attr("href",i.replace(/page=\d*/,"page="+(n-1))),n==o?this.nextPage.addClass("state-disabled").children("a").attr("href",""):this.nextPage.removeClass("state-disabled").children("a").attr("href",i.replace(/page=\d*/,"page="+(n+1))),e(".ui-pagination-slot",this.element).show().removeClass("state-selected").removeClass("state-disabled"),a<=this.options.maxSlots)s=1,e(".ui-pagination-slot",this.element).each(function(t,o){s<=a?(e(o).children("a").text(r._commify(s)).attr("href",i.replace(/page=\d*/,"page="+s)),s==n&&e(o).addClass("state-selected")):e(o).hide(),s++});else{var s=1;e(".ui-pagination-slot",this.element).each(function(t,o){1==t&&n>r.pivot?(e(o).children("a").text("..").attr("href","#"),s=n<=a-r.pivot?n-(r.pivot-3):a-(r.options.maxSlots-r.pivot)-(r.pivot-3)):t==r.options.maxSlots-2&&n<a-(r.options.maxSlots-r.pivot)?(e(o).children("a").text("..").attr("href","#"),s=a):(e(o).children("a").text(r._commify(s)).attr("href",i.replace(/page=\d*/,"page="+s)),s==n&&e(o).addClass("state-selected"),s++)})}}}),e.extend(e.ui.pagination,{version:"1.8.5"})}(jQuery),function(e){e.widget("ui.passwordStrength",{options:{imageContainer:null,statusContainer:null,defaultCriteria:!0,additionalCriteria:null,visualImages:null,statusText:null},_create:function(){var t=(this.element,this.options);if(t.imageContainer||t.statusContainer)t.imageContainer&&(t.imageContainer=e(t.imageContainer)),t.statusContainer&&(t.statusContainer=e(t.statusContainer));else{var i=e('<div class="ui-password-strength"></div>'),a=e("<div></div>"),n=e("<div></div>");i.append(a,n),this.element.after(i),this.generatedElem=i,t.imageContainer=a,t.statusContainer=n}var o=e("<img />");t.imageContainer.append(o),t.imageElem=o},_init:function(){var e=this;e._setup();var t=e.element,i=e.criteria,a=i.length;t.on("keyup.ps",function(){for(var n=t.val(),o=0,r=0;r<a;r++)"function"==typeof i[r]&&i[r].call(n)&&o++;e.strengthLevel=o,e._setVisual(),e._setStatus()}).trigger("keyup.ps")},_setup:function(){var t=this;t.strengthLevel=0,t.visualImages={0:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATZJREFUeNrsmGEOgyAMhUeyS/jf+1/LQ6hhYmJiTAt9FWXR95ItS0FhpR8thBjjh6IoTN/01fd9tzeGEMTOmv0GDcuns3TUNoKjPbdhaH0Lm8yw+KezzqeVH5E5Sv+75BukPf0W7Ota7+3S+JJdGksb/9imjaP4ZVjBmaapGRy1Akt6jxcWqwOfKC1IS1ChfRRoTIBIdgSUGuu6gjPP860QWLOCd6GvguXpECG+LGWYUsbyZDP0+ctLtQ0cJGDQSZ7NCDUyhBcUS9+GZax5bXJztILigeXfgr4aOFup5glABADvc56zB3pOYamGA/D6y4EEjjc1o7szEqCWna3GeynqVMaxHL6sNa61/WzJRlHNwElnnNKNRA4cBj71SnDGcRSvCt98LUtRrssBiqJ0BcJCUbh+AgwAXe5qGKZgHg0AAAAASUVORK5CYII=",1:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqBJREFUeNrsmF1u5CAMx23US8zzvq1W6v1P0UPsw5xhRhq8YGwwLDQhmqrRFEttEvOVSfzL3waJCJYtWzZnb/Hf3/ffBAEgxHCB5cgWzhG9+MLRSTsfia/TGJ+OTvundu6XfeEPkg/Ep2Pz/LFdr8M5goc/H7/i1WXPDxp9CFr/Zx+MUd+Nj8wVES977+ebbOoee79769nMtMfzjv8a37X199bv+XtrjdZv20brDJ7LlcGBxyM5QIBRMEDOOcDlCLqY+LzP8PAf6Xgv8Ikv9KE8PszNPrl2VM+v60EcQ3C/3w8BcxSWvQ/wFW0UpFtQzfYZQLMLkJ5/BpRnvFcGhx5exIUKOCRBLwFNGuAKBgkY6nNgwAn9A1DsI+3jRWEEUaQyh8CU4BJgYjOmm/wMnK2H8UxYXh2imWe5pTBbinVEzWbHf3mqxgFcAZECnrAENIJRD1UXJ/2dBDsUmBiSam5RGCxjyMmP97p286JgDM4RhTgKyp6+iHhKAPbe415QjsBytqB/HjghVSMFB3ydqiksAFlNYjunXV7VJKVs3JZhMikapPkiIPHdkTOiA7IsFHZH4MzUHrN1ykrV5gH48ZsDFGucnJpJ9KoKRCXxRYVyXYJFaUoNIw/bSQ0DtUCpqlifvgI04PARS9vtdjv01VsvftkXK46XVMuAYwt5V9K4rEwu1SERMHRGHsiULe21AAFUK46VGG3GjVRt2bLvVxyfFAcbcLg4R/OFRhPc2hVLU86vLCQ9mMBsuDVjeW7stC1bdsoaR6KfdLsZ6w0wMClUVYRE4Kx6yM5atTttVcYCqHA07a3iLFt2SnAena2sXG80eRfaolHgQhlAIhMRBO4nYKXhVO10o63+fYEng4P/bxYsW3YWw1UoL1s2b/8EGADc3ycBPHlyUwAAAABJRU5ErkJggg==",2:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuJJREFUeNrsmNGO4yAMRW20PzFP+7JP+3Gr/et+Q2dSvEkbyPXFNI00K1UtSG3AGEgrH65BzUxGGWWUY+XH8vX155eJrpblqQr19SN2v+3G2/ZcSuL6Oj7BPIl9oT/NHjpXattg3FIj23V9o/dYfaK22Ga79mc/l+Rat/U3Zrs9y7bz++9PncsH/8FPtjGdjrxjsWM/+7LPkf6lHthP8+cD7dH6kT1aq7c+9/XW6fwvpys4kqfNmnSDYA8OBkUQGugzsBv0s12K7/zAcWWMCczh/avtHiwZoKohnz1stvnbOncu3tf3utWNwPn8/HyJnbQXpHtQHfXpQPMQIJH9CCjfsaGt4FxgdQYEAEKQQqhIPZRUwUFmm/pgsCNYJZiTeOhwfrSptEoi5t7DQScekAqFtG3uE7TPlfP5/JLQHIVqz2cPpkcV75Hx/z1V28CxVlkiaBRAiPqNbDmAgdUHIYE0bFMVHEfpXFG/mnL596oggEpYmfoOLPW3sg/Vl/JM4PQCSFUPjekF5VFYni3ovw0cu0xBGtU701h83sF+I3vy6hPaOWVTjG4BpfGpX4UBoTAIetuUQQgc5ycxQEJPA1hwjVdVnD2g3vpyQK7gwJ+B55VumtZTHPMKg4HOsJi1QK0qgEEvBIdLk+C8hIAgABWETKBkGB8pCY4XTl/FKdk0TeOq6e3AyVN7IWCsLEbKcsfmDum3uUzvBD1BgsEeqUqFZL2Fa2BhILRVkQYKAkiilE1iiMYG/LbgXNbIo2tkPlxHB26xdtdOlPJgoKIyJGnPHxE4HKAJILANoBrUBabIjjCkAAiFsVBvIGN1HuUNwZm+/PVyhaiFw+X5AIZrW7DTa6AoBoFpLWh1jgJY9ooTpXPOxulZJkCyNDeD0bmmuT0c4AxwXKoGKVUJamxnhoWvcbUDU4J+ac8PojvgmJ9fAjAcINqqTKgwATB8q2h0NY+Ko2kE0LsWHTcko4xyvPwTYADMMjEE7vo9DwAAAABJRU5ErkJggg==",3:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAvRJREFUeNrsWVuOGkEMbEt7if3KT75ygdw+19kzwBIqMJsB213VDwRSpLSleeB2t4ehyo/GAJQlS5bMydv19Pnr+509dj2stmzp870NjPXm+KttZzTn2GX4GgQ2HZINnM6PIY0xHao1sF3h7P0z+nmIz5D1JdtB6/YrQOyiny0WXu7P55vVJj9+frOLvOefUAXPXe/Hs222mRm/3hP9x+V493rmn+mZL+U/jyk/4r18vH3dnSKSIUCu9CMCRSD07a3jFwncfhEkQIaxCGIQ3X3Nvz7gfZBn9wDP/kp6Riu1DtD2xRHDffX92NcD4qz9ejwe+z+TAGmPVLM2gjRDBGH6GaL0iDGccQp+Pyd/Af2MowAHlilGyAhKjNuLsQQ8NCI/2FoJ1IqElPWo303R80HMUWpS+NhWUVyR6HI6HA7TpJklVc+mR6bRjDcy/+Wl2p046KSLBNgmOfIUkMzDSirimpZxiHOQyyIFXojMo6L8HGmQnvcG9HQNyT2Pu++KRIowluYwEnl9izijRHmELP8a6J9GHNxKNXTIksoRaatIBZ15VMaxnh+4cg6cSIaaaEWXVBlwNwsbI8MMcVgOatoogpEsE6rvBzNOj1D/9ebAV48DXXoV1SeIPqPVvwAi40CvmW2UH9QNeQBUIRG+kJLIIvhgpNsQJPDPW72xxhxajoEHELSLXpmVTqfT2g57PnEaIKQZAu3sk8sfaxAQEGVYJ/r6zymqB7A2In/VQ+R1S1wTA7uB2SZ8ht7sYFmiIlejPEZvrSWv6HFUra9IgNgjEHKEZrcRhWm5MhDBkTYCMQB2lkn2+wDUorNRGSAQWPQf3YJv2Yq1m1svtoD+GuKcP1lrmcIUQsRTTesGTNMRMPQLDMwMbNafS0nlS68isosiISmXMEOCRwhjuuSSmzCz90teUarFxpiSgjWqDJCpQYVpMAbwGt+Gbe40WepDcskmSjXlj5FXjQ392TtKlMk/k21gvtkizivE1g7JkiXz8keAAQBaA14mwov2OQAAAABJRU5ErkJggg==",4:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+hJREFUeNrsWjGS2zAMJG6uSpsqTar8/1tp0/ruyI1sizKwXFDyJI1mrBmdKICkaGoXC1JnAMrreB2v47nj/frn88+vG306hVDMlf252K0kPn22Euu3SR2+b2u7ZsWWe7Skjre1pWa438qgdrj2+3hGOBHthmDn56/nMkpDYx8wjmV5bl1npbo+Kz23Gh5jFc/3dqx9Rp/zr2O8zmPs1z0f0e77urYprq8a6sTnYPCB3stSxvre2oqP9f7bz+/LLyk/ekC/Xn1wn9m9b2ZTvuw56lh8v9/vpS9ntkeFCeOQ+JH4NrtxvQj0cpCIow0bOAsBCxkhPJgRAQwqc30MZMvtGxFcX3UAnSYEAX8YI1972ZNAtS0O/G34rRgCDROFr7UkxLgBLV4lUNbrx8fHLkGU/Rmi7BHjsOJcp+VZghQJckx8fo6QEAOy3UylAjmgiDECn4HMAB4Jl9uzMiuTUhbl90FgUCBg+N2sMrEv6HlKVKwKQgzBBG7cnhCOKEyG29UiKAJu3Yu9XC6SJJntf5LhH4iDlB6jkuAAkUI4kESb349k4dSrlwv10SSgRyCxWsV2HPk1Ee+npYrTMBJuTKtGO4RKqfEqsrSk/3uAoeCDnqrF+0AQG5VDKkrmK6Pq+Po9VeuKc4o1DspXAPdeopYBXrV9jihIFSar3wRZZAoEFaFLSG/aDsEyZTlmj+TICBvGh6RfkB9lW6/5tqBrc+lyCEhwQCaw8xv1dWTUVNe+AsBOKnOifaptjYMym4lsNpQqYUdBEj8gFAZ5WjYQQCuIXqM4PzKVeEThDsoUyL3ft9GX9l8ioHvdkMIZtYdu1zccFEkahHJbkm5N1F7F1enGEK9nyk6+f0rirIqDgQC5kmxlYDoL3AcOEQwhGg5g9ZGWo7BR2uF8DMwNQBhBXqneEeIU21EiN8aGXEm2MRmpR9LflDgK1LaTUkHsnNp+6qXAr9qnCnM+4lS9xQEcADvylAsxHYAHJOXRnH4wKPoouU5YDyACqCakU3UzxfEArsh3zm7EeaPxiU2CRrOd/uZC6Rf0GiVL1eQc03xKlcGIBJXeMdAHhWISGNU9+efDNVX7TBJQ0gpBhNsLdfbqFnwq8lVnLx7wAjweuL7eQBYigx8LA6/Cf5+JZKgJgDllSnfPbLLbhgPb19BtszUPklTNp2FSeUxs/0PvEHOb3U2gDEE2Xwickzh9c8CRoxOCVaOJvLkRoNO2Lso398Iq7er0+ilYfUpFYKnJWBl4FZEQu6ngBPBHiBPGYIl6IO8f4rdiQlIkH4jl5sDk08p2b3PCpCSy+P1OksfORxx7/cvN63gdzx9/BRgArTdZhiaGbR4AAAAASUVORK5CYII=",
5:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAAMCAYAAAAqP4J7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0dJREFUeNrsmt2S2yAMhdFMH2Xv+lx9/95vymmSxrEQRz/E2c5emMxsQgyCgD4dGa8AaGc5y1nWyo/bn5+fHzs9109yfen6VgT8+6lA2yLtEXzH7cj9L/L+2D/8G3urAmM7U9fvNphsdXRM8xM1R7nVjL17X/jr4/4mbXuxX7De0tQc5WEHDbTfPnc8x7Rtt7p93+eJwZa+fvs8re1jr6H66f3QdgZbHc+93/cW4/i2vx5jq2s/6nxNf/+C3MG5XF9PODQ0K8UBSdJu8O2gAGmbgdnf+SYz2xqkaaOiwFBx4KPg1KBYhktY4OncSa29FJhHf1E2hzVWjj8EF7MfAzhqT62jM5sS2HF9Qa9JJ3WtOH+ur3cU5rxMceCQgIwQpg7NXwxhykKUxI7NIeQqtQTOIlRyAAraphFwnMCiFGDv1uGC49mY9wDDvjGb0xhwxmX9lYPrjGOAwAYMUofz/fbdAM6KQ6PV7o2EtQeJ5nbhEsWhjm4+C+vDFGZKL9ou9UyNhvTVpLGvgvNG4BrggCMuODR11YGlo5T2WhURR0VsGjuN3wMnX1kbYw9s7boDEhLFueASOmAGTVSXEDYswehtWJQmeJtWStWC/P/tioP/oDhYUJz53oM7eeU3IFBAFIEwbcFcCQ4IGVgoQGTm8rzHmdKTNt4jWIn0YLLpj1TTI5JSVSIba7tdEweUoW93FhYLjhGpY/9m4AgBh7XN1iVre4euOKfK74lUqDpG5XAqS3HHVO0yA9AQKskQ7e2p1uCc2fVEwaKN6sGi6jQhgwDrwNC5SdHRigDg1VQtsC2iAxFZt57YQ7FtK6x5a2ungxVwMsWx1wkgQFFxbvc4GpTsvQyYPhzowQYwGII8lYJDnB7RBvUFxWlJWwsO1iPY2xXHg1HNUSrrY5UTibo2Z+2w6MRB2oWVRxsrJ5HZIxILzuf1ZaGwQEw37j2IKpkisIlnMGzSj2I0tI7Rk43R/Xty+nL8ecobDgCOn6pRwLGgOI0Ep8q8q8fpr0Cw8nywHQRne45DT5d6EHWY4wd9gUR9vEjdA7VYUZRqfr6avrSDTv5Kqta+AJzo5nkV1soJWRWYI+BUYcraSTOnqee/3JzlLMvlrwADAI42NJ/UjLbOAAAAAElFTkSuQmCC"},t.visualImages=e.extend(t.visualImages,t.options.visualImages),t.statusText={0:"",1:"VERY WEAK!",2:"WEAK",3:"AVERAGE",4:"STRONG",5:"VERY STRONG!"},t.statusText=e.extend(t.statusText,t.options.statusText);var i=t.options.additionalCriteria||[];if(t.options.defaultCriteria){var a={moreThan10Chars:function(){return this.length>10},hasCapital:function(){return/[A-Z]/.test(this)},hasLowercase:function(){return/[a-z]/.test(this)},hasNumber:function(){return/[0-9]/.test(this)},hasSpecialChar:function(){return/[^A-z0-9]/.test(this)}};for(var n in a)a.hasOwnProperty(n)&&i.push(a[n])}t.criteria=i},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments);var a={defaultCriteria:!0,additionalCriteria:!0,visualImages:!0,statusText:!0};a[t]&&this._setup()},_setVisual:function(e){var t=this,i=isNaN(e)?t.strengthLevel:e,a=t.visualImages[i];a&&t.options.imageElem.attr("src",a)},_setStatus:function(e){var t=this,i=isNaN(e)?t.strengthLevel:e,a=t.statusText[i];a&&t.options.statusContainer.html(a)},_destroy:function(){this.element.off("keyup.ps"),this.generatedElem&&this.generatedElem.remove(),e.Widget.prototype.destroy.call(this)}})}(jQuery),function($){$.widget("ui.poll",{options:{url:"/",openOrCloseUrl:"/",data:{},question:"",answers:[],maxAnswers:0,votes:0,preview:0,hasVoted:0,canVote:1,canClose:0,canOpen:0,votedFor:[],expired:0,expiresOn:0,viewVotes:0,viewVoters:0,cooldownTime:5e3,maxbarwidth:0,pollImgTitle:"Poll",pollImgAlt:"Poll",pollImgSrc:"",checkImgSrc:""},_create:function(){var e=this;this.element.addClass("ui-poll"),this.selectedAnswers={},this.selectedAnswerCount=0,this.lastSelectedAnswerID=0,this.answerIDs=[],this.answerVotes=[],this.answerHash={},$(this.element).append('<h3><span class="icon icon-poll"><img src="'+this.options.pollImgSrc+'" alt="'+this.options.pollImgAlt+'" title="'+this.options.pollImgTitle+'" /></span>'+this.options.question+"</h3>"),this.options.maxAnswers>1&&$(this.element).append('<p class="small note">You may select up to '+this.options.maxAnswers+" answer"+(1!=this.options.maxAnswers?"s":"")+".</p>");for(var t='<table class="results">',i=0;i<this.options.answers.length;i++)t+='<tr class="answer-'+this.options.answers[i].id+'"><td><div class="select-box"><img src="'+this.options.checkImgSrc+'" alt="+" /></div></td><td class="answer"><div>'+this.options.answers[i].text+'</div></td><td class="view-votes"><div class="poll-vote-bar"><div class="bar"></div><div class="rank"><div class="number"></div></div></div><span class="stats small"><span class="votes">0</span> vote<span class="plural">s</span> (<span class="percent">0</span>%)</span></td></tr>',this.answerIDs.push(this.options.answers[i].id),this.answerVotes.push(this.options.answers[i].votes),this.answerHash[this.options.answers[i].id]=this.options.answers[i];t+="</table>",$(this.element).append(t),$(".results tr",this.element).bind("mouseenter mouseleave",function(e){$(this).toggleClass("ui-hover")}),$(".results tr",this.element).bind("click",function(t){var i=$(this).attr("class").match(/answer\-(\d+)/);e._answerClick(i[1])}),$(this.element).append('<span class="total-votes note"></span>&nbsp;<span class="view-voters"><a href="#">View Voters</a></span><span class="poll-closed"></span>'),$(".view-voters a",this.element).bind("click",function(t){t.preventDefault(),0==$("#poll-voters").length&&($(document.body).append('<div id="poll-voters"></div>'),$("#poll-voters").dialog({autoOpen:!1,width:452,maxHeight:600,title:"Voters"})),proboards.ajax({url:proboards.route("voters"),data:e.options.data,dataType:"html",success:function(e){$("#poll-voters").html(e),$("#poll-voters").dialog("open"),$("#poll-voters").height()>553&&($("#poll-voters").dialog("option","height",600),$("#poll-voters").dialog("close"),$("#poll-voters").dialog("open"))}})}),$(this.element).append('<div class="loading note small"></div>'),this.determineMaxWidth(),this._update()},_update:function(){var e=this,t=$(".loading",this.element).html(""),i=$(".results .view-votes",this.element),a=$(".select-box",this.element),n=[];this.options.expired?n.push("This poll has expired or has been locked."):this.options.canVote?this.options.preview?n.push("This poll is in preview mode and is not accepting votes."):0!=this.options.expiresOn&&t.append("This poll will automatically lock on ",this.options.expiresOn,".<br />"):n.push("You may not vote in this poll."),1==this.options.viewVotes?n.push("The results of this poll are hidden until voted upon."):2!=this.options.viewVotes||this.options.expired?3==this.options.viewVotes&&n.push("The results of this poll are hidden for regular users."):n.push("The results of this poll are hidden until it is locked or expires."),t.append(n.join(" ")),this.options.votes=this.options.voters&&(this.options.votes<=0||this.options.votes<this.options.voters)?this.options.voters:this.options.votes,$(".total-votes",this.element).html("There "+(1==this.options.votes?"has":"have")+" been <b>"+this.options.votes+"</b> vote"+(1!=this.options.votes?"s":"")+" by <b>"+this.options.voters+"</b> voter"+(1!=this.options.voters?"s":"")+".");for(var o=0;o<this.options.votedFor.length;o++)this._selectAnswer(this.options.votedFor[o]);if(this.options.viewVoters||$(".view-voters",this.element).remove(),i.hide(),a.hide(),this.options.expired)if(a.hide(),3!=this.options.viewVotes&&i.show(),this.options.canOpen){var r={};for(var s in this.options.data)r[s]=this.options.data[s];r.type="open",$(".poll-closed a",this.element).unbind("click"),$(".poll-closed",this.element).html((this.options.viewVoters?"&nbsp;-&nbsp;":"")+'<a href="javascript:void(0);">Open Poll</a>'),$(".poll-closed a",this.element).bind("click",function(){proboards.confirm("Are you sure you want to open this poll?",function(){proboards.ajax({url:e.options.openOrCloseUrl,data:r,async:!0,type:"post",dataType:"json",success:function(t){e.options.expired=0,e._update()},error:function(t){$(".loading",e.element).html(t.error)}})})})}else $(".poll-closed",this.element).html("");else if(this.options.canVote&&a.show(),1!=this.options.viewVotes||this.options.hasVoted?2==this.options.viewVotes?i.remove():3==this.options.viewVotes?i.remove():i.show():i.hide(),this.options.canClose){var r={};for(var s in this.options.data)r[s]=this.options.data[s];r.type="close",$(".poll-closed a",this.element).unbind("click"),$(".poll-closed",this.element).html((this.options.viewVoters?"&nbsp;-&nbsp;":"")+'<a href="javascript:void(0);">Lock Poll</a>'),$(".poll-closed a",this.element).bind("click",function(){proboards.confirm("Are you sure you want to lock this poll?",function(){proboards.ajax({url:e.options.openOrCloseUrl,data:r,async:!0,type:"post",dataType:"json",success:function(t){t.error?$(".loading",e.element).html(t.error):(e.options.expired=1,e._update())}})})})}this.options.preview&&$(".poll-closed",this.element).remove();for(var l=[],o=0;o<this.options.answers.length;o++)this.options.answers[o].votes=this.options.answers[o].votes<0?0:this.options.answers[o].votes,l.push([this.options.answers[o].id,this.options.answers[o].votes]);l.sort(function(){return parseInt(arguments[1][1],10)-parseInt(arguments[0][1],10)});var d=0,c=0,u=0,p=!1,h=0==this.options.votes?0:parseInt(l[0][1]);for(o=0;o<l.length;o++){var f=0==this.options.votes?0:parseInt(l[o][1],10)/this.options.votes,m=0==this.options.votes?0:parseInt(l[o][1],10)/h,g=this.options.maxbarwidth*m+5;l[o][1]==u?d++:(c+=d+1,d=0);var v;0==c&&(c=1,p=!0);var b=c.toString().substr(-1);v=b<4&&(c<10||c>20)?1==b?"st":2==b?"nd":"rd":"th",$(".answer-"+l[o][0]+" .poll-vote-bar",this.element).attr("class","").addClass("poll-vote-bar rank-"+(p?"0":c)),$(".answer-"+l[o][0]+" .poll-vote-bar .rank .number",this.element).html(c+v),$(".answer-"+l[o][0]+" .poll-vote-bar .bar",this.element).animate({width:g+"px"},1e3),1==l[o][1]?$(".answer-"+l[o][0]+" .stats .plural",this.element).hide():$(".answer-"+l[o][0]+" .stats .plural",this.element).show(),$(".answer-"+l[o][0]+" .stats .votes",this.element).counter({end:l[o][1],duration:1e3}),$(".answer-"+l[o][0]+" .stats .percent",this.element).counter({end:(100*f).toFixed(2),toFixed:2,duration:1e3}),u=l[o][1]}},_answerClick:function(e){if(this.options.canVote&&!this.options.preview&&!this.options.expired&&!$(".answer-"+e,this.element).hasClass("answer-cooling"))if($(".answer-"+e,self.element).addClass("answer-cooling"),setTimeout(function(){$(".answer-"+e,self.element).removeClass("answer-cooling")},this.options.cooldownTime),"undefined"!=typeof this.selectedAnswers[e]&&1==this.selectedAnswers[e])this._unselectAnswer(e),this._onVoteInputClick(e,"retract");else{if(this.options.votedFor.length>=this.options.maxAnswers)return;this._selectAnswer(e),this._onVoteInputClick(e,"submit")}},_selectAnswer:function(e){if(!this.selectedAnswers[e]){if(this.selectedAnswerCount==this.options.maxAnswers&&this.options.maxAnswers>0){if(1!=this.options.maxAnswers)return;this._unselectAnswer(this.lastSelectedAnswerID)}$(".answer-"+e,this.element).addClass("ui-selected"),this.selectedAnswers[e]=!0,this.lastSelectedAnswerID=e,this.selectedAnswerCount++}},_unselectAnswer:function(e){this.selectedAnswers[e]&&($(".answer-"+e,this.element).removeClass("ui-selected"),this.selectedAnswers[e]=!1,this.selectedAnswerCount--)},_onVoteInputClick:function(id,type){var self=this;$(".vote-input",this.element).attr("disabled",!0);var data={};for(var key in this.options.data)data[key]=this.options.data[key];"submit"==type?(data.type="cast",data.answer_id=id,proboards.ajax({url:this.options.url,data:data,async:!0,type:"post",dataType:"json",success:function(response){self.answerHash[data.answer_id].votes++,self.options.votes++,self.options.hasVoted=1,self.options.votedFor=eval(response.answer_ids),1==eval(response.answer_ids).length&&self.options.voters++,self._update()},error:function(e){$(".loading",self.element).html(e.error)}})):"retract"==type&&(data.type="retract",data.answer_id=id,proboards.ajax({url:this.options.url,data:data,async:!0,type:"post",dataType:"json",success:function(response){self.answerHash[data.answer_id].votes--,self.options.votes--,self.options.votedFor=eval(response.answer_ids),0==eval(response.answer_ids).length&&(self.options.voters--,self.options.hasVoted=0),self._update()},error:function(e){$(".loading",self.element).html(e.error),self.options.canVote=0}}))},_cooldownVoteInput:function(e){},determineMaxWidth:function(){var e=$("h3",this.element).outerWidth(),t=$("table.results tr td:first",this.element).outerWidth(),i=0;$("table.results tr td.answer",this.element).each(function(){$(this).outerWidth()>i&&(i=$(this).outerWidth())});var a=parseInt(.4*e);i>a&&($("table.results tr td.answer div",this.element).css("width",a+"px").addClass("break-word"),i=a);var n=41,o=151,r=t+i+n+o;this.options.maxbarwidth=e-r}}),$.extend($.ui.poll,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.selectMenu",e.ui.mouse,{options:{container:null,status:null,statusClick:null,staticStatus:!1,click:null,menuOptions:{clickHide:!0,click:null},beforeShow:null,onTextClick:null,onOptionClick:null,onClose:null,updateText:!0,updateInput:null},_create:function(){var t=this;this.options.container?this.box=e(this.options.container).append('<div class="status"></div>').append('<div class="icon"><span class="arrow down"><span></span></span></div>'):this.box=e('<div class="ui-selectMenu-box"></div>').append('<div class="status"></div>').append('<div class="icon"><span class="arrow down"><span></span></span></div>').insertAfter(this.element),this.options.statusClick?(e(".status",this.box).bind("click.selectMenu",function(e){t._trigger("statusClick",e,{})}),e(".icon",this.box).bind("click.selectMenu",function(e){t._trigger("click",e,{})})):e(this.box).bind("click.selectMenu",function(e){t._trigger("click",e,{})});var i={};e.extend(!0,i,{type:"vertical",showOn:"click",button:this.box,position:{my:"right top",at:"right bottom",of:this.box,collision:"flipfit"},beforeShow:t.options.beforeShow,onClose:t.options.onClose},this.options.menuOptions),i.click=function(i,a){"function"==typeof t.options.menuOptions.click&&t.options.menuOptions.click.call(t.element,i,a),t.options.staticStatus||e(".status",t.box).html(e("a",a.item).html())},this.menu=e(this.element).menu(i).addClass("ui-selectMenu"),this.options.status?e(".status",this.box).html(this.options.status):e(".status",this.box).html(e("li:first-child",this.menu).attr("title"))},documentMouseUp:function(e){for(var t=!1,i=e.target;!t&&i;)i!==this.element[0]&&i!==this.options.menu[0]||(t=!0),i=i.parentNode;t||(this.hide(),this.options.onClose.call(this))},isShowing:function(){return!e(this.options.menu).is(":hidden")},menu:function(e,t){this.options.menu.menu(e,t)},getMenu:function(){return this.options.menu},_onMouseDown:function(t){var i=this;1==t.which&&(t.stopPropagation(),e(this.element).bind("mouseup.ui-selectMenu",function(a){if(e(this).unbind("mouseup.ui-selectMenu"),a.stopPropagation(),e(".ui-selectMenu").each(function(t,a){a!==i.element[0]&&(e(a).removeClass("state-active"),e(a).selectMenu("hide"))}),e(i.options.menu).is(":visible"))i.hide(),i.options.onClose.call(i);else{i.options.menu.menu("clearClickCallback"),i.options.menu.menu("setClickCallback",function(e){i._optionClick(e,t)});for(var n=e(i.element).offset(),o=(e(i.element).outerWidth(),e(i.element).outerHeight()),r=n.left,s=n.top+o,l=t.target;l.ownerDocument&&l.ownerDocument.defaultView&&l.ownerDocument.defaultView.frameElement;){l=l.ownerDocument.defaultView.frameElement;var n=e(l).offset();r+=n.left,s+=n.top}e(i.options.menu).css({left:r,top:s}),i.show()}}))},reposition:function(){var t=e(self.element).offset(),i=(e(self.element).outerWidth(),e(self.element).outerHeight()),a=t.left,n=t.top+i;e(self.options.menu).css({left:a,top:n})},_optionClick:function(t,i){for(var a=t.target;a&&"li"!=a.nodeName.toLowerCase();)a=a.parentNode;if(a&&!e(a).hasClass("state-disabled")){var n=e(a).html(),o=e(a).attr("id");this.value=o,this.options.staticStatus||e(".status",this.element).html(n),this.options.updateInput&&e(this.options.updateInput).val(o.replace("value-","")),this.options.onOptionClick&&this.options.onOptionClick.call(this.element,o)===!1||(this.hide(),this.options.onClose.call(this))}},updateValue:function(t){if(this.value=t,!this.options.staticStatus){this.updateStatus(t);for(var i=e("li",this.options.menu),a=!1,n=0;n<i.length&&!a;n++)t==i[n].id&&(e(".status",this.element).html(e(i[n]).html()),a=!0);a||e(".status",this.element).html(this.options.status)}},updateStatus:function(t){e(".status",this.box).html(t)}}),e.extend(e.ui.sortable,{version:"1.8.2"})}(jQuery),function(e){var t=0;e.widget("ui.selectlist",{options:{listedItemFormat:"{item.name}",selectedItemFormat:"{item.name}",blockListFormat:"{item.item_id}",blockListOptionFormat:"{}",blockListOptions:[],id:"id",maxSelectable:0,maxSelectableApplies:!0,selection:null,select:null,deselect:null,getData:null,formId:0,checkedHash:{},isPendingList:0,onCreateItem:function(){},showAdded:!0,disabledMessage:""},_create:function(){this.element.addClass("ui-selectlist"),e(this.options.selection).addClass("ui-selectlist-selection"),this.options.index=t,++t,this.selectedIDsStr="",this.selectedIDs={},this.selectedCount=0,this.data={},this.options.maxSelectableApplies||(this.options.maxSelectable=0),this.refresh()},refresh:function(t){var i=this;if(this.element.empty(),t&&0!=t.length){this.empty=!1;for(var a=0;a<t.length;a++){var n=t[a][this.options.id];this.data[n]=t[a];var o=this._createListedItem(t[a]);"undefined"!=typeof this.selectedIDs[n]&&e(o).addClass("state-selected"),0==a&&e(o).addClass("state-current"),this.element.append(o)}e("li",this.element).click(function(e){i.options.selection&&i.select()}).hover(function(t){e(".state-current",i.element).removeClass("state-current"),e(this).addClass("state-current")},function(e){})}else this.empty=!0,this.element.append('<li class="empty">No results found.</li>')},select:function(t,i,a){var n=null;if("undefined"==typeof t){if(n=e(".state-current",this.element),!n.is(":visible"))return;if(t=this._getItemID(n),null==t)return}else n=e(".item-"+t,this.element);if("undefined"!=typeof this.selectedIDs[t])return void this.deselect(t);if(n.is(".disabled"))return void(this.options.disabledMessage&&proboards.alert(this.options.disabledMessage));if(this.options.maxSelectable>0&&this.selectedCount>=this.options.maxSelectable)return void(0==e("#max-selectable-container").length?(e(document.body).append('<div id="max-selectable-container" style="text-align: justify;">You have already reached the maximum number of items you may select.</div>'),e("#max-selectable-container").dialog({autoOpen:!0,width:310,title:"Too Many Selections"})):e("#max-selectable-container").text("You have already reached the maximum number of items you may select.").dialog("open"));if(0==this.selectedCount&&e(".empty",this.options.selection).hide(),0!==a&&this.options.showAdded){var o=this._createSelectedItem(this.data[t]);e(this.options.selection).append(o)}this.selectedIDs[t]=!0,++this.selectedCount,""!=this.selectedIDsStr&&(this.selectedIDsStr+=","),this.selectedIDsStr+=t,n.addClass("state-selected"),i||this._trigger("select",null,{id:t,ids:this.selectedIDsStr.split(","),itemData:this.data[t]})},deselect:function(t){if("undefined"!=typeof t||(t=this._getItemID(e(".state-current",this.element)),null!=t)){if("undefined"==typeof this.selectedIDs[t])return void this.select(t);e(".item-"+t,this.options.selection).remove(),this.selectedIDs[t]=void 0,--this.selectedCount;var i;i=new RegExp("^"+t+"$|^"+t+",|,"+t+"$"),this.selectedIDsStr=this.selectedIDsStr.replace(i,""),i=new RegExp(","+t+","),this.selectedIDsStr=this.selectedIDsStr.replace(i,","),e(".item-"+t,this.element).removeClass("state-selected"),0==this.selectedCount&&e(".empty",this.options.selection).show(),this._trigger("deselect",null,{id:t,ids:""!=this.selectedIDsStr?this.selectedIDsStr.split(","):[]})}},manipulateIds:function(e,t){if("select"==t);else if("deselect"==t)for(var i=0;i<e.length;i++){var a=parseInt(e[i]);this.selectedIDs[a]=void 0,--this.selectedCount;var n;n=new RegExp("^"+a+"$|^"+a+",|,"+a+"$"),this.selectedIDsStr=this.selectedIDsStr.replace(n,""),n=new RegExp(","+a+","),this.selectedIDsStr=this.selectedIDsStr.replace(n,",")}},next:function(){var t=e(".state-current",this.element);t=0==t.length?e("li:first",this.element):t[0].nextSibling?t[0].nextSibling:e("li:first",this.element),e(".state-current",this.element).removeClass("state-current"),e(t).addClass("state-current")},previous:function(){var t=e(".state-current",this.element);t=0==t.length?e("li:last",this.element):t[0].previousSibling?t[0].previousSibling:e("li:last",this.element),e(".state-current",this.element).removeClass("state-current"),e(t).addClass("state-current")},getData:function(){return this.options.getData()},_getItemID:function(t){if("undefined"!=typeof t&&0!=e(t).length){var i=e(t).attr("class").match(/item\-(\d+)/);return null==i?null:i[1]}},_createListedItem:function(t){var i=this._getFormattedHTML(this.options.listedItemFormat,t),a=t[this.options.id],n="item-"+a+" ui-selectlist-item ui-selectlist-"+this.options.index+"-item ui-helper-clearfix";t.disabled&&(n+=" disabled");var o=e('<li class="'+n+'">\t\t\t\t<div class="content">'+i+"</div>\t\t\t</li>");return this.options.onCreateItem(o),o},_createSelectedItem:function(t){var i=this,a=t[this.options.id],n="";if(this.options.formId){for(var o=this.options.blockListOptions,r=0;r<o.length;r++)n+=this._getFormattedHTML(this.options.blockListOptionFormat,{form_id:this.options.formId,item_id:a,option_id:r,option_checked:this.options.checkedHash[a]&&1==this.options.checkedHash[a][r]?' checked="checked"':"",option_label:o[r]});n=n?this._getFormattedHTML(this.options.blockListFormat,{block_list_options:n}):""}var s=e('<li class="item-'+a+" ui-selectlist-item ui-selectlist-"+this.options.index+'-item ui-helper-clearfix">'+(n?'<div class="selectlist-wrapper">':"")+'<div class="content">'+this._getFormattedHTML(this.options.selectedItemFormat,t)+'</div><div class="close"><span>x</span></div>'+(this.options.isPendingList?this._getFormattedHTML(this.options.pendingListItemFormat,{item_id:a}):"")+(n?"</div>"+n:"")+"</li>");return e(".close",s).bind("click.selectlist",function(t){var a=e(t.target).parents(".ui-selectlist-item").attr("class").match(/item\-(\d+)/);i.deselect(a[1])}),n&&t.is_staff&&e(".block-list-1",s).remove(),s},_getFormattedHTML:function(e,t){var i=e;for(var a in t){var n=new RegExp("{item."+a+"}","g");i=i.replace(n,t[a])}return i},isSelected:function(e){return"undefined"!=typeof this.itemData[e]},changeMaxSelectable:function(e){if(this.options.maxSelectableApplies){if(this.selectedCount>e)return!1;this.options.maxSelectable=e}return!0},getNumSelected:function(){return this.selectedCount},apply_selected:function(t,i){if(e.isArray(t)){this.refresh(t),this.options.loadingExisting=!0;for(var a=0;a<t.length;a++)this.select(t[a].id,null,i);this.options.loadingExisting=!1,this.refresh([])}}}),e.extend(e.ui.selectlist,{version:"1.8.5"})}(jQuery),function(e){e.widget("ui.slidable",{options:{autoChange:5e3,navigation:".navigation",items:".items",relative:!1,padding:10},_create:function(){var t=this;e(this.options.items).width(e(this.options.items).width()-2*this.options.padding),this.width=e(this.options.items).width(),this.actualWidth=this.width+2*this.options.padding;var i=e(this.options.items,this.element).children();if(this.itemContainer=e("<div></div>").css({position:"absolute",left:this.actualWidth+"px",width:this.actualWidth*i.length+"px"}),e(this.options.items,this.element).append(this.itemContainer),this.itemContainer.append(i),e(this.itemContainer).children().css({width:this.width+"px","float":"left"}),e(this.options.navigation,this.element).length>0){this.navigationContainer=e(this.options.navigation,this.element);var a=e('<span class="arrow left"><span></span></span>').bind("click",function(e){t._change(0)});e(this.navigationContainer).prepend(a),a=e('<span class="arrow right"><span></span></span>').bind("click",function(e){t._change(1)}),e(this.navigationContainer).append(a)}else e("#news .arrow.left").bind("click",function(e){t._change(0)}),e("#news .arrow.right").bind("click",function(e){t._change(1)});this.options.autoChange!==!1&&(this.options.autoChange<1e3&&(this.options.autoChange=1e3),this.itemContainer.bind("mouseenter",function(e){clearTimeout(t.autoChangeTimeout)}),this.itemContainer.bind("mouseleave",function(e){t.autoChangeTimeout=setTimeout(function(){t._change()},t.options.autoChange)})),t._change(2)},_change:function(t){var i=this;clearTimeout(this.autoChangeTimeout),t="undefined"==typeof t?this.index+1:2==t?0:0==t?this.index-1:this.index+1,t<0?t=this.itemContainer.children().length-1:t>this.itemContainer.children().length-1&&(t=0);var a=t*this.actualWidth*-1;if(this.itemContainer.stop().animate({left:a+"px"},750),this.index=t,this.options.relative){var n=e(this.itemContainer).children("div").eq(t).text();this.options.autoChange=this.calcChangeSpeed(n)}this.options.autoChange!==!1&&(this.autoChangeTimeout=setTimeout(function(){i._change()},this.options.autoChange))},calcChangeSpeed:function(e){return 1500+50*e.length}}),e.extend(e.ui.slidable,{version:"1.8.2"})}(jQuery),function(e){e.widget("ui.stripe",{options:{stripeKey:"",paymentUrl:"",fieldNames:{cardList:"card_list",cardName:"card_name",cardNumber:"card_number",cardExpireMonth:"card_expiration_month",cardExpireYear:"card_expiration_year",cardSecurity:"card_security",cardAddress:"billing_address",cardAddress2:"billing_address_2",cardZip:"billing_zip",cardState:"billing_state",cardCountry:"billing_country",isNewCard:"is_new_card"},newCardFormElem:".new-card, #billing-address",removeCardUrl:"",removeCardButton:"#remove_card",removeableCardClass:".removeable",addDataOnSubmit:null,success:null,error:function(e){proboards.error(e.error)},onCardValidationError:function(){}},_create:function(){var t=this,i=this.element;i.on("validated",function(i){i.preventDefault();var a=t.options.fieldNames,n=t.options.addDataOnSubmit,o={name:e('input[name="'+a.cardName+'"]',this),number:e('input[name="'+a.cardNumber+'"]',this),expire_month:e('select[name="'+a.cardExpireMonth+'"]',this),expire_year:e('select[name="'+a.cardExpireYear+'"]',this),security:e('input[name="'+a.cardSecurity+'"]',this),address:e('input[name="'+a.cardAddress+'"]',this),address2:e('input[name="'+a.cardAddress2+'"]',this),zip:e('input[name="'+a.cardZip+'"]',this),state:e('input[name="'+a.cardState+'"]',this),country:e('select[name="'+a.cardCountry+'"]',this)},r={};if("function"==typeof n&&e.extend(r,n()),t._isNewCard()){if(!t.validate())return;t._loading(!0),Stripe.setPublishableKey(t.options.stripeKey),Stripe.createToken({name:o.name.val(),number:o.number.val(),cvc:o.security.val(),exp_month:o.expire_month.val(),exp_year:o.expire_year.val(),address_line1:o.address.val(),address_line2:o.address2.val(),address_zip:o.zip.val(),address_state:o.state.val().toUpperCase(),address_country:o.country.val()},function(e,i){if(i.error)proboards.error(i.error.message),t._loading(!1);else{var a=i.id;r.token=a,proboards.ajax({url:t.options.paymentUrl,data:r,success:t.options.success,error:t.options.error,complete:function(){t._loading(!1)}})}})}else t._loading(!0),r.customer=e('select[name="'+t.options.fieldNames.cardList+'"]',t.element).val(),proboards.ajax({url:t.options.paymentUrl,data:r,success:t.options.success,error:t.options.error,complete:function(){t._loading(!1)}})}),t._setupCardSelection();var a=13;e('input[type="text"], input[type="password"]',i).on("keydown",function(e){var t=e.keyCode||e.which;t==a&&(e.preventDefault(),i.submit())})},_setupCardSelection:function(){var t=this,i=this.element,a=e('select[name="'+t.options.fieldNames.cardList+'"]',i),n=e('input[name="'+t.options.fieldNames.isNewCard+'"]',i),o=e(t.options.newCardFormElem),r=e(t.options.removeCardButton);a.on("change",function(t){var i="new"==e(this).val();r.toggle(!i),o.toggle(i),n.val(i?1:""),e.clearInputError()}).change(),r.on("click",function(i){i.preventDefault();var n=e("option:selected",a),o=t.options.removeableCardClass;return o&&!n.is(o)?proboards.error("This card can only be removed when it is no longer being used to pay for any subscriptions."):void proboards.confirm("Are you sure you wish to remove the card "+n.text()+"?",function(){a.prop("disabled",!0),proboards.ajax({url:t.options.removeCardUrl,data:{card:n.val()},success:function(){n.remove(),a.change()},complete:function(){a.prop("disabled",!1)}})})})},_loading:function(t){proboards.loading(t),e("#loading-dialog").dialog("option","title","Processing...")},_isNewCard:function(){var t=this.element,i=e('select[name="'+this.options.fieldNames.cardList+'"]',t);return"new"==i.val()},validate:function(){if(!this._isNewCard())return!0;var t=e(this.element),i=this.options.fieldNames;if(!t.data("form").validateAll())return!1;var a={number:e('input[name="'+i.cardNumber+'"]',t),expire_month:e('select[name="'+i.cardExpireMonth+'"]',t),expire_year:e('select[name="'+i.cardExpireYear+'"]',t),security:e('input[name="'+i.cardSecurity+'"]',t)};return Stripe.validateCardNumber(a.number.val())?Stripe.validateExpiry(a.expire_month.val(),a.expire_year.val())?!!Stripe.validateCVC(a.security.val())||(this.options.onCardValidationError.call(this,a.security),e.inputError(a.security,"Please enter a valid security number."),!1):(this.options.onCardValidationError.call(this,a.expire_year),e.inputError(a.expire_year,"Please enter a valid expiration date."),!1):(this.options.onCardValidationError.call(this,a.number),e.inputError(a.number,"Please enter a valid credit card number."),!1)}})}(jQuery),function(e){e.widget("ui.timepicker",{options:{onSelect:function(){},military:0},_create:function(){var t=this;t.element.hasClass("military")&&(t.options.military=1),this.element.addClass("ui-timepicker").bind("mousedown.ui-timepicker focus.ui-timepicker",function(){if(t.menu.is(":visible"))return void setTimeout(function(){t.menu.zIndex(t.element.zIndex()+1)},1);var i={my:"left top",at:"left bottom",of:e(t.element)};t.menu.show().position(i).position(i),setTimeout(function(){t.menu.zIndex(t.element.zIndex()+1)},1)}).bind("click.ui-timerpicker",function(){this.select()}).bind("keydown.ui-timepicker",function(e){9==e.keyCode&&t.menu.hide()});var i=[],a=[12,1,2,3,4,5,6,7,8,9,10,11],n=["00","30"];t.options.military&&(a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]);for(var o=0;o<a.length;o++)for(var r=(a[o],0);r<n.length;r++){var s=a[o]+":"+n[r];i.push(s)}if(!t.options.military){var l=i;i=[];for(var d=["AM","PM"],o=0;o<d.length;o++)for(var r=0;r<l.length;r++)i.push(l[r]+" "+d[o])}for(var c="",o=0;o<i.length;o++)c+="<li>"+i[o]+"</li>";this.menu=e('<ul class="ui-timepicker-menu">'+c+"</ul>").hide().appendTo(document.body),""==this.element.val()&&this.setTime(i[0]),e("li",this.menu).bind("click.ui-timepicker",function(){t.element.val(e(this).text()),t.element.focus(),t.options.onSelect.call(t.element,this),setTimeout(function(){t.menu.hide()},1)}),e(document).bind("mousedown.ui-timepicker",function(e){for(var i=e.target,a=!0;a&&i&&"html"!=i.nodeName.toLowerCase();)i!==t.element[0]&&i!==t.menu[0]||(a=!1),i=i.parentNode;a&&t.menu.hide()})},setTime:function(){this.element.val(e("li:first-child",this.menu).text())},getTime:function(){var e=this.element.val();if(e){if(1==this.options.military){var t=/^(\d{1,2}):(\d{2})$/g,i=t.exec(e);return 3600*parseInt(i[1])+60*parseInt(i[2])}var t=/^(\d\d?):(\d{2})\s?(am|pm)$/gi,i=t.exec(e),a=i[3].toLowerCase(),n=parseInt(i[1]),o=parseInt(i[2]);return"pm"==a&&12!=n&&(n+=12),12==n&&"am"==a&&(n=0),3600*n+60*o}return 0}}),e.extend(e.ui.timepicker,{version:"1.8.5"})}(jQuery);var rangeType=window.getSelection&&(!$.browser.msie||parseInt($.browser.version)>9)?"w3c":"ie";!function(e){e.widget("ui.wysiwyg",{editors:{},currentEditorName:"",menus:{},pressedButtons:[],controls:{fontName:{title:"Font Name"},foreColor:{title:"Font Color"},fontSize:{title:"Font Size"},bold:{title:"Bold",tag:"b"},italic:{title:"Italic",tag:"i"},underline:{title:"Underline",tag:"u"},strikethrough:{title:"Strike Through",tag:"s"},superscript:{title:"Superscript",tag:"sup"},subscript:{title:"Subscript",tag:"sub"},removeFormat:{title:"Remove Formatting"},justifyLeft:{title:"Justify Left",tag:"div",attrs:{align:"left"}},justifyCenter:{title:"Justify Center",tag:"div",attrs:{align:"center"}},justifyRight:{title:"Justify Right",tag:"div",attrs:{align:"right"}},justifyFull:{title:"Justify Full",tag:"div",attrs:{align:"justify"}},insertTable:{title:"Table"},insertUnorderedList:{title:"List"},insertHorizontalRule:{title:"Horizontal Rule"},createLink:{title:"Link"},createEmail:{title:"Email"},insertImage:{
title:"Insert Image"},insertVideo:{title:"Insert Video"},insertUserLink:{title:"Insert User Link"},insertCode:{title:"Insert Code",tag:"code"},insertQuote:{title:"Insert Quote",tag:"quote"},insertSmiley:{title:"Insert Smiley"},insertEmbed:{title:"Insert Embed"}},tagCommandAlias:{b:"bold",strong:"bold",i:"italic",em:"italic",u:"underline",strike:"strikethrough",sup:"superscript",sub:"subscript",div:[{command:"justifyLeft",attrs:{align:"left"}},{command:"justifyCenter",attrs:{align:"center"}},{command:"justifyRight",attrs:{align:"right"}},{command:"justifyFull",attrs:{align:"justify"}}],p:[{command:"justifyLeft",attrs:{align:"left"}},{command:"justifyCenter",attrs:{align:"center"}},{command:"justifyRight",attrs:{align:"right"}},{command:"justifyFull",attrs:{align:"justify"}}]},uneditableElements:"span.attachment_preview, span[atuser]",options:{varName:"",formId:"",editors:["visual","bbcode"],defaultEditor:"visual",defaultFormat:"visual",height:360},_create:function(){var t=this;this.element.hide(),this.container=e('<div class="ui-wysiwyg"></div>'),this.controlsContainer=e('<div class="controls ui-helper-clearfix"></div>'),this.editorContainer=e('<div class="editors"></div>');var i=this.editorContainer,a=this.options,n=(a.defaultFormat,a.defaultEditor);this.$nosmiles=e("#"+a.formId+"_"+a.varName+"_nosmiles_input"),isNaN(parseInt(this.$nosmiles.val()))&&this.$nosmiles.val(0);for(var o=a.editors.length;o--;){var r=this.options.editors[o];this.editors[r]=this["_"+r+"Editor"];var s=e('<div class="editor '+r+'-editor"></div>').height(a.height).hide();i.append(s)}if(this.container.append(this.controlsContainer).append(i).insertAfter(this.element),this.switchEditor(n),i.resizable({minWidth:400,maxWidth:e(this.container).parent().width(),minHeight:200,handles:"s",start:function(e,i){t.showOverlay()},stop:function(e,i){t.hideOverlay()},resize:function(n,o){var r=o.size.height,s=o.size.height-32;t.overlay.width(i.width()),t.overlay.height(s);for(var l=a.editors.length;l--;){var d=t.editors[a.editors[l]];e(d.container).height(s),e(d.resizable).height(s)}t.options.height=s;var c=e("div.ui-wysiwyg div.editors.ui-resizable").attr("style");c=c.replace(/height: \d+px/,"height: "+r+"px"),e("div.ui-wysiwyg div.editors.ui-resizable").attr("style",c)}}),navigator.userAgent.toLowerCase().indexOf("opera")>-1&&"bbcode"!=this.options.defaultEditor){var l=this.editors.visual,d=l.document.body.lastChild;if(null!==d){var c=l.getRange();c.setEndAfter(d),c.setStartAfter(d);var u=l.getSelection();u.addRange(c),u.collapseToEnd()}}/iphone|ipod|ipad/.test(navigator.userAgent.toLowerCase())&&e(".editor.visual-editor").css({"-webkit-overflow-scrolling":"touch",overflow:"auto"});var p=this.element.attr("tabindex");p&&e("textarea",this.container).attr("tabindex",p)},preload:function(t){e(t).each(function(){e("<img/>")[0].src=this})},startLoading:function(){0==e(".loadingOverlay",this.container).length&&(this.loadingOverlay=e('<div class="loadingOverlay"></div>').prependTo(this.editorContainer)),this.loadingOverlay.width(this.editorContainer.width()).height(this.editorContainer.height()).show()},stopLoading:function(){this.loadingOverlay.hide()},_getControl:function(e){return"undefined"!=typeof this.editors[this.currentEditorName].controls[e]?this.editors[this.currentEditorName].controls[e]:void proboards.alert("The "+e+" control could not be found.")},getContent:function(){return this.editors[this.currentEditorName].getContent()},setContent:function(e){this.editors[this.currentEditorName].setContent(e)},showOverlay:function(){this.overlay||(this.overlay=e('<div class="resize-overlay"></div>').appendTo(this.editorContainer)),this.overlay.width(this.editorContainer.width()),this.overlay.height(this.editorContainer.height()),this.overlay.show()},log:function(t){if(0==e(".wysiwyg-log").length&&e("<div></div>").addClass("wysiwyg-log").appendTo(document.body),"object"==typeof t){var i=t;t='<b onclick="$(this.nextSibling.nextSibling).toggle();">object'+(null!=i&&"undefined"!=typeof i.nodeName?" "+i.nodeName.toLowerCase():"")+'</b><br /><table width="100%" style="display: none;">';for(var a in i)try{t+='<tr><td style="white-space: nowrap; padding-right: 10px; width: 15%;">'+a+"</td><td>"+i[a]+"</td></tr>"}catch(n){}t+="</table>"}e(".wysiwyg-log").append(t+"<br />")},execCommand:function(t,i,a){if(void 0===i&&(i=!1),void 0===a&&(a=null),this.focusOnSelected(),"visual"==this.currentEditorName){var n=this.editors.visual.genericSelection;if(e(n.startContainer()).closest("code").length>0||e(n.endContainer()).closest("code").length>0)return!1}var o=this.editors[this.currentEditorName];"function"==typeof o.beforeExecCommand&&o.beforeExecCommand.call(this,o);var r=!1;try{if("function"==typeof o.commands[t])o.commands[t].call(this,o,t,i,a);else if("undefined"!=typeof o.document&&o.document.queryCommandEnabled(t)===!0){o.document.execCommand(t,i,a),this.latestCommands||(this.latestCommands={});try{this.latestCommands[t]=o.document.queryCommandState(t)}catch(s){console.log("Error: ",s.message)}o.window&&o.window.focus()}else r=!0}catch(s){console.log("Error: ",s.message),this.log(s.message),r=!0}"function"==typeof o.afterExecCommand&&o.afterExecCommand.call(this,o)},hideOverlay:function(){this.overlay&&this.overlay.hide()},switchEditor:function(t){var i=this,a=this.options,n=this.editors;if(this.currentEditorName&&this.currentEditorName===t)return this.element;if("undefined"==typeof n[t])return this.element;var o=!1;if(!n[t].built){o=!0;for(var r=a.editors.length;r--;){var s=a.editors[r],l=n[s],d=e("."+s+"-editor",this.editorContainer);l.build(this,d),l.controls=e.extend({},this.controls,l.controls),this._buildControls(s,l.controls,l.controlGroups),l.built=!0}}if(o){this.currentEditorName=t;var c="visual"==t?this.options.visualHtml:this.element.val();return this.setContent(c),e(".visual-editor",this.container).toggle("visual"==t),e(".bbcode-editor",this.container).toggle("bbcode"==t),this.element}""==this.currentEditorName&&(this.currentEditorName="visual"==t?"bbcode":"visual");var c=this.editors[this.currentEditorName].getContent(),u=e("#"+this.options.formId+"_"+this.options.varName+"_mode_input"),p=function(a){e("."+i.currentEditorName+"-editor",i.container).hide(),e("."+t+"-editor",i.container).show(),i.currentEditorName=t,u.val(t),i.setContent(a)},h=function(){e("#menu-item-visual").toggleClass("ui-active","visual"==i.currentEditorName),e("#menu-item-bbcode").toggleClass("ui-active","bbcode"==i.currentEditorName)},f=function(){i.readyToSwitch=!0};if(this.readyToSwitch===!1)return h(),this.element;this.readyToSwitch=!1;var m="visual"==t?"bbcode2html":"html2bbcode";return c=this[m].call(this,c,{success:p,error:h,complete:f}),this.element},_buildControls:function(t,i,a){for(var n=this,o=e('<div class="'+t+'-editor ui-helper-clearfix"></div>'),r=a.length,s=0;s<r;s++){for(var l=e('<div class="group ui-helper-clearfix"></div>'),d=a[s].length,c=0;c<d;c++){for(var u=e("<ul></ul>"),p=a[s][c].length,h=0;h<p;h++){var f=a[s][c][h],m=i[f],g=wysiwyg_buttons[f],v=wysiwyg_buttons[f+"-active"];if(" "==f);else{var b="";if(null!=g&&(b+='<img class="inactive" alt="" src="'+g+'" />'),null!=v&&(b+='<img class="active" alt="" src="'+v+'" />'),"fontName"==f||"foreColor"==f||"fontSize"==f||"insertSmiley"==f||"insertUserLink"==f||"insertEmbed"==f)_=this._createSelectMenu(f,m).addClass("button button-"+f).attr("title",m.title).append(b).appendTo(u);else var _=e('<li class="button button-'+f+'" title="'+m.title+'" data-control="'+f+'">'+b+"</li>").bind("click",function(t){n.execCommand(e(this).data("control"))}).appendTo(u)}}l.append(u)}o.append(l),this.controlsContainer.append(o)}var y=this.editors[t],A="visual"==t?"keypress.wysiwyg":"keyup.wysiwyg";e(y.bindable).on(A,function(e){e||(e=window.event);var t=(e.ctrlKey?"ctrl+":"")+String.fromCharCode(e.which).toLowerCase();if(y.controlShortcuts[t])return"undefined"!=typeof e.cancelBubble&&(e.cancelBubble=!0),"undefined"!=typeof e.stopPropagation&&e.stopPropagation(),"undefined"!=typeof e.preventDefault&&e.preventDefault(),n.execCommand(y.controlShortcuts[t]),!1}),"bbcode"==t&&e(y.bindable).on("keydown.wysiwyg keypress.wysiwyg",function(e){e||(e=window.event);var t=(e.ctrlKey?"ctrl+":"")+String.fromCharCode(e.which).toLowerCase();if(y.controlShortcuts[t])return"undefined"!=typeof e.cancelBubble&&(e.cancelBubble=!0),"undefined"!=typeof e.stopPropagation&&e.stopPropagation(),"undefined"!=typeof e.preventDefault&&e.preventDefault(),!1})},_createSelectMenu:function(e,t){var i="_get"+e.substr(0,1).toUpperCase()+e.substr(1)+"Menu",a=this[i](t);return this.menus[e]=a.menu,a.button},_closeAllMenus:function(){for(var t in this.menus)e(this.menus[t]).menu("hide");e.colorPicker("hide")},_getFontNameMenu:function(t){var i=this,a='<li class="arial"><a style="font-family: arial;">Arial</a></li><li class="comic_sans_ms"><a style="font-family: comic sans ms;">Comic Sans MS</a></li><li class="courier_new"><a style="font-family: courier new;">Courier New</a></li><li class="georgia"><a style="font-family: georgia;">Georgia</a></li><li class="impact"><a style="font-family: impact;">Impact</a></li><li class="times_new_roman"><a style="font-family: times new roman;">Times New Roman</a></li><li class="trebuchet_ms"><a style="font-family: trebuchet ms;">Trebuchet MS</a></li><li class="verdana"><a style="font-family: verdana;">Verdana</a></li>',n=e("<li></li>").addClass("selectMenuButton"),o=e("<ul></ul>").addClass("select_menu_list").append(a).appendTo(n).selectMenu({status:"Font Face",staticStatus:!0,updateInput:!1,onShow:function(e){i.showOverlay()},onHide:function(e){i.hideOverlay()},menuOptions:{position:{my:"left top",at:"left bottom",of:this.box,collision:"flipfit"},click:function(t,a){var n=e(a.item).attr("class").replace(/_/g," ");i.execCommand("fontName",!1,n)}}});return{menu:o,button:n}},_getFontSizeMenu:function(t){var i=this,a='<li class="1" style="font-size: 8pt;"><a>1 (8pt)</a></li><li class="2" style="font-size: 10pt;"><a>2 (10pt)</a></li><li class="3" style="font-size: 12pt;"><a>3 (12pt)</a></li><li class="4" style="font-size: 14pt;"><a>4 (14pt)</a></li><li class="5" style="font-size: 18pt;"><a>5 (18pt)</a></li><li class="6" style="font-size: 24pt;"><a>6 (24pt)</a></li><li class="7" style="font-size: 36pt;"><a>7 (36pt)</a></li>',n=e("<li></li>").addClass("selectMenuButton"),o=e("<ul></ul>").addClass("select_menu_list").append(a).appendTo(n).selectMenu({status:"Font Size",staticStatus:!0,updateInput:!1,onShow:function(e){i.showOverlay()},onHide:function(e){i.hideOverlay()},menuOptions:{position:{my:"left top",at:"left bottom",of:this.box,collision:"flipfit"},click:function(t,a){var n=e(a.item).attr("class");i.execCommand("fontSize",!1,n)}}});return{menu:o,button:n}},_getForeColorMenu:function(t){var i=this,a=e("<li></li>");return e(a).colorPicker({extraHTML:function(){var t;if(i.editors[i.currentEditorName].iframe){var n=i.editors[i.currentEditorName].document.body.innerHTML;t=n.match(/color="{0,1}#{0,1}[a-f0-9]{6}"{0,1}/gi)}else{var n=i.editors[i.currentEditorName].textarea.value;t=n.match(/color="{0,1}#{0,1}[a-f0-9]{6}"{0,1}/gi)}var o={},r=e("<tbody></tbody>");if(null==t&&(t=[]),0==t.length)return"";for(var s=0,l=e("<tr></tr>"),d=0;d<t.length;d++){var c=t[d].replace(/color=/,"").replace(/"/,"").replace(/#/,"").replace(/"/,"");if(!o[c]){6==s&&(r.append(l),l=e("<tr></tr>"),s=0);var u=e("<div></div>").css({width:"15px",height:"15px",backgroundColor:"#"+c,margin:"2px"}).bind("mouseenter",function(){e(this).css({margin:"1px",border:"1px solid #827"})}).bind("mouseleave",function(){e(this).css({margin:"2px",border:"none"})}).bind("click",function(){var t,n=e(this).css("background-color");if(t=n.match(/rgb\((\d+), (\d+), (\d+)\)/)){var o=parseInt(t[1],10).toString(16),r=parseInt(t[2],10).toString(16),s=parseInt(t[3],10).toString(16);o.length<2&&(o="0"+o),r.length<2&&(r="0"+r),s.length<2&&(s="0"+s),n=o+r+s}e("#foreColorPreview").css({backgroundColor:"#"+n}),i.execCommand("foreColor",!1,n),e(a).colorPicker("hide")}),p=e("<td></td>").append(u);l.append(p),s++,o[c]=!0}}for(;s<4;){var u=e('<div class="wysiwyg-missing-tds"></div>');l.append(e("<td></td>").append(u)),s++}r.append(l);var h=e("<table></table>").append(r),f=e("<div><strong>Previously Used Colors:</strong><br /></div>").append(h);return f},autoUpdate:!1,update:function(t){e(this).colorPicker("hide"),e("#foreColorPreview").css({backgroundColor:"#"+t}),i.execCommand("foreColor",!1,t)}}),{menu:null,button:a}},_getInsertSmileyMenu:function(t){for(var i=this,a=e("<li></li>"),n="",o=this.options,r=o.smiles,s=this.$nosmiles,l=r.length,d=0;d<l;d++){var c=r[d],u=r[++d];n+='<li class="'+c+'"><a><img src="'+u+'" alt="'+c+'" title="'+c+'" /></a></li>'}proboards.data("nosmiles")&&0!=proboards.data("nosmiles")?(n+='<li style="display: block; text-align: center;" class="no-smiles no-hide"><a href="#">Enable Smiles</a></li>',s.val(1)):n+='<li style="display: block; text-align: center;" class="no-smiles"><a href="#">Disable Smiles</a></li>';var p=e('<ul class="wysiwyg-smiley-menu"></ul>');return p.addClass("smiley-menu").append(n).appendTo(document.body).menu({button:a,position:{my:"right top",at:"right bottom",of:a,collision:"flipfit"},showOn:"click",clickHide:!0,click:function(t,a){t.preventDefault();var n=e(a.item).attr("class"),o=e("> a > img",a.item).attr("src"),r=e(this),l=e("> .no-smiles",r),d=e("> .no-smiles > a",r),c=e(this).data("menu");if(n.indexOf("no-smiles")==-1)i.execCommand("insertSmiley",!1,{symbol:n,url:o});else{if("visual"==i.currentEditorName){var u=[];u.push(function(e){i.setContent(e);var t=i.editors.visual,a=t.range||t.getRange();window.getSelection?(a.selectNodeContents(a.commonAncestorContainer),a.collapse(!1),t.selection.collapseToEnd()):a.moveStart("textedit")}),1==s.val()?(s.val(0),l.addClass("no-hide"),u.push(function(){d.html("Disable Smiles"),c.enableAllOptions()})):(s.val(1),d.html("Enable Smiles"),l.removeClass("no-hide"),c.disableAllOptions(),c.enableOption("no-smiles"));var p=function(e){for(var t=u.length,i=0;i<t;i++)u[i].call(this,e)},h=i.editors[i.currentEditorName].getContent();i.html2bbcode2html.call(i,h,{success:p})}else 1==s.val()?(s.val(0),d.html("Disable Smiles"),l.addClass("no-hide"),c.enableAllOptions()):(s.val(1),d.html("Enable Smiles"),l.removeClass("no-hide"),c.disableAllOptions(),c.enableOption("no-smiles"));e(this).menu("show")}return!1}}),""!=s.val()&&0!=s.val()&&p.menu("disableAllOptions").menu("enableOption","no-smiles"),{menu:p,button:a}},_getInsertEmbedMenu:function(t){var i=this,a=e("<li></li>"),n="";n+='<li class="facebook-logo" title="Facebook" data-embed-type="facebook"><a><i class="social-icon icon-facebook-squared"></i></a></li>',n+='<li class="twitter-logo" title="Twitter" data-embed-type="twitter"><a><i class="social-icon icon-twitter-squared"></i></a></li>',n+='<li class="gplus-logo" title="Google+" data-embed-type="gplus"><a><i class="social-icon icon-gplus-squared"></i></a></li>',n+='<li class="linkedin-logo" title="LinkedIn" data-embed-type="linkedin"><a><i class="social-icon icon-linkedin-squared"></i></a></li>',n+='<li class="pinterest-logo" title="Pinterest" data-embed-type="pinterest"><a><i class="social-icon icon-pinterest-circled"></i></a></li>',n+='<li class="vine-logo" title="Vine" data-embed-type="vine"><a><i class="social-icon icon-vine"></i></a></li>',n+='<li class="spotify-logo" title="Spotify" data-embed-type="spotify"><a><i class="social-icon icon-spotify"></i></a></li>',n+='<li class="instagram-logo" title="Instagram" data-embed-type="instagram"><a><img src="'+proboards.image_path()+'/icons/social/instagram-logo.png" alt="Instagram" /></a></li>',n+='<li class="indiegogo-logo" title="Indiegogo" data-embed-type="indiegogo"><a><img src="'+proboards.image_path()+'/icons/social/indiegogo-logo.png" alt="Indiegogo" /></a></li>',n+='<li class="kickstarter-logo" title="Kickstarter" data-embed-type="kickstarter"><a><img src="'+proboards.image_path()+'/icons/social/kickstarter-logo.png" alt="Kickstarter" /></a></li>';var o=e('<ul class="wysiwyg-embed-menu"></ul>');return o.addClass("embed-menu").append(n).appendTo(document.body).menu({button:a,position:{my:"right top",at:"right bottom",of:a,collision:"flipit"},showOn:"click",clickHide:!0,click:function(t,a){t.preventDefault();e(a.item);return i.execCommand("insertEmbed",a),e(this).menu("show"),!1}}),{menu:o,button:a}},_getInsertUserLinkMenu:function(t){var i=this,a=e("<li></li>"),n=e("<div></div>").addClass("wysiwyg-menu").addClass("search-menu").appendTo(document.body),o=e('<input type="hidden" />').appendTo(n);return n.menu({button:a,position:{my:"right top",at:"right bottom",of:a,collision:"flipfit"},showOn:"click",beforeShow:function(){if("visual"==i.currentEditorName){i.focusOnSelected();var t=i.editors.visual.genericSelection;if(e(t.startContainer()).closest("code").length>0||e(t.endContainer()).closest("code").length>0)return!1}},show:function(){if(0==e(".user-search",n).length){proboards.search.create_user_search({container:n,displayboxId:"at-user",input:o,change:function(a,o){"select"==o.type&&(i.execCommand("insertUserLink",!1,{id:o.itemData.id,username:o.itemData.username}),e("."+t+"-selectlist").selectlist("deselect",o.itemData.id),e("."+t+"-displaybox").hide(),n.menu("hide"))}});var t=e(".user-search",n).attr("id");e("."+t+"-input").autosearch("option","enter",function(){e("."+t+"-selectlist").selectlist("select")}),e("input.search-input",n).prop("autofocus",!0),e(this).menu("hide").menu("show")}else setTimeout(function(){e("input.search-input",n).trigger("focus")},100)},addedMenu:"#at-user",clickHide:!1,click:function(e,t){return!1}}),{menu:n,button:a}},_insertTablePrompt:function(e){this._prompt({title:"Insert Table",fields:[{title:"Columns",name:"cols",input:!0,type:"number",value:2,size:8,required:!0,className:"short",min:1,max:50},{title:"Rows",name:"rows",input:!0,type:"number",value:2,size:8,required:!0,className:"short",min:1,max:100},{title:"Cellpadding",name:"cellpadding",input:!0,type:"number",value:3,size:8,required:!0,className:"short",min:0},{title:"Cellspacing",name:"cellspacing",input:!0,type:"number",value:0,size:8,required:!0,className:"short",min:0},{title:"Border",name:"border",input:!0,type:"checkbox",checked:0,size:8,required:!1}],callback:e,ieWidth:175})},_insertEmbedPrompt:function(t,i){var a=t.name,n=e(i).data("embed-type");if("Visual"==a)var o=function(e){var i=t.window.document,a=i.createElement("span");a.setAttribute("class","wysiwyg-embed "+n);for(var o in e)if(e.hasOwnProperty(o)){var r=e[o];a.setAttribute(o,r)}if("kickstarter"==n||"indiegogo"==n||"instagram"==n){var s=i.createElement("img");s.setAttribute("src",proboards.image_path()+"/icons/social/"+n+"-logo-lg.png"),s.setAttribute("alt",n.charAt(0).toUpperCase()+n.substring(1))}else{var l=i.createElement("i"),d="icon-";d+="facebook"==n||"gplus"==n||"linkedin"==n?n+"-squared":"pinterest"==n?n+"-circled":n,l.setAttribute("class",d)}var c="";c="gplus"==n?"Google+":"linkedin"==n?"LinkedIn":n.charAt(0).toUpperCase()+n.substring(1);var u="Your "+c+" embed will appear here after you post...",p=i.createTextNode(u);"undefined"!=typeof l?a.appendChild(l):"undefined"!=typeof s&&a.appendChild(s);var h=i.createDocumentFragment(),f=i.createElement("br"),m=i.createElement("br"),g=i.createElement("br");a.appendChild(p),h.appendChild(f),h.appendChild(a),h.appendChild(m),h.appendChild(g),t.replaceSelection(h)};else var o=function(e){var i=0,a=0;"undefined"!=typeof t.textarea.selectionStart&&(i=t.textarea.selectionStart,a=t.textarea.selectionEnd),0!=a&&(t.textarea.selectionStart=i,t.textarea.selectionEnd=a);var o=[],r="["+n+" ";for(var s in e)if(e.hasOwnProperty(s)){var l=e[s],d=s+'="'+l+'"';o.push(d)}o=o.join(" "),r+=o+"]",t.replaceSelection(r),"undefined"!=typeof t.textarea.selectionStart?t.textarea.selectionStart=t.textarea.selectionEnd:(t.range.collapse(!1),t.range.select())};var r={callback:o,ieWidth:625,buttonText:"Embed"};if(i.is("li.facebook-logo"))e.extend(r,{title:"Embed Facebook Post",fields:[{title:"<b>Facebook Post URL<b/>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://www.facebook.com/ProBoardsFreeForums/posts/149123345105824</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Facebook embed help</a></div><div class="help-content hide"><h4>How do I find a Facebook post URL?</h4><p>Use the following steps to find a Facebook post URL:<br /><ol><li>Navigate to the <a href="https://www.facebook.com/">Facebook</a> page with the post you want to share.</li><li>Click on the post\'s <b>timestamp</b> link (next to the audience selector).</li><li>After the page loads, copy the URL from the browser\'s address bar.</li></ol></p><h4>What type of Facebook posts are supported?</h4><p>Only <b>public</b> posts from Facebook Pages and profiles can be embedded.</p></div></div>'});else if(i.is("li.twitter-logo")){var s={title:"Embed Tweet",fields:[{title:"<b>Tweet URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://twitter.com/proboards/status/2114706069</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Twitter embed help</a></div><div class="help-content hide"><h4>How do I find a Tweet URL?</h4><p>Use the following steps to find a Tweet URL:<br /><ol><li>Locate the Tweet on <a href="https://twitter.com/" target="_blank">Twitter</a>.</li><li>Click on the Tweet. This will expand the Tweet, showing more information about when the Tweet was posted towards the bottom.</li><li>Click on <b>Details</b> next to the Tweet\'s timestamp.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'};"Visual"==t.name&&(s.callback=function(e){var i=e.url,a=t.window.document,n=a.createElement("img");n.setAttribute("src",proboards.image_path()+"/bbcode/twitter-preview.png"),n.setAttribute("tweet_url",i),n.setAttribute("alt","Twitter Placeholder"),t.replaceSelection(n)}),e.extend(r,s)}else i.is("li.gplus-logo")?e.extend(r,{title:"Embed Google+ Post",fields:[{title:"<b>Google+ Post URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://plus.google.com/103014581115010684768/posts/Xzby8MuqZtk</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Google+ embed help</a></div><div class="help-content hide"><h4>How do I find a Google+ post URL?</h4><p>Use the following steps to find a Google+ post URL:<br /><ol><li>Locate the <a href="https://plus.google.com/">Google+</a> post.</li><li>Right-click on the <b>timestamp</b> of the post.</li><li>Copy the link address.</li></ol></p><h4>How does the Google+ post need to be formatted?</h4><p>The link to the Google+ post must be in its <b>canonical</b> format (see example URL above).<br />&nbsp;- The following URL formats are not supported:<br /><ul><li>Custom URLs</li><li>URLs with /u in them</li><li>Mobile Web Google+ URLs</li></ul></p><h4>What type of Google+ posts are supported?</h4><p>&nbsp;- Supported posts:<br /><ul style="margin-bottom:5px;"><li>Posts with text and links (including links to a community)</li><li>Posts with images</li><li>Posts with videos</li></ul>&nbsp;- Unsupported posts:<ul><li>Posts from within a community</li><li>Posts that are restricted to a Google Apps domain</li><li>Private posts</li><li>Events posts</li><li>Hangout on Air posts</li></ul></p></div></div>'}):i.is("li.linkedin-logo")?e.extend(r,{title:"Embed LinkedIn Profile",fields:[{title:"<b>LinkedIn Profile URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Member Profile:</div>https://www.linkedin.com/in/jeffweiner08</li><li><div class="embed-url-title">Company Profile:</div>https://www.linkedin.com/company/linkedin</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show LinkedIn embed help</a></div><div class="help-content hide"><h4>How do I find a LinkedIn profile URL?</h4><p>Use the following steps to find a LinkedIn profile URL:<br /><ol><li>Navigate to the <a href="https://www.linkedin.com/">LinkedIn</a> <b>member</b> or <b>company</b> profile page.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):i.is("li.instagram-logo")?e.extend(r,{title:"Embed Instagram Post",fields:[{title:"<b>Instagram Post URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Short:</div>http://instagr.am/p/bNd86MSFv6</li><li><div class="embed-url-title">Long:</div>http://instagram.com/p/bNd86MSFv6</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Instagram embed help</a></div><div class="help-content hide"><h4>How do I find an Instagram post URL?</h4><p>Use the following steps to find an Instagram post URL:<br />&nbsp;- From the Instagram homepage:<ol style="margin-bottom:5px;"><li>Locate the <a href="http://instagram.com/">Instagram</a> post.</li><li>Click on the <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAQCAMAAADUOCSZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjE4RERBNzRCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjE4RERBNzNCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iRThEOTQ0NTRGMUE1NEMwRjg5QTU3QTQwQUUyQzJCQjEiIHN0UmVmOmRvY3VtZW50SUQ9IkU4RDk0NDU0RjFBNTRDMEY4OUE1N0E0MEFFMkMyQkIxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7HpxSgAAAL1QTFRF9PT08/Pz9fX18vLy8PDwk5OT8fHx9vb29/f3j4+PpKSk6enpw8PDn5+f6OjooaGhnp6emJiYnZ2dmpqaoKCg29vbxcXF5OTkra2t+vr6mZmZwMDA1dXVkJCQtbW1lpaWtLS0+fn5lJSU4uLim5ubnJyc0NDQsrKypaWl1NTUycnJxMTEpqam2NjYlZWVkpKSl5eX0tLSoqKi5ubmurq6+Pj44+Pj1tbWs7Oz6urq7+/v6+vr7Ozs7u7u7e3tmerH7wAAANhJREFUeNqskEVuRTEMRR14/BnKzMwU0/6XVSeTjip1UEu+snx8Eyegv4TAT2nJRUtdCLMSCkkiwZQxMkshJICMxL5mVI7eZjh7JEU3MGjwKTWcQF9BrInmkfZierd2bm/Vf7rm+urlGdDONeI/ptVhrzQ+qVbKffUwO3WC+R5/P58tljp5OlssJ8P5zni+diJqJKbLrnqDeLTffTl/8NhtBUeUPQyboxvikEa3Q1vTxm4KQhptNyLwDRLW7XFgCe/bplw2yC+VorUQq6IKmsIf/u0/yLcAAwBKH0wXq5lr6QAAAABJRU5ErkJggg==" alt="ellipse button"> button towards the bottom right of the post.</li><li>Select <b>View Photo Page</b>.</li><li>After the page loads, copy the URL from the browser\'s address bar.</li></ol>&nbsp;- From an Instagram user\'s page:<ol><li>Click on the user\'s <b>post</b> that you want to share.</li><li>After the Instagram post pops up, copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):i.is("li.pinterest-logo")?e.extend(r,{title:"Embed Pinterest Pin/Board",fields:[{title:"<b>Pinterest Pin/Board URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Pin:</div>https://www.pinterest.com/pin/99360735500167749/</li><li><div class="embed-url-title">Board:</div>https://www.pinterest.com/pinterest/official-news/</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Pinterest embed help</a></div><div class="help-content hide"><h4>How do I find a Pinterest pin or board URL?</h4><p>Use the following steps to find a Pinterest pin or board URL:<br />&nbsp;- Pinterest board:<ol><li>Navigate to the user\'s <a href="http://www.pinterest.com/" target="_blank">Pinterest</a> page.</li><li>Click on the <b>board</b> that you want to share.</li><li>After the board page loads, copy the URL from the browser\'s address bar.</li></ol>&nbsp;- Pinterest pin:<ol><li>Navigate to the <a href="http://www.pinterest.com/" target="_blank">Pinterest</a> board that contains the pin you want to share (check the steps listed above if you need help on how to find a board). </li><li>Click on the <b>pin</b> you want to share.</li><li>After the pin pops up, copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):i.is("li.vine-logo")?e.extend(r,{title:"Embed Vine Post",fields:[{title:"<b>Vine Post URL</b>",name:"url",input:!0,type:"text",value:"",required:!0},{title:"<b>Embed Type</b>",name:"type",value:"postcard",selectMenu:!0,options:[["postcard","Postcard"],["simple","Simple"]],required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://vine.co/v/Oqz3DWiZdmY</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Vine embed help</a></div><div class="help-content hide"><h4>How do I find a Vine video URL?</h4><p>Use the following steps to find a Vine video URL:<br /><ol><li>Navigate to the <a href="https://vine.co/" target="_blank">Vine</a> page that contains the video you want to share.</li><li>Locate the video and click on the <img style="vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAaCAMAAABfE/ZQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjE4RERBNzBCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjE4RERBNkZCNDQzMTFFMzk3MTRDNjJBQzA0OTdDRDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iQ0UxNkYxOTVBRjVGQzQ0RDE5ODIyNUE2NEM2MTlGNjYiIHN0UmVmOmRvY3VtZW50SUQ9IkNFMTZGMTk1QUY1RkM0NEQxOTgyMjVBNjRDNjE5RjY2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FvcxcQAAAGZQTFRF+vr6+fn5wMDA8fHxtLS0o6Oj9fX1pqamrq6ul5eXz8/PqampsrKykZGR5+fnnZ2doKCgjIyMzMzMvr6+e3t75ubm6urqiIiIr6+vfn5+ubm5oaGh3d3d+/v7/Pz8/f39/v7+////GA1+9QAAAIxJREFUeNqckMcSwzAIRJHklh6nNxb4/59M7ImEfbUOkt4w7MKSzQ8tYlUVZzWKbQy/NzOOl4OzGba7h5jkunC6JdKixxh+XFi1SY0i94uFalW5ngjVzzdJ0VPE+sxa/BQC5qIvwHj7PHT97OH+hq7vwmQ/3txbTObn02sN33d0Ypnl80/EeVm+XwEGAIw/LXNiLVjVAAAAAElFTkSuQmCC" alt="Vertical ellipse"> button at the top right.</li><li>Select the <b>View post page</b> option.</li><li>After the page loads, copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):i.is("li.spotify-logo")?e.extend(r,{title:"Embed Spotify",fields:[{title:"<b>Spotify URL/URI</b>",name:"data-id",input:!0,type:"text",value:"",required:!0},{title:"<b>Size</b>",name:"size",value:"large",selectMenu:!0,options:[["large","Large"],["compact","Compact"]],required:!0}],extraInfo:'<div class="embed-info"><b>Example URLs:</b><br><ul><li><div class="embed-url-title">Track:</div>http://open.spotify.com/track/7n9Q6bXSjm74uCtajkddPt</li><li><div class="embed-url-title">Album:</div>http://open.spotify.com/album/112eEMM7VwHVEknE4hHjjY</li><li><div class="embed-url-title">Playlist:</div>http://open.spotify.com/user/topsify/playlist/4hiQvXxxJJqsWNVlMkaERP</li></ul><b>Example URIs:</b><br><ul><li><div class="embed-url-title">Track:</div>spotify:track:7n9Q6bXSjm74uCtajkddPt</li><li><div class="embed-url-title">Album:</div>spotify:album:112eEMM7VwHVEknE4hHjjY</li><li><div class="embed-url-title">Playlist:</div>spotify:user:topsify:playlist:4hiQvXxxJJqsWNVlMkaERP</li></ul></div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Spotify embed help</a></div><div class="help-content hide"><h4>How do I find a Spotify URL/URI?</h4><p>Use the following steps to find a Spotify URL/URI:<br />&nbsp;- Spotify URL:<ol><li>From within the <a href="https://www.spotify.com" target="_blank">Spotify</a> App right-click any song, album, or playlist.</li><li>Select <b>Copy HTTP Link</b>.</li></ol></p>&nbsp;- Spotify URI:<ol><li>From within the <a href="https://www.spotify.com" target="_blank">Spotify</a> App right-click any song, album, or playlist.</li><li>Select <b>Copy Spotify URI</b>.</li></ol></p></div></div>'
}):i.is("li.indiegogo-logo")?e.extend(r,{title:"Embed IndieGoGo Campaign",fields:[{title:"<b>Indiegogo Campaign URL</b>",name:"url",input:!0,type:"text",value:"",required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://www.indiegogo.com/projects/bluesmart-world-s-first-smart-connected-carry-on</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Indiegogo embed help</a></div><div class="help-content hide"><h4>How do I find an Indiegogo campaign URL?</h4><p>Use the following steps to find an Indiegogo campaign URL:<br /><ol><li>Navigate to the <a href="https://www.indiegogo.com/" target="_blank">Indiegogo</a> <b>campaign</b> page.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'}):i.is("li.kickstarter-logo")&&e.extend(r,{title:"Embed Kickstarter Project",fields:[{title:"<b>Kickstarter Project URL</b>",name:"url",input:!0,type:"text",value:"",required:!0},{title:"<b>Embed Type</b>",name:"type",value:"card",selectMenu:!0,options:[["card","Card"],["video","Video"]],required:!0}],extraInfo:'<div class="embed-info"><b>Example URL:</b><br>https://www.kickstarter.com/projects/1916334303/video-games-live-level-4-lets-do-it-again</div><br /><div class="embed-help"><div class="help-title"><a href="#">Show Kickstarter embed help</a></div><div class="help-content hide"><h4>How do I find a Kickstarter project URL?</h4><p>Use the following steps to find a Kickstarter project URL:<br /><ol><li>Navigate to the <a href="https://www.kickstarter.com/" target="_blank">Kickstarter</a> <b>project</b> page.</li><li>Copy the URL from the browser\'s address bar.</li></ol></p></div></div>'});this._prompt(r);var l=e(".embed-url-title");if(l.length){var d=0;l.each(function(){e(this).width()>d&&(d=e(this).width())}),l.width(d+1)}var c=e(".embed-help"),u=e(".help-title a"),p=e(".help-content");c.css("maxWidth",e(".ui-dialog form").width()),u.on("click",function(t){t.preventDefault(),p.slideToggle(p.hasClass("hide")),u.text(function(){return 0==e(this).text().indexOf("Show")?e(this).text().replace("Show","Hide"):0==e(this).text().indexOf("Hide")?e(this).text().replace("Hide","Show"):void 0}),p.hasClass("hide")?p.removeClass("hide"):p.addClass("hide")})},_insertListPrompt:function(e){this._prompt({title:"Insert List",fields:[{title:"Number of items",name:"count",input:!0,type:"number",value:3,size:8,required:!0,className:"short",min:1,max:1e3},{title:"List Style",name:"list_type",value:"disc",selectMenu:!0,options:[["disc","&#9679; List Item"],["circle","&#9675; List Item"],["square","&#9632; List Item"],["decimal","1, 2, 3 ..."],["upper-alpha","A, B, C ..."],["lower-alpha","a, b, c ..."],["upper-roman","I, II, III ..."],["lower-roman","i, ii, iii ..."]],required:!0}],callback:e,ieWidth:250})},_createLinkPrompt:function(e,t){var i=this.editors[this.currentEditorName].getSelectedText(),a="http://";i&&i.indexOf("http")!=-1&&(a=i);var n=[];n.push({title:"Text",name:"text",input:!0,type:"text",value:i||"link",size:20,required:!0}),n.push({title:"URL",name:"href",input:!0,type:"text",value:a,size:20,required:!0}),this._prompt({title:"Create Link",fields:n,callback:t,ieWidth:400})},_createEmailPrompt:function(e,t){var i=this.editors[this.currentEditorName].getSelectedText(),a="";i&&i.indexOf("@")!=-1&&(a=i);var n=[];n.push({title:"Text",name:"text",input:!0,type:"text",value:i||"link",size:20,required:!0}),n.push({title:"Email Address",name:"email",input:!0,type:"text",value:a,size:20,required:!0}),this._prompt({title:"Insert Email",fields:n,callback:t,ieWidth:450})},_insertImagePrompt:function(e){var t=this.editors[this.currentEditorName].getSelectedText(),i="http://";t&&t.indexOf("http")!=-1&&(i=t);var a=[];a.push({title:"Image URL",name:"src",input:!0,type:"text",value:i,size:20,required:!0}),a.push({title:"Alt Text",name:"alt",input:!0,type:"text",value:t||"",size:20,required:!1}),this._prompt({title:"Insert Image",fields:a,callback:e,ieWidth:425})},_insertVideoPrompt:function(e){var t=this.editors[this.currentEditorName].getSelectedText(),i=[];i.push({title:"Video URL",name:"url",input:!0,type:"text",value:t?t:"",size:20,required:!0}),i.push({title:"Size",name:"size",selectMenu:!0,value:"default",options:[["default","Default"],["small","Small"],["medium","Medium"],["large","Large"]],required:!0}),this._prompt({title:"Insert Video",fields:i,extraInfo:'<div id="video-list-info"><h1>Supported Video Sites</h1><ul><li><a href="http://www.collegehumor.com" target="_blank">CollegeHumor</a></li><li><a href="http://www.dailymotion.com" target="_blank">Dailymotion</a></li><li><a href="http://www.metacafe.com" target="_blank">Metacafe</a></li><li><a href="http://www.myspace.com/video" target="_blank">MySpace videos</a></li><li><a href="http://www.twitch.tv" target="_blank">Twitch.tv</a></li><li><a href="http://www.ustream.tv" target="_blank">UStream</a></li><li><a href="http://www.veoh.com" target="_blank">Veoh</a></li><li><a href="http://vimeo.com" target="_blank">Vimeo</a></li><li><a href="http://www.youtube.com" target="_blank">YouTube</a></li><li><a href="http://www.imgur.com" target="_blank">Imgur GIFV</a></li><li>And any direct link to .wmv / .avi / .mpg / .mov / .mp4 / .ogv / .webm</li></ul></div>',callback:e,ieWidth:425})},_getTags:function(e,t,i){for(var a=e.length-1,n=0,o=[],r=0;n<=a&&r<100;){var s=e.indexOf(t,n);if(s==-1){var l=e.substr(n,a-n+1);o.push({text:l}),n=a+1}else{var d=e.indexOf(i,s);if(d==-1){var l=e.substr(n,a-n+1);o.push({text:l}),n=a}else{var c=e.indexOf(t,s);if(c<d&&(s=c),s>n){var l=e.substr(n,s-n);o.push({text:l})}var l=e.substr(s+1,d-s-1),u=this._getTag(l);u?o.push(u):o.push({text:t+l+i}),n=d+1}}r++}return o},_getTag:function(e){var t,i;0==e.indexOf("/")?(e=e.substr(1),i=!1,t=!0):(i=!0,t=!1),e.lastIndexOf("/")==e.length-1&&(e=e.substr(0,e.length-1),t=!0,e=e.replace(/\s*$/,""));var a,n={},o=e.indexOf(" ");if(o==-1)a=e;else{a=e.substr(0,o),e=e.substr(o+1);for(var r=e.split("="),s="",l="",d=0;d<r.length;d++)""==s?s=r[d]:d+1==r.length?(l=r[d].replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),n[s]=l):(o=r[d].lastIndexOf(" "),l=r[d].substr(0,o).replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),n[s]=l,s=r[d].substr(o+1))}return{name:a,attrs:n,open:i,close:t}},_correctRange:function(e){if("undefined"!=typeof e.startContainer&&!e.collapsed){for(;"#text"==e.startContainer.nodeName.toLowerCase()&&e.startOffset==e.startContainer.length&&e.startContainer.length>0||"#text"!=e.startContainer.nodeName.toLowerCase()&&e.startOffset==e.startContainer.childNodes.length&&e.startContainer.childNodes.length>0;)null==e.startContainer.nextSibling?e.setStart(e.startContainer.parentNode,e.startContainer.parentNode.childNodes.length):e.setStart(e.startContainer.nextSibling,0);for(;0==e.endOffset;)if(null==e.endContainer.previousSibling)e.setEnd(e.endContainer.parentNode,0);else{var t,i=e.endContainer.previousSibling;t="#text"==i.nodeName.toLowerCase()?i.length:i.childNodes.length,e.setEnd(i,t)}for(;0==e.startOffset&&e.startContainer.childNodes.length>0&&"#text"!=e.startContainer.nodeName.toLowerCase();)e.setStart(e.startContainer.childNodes[0],0);for(;e.endOffset==e.endContainer.childNodes.length-1&&e.endContainer.childNodes.length>0&&"#text"!=e.endContainer.nodeName.toLowerCase();){var t,i=e.endContainer.childNodes[e.endContainer.childNodes.length-1];t="#text"==i.nodeName.toLowerCase()?i.length:i.childNodes.length,e.setEnd(i,t)}}},_prompt:function(t){"undefined"==typeof t.dialog&&(t.dialog={}),0==e(this.dialog).length&&(this.dialog=e("<div></div>").hide().appendTo(document.body).dialog({autoOpen:!1,height:"auto",width:"auto",dialogClass:"wysiwyg-dialog",close:function(){e.clearInputError()}})),e(".wysiwyg-dialog .ui-dialog-content").css("overflow","visible");var i,a=this,n=e("<table></table>"),o=t.fields,r=t.extraInfo,s=o.length,l=t.buttonText||t.title;for(i=0;i<s;++i){var d=e('<tr><td class="pad-bottom">'+o[i].title+":&nbsp;</td></tr>"),c=e('<td class="pad-bottom"></td>');if(o[i].input)"textarea"==o[i].type?c.append('<textarea name="'+o[i].name+'" rows="'+(o[i].rows?o[i].rows:8)+'" cols="'+(o[i].cols?o[i].cols:30)+'"'+(o[i].required?' required="required"':"")+">"+(void 0!=o[i].value?o[i].value:"")+"</textarea>"):c.append('<input name="'+o[i].name+'"'+(o[i].className?' class="'+o[i].className+'"':"")+(o[i].checked?' checked="checked"':"")+' type="'+o[i].type+'" value="'+(void 0!=o[i].value?o[i].value:"")+'" size="'+(o[i].size?o[i].size:16)+'"'+(o[i].required?' required="required"':"")+(o[i].min?' min="'+o[i].min+'"':"")+(o[i].max?' max="'+o[i].max+'"':"")+(o[i].placeholder?' placeholder="'+o[i].placeholder+'"':"")+" />");else if(o[i].selectMenu){for(var u=e('<input id="wysiwyg-input-'+o[i].name+'" type="hidden" name="'+o[i].name+'" value="'+o[i].value+'" />'),p="",h=0;h<o[i].options.length;h++)o[i].value&&o[i].value==o[i].options[h][0]&&(text=o[i].options[h][1]),p+='<li class="value-'+o[i].options[h][0]+'"><a>'+o[i].options[h][1]+"</a></li>";var f=e('<ul class="select_menu_list list-style ui-menu ui-selectMenu hide"></ul>').append(p),m=e("<div></div>").addClass("selectMenuButton").append(f);f.selectMenu({status:o[i].options[0][1],updateInput:u,menuOptions:{click:function(t,i){var a=e(i.item).parents(".select_menu_list"),n=a.data("selectMenu"),o=n.option("updateInput");o.val(e(i.item).attr("class").replace("value-",""))}}});c.append(u),c.append(m)}else if(o[i].select){for(var g='<select name="'+o[i].name+'">',h=0;h<o[i].options.length;h++)g+='<option value="'+o[i].options[h][0]+'"'+(o[i].value==o[i].options[h][0]?' selected="selected"':"")+">"+o[i].options[h][1]+"</option>";g+="</select>",c.append(g)}d.append(c),n.append(d)}var v=e("<form></form>").bind("submit.wysiwyg",function(i){"undefined"!=typeof i.cancelBubble&&(i.cancelBubble=!0),"undefined"!=typeof i.stopPropagation&&i.stopPropagation(),"undefined"!=typeof i.preventDefault&&i.preventDefault();var n,o=!1,r={},s=this.elements,l=s.length;for(n=0;n<l;++n){var d=s[n].getAttribute("required"),c=(s[n].name,s[n].value),u=s[n].getAttribute("type"),p=s[n].getAttribute("min")?parseInt(s[n].getAttribute("min")):null,h=s[n].getAttribute("max")?parseInt(s[n].getAttribute("max")):null;if(null!=d&&"required"==d&&""==c){o=!0,e.inputError(s[n],"This field is required.");break}if("number"==u&&!c.match(/^-?[0-9]+$/)){o=!0,e.inputError(s[n],"This field must be an integer.");break}if(p&&(intVal=parseInt(c),intVal<p)){o=!0,e.inputError(s[n],"This field must be at least "+p+".");break}if(h&&(intVal=parseInt(c),intVal>h)){o=!0,e.inputError(s[n],"This field cannot be more than "+h+".");break}r[s[n].name]="border"==s[n].name?s[n].checked:s[n].value}return!o&&(a.dialog.dialog("close"),t.callback.call(this,r),!1)}).append(n);this.dialog.html("").append(v,r),t.dialog.height="auto",t.dialog.width="auto",e("html").is(".ie7")&&(t.dialog.width=t.ieWidth),t.dialog.buttons=[{text:l,click:function(){e("form",this).submit()}}],t.dialog.title=t.title,t.dialog.open=function(){proboards.dialogEnter(e(this))};for(option in t.dialog)this.dialog.dialog("option",option,t.dialog[option]);this.dialog.dialog("open"),setTimeout(function(){e("div.ui-dialog tr:first-child td input:visible").eq(0).focus().select()},0)},_onButtonClick:function(e){this.buttons[e].command&&this.execCommand(this.buttons[e].command,!1,!1)},_getSelection:function(){if("bbcode"!=this.currentEditorName){var e;return this.editors[this.currentEditorName].window.getSelection?e=this.editors[this.currentEditorName].window.getSelection():this.editors[this.currentEditorName].document.selection&&(e=this.editors[this.currentEditorName].document.selection.createRange()),e&&(this.editors[this.currentEditorName].selection=e),this.editors[this.currentEditorName].selection}},_getRange:function(e){if(e||(e=this._getSelection()),e.getRangeAt){if(0==e.rangeCount){var t=this.editors.wysiwyg.document.createRange();t.setStart(this.editors.wysiwyg.document.body,0),t.setEnd(this.editors.wysiwyg.document.body,0),e.addRange(t)}return e.getRangeAt(0)}var t=this.editors.wysiwyg.document.createRange();return t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),t},getContentFor:function(t){if("bbcode"==t||"visual"!=t)if(this.currentEditorName&&"wysiwyg"==this.currentEditorName&&this.editors.wysiwyg){for(var i=this.editors.wysiwyg.document.body.innerHTML;null!=i.match(/<br\s*\/?>$/)||i.match(/\s+$/)||i.match(/(&nbsp;)+$/);)i=i.replace(/<br\s*\/?>/,"").replace(/\s+$/,"").replace(/(&nbsp;)+$/,"");if("visual"==t)return i;if("bbcode"==t)return this.html2bbcode(i)}else{if(!this.currentEditorName||"bbcode"!=this.currentEditorName||!this.editors.bbcode)return;if("visual"==t)return this.bbcode2html(e(this.editors.bbcode.textarea).val());if("bbcode"==t)return e(this.editors.bbcode.textarea).val()}},_updateSelection:function(){this.editors.wysiwyg.window.getSelection?this.selection=this.editors.wysiwyg.window.getSelection():this.editors.wysiwyg.document.selection&&(this.selection=this.editors.wysiwyg.document.selection.createRange())},_updateButtonStates:function(){if("bbcode"!=this.currentEditorName){var t=this._getSelection(),i=this._getRange(t);this._correctRange(i);var a=i.commonAncestorContainer;e(".button.ui-active",this.controlsContainer).removeClass("ui-active");for(var n="",o="",r="";"body"!=a.nodeName.toLowerCase();)this.buttonStateIndex[a.nodeName.toLowerCase()]&&e(".button-"+this.buttonStateIndex[a.nodeName.toLowerCase()],this.controlsContainer).addClass("ui-active"),"font"==a.nodeName.toLowerCase()&&(""==n&&""!=a.face&&(n=a.face),""==o&&""!=a.color&&(o=a.color),""==r&&""!=a.size&&(r=a.size)),a=a.parentNode;var s;if(s=o.match(/rgb\((\d+), (\d+), (\d+)\)/)){var l=parseInt(s[1],10).toString(16),d=parseInt(s[2],10).toString(16),c=parseInt(s[3],10).toString(16);l.length<2&&(l="0"+l),d.length<2&&(d="0"+d),c.length<2&&(c="0"+c),o=l+d+c}""==o&&(o="000000"),o=o.replace("#",""),e("#foreColorPreview").css({backgroundColor:"#"+o})}},_removeNode:function(e){var t=e.parentNode;for(t.removeChild(e);0==t.childNodes.length&&"body"!=t.nodeName.toLowerCase();)e=t,t=t.parentNode,t.removeChild(e)},_nodeIsEmpty:function(e,t){"undefined"==typeof t&&(t=0);for(var i="",a=0;a<t;++a)i+="--";if(i+=" ","#text"==e.nodeName.toLowerCase())return!(!e.isElementContentWhitespace||""!=e.data);if(1==e.childNodes.length&&"br"==e.childNodes[0].nodeName.toLowerCase())return!0;var a,n=e.childNodes,o=n.length;for(a=0;a<o;++a)if(!this._nodeIsEmpty(n[a],t+1))return!1;return!0},_transferChildNodes:function(e,t){var i=e.childNodes;for(i.length;e.childNodes.length>0;)t.appendChild(e.childNodes[0])},_cleanTags:function(e,t){"undefined"==typeof t&&(t=0);for(var i="",a=0;a<t;++a)i+="--";for(i+=" ","undefined"==typeof e&&(e=this.editors.wysiwyg.document.body.childNodes[0]);null!=e;)if(this._nodeIsEmpty(e)){var n=e.nextSibling;this._removeNode(e),e=n}else{if(null!=e.nextSibling&&"#text"!=e.nodeName.toLowerCase()&&"#text"!=e.nextSibling.nodeName.toLowerCase())for(var o=!0;o;)if("#text"!=e.nodeName.toLowerCase()&&null!=e.nextSibling&&"#text"!=e.nextSibling.nodeName.toLowerCase())if(e.nodeName.toLowerCase()!=e.nextSibling.nodeName.toLowerCase()){var r,s,l,d;for(s=e,r=s,l=e.nextSibling.nodeName.toLowerCase(),d=!1;1==s.childNodes.length&&!d;)s=s.childNodes[0],"#text"!=s.nodeName.toLowerCase()&&s.nodeName.toLowerCase()==l&&(d=!0);if(d){var c=s.parentNode;c.removeChild(s),r.parentNode.insertBefore(s,r.nextSibling),this._transferChildNodes(s,c),s.appendChild(r),e=s}else{for(s=e.nextSibling,r=s,l=e.nodeName.toLowerCase(),d=!1;1==s.childNodes.length&&!d;)s=s.childNodes[0],"#text"!=s.nodeName.toLowerCase()&&s.nodeName.toLowerCase()==l&&(d=!0);if(d){var c=s.parentNode;c.removeChild(s),r.parentNode.insertBefore(s,r.nextSibling),this._transferChildNodes(s,c),s.appendChild(r)}else o=!1}}else{var u=e.nextSibling;this._transferChildNodes(u,e),e.parentNode.removeChild(u)}else o=!1;"#text"!=e.nodeName.toLowerCase()&&this._cleanTags(e.childNodes[0],t+1),e=e.nextSibling}},_splitParentsUntilNodeName:function(e,t,i){for(var a=e.parentNode,n=!1;!n;){this._compareTagToNode(t,i,a)&&(n=!0);for(var o=this.editors.wysiwyg.document.createElement(a.nodeName),r=e.nextSibling;r;)r.isElementContentWhitespace?a.removeChild(r):o.appendChild(r),r=e.nextSibling;if(o.childNodes.length>0&&a.parentNode.insertBefore(o,a.nextSibling),n)a.parentNode.insertBefore(e,a.nextSibling),this._removeEmptyTextNodes(a),0==a.childNodes.length&&a.parentNode.removeChild(a);else{var s=this.editors.wysiwyg.document.createElement(a.nodeName);s.appendChild(e),a.parentNode.insertBefore(s,a.nextSibling),e=s,this._removeEmptyTextNodes(a),0==a.childNodes.length&&a.parentNode.removeChild(a)}a=e.parentNode}return e},_compareTagToNode:function(e,t,i){if(i.nodeName.toLowerCase()!=e)return!1;var a,n=0,o=0,r=i.attributes;r.length;for(a=0;a<r;++a){var s=i.attributes[a].nodeName.toLowerCase();0!=s.indexOf("_")&&(t[s]&&""!=t[s]&&(i.removeAttribute(s),++n),++o)}return n==o},_compareTagToParentNodes:function(e,t,i){for(i=i.parentNode;i&&"body"!=i.nodeName.toLowerCase();){if(this._compareTagToNode(e,t,i))return!0;i=i.parentNode}return!1},_insertAroundSelection:function(e,t){var i=this._getSelection(),a=this._getRange(i);if(a.collapsed){var n,o=a.commonAncestorContainer;this._compareTagToParentNodes(e,t,o)?(n=this.editors.wysiwyg.document.createTextNode(""),a.insertNode(n),this._splitParentsUntilNodeName(n,e,t)):(n=this._createNode(e,t),a.insertNode(n)),a.selectNodeContents(n)}else{this._correctRange(a);var n,o=a.commonAncestorContainer;if(this._compareTagToNode(e,t,o)||this._compareTagToParentNodes(e,t,o)){var r=a.extractContents();n=this.editors.wysiwyg.document.createTextNode(""),a.insertNode(n),this._splitParentsUntilNodeName(n,e,t);var s=r.firstChild,l=r.lastChild;n.parentNode.insertBefore(r,n),n.parentNode.removeChild(n),a.setStartBefore(s),l.nextSibling?a.setEnd(l.nextSibling,0):a.setEnd(l,l.childNodes.length);var d=this;setTimeout(function(){d._cleanTags()},1)}else{var r=a.extractContents();this._clearAllTaggedBranches(r.childNodes,e,t),n=this._createNode(e,t);var s=r.firstChild,l=r.lastChild;return;var d}}},_createNode:function(e,t){var i=this.editors.wysiwyg.document.createElement(e);for(var a in t)i[a]=t[a];return i},_clearAllTaggedBranches:function(e,t,i){for(var a=0;a<e.length;a++){var n=e[a];if(this._compareTagToNode(t,i,n)){for(var o=n.childNodes;o.length>0;)n.parentNode.insertBefore(o[0],n);n.parentNode.removeChild(n),a--}else"#text"!=n.nodeName.toLowerCase()&&this._clearAllTaggedBranches(n.childNodes,t,i)}},_removeEmptyTextNodes:function(e){for(var t=e.childNodes,i=0;i<t.length;i++)t[i].isElementContentWhitespace&&""==t[i].wholeText&&e.removeChild(t[i])},_insertAfterSelection:function(e,t){var i=this._createNode(e,t),a=this._getSelection(),n=this._getRange(a);n.collapse(!1),n.insertNode(i),this._cleanTags()},_replaceSelected:function(e){var t=this._getSelection();if(this.editors.wysiwyg.window.getSelection){var i=this._getRange(t);i.deleteContents(),i.insertNode(e),i.setEndAfter(e),t.addRange(i),t.collapseToEnd&&t.collapseToEnd(),this.editors.wysiwyg.window.focus()}else this.wysiwyg_editor.selection&&(t.pasteHTML(e.innerHTML),t.collapse(!1),t.select())},overwriteSelection:function(e){var t=this.editors[this.currentEditorName];"BBCode"==t.name?t.replaceSelection(e):"Visual"==t.name&&t.replaceSelection(t.document.createTextNode(e))},focusOnSelected:function(){var t=this.editors[this.currentEditorName];t.window?t.window.focus():t.textarea.focus(),t.editable.focus(),e.browser.msie&&t.window&&(t.selection&&t.selection.addRange&&t.selection.addRange(t.range),t.range&&t.range.select&&t.range.select())}}),e.extend(e.ui.wysiwyg,{version:"1.8.5"})}(jQuery),function(e){e.extend(e.ui.wysiwyg.prototype,{_visualEditor:{name:"Visual",controls:{},controlGroups:[[["fontName","fontSize"],["foreColor","bold","italic","underline","strikethrough","superscript","subscript","removeFormat"]],[["justifyLeft","justifyCenter","justifyRight","justifyFull","insertTable","insertUnorderedList","insertHorizontalRule"],["createLink","createEmail","insertImage","insertVideo","insertUserLink","insertCode","insertQuote","insertSmiley","insertEmbed"]]],controlShortcuts:{"ctrl+b":"bold","ctrl+i":"italic","ctrl+u":"underline"},commands:{fontName:function(e,t,i,a){e.document.execCommand(t,!1,a)},foreColor:function(e,t,i,a){e.document.execCommand(t,!1,a)},fontSize:function(e,t,i,a){e.document.execCommand(t,!1,a)},removeFormat:function(e,t,i,a){e.document.execCommand(t,!1,null)},insertTable:function(t,i,a,n){t.getSelection(),t.getRange();this._insertTablePrompt(function(i){if(!(parseInt(i.rows,10)<=0||parseInt(i.cols)<=0)){var a=t.document.createElement("table");0!=i.cellspacing&&(a.style.borderCollapse="separate",a.style.borderSpacing=i.cellspacing+"px");for(var n=t.document.createElement("tbody"),o=0;o<i.rows;o++){for(var r=t.document.createElement("tr"),s=0;s<i.cols;s++){var l=t.document.createElement("td");l.innerHTML="Row "+(o+1)+" column "+(s+1),i.border&&(l.style.border="1px solid #000"),0!=i.cellpadding&&(l.style.padding=i.cellpadding+"px"),r.appendChild(l)}n.appendChild(r)}a.appendChild(n),t.replaceSelection(a),e(a).before("<br>").after("<br>"),"undefined"!=typeof t.range.selectNodeContents?(t.getRange(),t.range.selectNodeContents(a.getElementsByTagName("td")[0]),t.window.focus()):(t.getRange(),t.range.findText("Row 1 column 1"),t.range.select())}})},insertUnorderedList:function(e,t,i,a){var n=e.getSelection(),o=e.getRange(),r=document.createElement("li"),s="undefined"!=typeof e.range.collapsed?e.range.collapsed:!(e.range.boundingWidth>0);this._insertListPrompt(function(t){if(s)r.innerHTML="List item 1";else if(e.window.getSelection)r.appendChild(o.extractContents());else{var i=o.text;i=i.replace(/\n/g,"<br>"),r.innerHTML=i}if(0==t.count)return void(o.select?o.select():e.window.focus());var a;a="disc"==t.list_type||"circle"==t.list_type||"square"==t.list_type?e.document.createElement("ul"):e.document.createElement("ol"),a.style.listStyleType=t.list_type,a.appendChild(r);for(var l=1;l<t.count;++l){var d=e.document.createElement("li");d.innerHTML="List item "+(l+1),a.appendChild(d)}if(e.replaceSelection(a),e.window.getSelection){o.collapse(!1);var c=e.document.createElement("br");o.insertNode(c),o.setEndAfter(c),n.removeAllRanges(),n.addRange(o),n.collapseToEnd()}else o.pasteHTML("<br>"),o.select();"undefined"!=typeof e.range.selectNodeContents?(e.getRange(),e.range.selectNodeContents(a.getElementsByTagName("li")[0]),e.window.focus()):(e.getRange(),e.range.findText(r.nodeValue),e.range.select())})},createLink:function(e,t,i,a){e.range||(e.range=e.getRange());var n="undefined"!=typeof e.range.collapsed?e.range.collapsed:!(e.range.boundingWidth>0);this._createLinkPrompt(n,function(t){var i=e.document.createElement("a");i.setAttribute("href",t.href),"undefined"!=typeof t.text?(i.innerHTML=t.text,e.replaceSelection(i)):e.surroundSelection(i)})},createEmail:function(e,t,i,a){e.range||(e.range=e.getRange());var n="undefined"!=typeof e.range.collapsed?e.range.collapsed:!(e.range.boundingWidth>0);this._createEmailPrompt(n,function(t){var i=e.document.createElement("a");i.setAttribute("href","mailto:"+t.email),"undefined"!=typeof t.text?(i.innerHTML=t.text,e.replaceSelection(i)):e.surroundSelection(i)})},insertImage:function(t,i,a,n){this._insertImagePrompt(function(i){var a=e(t.window.document.createElement("img"));i.src.indexOf(":")==-1&&(i.src="http://"+i.src),a.attr("src",i.src),a.attr("alt",i.alt),proboards.data("display_large_images")||a.attr("style","max-width:100%;"),t.replaceSelection(a.get(0))})},insertVideo:function(e,t,i,a){this._insertVideoPrompt(function(t){var i=e.document.createElement("img");i.setAttribute("src",proboards.image_path()+"/bbcode/video-preview.png"),i.setAttribute("video",t.url.replace('"',"&quot;")),i.setAttribute("alt","Video Preview"),"default"==t.size||"small"!=t.size&&"medium"!=t.size&&"large"!=t.size||i.setAttribute("size",t.size),e.replaceSelection(i)})},insertEmbed:function(t,i,a,n){this._insertEmbedPrompt(t,e(a.item))},insertUserLink:function(e,t,i,a){var n=e.document.createTextNode("@"+a.username);e.replaceSelection(n)},insertCode:function(t,i,a,n){var o=t.document.createElement("code"),r=(t.getSelection(),t.getRange()),s="undefined"!=typeof t.range.collapsed?t.range.collapsed:!(t.range.boundingWidth>0);if(s)o.innerHTML="insert code here",e.browser.msie&&7==parseInt(e.browser.version)&&(o.innerHTML+="<br>");else if(t.window.getSelection){var l=r.extractContents();o.appendChild(l)}else{var d=r.text;d=d.replace(/\n/g,"<br>"),o.innerHTML=d}t.replaceSelection(o),e(o).before("<br>").after("<br>")},insertQuote:function(t,i,a,n){var o=t.document.createElement("div");o.setAttribute("class","quote_body");var r=(t.getSelection(),t.getRange()),s="undefined"!=typeof t.range.collapsed?t.range.collapsed:!(t.range.boundingWidth>0);if(s)o.innerHTML="insert quote here";else if(t.window.getSelection){var l=r.extractContents();o.appendChild(l)}else{var d=r.text;d=d.replace(/\n/g,"<br>"),o.innerHTML=d}var c=t.document.createElement("div");c.setAttribute("class","quote no_header"),c.appendChild(o),t.replaceSelection(c),e(c).before("<br>").after("<br>")},insertSmiley:function(t,i,a,n){var o="";if(parseInt(this.$nosmiles.val()))o=t.document.createTextNode(" "+n.symbol);else{var r=null;t.document.createRange?r=t.document.createTextNode(" "):(r=t.document.createElement("span"),r.setAttribute("class","remove-me")),t.replaceSelection(r),t.range.collapse(!1),t.getSelection(),o=t.document.createElement("img"),o.setAttribute("text",n.symbol),o.setAttribute("alt"," "+n.symbol),o.setAttribute("src",n.url)}t.replaceSelection(o),t.range.collapse(!1);var s=t.getSelection();s.collapseToEnd&&s.collapseToEnd(),t.document.createRange?(s.removeAllRanges(),s.addRange(t.range)):e(t.document).find(".remove-me").replaceWith(" ")},addAttachment:function(e,t,i,a){var n=e.document.createElement("span");n.setAttribute("class","attachment_preview"),n.setAttribute("attachment",a.id),a.thumbnail.indexOf("/uploader/no-preview.png")==-1&&a.thumbnail?(n.setAttribute("thumbnail",1),n.innerHTML='<img src="'+a.thumbnail+'" />'):n.innerHTML='<a href="#">'+a.filename+"</a> ("+a.size+")",e.replaceSelection(n)},removeAttachment:function(t,i,a,n){e('span[attachment="'+n.id+'"]',t.document).remove()},removeAttachments:function(t,i,a,n){e("span[attachment]",t.document).remove()}},build:function(t,i){var a=this,n='<!DOCTYPE HTML><html><head><meta http-equiv="content-type" content="text/html;charset=utf-8" />'+proboards.data("css_wysiwyg_style")+proboards.data("css_wysiwyg_non_editable")+"<title></title></head><body></body></html>",o=e("<iframe></iframe>").height(i.height()).appendTo(i);this.parent=t,this.container=i,this.iframe=o[0],this.window=this.iframe.contentWindow,this.document=this.window.document,this.document.designMode="On",this.document.open(),this.document.write(n),this.document.close(),this.resizable=this.iframe,this.editable=this.document.body,this.bindable=this.document,this.genericSelection=new proboards.genericSelection(a.window);var r=this.genericSelection;e(this.document).bind("mousedown.wysiwyg",function(t){e(document).trigger("mousedown",t)}),e(this.document).bind("blur.wysiwyg",function(){a.getRange()}),BlockFix.init({window:a.window,selector:this.parent.uneditableElements});var s=function(){var t,i=new proboards.genericSelection(a.window);e(i.startContainer()).closest("code").length>0||e(i.endContainer()).closest("code").length>0?t=a.document.createTextNode("\t"):(t=a.document.createElement("span"),t.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;");var n=a.getRange();n.insertNode(t),n.setStartAfter(t),n.setEndAfter(t)},l=navigator.userAgent.toLowerCase();l.indexOf("applewebkit")>-1?e(this.document).bind("keydown.wysiwyg",function(t){if(!t.ctrlKey||t.which!=Keys.b&&t.which!=Keys.i&&t.which!=Keys.u){if(13==t.which){if(!a.shiftADiv()&&a.window.getSelection){var i=a.getRange(),n=a.document.createElement("br"),o=a.document.createElement("br");if("LI"==i.endContainer.parentElement.nodeName||"LI"==i.endContainer.nodeName)return!0;var l=a.getSelection().focusOffset,d=i.endContainer.parentElement;d.normalize();var c=d.childNodes.length-1,u=i.endContainer,p=null;if(null!=u){var h=u.isEqualNode(d.childNodes[c]);p=u.nextSibling}i.deleteContents(),i.insertNode(n),i.setStartAfter(n),i.setEndAfter(n),null!=u&&i.collapse(!1);var f=a.getSelection().focusOffset;"Text"!=i.endContainer&&l>=f&&h&&null==p&&"HTML"!=d.nodeName&&(i.insertNode(o),i.setStartAfter(o),i.setEndAfter(o)),a.selection.removeAllRanges(),a.selection.addRange(i),a.selection.collapseToEnd&&a.selection.collapseToEnd()}return t.cancelBubble=!0,!1}9==t.which&&(s(),t.preventDefault(),t.stopPropagation())}else if(e(r.startContainer()).closest("code").length>0||e(r.endContainer()).closest("code").length>0)return t.stopImmediatePropagation(),!1}):l.indexOf("opera")>-1?e(this.document).bind("keypress.wysiwyg",function(e){if(13==e.which){if(a.shiftADiv())return e.preventDefault(),e.stopPropagation(),!1;var t=a.getRange(),i=a.document.createElement("br");if("LI"==t.endContainer.parentNode.nodeName||"LI"==t.endContainer.nodeName)return!0;t.deleteContents(),t.insertNode(i),t.setStartAfter(i),t.setEndAfter(i),a.selection.removeAllRanges(),a.selection.addRange(t),a.selection.collapseToEnd(),e.preventDefault(),e.stopPropagation()}else 9==e.which&&(s(),e.preventDefault(),e.stopPropagation())}):l.indexOf("msie")>-1?e(this.document).bind("keydown.wysiwyg",function(t){var i=new proboards.genericSelection(a.window);if(!t.ctrlKey||t.which!=Keys.b&&t.which!=Keys.i&&t.which!=Keys.u){if(13==t.which){var n=a.document.createElement("br");if(a.window.getSelection){if(a.shiftADiv())return t.cancelBubble=!0,!1;var o=a.getRange();if("LI"==o.endContainer.parentNode.nodeName||"LI"==o.endContainer.nodeName)return!0;o.deleteContents(),o.insertNode(n),o.setEndAfter(n),a.selection.addRange(o),a.selection.collapseToEnd&&a.selection.collapseToEnd()}else if(a.document.selection){if(a.shiftADiv())return t.cancelBubble=!0,!1;var o=a.getRange();if("LI"==o.parentElement().nodeName)return!0;o.pasteHTML(n.outerHTML),o.select()}return t.cancelBubble=!0,!1}if(9==t.which){if(a.window.getSelection)s();else if(a.document.selection){var o=a.getRange(),r=a.document.createElement("span");r.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;","CODE"==o.parentElement().nodeName?o.pasteHTML(r.innerHTML):o.pasteHTML(r.outerHTML),o.select()}return t.cancelBubble=!0,!1}}else if(e(i.startContainer()).closest("code").length>0||e(i.endContainer()).closest("code").length>0)return t.stopImmediatePropagation(),!1}):e(this.document).bind("keydown.wysiwyg",function(e){if(13==e.which){if(a.shiftADiv())return e.preventDefault(),e.stopPropagation(),!1}else 9==e.which&&(s(),e.preventDefault(),e.stopPropagation())}),e(this.document.body).on("paste.wyswiwyg",function(t){if(a.window.clipboardData)t.preventDefault(),a.replaceSelection(a.breakText(a.window.clipboardData.getData("Text"),a.document));else if(t.originalEvent.clipboardData)t.preventDefault(),a.replaceSelection(a.breakText(t.originalEvent.clipboardData.getData("text/plain"),a.document));else{var i=e("body",a.document),n=a.getSelection(),o=a.range||a.getRange(),r=e('<div style="visibility: hidden;"></div>');i.append(r);var s=a.document.createRange();s.selectNodeContents(r.get(0)),n.removeAllRanges(),n.addRange(s),setTimeout(function(){n.removeAllRanges(),n.addRange(o),a.replaceSelection(a.plainText(r.contents(),a.document)),r.remove()},0)}});var d;e(this.document).bind("keyup.wysiwyg mouseup.wysiwyg",function(e){var t=a.getRange();d&&(t.startContainer?t.startContainer===d.startContainer&&t.startOffset==d.startOffset&&t.endContainer===d.endContainer&&t.endOffset==d.endOffset||(a.parent.latestCommands={}):t.offsetLeft==d.offsetLeft&&t.offsetTop==d.offsetTop||(a.parent.latestCommands={})),d=t,a.updateControlStates()}),this.tableContextMenu=e('<ul><li><a><span>Row</span></a><ul><li id="insertRowBefore"><a><span class="icon"></span><span>Insert row before</span></a></li><li id="insertRowAfter"><a><span class="icon"></span><span>Insert row after</span></a></li><li id="deleteRow"><a><span class="icon"></span><span>Delete row</span></a></li></ul></li><li><a><span>Column</span></a><ul><li id="insertColumnBefore"><a><span class="icon"></span><span>Insert column before</span></a></li><li id="insertColumnAfter"><a><span class="icon"></span><span>Insert column after</span></a></li><li id="deleteColumn"><a><span class="icon"></span><span>Delete column</span></a></li></ul></li><li class="separator"></li><li id="deleteTable"><a><span class="icon"></span><span>Delete table</span></a></li></ul>').appendTo(document.body).hide().contextMenu(),
this.tableContextMenu.contextMenu("attach",{type:"delegate",parent:this.document.body,selector:"table",callback:function(t,i,n){if(i){var o=t.target,r=e(o).closest("table").find("td"),s="";if(r.length){s=r.attr("style");for(var l=1;l<r.length;++l)if(s!=r.eq(l).attr("style")){s="";break}""!=s&&(s=' style="'+s+'"')}if(i.match(/Row/)){for(;o&&"tr"!=o.nodeName.toLowerCase();)o=o.parentNode;if(!o)return}else if(i.match(/Column/)){for(;o&&"td"!=o.nodeName.toLowerCase();)o=o.parentNode;if(!o)return}if("insertRowBefore"==i){for(var d=e(o).children("td").length,c=e("<tr></tr>"),u=0;u<d;u++)c.append("<td"+s+"><br /></td>");e(o).before(c)}else if("insertRowAfter"==i){for(var d=e(o).children("td").length,c=e("<tr></tr>"),u=0;u<d;u++)c.append("<td"+s+"><br /></td>");e(o).after(c)}else if("deleteRow"==i){var p=e(o).siblings("tr").length;if(0==p)for(;o&&"table"!=o.nodeName.toLowerCase();)o=o.parentNode;e(o).remove()}else if("insertColumnBefore"==i){var h=e(o).index();e(o).parent().parent().find("tr").each(function(){e(e(this).children("td")[h]).before("<td"+s+"><br /></td>")})}else if("insertColumnAfter"==i){var h=e(o).index();e(o).parent().parent().find("tr").each(function(){e(e(this).children("td")[h]).after("<td"+s+"><br /></td>")})}else if("deleteColumn"==i){var f=e(o).siblings("td").length;if(0==f){for(;o&&"table"!=o.nodeName.toLowerCase();)o=o.parentNode;e(o).remove()}else{var h=e(o).index();e(o).parent().parent().find("tr").each(function(){e(e(this).children("td")[h]).remove()})}}else"deleteTable"==i&&(e(n).remove(),a.document.body.focus())}}})},getContent:function(){for(var t=this.document.getElementsByTagName("span"),i=0;i<t.length;i++){var a=t[i];if(null!=a.getAttribute("atuser")||"attachment_preview"==a.className){var n=e("a",a).first();n.length&&""==e.trim(n.html())&&n.remove(),""==e.trim(e(a).html())&&e(a).remove()}}return this.document.body.innerHTML},setContent:function(t){e("body",this.document).html(t)},beforeExecCommand:function(e){try{e.document.execCommand("styleWithCSS",!1,!1)}catch(t){try{e.document.execCommand("useCSS",!1,!1)}catch(t){}}try{}catch(t){}try{e.document.execCommand("enableObjectResizing",!0,!0)}catch(t){}},afterExecCommand:function(t){t.updateControlStates(),e("code",t.document).each(function(){e(this).html(t.plainText(e(this).contents(),t.document))})},replaceSelection:function(e){this.window.focus();var t=this.getSelection(),i=this.range||this.getRange();if(this.window.getSelection)i.deleteContents(),i.insertNode(e),"#document-fragment"!=e.nodeName.toLowerCase()&&(i.setStartAfter(e),i.setEndAfter(e)),t.removeAllRanges(),t.addRange(i),t.collapseToEnd();else if(this.document.selection){if("#text"==e.nodeName.toLowerCase())i.pasteHTML(e.nodeValue);else if("#document-fragment"==e.nodeName.toLowerCase()){for(var a="",n=0;n<e.childNodes.length;n++)a+="#text"==e.childNodes[n].nodeName.toLowerCase()?e.childNodes[n].nodeValue:e.childNodes[n].outerHTML;i.pasteHTML(a)}else{var a=e.outerHTML;"table"!=e.nodeName.toLowerCase()&&"code"!=e.nodeName.toLowerCase()&&"div"!=e.nodeName.toLowerCase()||(a="<br>"+e.outerHTML+"<br>"),i.pasteHTML(a)}i.collapse(!1),i.select()}},surroundSelection:function(e){var t=this.selection||this.getSelection();if(this.window.getSelection){var i=this.range||this.getRange(),a=i.extractContents();e.appendChild(a),i.insertNode(e),i.collapse(!0),i.setEndAfter(e),t.removeAllRanges(),t.addRange(i),t.collapseToEnd()}else if(this.document.selection){var i=this.range||this.getRange();e.innerHTML=i.text,i.pasteHTML(e.outerHTML),i.collapse(!1),i.select()}this.window.focus()},getSelectedText:function(){var t=this.range||this.getRange(),i="undefined"!=typeof t&&"undefined"!=typeof t.collapsed?t.collapsed:!(t.boundingWidth>0);return i?null:this.window.getSelection?e(t.cloneContents()).text():t.text},getSelection:function(){var e;return this.window.getSelection?e=this.window.getSelection():this.document.selection&&(e=this.document.selection),e&&(this.selection=e),this.selection},getRange:function(e){e||(e=this.getSelection());var t;return e.getRangeAt?0==e.rangeCount?(t=this.document.createRange(),t.setStart(this.document.body,0),t.setEnd(this.document.body,0),e.addRange(t)):t=e.getRangeAt(0):t=e.createRange(),t&&(this.range=t),this.range},updateControlStates:function(){e(".button.state-active",this.parent.controlsContainer).removeClass("state-active");var t=this.range?this.range:this.getRange();if("undefined"!=typeof t.commonAncestorContainer||"undefined"!=typeof t.parentElement){var i=t.commonAncestorContainer?t.commonAncestorContainer:t.parentElement();if(null!==i){this.parent._correctRange(t);for(var a="";i&&"body"!=i.nodeName.toLowerCase();){var n=i.nodeName.toLowerCase();if("undefined"!=typeof this.parent.tagCommandAlias[n])if("object"==typeof this.parent.tagCommandAlias[n]){var o={},r=i.attributes.length;for(l=0;l<r;++l)if(o[i.attributes[l].name]=i.attributes[l].value,"style"==i.attributes[l].name&&i.attributes[l].value.indexOf("text-align")!=-1){var s=i.attributes[l].value.substr(12);o.align=s.slice(0,s.length-1)}var l,d=this.parent.tagCommandAlias[n],r=d.length;e:for(l=0;l<r;++l)if("undefined"!=typeof d[l].attrs){var c=!0;t:for(var u in d[l].attrs){if("align"==u&&""!=a){c=!1;break t}if("undefined"==typeof d[l].attrs[u]||"undefined"==typeof o[u]||d[l].attrs[u]!=o[u]){c=!1;break t}}if(c){d[l].command.indexOf("justify")!=-1&&(a=d[l].command),e(".button-"+d[l].command,this.parent.controlsContainer).addClass("state-active");break e}}else e(".button-"+d[l].command,this.parent.controlsContainer).addClass("state-active")}else e(".button-"+this.parent.tagCommandAlias[n],this.parent.controlsContainer).addClass("state-active");i=i.parentNode}if("undefined"!=typeof this.parent.latestCommands)for(var u in this.parent.latestCommands)this.parent.latestCommands[u]?e(".button-"+u,this.parent.controlsContainer).addClass("state-active"):e(".button-"+u,this.parent.controlsContainer).removeClass("state-active");var l,p=["justifyLeft","justifyCenter","justifyRight","justifyFull"],r=p.length;if(""==a)for(var u in this.parent.latestCommands)this.parent.latestCommands[u]&&u.indexOf("justify")!=-1&&(a=u);for(l=0;l<r;++l)p[l]!=a&&("undefined"!=typeof this.parent.latestCommands&&delete this.parent.latestCommands[p[l]],e(".button-"+p[l],this.parent.controlsContainer).removeClass("state-active"))}}},plainText:function(t,i,a){var n=this,o=i.createDocumentFragment();return t.each(function(){return this!=a&&void(3==this.nodeType?o.appendChild(i.createTextNode(this.nodeValue)):e(this).is("br")?o.appendChild(i.createElement("br")):o.appendChild(n.plainText(e(this).contents(),i)))}),o},breakText:function(t,i){for(var a=t.split("\n"),n=i.createDocumentFragment(),o=0;o<a.length;o++){var r=a[o];(e.browser.msie||navigator.userAgent.indexOf("Trident")!=-1)&&(r=r.replace("\r",""),parseInt(e.browser.version)<9&&(r=r.replace("\t","&nbsp;&nbsp;&nbsp;&nbsp;"))),n.appendChild(i.createTextNode(r)),o<a.length-1&&n.appendChild(i.createElement("br"))}return n},nodesBetween:function(e,t){for(var i=[],a=e.nextSibling;a&&a!=t;)i.push(a),a=a.nextSibling;return i},log:function(e){this.parent.log(e)}}})}(jQuery),function(e){e.extend(e.ui.wysiwyg.prototype,{_bbcodeEditor:{name:"BBCode",controls:{},controlGroups:[[["fontName","fontSize"],["foreColor","bold","italic","underline","strikethrough","superscript","subscript"]],[["justifyLeft","justifyCenter","justifyRight","justifyFull","insertTable","insertUnorderedList","insertHorizontalRule"],["createLink","createEmail","insertImage","insertVideo","insertUserLink","insertCode","insertQuote","insertSmiley","insertEmbed"]]],controlShortcuts:{"ctrl+b":"bold","ctrl+i":"italic","ctrl+u":"underline"},commands:{fontName:function(e,t,i,a){e.surroundSelection("font",{face:a},!0)},foreColor:function(e,t,i,a){e.surroundSelection("font",{color:a},!0)},fontSize:function(e,t,i,a){e.surroundSelection("font",{size:a},!0)},bold:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},italic:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},underline:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},strikethrough:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},superscript:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},subscript:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},justifyLeft:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},justifyCenter:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},justifyRight:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},justifyFull:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0)},insertTable:function(e,t,i,a){var n=0,o=0;"undefined"!=typeof e.textarea.selectionStart&&(n=e.textarea.selectionStart,o=e.textarea.selectionEnd),this._insertTablePrompt(function(t){if(!(parseInt(t.rows,10)<=0||parseInt(t.cols)<=0)){var i;i=0!=t.cellspacing?'[table style="border-collapse: separate; border-spacing: '+t.cellspacing+'px;"][tbody]\n':"[table][tbody]\n";for(var a=0;a<t.rows;a++){i+="[tr]\n";for(var r=0;r<t.cols;r++){var s="";t.border&&(s+="border: 1px solid #000;"),0!=t.cellpadding&&(""!=s&&(s+=" "),s+="padding: "+t.cellpadding+"px;"),i+=""!=s?'[td style="'+s+'"]Row '+(a+1)+" column "+(r+1)+"[/td]\n":"[td]Row "+(a+1)+" column "+(r+1)+"[/td]\n"}i+="[/tr]\n"}i+="[/tbody][/table]\n",0!=o&&(e.textarea.selectionStart=n,e.textarea.selectionEnd=o),e.replaceSelection(i);var l="Row 1 column 1";"undefined"!=typeof e.textarea.selectionStart?(e.textarea.selectionStart=e.textarea.value.indexOf(l,e.textarea.selectionStart),e.textarea.selectionEnd=e.textarea.selectionStart+l.length,e.textarea.focus()):(e.range.findText(l),e.range.select())}})},insertUnorderedList:function(e,t,i,a){var n="List item 1",o=0,r=0;"undefined"!=typeof e.textarea.selectionStart?(o=e.textarea.selectionStart,r=e.textarea.selectionEnd,e.textarea.selectionStart!=e.textarea.selectionEnd&&(n=e.textarea.value.substring(e.textarea.selectionStart,e.textarea.selectionEnd))):e.selection&&(""!=e.selection.createRange().text?n=e.selection.createRange().text:e.getRange()),this._insertListPrompt(function(t){if(0==t.count)return void(e.selection?e.range.select():(e.textarea.selectionStart=e.textarea.selectionEnd,e.textarea.focus()));var i,a;a="disc"==t.list_type||"circle"==t.list_type||"square"==t.list_type?"ul":"ol";var i="\n["+a+' type="'+t.list_type+'"]\n';i+="[li]"+n+"[/li]\n";for(var s=1;s<t.count;++s)i+="[li]List item "+(s+1)+"[/li]\n";i+="[/"+a+"]",0!=r&&(e.textarea.selectionStart=o,e.textarea.selectionEnd=r),e.replaceSelection(i),"undefined"!=typeof e.textarea.selectionStart?(e.textarea.selectionStart=e.textarea.value.indexOf(n,e.textarea.selectionStart),e.textarea.selectionEnd=e.textarea.selectionStart+n.length,e.textarea.focus()):(e.range.findText(n),e.range.select())})},insertHorizontalRule:function(e,t,i,a){var n="[hr]";e.replaceSelection(n),"undefined"!=typeof e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())},createLink:function(e,t,i,a){var n=!0,o=0,r=0;"undefined"!=typeof e.textarea.selectionStart?(n=e.textarea.selectionStart==e.textarea.selectionEnd,o=e.textarea.selectionStart,r=e.textarea.selectionEnd):n=!e.range||!(e.range.boundingWidth>0),this._createLinkPrompt(n,function(t){if(0!=r&&(e.textarea.selectionStart=o,e.textarea.selectionEnd=r),"undefined"!=typeof t.text){var i='[a href="'+t.href+'"]'+t.text+"[/a]";e.replaceSelection(i)}else e.surroundSelection("a",{href:t.href}),"undefined"==typeof e.textarea.selectionStart&&(e.range.collapse(!1),e.range.move("character",4));"undefined"!=typeof e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())})},createEmail:function(e,t,i,a){var n=!0,o=0,r=0;"undefined"!=typeof e.textarea.selectionStart?(n=e.textarea.selectionStart==e.textarea.selectionEnd,o=e.textarea.selectionStart,r=e.textarea.selectionEnd):n=!e.range||!(e.range.boundingWidth>0),this._createEmailPrompt(n,function(t){if(0!=r&&(e.textarea.selectionStart=o,e.textarea.selectionEnd=r),"undefined"!=typeof t.text){var i='[a href="mailto:'+t.email+'"]'+t.text+"[/a]";e.replaceSelection(i)}else e.surroundSelection("a",{href:"mailto:"+t.email}),"undefined"==typeof e.textarea.selectionStart&&(e.range.collapse(!1),e.range.move("character",4));"undefined"!=typeof e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())})},insertImage:function(e,t,i,a){var n=0,o=0;"undefined"!=typeof e.textarea.selectionStart&&(n=e.textarea.selectionStart,o=e.textarea.selectionEnd),this._insertImagePrompt(function(t){0!=o&&(e.textarea.selectionStart=n,e.textarea.selectionEnd=o),t.src.indexOf(":")==-1&&(t.src="http://"+t.src),""==t.alt&&(t.alt=" ");var i='[img src="'+t.src+'" alt="'+t.alt+'"]';e.replaceSelection(i),"undefined"!=typeof e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())})},insertVideo:function(e,t,i,a){var n=0,o=0;"undefined"!=typeof e.textarea.selectionStart&&(n=e.textarea.selectionStart,o=e.textarea.selectionEnd),this._insertVideoPrompt(function(t){0!=o&&(e.textarea.selectionStart=n,e.textarea.selectionEnd=o);var i="";"default"==t.size||"small"!=t.size&&"medium"!=t.size&&"large"!=t.size||(i+=' size="'+t.size+'"');var a="[video"+i+"]"+t.url+"[/video]";e.replaceSelection(a),"undefined"!=typeof e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())})},insertUserLink:function(e,t,i,a){var n="@"+a.username;e.replaceSelection(n),"undefined"!=typeof e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())},insertCode:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0,"insert code here")},insertQuote:function(e,t,i,a){var n=this._getControl(t);e.surroundSelection(n.tag,n.attrs,!0,"insert quote here")},insertSmiley:function(e,t,i,a){var n=" "+a.symbol;e.replaceSelection(n),"undefined"!=typeof e.textarea.selectionStart?(e.textarea.selectionStart=e.textarea.selectionEnd,navigator.userAgent.toLowerCase().indexOf("msie")>-1&&e.range.collapse(!1)):(e.range.collapse(!1),e.range.select())},insertEmbed:function(t,i,a,n){this._insertEmbedPrompt(t,e(a.item))},addAttachment:function(e,t,i,a){var n="";n=a.thumbnail.indexOf("/uploader/no-preview.png")==-1&&a.thumbnail?'[attachment id="'+a.id+'" thumbnail="1"]':'[attachment id="'+a.id+'"]',e.replaceSelection(n),"undefined"!=typeof e.textarea.selectionStart?e.textarea.selectionStart=e.textarea.selectionEnd:(e.range.collapse(!1),e.range.select())},removeAttachment:function(e,t,i,a){this.setContent(this.getContent().replace(new RegExp('\\[attachment id="'+a.id+'".*?\\]',"g"),""))},removeAttachments:function(e,t,i,a){this.setContent(this.getContent().replace(new RegExp("\\[attachment.+?\\]","g"),""))}},build:function(t,i){var a=this;this.parent=t;var n=e('<textarea style="width: 100%; border: 0; padding: 0;"></textarea>').height(i.height()).appendTo(i);this.container=i,this.textarea=n[0],this.resizable=this.textarea,this.editable=this.textarea,this.bindable=this.textarea,e.browser.msie&&parseInt(e.browser.version)<10&&e(this.textarea).bind("keyup.wysiwyg mouseup.wysiwyg",function(){a.getRange()})},getContent:function(){return this.textarea.value},setContent:function(e){this.textarea.value=e},surroundSelection:function(e,t,i,a){"undefined"==typeof a&&(a="");var n,o;if(n="["+e,t)for(var r in t)n+=" "+r+'="'+t[r]+'"';if(n+="]",o="[/"+e+"]","undefined"!=typeof this.textarea.selectionStart){var s=(this.textarea.scrollTop,this.textarea.value.substr(0,this.textarea.selectionStart)),l=this.textarea.value.substr(this.textarea.selectionEnd,this.textarea.value.length-this.textarea.selectionEnd),d=this.textarea.value.substr(this.textarea.selectionStart,this.textarea.selectionEnd-this.textarea.selectionStart);""==d&&(d=a),this.textarea.value=s+n+d+o+l,this.textarea.focus(),i?(this.textarea.selectionStart=s.length+n.length,this.textarea.selectionEnd=this.textarea.selectionStart+d.length):(this.textarea.selectionStart=s.length,this.textarea.selectionEnd=this.textarea.selectionStart+n.length+d.length+o.length)}else{var c=this.range||this.getRange(),u=c.text;""==u&&(u=a),""==u&&(u=this.textarea.innerText,this.textarea.value=""),c.text=n+u+o,""!=u?(c.findText(u,u.length*-1),c.select()):(c.moveStart("character",o.length*-1),c.moveEnd("character",o.length*-1),c.select())}},replaceSelection:function(t){e(this.textarea).replaceSelection(t),e(this.textarea).focus()},getSelectedText:function(){this.textarea.focus();var e=this.getRange();return"w3c"==rangeType?this.textarea.selectionStart==this.textarea.selectionEnd?null:this.textarea.value.substr(this.textarea.selectionStart,this.textarea.selectionEnd-this.textarea.selectionStart):0==e.compareEndPoints("StartToEnd",e)?null:e.text},getSelection:function(){return"w3c"==rangeType?this.selection=window.getSelection():this.selection=document.selection,this.selection},getRange:function(e){if(e||(e=this.getSelection()),e){if("w3c"==rangeType){if(0==e.rangeCount){var t=document.createRange();t.setStart(document.body,0),t.setEnd(document.body,0),e.addRange(t)}this.range=e.getRangeAt(0)}else this.range=e.createRange();return this.range}},log:function(e){this.parent.log(e)}},html2bbcode:function(t,i){var a=this,n="";if(i||(i={}),"undefined"!=typeof this.html&&"undefined"!=typeof this.html[t])n=this.html[t],"function"==typeof i.success&&i.success.call(a,n),"function"==typeof i.complete&&i.complete.call(a);else{"undefined"==typeof this.html&&(this.html=new Array);var o={};e(".template-download").each(function(t){var i=e(this).find("input"),a=e(this).find(".preview img");o[i.val()]={id:i.val(),thumbnail_url:a.attr("src")}}),this.startLoading(),t=proboards.validateUnicode(t),proboards.ajax({url:proboards.route("filter_html2bbcode"),data:{html:t,attachments:JSON.stringify(o)},dataType:"json",success:function(e){n=e.bbcode,a.html[t]=e.bbcode,"function"==typeof i.success&&i.success.call(a,n)},error:function(){throw"function"==typeof i.error&&i.error.call(a),"There was an error while trying to load the BBCode editor."},complete:function(){a.stopLoading(),"function"==typeof i.complete&&i.complete.call(a)}})}return n},bbcode2html:function(t,i){var a=this,n="",o=parseInt(a.$nosmiles.val());if(i||(i={}),"undefined"!=typeof this.bbcode&&"undefined"!=typeof this.bbcode[t]&&"undefined"!=typeof this.bbcode[t][o])n=this.bbcode[t][o],"function"==typeof i.success&&i.success.call(a,n),"function"==typeof i.complete&&i.complete.call(a);else{"undefined"==typeof this.bbcode&&(this.bbcode={});var r={};e(".template-download").each(function(t){var i=e(this).find("input"),a=e(this).find(".preview img"),n=e(this).find(".name span"),o=e(this).find(".size");r[i.val()]={id:i.val(),thumbnail_url:a.attr("src"),file_name:e.trim(n.text()),file_size:e.trim(o.text())}}),this.startLoading(),t=proboards.validateUnicode(t),proboards.ajax({url:proboards.route("filter_bbcode2html"),data:{bbcode:t,nosmiles:o,attachments:JSON.stringify(r)},dataType:"json",success:function(e){n=e.html,"undefined"==typeof a.bbcode[t]&&(a.bbcode[t]={}),a.bbcode[t][o]=e.html,"function"==typeof i.success&&i.success.call(a,n)},error:function(){throw"function"==typeof i.error&&i.error.call(a),"There was an error while trying to load the Preview Editor."},complete:function(){a.stopLoading(),"function"==typeof i.complete&&i.complete.call(a)}})}return n},html2bbcode2html:function(e,t){var i=this,a="",n=parseInt(i.$nosmiles.val());return t||(t={}),"undefined"!=typeof this.bbcode&&"undefined"!=typeof this.bbcode[e]&&"undefined"!=typeof this.bbcode[e][n]?(a=this.bbcode[e][n],"function"==typeof t.success&&t.success.call(i,a)):("undefined"==typeof this.bbcode&&(this.bbcode={}),this.startLoading(),e=proboards.validateUnicode(e),proboards.ajax({url:proboards.route("filter_html2bbcode2html"),data:{html:e,nosmiles:n},dataType:"json",success:function(o){a=o.html,"undefined"==typeof i.bbcode[e]&&(i.bbcode[e]={}),i.bbcode[e][n]=o.html,"function"==typeof t.success&&t.success.call(i,a)},error:function(){throw"There was an error while trying to manipulate content."},complete:function(){i.stopLoading()}})),a}})}(jQuery),function(e){e.extend(e.ui.wysiwyg.prototype._visualEditor,{checkAtStart:function(){var e=this;if(window.getSelection){var t=e.getRange(),i=t.startContainer,a=e.getSelection();if("#text"==i.nodeName&&(i=i.parentNode),a.rangeCount){var n=a.getRangeAt(0),o=n.cloneRange();return o.selectNodeContents(i),o.setEnd(n.startContainer,n.startOffset),""==o.toString()}}else if(document.selection){var t=e.getRange(),i=t.parentElement(),n=t,o=n.duplicate();return o.moveToElementText(i),o.setEndPoint("EndToStart",n),""==o.text}return!1},shiftADiv:function(){var t=this,i=t.getRange(),a=t.document.createElement("br"),n=".quote, code";if(window.getSelection&&t.checkAtStart()){var o=i.commonAncestorContainer,r=e(o).parents(n);if(r.length)return r.eq(0).before(a),!0}else if(document.selection&&t.checkAtStart()){var o=i.parentElement(),r=e(o);if(e(o).is(n)||(r=e(o).parents(n)),r.length)return r.eq(0).before(a),!0}return!1}})}(jQuery);var BlockFix={init:function(e){$(e.window.document).bind("click mouseup"+($.browser.opera?" keypress":" keydown"),{window:e.window,selector:e.selector},BlockFix.handler)},keepClean:function(e){var t=e.data;e.which||e.keyCode,e.type;setTimeout(function(){var e=new proboards.genericSelection(t.window);if(!$(e.container()).is(t.selection.container)||e.offset()!=t.selection.offset){try{$(t.node).text().length||$(t.node).remove()}catch(i){}$(t.bind).unbind("keydown click mouseup",t.handler)}},10)},handler:function(e){var t=new proboards.genericSelection(e.data.window),i=$(t.startContainer()).closest(e.data.selector);if("click"==e.type&&t.collapsed()){if(i.length){var a=t.offset();0!=a&&a!=i.text().length&&(t.selectNode(i.get(0)),e.preventDefault())}}else if("mouseup"!=e.type||t.collapsed()){if("keydown"==e.type||"keypress"==e.type){var n=e.which||e.keyCode;$.browser.opera&&"keypress"==e.type&&e.which==e.keyCode&&n>=97&&n<=122&&(n-=32);var o=Keys.modifies_text(n);if(i.length&&o&&n!=Keys.del&&n!=Keys.backspace){t.collapsed()||t.remove();var r=t.offset()?"after":"before",s=document.createTextNode("_");if(i[r](s),"after"==r){var l=document.createTextNode("_");i[r](l);var d=function(){1==l.nodeValue.length?$(l).remove():l.nodeValue=l.nodeValue.substr(1),32===n&&t.move(1,"start",!0),$(this).unbind("keyup keydown",d)};$.browser.safari&&navigator.userAgent.toLowerCase().indexOf("chrome")==-1?$(this).bind("keyup keydown",d):setTimeout(d,1)}t.selectNode(s);var c=function(e){BlockFix.keepClean(e)};return void $(this).bind("keydown click mouseup",{node:s,handler:c,bind:this,window:e.data.window,selection:{offset:t.offset(),container:t.container()}},c)}var r="none";n==Keys.right||n==Keys.del?r="right":n!=Keys.left&&n!=Keys.backspace||(r="left");var u=n==Keys.backspace||n==Keys.del;if("none"==r||u&&!t.collapsed())i.length&&o&&i.remove();else{var p="left"==r?"start":"end",h=t.move("left"==r?-1:1,p,!1),f=t[p+"Container"](h),m=$(f).closest(e.data.selector);if(m.length){var s=document.createTextNode("");m["right"!=r||u?"before":"after"](s),t.selectNode(s),u&&m.remove();var c=function(e){BlockFix.keepClean(e)};return $(this).bind("keydown click mouseup",{node:s,handler:c,bind:this,window:e.data.window,selection:{offset:t.offset(),container:t.container()}},c),e.preventDefault(),!1}}}}else{var g=$(t.startContainer()).closest(e.data.selector),v=$(t.endContainer()).closest(e.data.selector);if(!g.length&&!v.length)return;e.preventDefault();var b;if(g.length&&(b=t.selectNode(g.get(0),"start")),v.length&&(b=t.selectNode(v.get(0),"end")),$.browser.opera)return void setTimeout(function(){b.apply()},1)}}};!function($){var forum_format_regex=/^[a-z0-9\-]+$/,email_format_regex=/^[A-Za-z0-9\_\-\.\+]+\@[A-Za-z0-9\-\_]+\.[A-Za-z0-9\-\.]+$/,date_format_regexp=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/,length_regexp=/^length\s+([^\s]+)\s+(.*)/;$.validate=function(type,value){function validate_length(e,t){return"=="==t.operator&&e.length==t.value||(">="==t.operator&&e.length>=t.value||(">"==t.operator&&e.length>t.value||("<="==t.operator&&e.length<=t.value||("<"==t.operator&&e.length<t.value||"!="==t.operator&&e.length!=t.value))))}function validate_forum_format(e,t){return!!forum_format_regex.test(e)}function validate_email_format(e,t){return!!email_format_regex.test(e)}function validate_date(e,t){function i(e,t,i){function a(e,t){function i(e){return e%400==0||e%100!=0&&e%4==0}var a=[31,28,31,30,31,30,31,31,30,31,30,31],n=a[t-1];return 2==t&&i(e)&&n++,n}if(t<1||t>12)return!1;var a=a(e,t);return!(i<1||i>a)}var a=date_format_regexp.exec(e);if(!i(a[1],a[2],a[3]))return!1}function validate_date_format(e,t){return!!date_format_regexp.test(e)}var options={};if(length_regexp.test(type)){var matches=length_regexp.exec(type);options.operator=matches[1],options.value=matches[2],type="length"}var func_name="validate_"+type;return"function"!=eval("typeof "+func_name)||eval(func_name+".call(this, value, options)")}}(jQuery),window.Modernizr=function(e,t,i){function a(e){_.cssText=e}function n(e,t){return a(w.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function r(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var a in e){var n=e[a];if(!r(n,"-")&&_[n]!==i)return"pfx"!=t||n}return!1}function l(e,t,a){for(var n in e){var r=t[e[n]];if(r!==i)return a===!1?e[n]:o(r,"function")?r.bind(a||t):r}return!1}function d(e,t,i){var a=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+k.join(a+" ")+a).split(" ");return o(t,"string")||o(t,"undefined")?s(n,t):(n=(e+" "+$.join(a+" ")+a).split(" "),l(n,t,i))}function c(){f.input=function(i){for(var a=0,n=i.length;a<n;a++)T[i[a]]=i[a]in y;return T.list&&(T.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),T}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(e){for(var a,n,o,r=0,s=e.length;r<s;r++)y.setAttribute("type",n=e[r]),a="text"!==y.type,a&&(y.value=A,y.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(n)&&y.style.WebkitAppearance!==i?(g.appendChild(y),o=t.defaultView,a=o.getComputedStyle&&"textfield"!==o.getComputedStyle(y,null).WebkitAppearance&&0!==y.offsetHeight,g.removeChild(y)):/^(search|tel)$/.test(n)||(a=/^(url|email)$/.test(n)?y.checkValidity&&y.checkValidity()===!1:y.value!=A)),S[e[r]]=!!a;return S}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u,p,h="2.6.1",f={},m=!0,g=t.documentElement,v="modernizr",b=t.createElement(v),_=b.style,y=t.createElement("input"),A=":)",w=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),x="Webkit Moz O ms",k=x.split(" "),$=x.toLowerCase().split(" "),C={},S={},T={},D=[],I=D.slice,E=function(e,i,a,n){var o,r,s,l=t.createElement("div"),d=t.body,c=d?d:t.createElement("body");if(parseInt(a,10))for(;a--;)s=t.createElement("div"),s.id=n?n[a]:v+(a+1),l.appendChild(s);return o=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),l.id=v,(d?l:c).innerHTML+=o,c.appendChild(l),d||(c.style.background="",g.appendChild(c)),r=i(l,e),d?l.parentNode.removeChild(l):c.parentNode.removeChild(c),!!r},P=function(t){var i=e.matchMedia||e.msMatchMedia;if(i)return i(t).matches;var a;return E("@media "+t+" { #"+v+" { position: absolute; } }",function(t){a="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),a},M=function(){function e(e,n){n=n||t.createElement(a[e]||"div"),e="on"+e;var r=e in n;return r||(n.setAttribute||(n=t.createElement("div")),n.setAttribute&&n.removeAttribute&&(n.setAttribute(e,""),r=o(n[e],"function"),o(n[e],"undefined")||(n[e]=i),n.removeAttribute(e))),n=null,r}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),O={}.hasOwnProperty;p=o(O,"undefined")||o(O.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return O.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=I.call(arguments,1),a=function(){if(this instanceof a){var n=function(){};n.prototype=t.prototype;var o=new n,r=t.apply(o,i.concat(I.call(arguments)));return Object(r)===r?r:o}return t.apply(e,i.concat(I.call(arguments)))};return a}),C.flexbox=function(){return d("flexWrap")},C.postmessage=function(){return!!e.postMessage},C.indexedDB=function(){return!!d("indexedDB",e)},C.hashchange=function(){return M("hashchange",e)&&(t.documentMode===i||t.documentMode>7)},C.history=function(){return!!e.history&&!!history.pushState},C.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},C.rgba=function(){return a("background-color:rgba(150,255,150,.5)"),r(_.backgroundColor,"rgba")},C.hsla=function(){return a("background-color:hsla(120,40%,100%,.5)"),r(_.backgroundColor,"rgba")||r(_.backgroundColor,"hsla")},C.multiplebgs=function(){return a("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(_.background)},C.backgroundsize=function(){return d("backgroundSize")},C.borderimage=function(){return d("borderImage")},C.borderradius=function(){return d("borderRadius")},C.boxshadow=function(){return d("boxShadow")},C.textshadow=function(){return""===t.createElement("div").style.textShadow},C.opacity=function(){return n("opacity:.55"),/^0.55$/.test(_.opacity)},C.cssanimations=function(){return d("animationName")},C.csscolumns=function(){return d("columnCount")},C.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return a((e+"-webkit- ".split(" ").join(t+e)+w.join(i+e)).slice(0,-e.length)),r(_.backgroundImage,"gradient")},C.cssreflections=function(){return d("boxReflect")},C.csstransforms=function(){return!!d("transform")},C.csstransforms3d=function(){var e=!!d("perspective");return e&&"webkitPerspective"in g.style&&E("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,i){e=9===t.offsetLeft&&3===t.offsetHeight}),e},C.csstransitions=function(){return d("transition")},C.fontface=function(){var e;return E('@font-face {font-family:"font";src:url("https://")}',function(i,a){var n=t.getElementById("smodernizr"),o=n.sheet||n.styleSheet,r=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(r)&&0===r.indexOf(a.split(" ")[0])}),e},C.generatedcontent=function(){var e;return E(['#modernizr:after{content:"',A,'";visibility:hidden}'].join(""),function(t){e=t.offsetHeight>=1}),e},C.video=function(){var e=t.createElement("video"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(a){}return i},C.audio=function(){var e=t.createElement("audio"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),i.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),i.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(a){}return i},C.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},C.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},C.applicationcache=function(){return!!e.applicationCache};for(var L in C)p(C,L)&&(u=L.toLowerCase(),
f[u]=C[L](),D.push((f[u]?"":"no-")+u));return f.input||c(),f.addTest=function(e,t){if("object"==typeof e)for(var a in e)p(e,a)&&f.addTest(a,e[a]);else{if(e=e.toLowerCase(),f[e]!==i)return f;t="function"==typeof t?t():t,m&&(g.className+=" "+(t?"":"no-")+e),f[e]=t}return f},a(""),b=y=null,function(e,t){function i(e,t){var i=e.createElement("p"),a=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",a.insertBefore(i.lastChild,a.firstChild)}function a(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function n(e){var t=g[e[f]];return t||(t={},m++,e[f]=m,g[m]=t),t}function o(e,i,a){if(i||(i=t),c)return i.createElement(e);a||(a=n(i));var o;return o=a.cache[e]?a.cache[e].cloneNode():h.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e),o.canHaveChildren&&!p.test(e)?a.frag.appendChild(o):o}function r(e,i){if(e||(e=t),c)return e.createDocumentFragment();i=i||n(e);for(var o=i.frag.cloneNode(),r=0,s=a(),l=s.length;r<l;r++)o.createElement(s[r]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return v.shivMethods?o(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function l(e){e||(e=t);var a=n(e);return v.shivCSS&&!d&&!a.hasCSS&&(a.hasCSS=!!i(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),c||s(e,a),e}var d,c,u=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,f="_html5shiv",m=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){d=!0,c=!0}}();var v={elements:u.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:u.shivCSS!==!1,supportsUnknownElements:c,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:r};e.html5=v,l(t)}(this,t),f._version=h,f._prefixes=w,f._domPrefixes=$,f._cssomPrefixes=k,f.mq=P,f.hasEvent=M,f.testProp=function(e){return s([e])},f.testAllProps=d,f.testStyles=E,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+D.join(" "):""),f}(this,this.document),function(e,t,i){function a(e){return"[object Function]"==g.call(e)}function n(e){return"string"==typeof e}function o(){}function r(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();b=1,e?e.t?f(function(){("c"==e.t?p.injectCss:p.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):b=0}function l(e,i,a,n,o,l,d){function c(t){if(!h&&r(u.readyState)&&(_.r=h=1,!b&&s(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&f(function(){A.removeChild(u)},50);for(var a in C[i])C[i].hasOwnProperty(a)&&C[i][a].onload()}}var d=d||p.errorTimeout,u=t.createElement(e),h=0,g=0,_={t:a,s:i,e:o,a:l,x:d};1===C[i]&&(g=1,C[i]=[]),"object"==e?u.data=i:(u.src=i,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){c.call(this,g)},v.splice(n,0,_),"img"!=e&&(g||2===C[i]?(A.insertBefore(u,y?null:m),f(c,d)):C[i].push(u))}function d(e,t,i,a,o){return b=0,t=t||"j",n(e)?l("c"==t?x:w,e,t,this.i++,i,a,o):(v.splice(this.i++,0,e),1==v.length&&s()),this}function c(){var e=p;return e.loader={load:d,i:0},e}var u,p,h=t.documentElement,f=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],b=0,_="MozAppearance"in h.style,y=_&&!!t.createRange().compareNode,A=y?h:m.parentNode,h=e.opera&&"[object Opera]"==g.call(e.opera),h=!!t.attachEvent&&!h,w=_?"object":h?"script":"img",x=h?"script":w,k=Array.isArray||function(e){return"[object Array]"==g.call(e)},$=[],C={},S={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};p=function(e){function t(e){var t,i,a,e=e.split("!"),n=$.length,o=e.pop(),r=e.length,o={url:o,origUrl:o,prefixes:e};for(i=0;i<r;i++)a=e[i].split("="),(t=S[a.shift()])&&(o=t(o,a));for(i=0;i<n;i++)o=$[i](o);return o}function r(e,n,o,r,s){var l=t(e),d=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(n&&(n=a(n)?n:n[e]||n[r]||n[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,n,o,r,s):(C[l.url]?l.noexec=!0:C[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":i,l.noexec,l.attrs,l.timeout),(a(n)||a(d))&&o.load(function(){c(),n&&n(l.origUrl,s,r),d&&d(l.origUrl,s,r),C[l.url]=2})))}function s(e,t){function i(e,i){if(e){if(n(e))i||(u=function(){var e=[].slice.call(arguments);p.apply(this,e),h()}),r(e,u,t,0,d);else if(Object(e)===e)for(l in s=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(),e)e.hasOwnProperty(l)&&(!i&&!--s&&(a(u)?u=function(){var e=[].slice.call(arguments);p.apply(this,e),h()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),h()}}(p[l])),r(e[l],u,t,l,d))}else!i&&h()}var s,l,d=!!e.test,c=e.load||e.both,u=e.callback||o,p=u,h=e.complete||o;i(d?e.yep:e.nope,!!c),c&&i(c)}var l,d,u=this.yepnope.loader;if(n(e))r(e,0,u,0);else if(k(e))for(l=0;l<e.length;l++)d=e[l],n(d)?r(d,0,u,0):k(d)?p(d):Object(d)===d&&s(d,u);else Object(e)===e&&s(e,u)},p.addPrefix=function(e,t){S[e]=t},p.addFilter=function(e){$.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,i,a,n,l,d){var c,u,h=t.createElement("script"),n=n||p.errorTimeout;h.src=e;for(u in a)h.setAttribute(u,a[u]);i=d?s:i||o,h.onreadystatechange=h.onload=function(){!c&&r(h.readyState)&&(c=1,i(),h.onload=h.onreadystatechange=null)},f(function(){c||(c=1,i(1))},n),l?h.onload():m.parentNode.insertBefore(h,m)},e.yepnope.injectCss=function(e,i,a,n,r,l){var d,n=t.createElement("link"),i=l?s:i||o;n.href=e,n.rel="stylesheet",n.type="text/css";for(d in a)n.setAttribute(d,a[d]);r||(m.parentNode.insertBefore(n,m),f(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e,t,i){"use strict";function a(){function a(e,t){this.scrollLeft=e,this.scrollTop=t}function n(e){return.5*(1-Math.cos(Math.PI*e))}function o(e){if("object"!=typeof e||null===e||e.behavior===i||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior not valid")}function r(i){var a,n,o;do i=i.parentNode,a=i===t.body,n=i.clientHeight<i.scrollHeight||i.clientWidth<i.scrollWidth,o="visible"===e.getComputedStyle(i,null).overflow;while(!a&&(!n||o));return a=n=o=null,i}function s(t){var i,a,o,r=p(),l=(r-t.startTime)/c;l=l>1?1:l,i=n(l),a=t.startX+(t.x-t.startX)*i,o=t.startY+(t.y-t.startY)*i,t.method.call(t.scrollable,a,o),a===t.x&&o===t.y||e.requestAnimationFrame(s.bind(e,t))}function l(i,n,o){var r,l,d,c,h=p();i===t.body?(r=e,l=e.scrollX||e.pageXOffset,d=e.scrollY||e.pageYOffset,c=u.scroll):(r=i,l=i.scrollLeft,d=i.scrollTop,c=a),s({scrollable:r,method:c,startTime:h,startX:l,startY:d,x:n,y:o})}if(!("scrollBehavior"in t.documentElement.style)){var d=e.HTMLElement||e.Element,c=468,u={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elScroll:d.prototype.scroll||a,scrollIntoView:d.prototype.scrollIntoView},p=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;e.scroll=e.scrollTo=function(){return o(arguments[0])?void u.scroll.call(e,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):void l.call(e,t.body,~~arguments[0].left,~~arguments[0].top)},e.scrollBy=function(){return o(arguments[0])?void u.scrollBy.call(e,arguments[0].left||arguments[0],arguments[0].top||arguments[1]):void l.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset))},d.prototype.scroll=d.prototype.scrollTo=function(){if(o(arguments[0]))return void u.elScroll.call(this,arguments[0].left||arguments[0],arguments[0].top||arguments[1]);var e=arguments[0].left,t=arguments[0].top;l.call(this,this,"number"==typeof e?e:this.scrollLeft,"number"==typeof t?t:this.scrollTop)},d.prototype.scrollBy=function(){var e=arguments[0];"object"==typeof e?this.scroll({left:e.left+this.scrollLeft,top:e.top+this.scrollTop,behavior:e.behavior}):this.scroll(this.scrollLeft+e,this.scrollTop+arguments[1])},d.prototype.scrollIntoView=function(){if(o(arguments[0]))return void u.scrollIntoView.call(this,arguments[0]===i||arguments[0]);var a=r(this),n=a.getBoundingClientRect(),s=this.getBoundingClientRect();a!==t.body?(l.call(this,a,a.scrollLeft+s.left-n.left,a.scrollTop+s.top-n.top),e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}}}"object"==typeof exports?module.exports={polyfill:a}:a()}(window,document),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(i,a){if(!(this instanceof e))return new e(i,a);this.options=a=a?Pn(a):{},Pn(Bo,a,!1),h(a);var n=a.value;"string"==typeof n&&(n=new gr(n,a.mode)),this.doc=n;var o=new e.inputStyles[a.inputStyle](this),r=this.display=new t(i,n,o);r.wrapper.CodeMirror=this,d(this),s(this),a.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),a.autofocus&&!wo&&r.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new kn,keySeq:null,specialChars:null};var l=this;po&&ho<11&&setTimeout(function(){l.display.input.reset(!0)},20),zt(this),Wn(),vt(this),this.curOp.forceUpdate=!0,Wa(this,n),a.autofocus&&!wo||l.hasFocus()?setTimeout(Mn(ui,this),20):pi(this);for(var c in Yo)Yo.hasOwnProperty(c)&&Yo[c](this,a[c],Ko);w(this),a.finishInit&&a.finishInit(this);for(var u=0;u<Qo.length;++u)Qo[u](this);_t(this),fo&&a.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}function t(e,t,i){var a=this;this.input=i,a.scrollbarFiller=jn("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=jn("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=jn("div",null,"CodeMirror-code"),a.selectionDiv=jn("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=jn("div",null,"CodeMirror-cursors"),a.measure=jn("div",null,"CodeMirror-measure"),a.lineMeasure=jn("div",null,"CodeMirror-measure"),a.lineSpace=jn("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none"),a.mover=jn("div",[jn("div",[a.lineSpace],"CodeMirror-lines")],null,"position: relative"),a.sizer=jn("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=jn("div",null,null,"position: absolute; height: "+Cr+"px; width: 1px;"),a.gutters=jn("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=jn("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=jn("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),po&&ho<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),fo||lo&&wo||(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=t.first,a.reportedViewFrom=a.reportedViewTo=t.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,i.init(a)}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),a(t)}function a(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Ne(e,100),e.state.modeGen++,e.curOp&&Pt(e)}function n(e){e.options.lineWrapping?(Hr(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(qr(e.display.wrapper,"CodeMirror-wrap"),p(e)),r(e),Pt(e),nt(e),setTimeout(function(){b(e)},100)}function o(e){var t=mt(e.display),i=e.options.lineWrapping,a=i&&Math.max(5,e.display.scroller.clientWidth/gt(e.display)-3);return function(n){if(ga(e.doc,n))return 0;var o=0;if(n.widgets)for(var r=0;r<n.widgets.length;r++)n.widgets[r].height&&(o+=n.widgets[r].height);return i?o+(Math.ceil(n.text.length/a)||1)*t:o+t}}function r(e){var t=e.doc,i=o(e);t.iter(function(e){var t=i(e);t!=e.height&&Ka(e,t)})}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),nt(e)}function l(e){d(e),Pt(e),setTimeout(function(){A(e)},20)}function d(e){var t=e.display.gutters,i=e.options.gutters;Rn(t);for(var a=0;a<i.length;++a){var n=i[a],o=t.appendChild(jn("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=a?"":"none",c(e)}function c(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function u(e){if(0==e.height)return 0;for(var t,i=e.text.length,a=e;t=da(a);){var n=t.find(0,!0);a=n.from.line,i+=n.from.ch-n.to.ch}for(a=e;t=ca(a);){var n=t.find(0,!0);i-=a.text.length-n.from.ch,a=n.to.line,i+=a.text.length-n.to.ch}return i}function p(e){var t=e.display,i=e.doc;t.maxLine=Ua(i,i.first),t.maxLineLength=u(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=u(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function h(e){var t=Tn(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function f(e){var t=e.display,i=t.gutters.offsetWidth,a=Math.round(e.doc.height+qe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:a,scrollHeight:a+Ve(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function m(e,t,i){this.cm=i;var a=this.vert=jn("div",[jn("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=jn("div",[jn("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(a),e(n),wr(a,"scroll",function(){a.clientHeight&&t(a.scrollTop,"vertical")}),wr(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedOverlay=!1,po&&ho<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&qr(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),wr(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,i){"horizontal"==i?Zt(t,e):Qt(t,e)},t),t.display.scrollbars.addClass&&Hr(t.display.wrapper,t.display.scrollbars.addClass)}function b(e,t){t||(t=f(e));var i=e.display.barWidth,a=e.display.barHeight;_(e,t);for(var n=0;n<4&&i!=e.display.barWidth||a!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&E(e),_(e,f(e)),i=e.display.barWidth,a=e.display.barHeight}function _(e,t){var i=e.display,a=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=a.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=a.bottom)+"px",a.right&&a.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=a.bottom+"px",i.scrollbarFiller.style.width=a.right+"px"):i.scrollbarFiller.style.display="",a.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=a.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}function y(e,t,i){var a=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;a=Math.floor(a-Fe(e));var n=i&&null!=i.bottom?i.bottom:a+e.wrapper.clientHeight,o=Ga(t,a),r=Ga(t,n);if(i&&i.ensure){var s=i.ensure.from.line,l=i.ensure.to.line;s<o?(o=s,r=Ga(t,Xa(Ua(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=r&&(o=Ga(t,Xa(Ua(t,l))-e.wrapper.clientHeight),r=l)}return{from:o,to:Math.max(r,o+1)}}function A(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var a=k(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,o=a+"px",r=0;r<i.length;r++)if(!i[r].hidden){e.options.fixedGutter&&i[r].gutter&&(i[r].gutter.style.left=o);var s=i[r].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=a+n+"px")}}function w(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=x(e.options,t.first+t.size-1),a=e.display;if(i.length!=a.lineNumChars){var n=a.measure.appendChild(jn("div",[jn("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=n.firstChild.offsetWidth,r=n.offsetWidth-o;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(o,a.lineGutter.offsetWidth-r)+1,a.lineNumWidth=a.lineNumInnerWidth+r,a.lineNumChars=a.lineNumInnerWidth?i.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",c(e),!0}return!1}function x(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function k(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function $(e,t,i){var a=e.display;this.viewport=t,this.visible=y(a,e.doc,t),this.editorIsHidden=!a.wrapper.offsetWidth,this.wrapperHeight=a.wrapper.clientHeight,this.wrapperWidth=a.wrapper.clientWidth,this.oldDisplayWidth=We(e),this.force=i,this.dims=M(e),this.events=[]}function C(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ve(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ve(e)+"px",t.scrollbarsClipped=!0)}function S(e,t){var i=e.display,a=e.doc;if(t.editorIsHidden)return Ot(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Rt(e))return!1;w(e)&&(Ot(e),t.dims=M(e));var n=a.first+a.size,o=Math.max(t.visible.from-e.options.viewportMargin,a.first),r=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(a.first,i.viewFrom)),i.viewTo>r&&i.viewTo-r<20&&(r=Math.min(n,i.viewTo)),Do&&(o=fa(e.doc,o),r=ma(e.doc,r));var s=o!=i.viewFrom||r!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;jt(e,o,r),i.viewOffset=Xa(Ua(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var l=Rt(e);if(!s&&0==l&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var d=Fn();return l>4&&(i.lineDiv.style.display="none"),O(e,i.updateLineNumbers,t.dims),l>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,d&&Fn()!=d&&d.offsetHeight&&d.focus(),Rn(i.cursorDiv),Rn(i.selectionDiv),i.gutters.style.height=0,s&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Ne(e,400)),i.updateLineNumbers=null,!0}function T(e,t){for(var i=t.force,a=t.viewport,n=!0;;n=!1){if(n&&e.options.lineWrapping&&t.oldDisplayWidth!=We(e))i=!0;else if(i=!1,a&&null!=a.top&&(a={top:Math.min(e.doc.height+qe(e.display)-Ue(e),a.top)}),t.visible=y(e.display,e.doc,a),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!S(e,t))break;E(e);var o=f(e);Ee(e),I(e,o),b(e,o)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function D(e,t){var i=new $(e,t);if(S(e,i)){E(e),T(e,i);var a=f(e);Ee(e),I(e,a),b(e,a),i.finish()}}function I(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var i=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=i+"px",e.display.gutters.style.height=Math.max(i+Ve(e),t.clientHeight)+"px"}function E(e){for(var t=e.display,i=t.lineDiv.offsetTop,a=0;a<t.view.length;a++){var n,o=t.view[a];if(!o.hidden){if(po&&ho<8){var r=o.node.offsetTop+o.node.offsetHeight;n=r-i,i=r}else{var s=o.node.getBoundingClientRect();n=s.bottom-s.top}var l=o.line.height-n;if(n<2&&(n=mt(t)),(l>.001||l<-.001)&&(Ka(o.line,n),P(o.line),o.rest))for(var d=0;d<o.rest.length;d++)P(o.rest[d])}}}function P(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function M(e){for(var t=e.display,i={},a={},n=t.gutters.clientLeft,o=t.gutters.firstChild,r=0;o;o=o.nextSibling,++r)i[e.options.gutters[r]]=o.offsetLeft+o.clientLeft+n,a[e.options.gutters[r]]=o.clientWidth;return{fixedPos:k(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:a,wrapperWidth:t.wrapper.clientWidth}}function O(e,t,i){function a(t){var i=t.nextSibling;return fo&&xo&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var n=e.display,o=e.options.lineNumbers,r=n.lineDiv,s=r.firstChild,l=n.view,d=n.viewFrom,c=0;c<l.length;c++){var u=l[c];if(u.hidden);else if(u.node&&u.node.parentNode==r){for(;s!=u.node;)s=a(s);var p=o&&null!=t&&t<=d&&u.lineNumber;u.changes&&(Tn(u.changes,"gutter")>-1&&(p=!1),L(e,u,d,i)),p&&(Rn(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(x(e.options,d)))),s=u.node.nextSibling}else{var h=V(e,u,d,i);r.insertBefore(h,s)}d+=u.size}for(;s;)s=a(s)}function L(e,t,i,a){for(var n=0;n<t.changes.length;n++){var o=t.changes[n];"text"==o?z(e,t):"gutter"==o?q(e,t,i,a):"class"==o?F(t):"widget"==o&&H(e,t,a)}t.changes=null}function N(e){return e.node==e.text&&(e.node=jn("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),po&&ho<8&&(e.node.style.zIndex=2)),e.node}function j(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=N(e);e.background=i.insertBefore(jn("div",null,t),i.firstChild)}}function R(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Pa(e,t)}function z(e,t){var i=t.text.className,a=R(e,t);t.text==t.node&&(t.node=a.pre),t.text.parentNode.replaceChild(a.pre,t.text),t.text=a.pre,a.bgClass!=t.bgClass||a.textClass!=t.textClass?(t.bgClass=a.bgClass,t.textClass=a.textClass,F(t)):i&&(t.text.className=i)}function F(e){j(e),e.line.wrapClass?N(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function q(e,t,i,a){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var n=t.line.gutterMarkers;if(e.options.lineNumbers||n){var o=N(t),r=t.gutter=jn("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px; width: "+a.gutterTotalWidth+"px");if(e.display.input.setUneditable(r),o.insertBefore(r,t.text),t.line.gutterClass&&(r.className+=" "+t.line.gutterClass),!e.options.lineNumbers||n&&n["CodeMirror-linenumbers"]||(t.lineNumber=r.appendChild(jn("div",x(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),n)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],d=n.hasOwnProperty(l)&&n[l];d&&r.appendChild(jn("div",[d],"CodeMirror-gutter-elt","left: "+a.gutterLeft[l]+"px; width: "+a.gutterWidth[l]+"px"))}}}function H(e,t,i){t.alignable&&(t.alignable=null);for(var a,n=t.node.firstChild;n;n=a){var a=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}W(e,t,i)}function V(e,t,i,a){var n=R(e,t);return t.text=t.node=n.pre,n.bgClass&&(t.bgClass=n.bgClass),n.textClass&&(t.textClass=n.textClass),F(t),q(e,t,i,a),W(e,t,a),t.node}function W(e,t,i){if(U(e,t.line,t,i,!0),t.rest)for(var a=0;a<t.rest.length;a++)U(e,t.rest[a],t,i,!1)}function U(e,t,i,a,n){if(t.widgets)for(var o=N(i),r=0,s=t.widgets;r<s.length;++r){var l=s[r],d=jn("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||d.setAttribute("cm-ignore-events","true"),B(l,d,i,a),e.display.input.setUneditable(d),n&&l.above?o.insertBefore(d,i.gutter||i.text):o.appendChild(d),bn(l,"redraw")}}function B(e,t,i,a){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=a.wrapperWidth;t.style.left=a.fixedPos+"px",e.coverGutter||(n-=a.gutterTotalWidth,t.style.paddingLeft=a.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-a.gutterTotalWidth+"px"))}function Y(e){return Io(e.line,e.ch)}function K(e,t){return Eo(e,t)<0?t:e}function J(e,t){return Eo(e,t)<0?e:t}function G(e){e.state.focused||(e.display.input.focus(),ui(e))}function X(e){return e.options.readOnly||e.doc.cantEdit}function Q(e,t,i,a){var n=e.doc;e.display.shift=!1,a||(a=n.sel);var o=Ur(t),r=null;e.state.pasteIncoming&&a.ranges.length>1&&(Po&&Po.join("\n")==t?r=a.ranges.length%Po.length==0&&Dn(Po,Ur):o.length==a.ranges.length&&(r=Dn(o,function(e){return[e]})));for(var s=a.ranges.length-1;s>=0;s--){var l=a.ranges[s],d=l.from(),c=l.to();l.empty()&&(i&&i>0?d=Io(d.line,d.ch-i):e.state.overwrite&&!e.state.pasteIncoming&&(c=Io(c.line,Math.min(Ua(n,c.line).text.length,c.ch+Sn(o).length))));var u=e.curOp.updateInput,p={from:d,to:c,text:r?r[s%r.length]:o,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(yi(e.doc,p),bn(e,"inputRead",e,p),t&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&l.head.ch<100&&(!s||a.ranges[s-1].head.line!=l.head.line)){var h=e.getModeAt(l.head),f=Uo(p);if(h.electricChars){for(var m=0;m<h.electricChars.length;m++)if(t.indexOf(h.electricChars.charAt(m))>-1){Oi(e,f.line,"smart");break}}else h.electricInput&&h.electricInput.test(Ua(n,f.line).text.slice(0,f.ch))&&Oi(e,f.line,"smart")}}Pi(e),e.curOp.updateInput=u,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Z(e){for(var t=[],i=[],a=0;a<e.doc.sel.ranges.length;a++){var n=e.doc.sel.ranges[a].head.line,o={anchor:Io(n,0),head:Io(n+1,0)};i.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:i}}function ee(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function te(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new kn,this.inaccurateSelection=!1,this.hasSelection=!1}function ie(){var e=jn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=jn("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return fo?e.style.width="1000px":e.setAttribute("wrap","off"),Ao&&(e.style.border="1px solid black"),ee(e),t}function ae(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new kn,this.gracePeriod=!1}function ne(e,t){var i=Ge(e,t.line);if(!i||i.hidden)return null;var a=Ua(e.doc,t.line),n=Ye(i,a,t.line),o=Qa(a),r="left";if(o){var s=no(o,t.ch);r=s%2?"right":"left"}var l=Ze(n.map,t.ch,"left");return l.offset="right"==l.collapse?l.end:l.start,l}function oe(e,t){return t&&(e.bad=!0),e}function re(e,t,i){var a;if(t==e.display.lineDiv){if(a=e.display.lineDiv.childNodes[i],!a)return oe(e.clipPos(Io(e.display.viewTo-1)),!0);t=null,i=0}else for(a=t;;a=a.parentNode){if(!a||a==e.display.lineDiv)return null;if(a.parentNode&&a.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var o=e.display.view[n];if(o.node==a)return se(o,t,i)}}function se(e,t,i){function a(t,i,a){for(var n=-1;n<(c?c.length:0);n++)for(var o=n<0?d.map:c[n],r=0;r<o.length;r+=3){var s=o[r+2];if(s==t||s==i){var l=Ja(n<0?e.line:e.rest[n]),u=o[r]+a;return(a<0||s!=t)&&(u=o[r+(a?1:0)]),Io(l,u)}}}var n=e.text.firstChild,o=!1;if(!t||!Rr(n,t))return oe(Io(Ja(e.line),0),!0);if(t==n&&(o=!0,t=n.childNodes[i],i=0,!t)){var r=e.rest?Sn(e.rest):e.line;return oe(Io(Ja(r),r.text.length),o)}var s=3==t.nodeType?t:null,l=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,i&&(i=s.nodeValue.length));l.parentNode!=n;)l=l.parentNode;var d=e.measure,c=d.maps,u=a(s,l,i);if(u)return oe(u,o);for(var p=l.nextSibling,h=s?s.nodeValue.length-i:0;p;p=p.nextSibling){if(u=a(p,p.firstChild,0))return oe(Io(u.line,u.ch-h),o);h+=p.textContent.length}for(var f=l.previousSibling,h=i;f;f=f.previousSibling){if(u=a(f,f.firstChild,-1))return oe(Io(u.line,u.ch+h),o);h+=p.textContent.length}}function le(e,t,i,a,n){function o(e){return function(t){return t.id==e}}function r(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(null!=i)return""==i&&(i=t.textContent.replace(/\u200b/g,"")),void(s+=i);var d,c=t.getAttribute("cm-marker");if(c){var u=e.findMarks(Io(a,0),Io(n+1,0),o(+c));return void(u.length&&(d=u[0].find())&&(s+=Ba(e.doc,d.from,d.to).join("\n")))}if("false"==t.getAttribute("contenteditable"))return;for(var p=0;p<t.childNodes.length;p++)r(t.childNodes[p]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var h=t.nodeValue;if(!h)return;l&&(s+="\n",l=!1),s+=h}}for(var s="",l=!1;r(t),t!=i;)t=t.nextSibling;return s}function de(e,t){this.ranges=e,this.primIndex=t}function ce(e,t){this.anchor=e,this.head=t}function ue(e,t){var i=e[t];e.sort(function(e,t){return Eo(e.from(),t.from())}),t=Tn(e,i);for(var a=1;a<e.length;a++){var n=e[a],o=e[a-1];if(Eo(o.to(),n.from())>=0){var r=J(o.from(),n.from()),s=K(o.to(),n.to()),l=o.empty()?n.from()==n.head:o.from()==o.head;a<=t&&--t,e.splice(--a,2,new ce(l?s:r,l?r:s))}}return new de(e,t)}function pe(e,t){return new de([new ce(e,t||e)],0)}function he(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function fe(e,t){if(t.line<e.first)return Io(e.first,0);var i=e.first+e.size-1;return t.line>i?Io(i,Ua(e,i).text.length):me(t,Ua(e,t.line).text.length)}function me(e,t){var i=e.ch;return null==i||i>t?Io(e.line,t):i<0?Io(e.line,0):e}function ge(e,t){return t>=e.first&&t<e.first+e.size}function ve(e,t){for(var i=[],a=0;a<t.length;a++)i[a]=fe(e,t[a]);return i}function be(e,t,i,a){if(e.cm&&e.cm.display.shift||e.extend){var n=t.anchor;if(a){var o=Eo(i,n)<0;o!=Eo(a,n)<0?(n=i,i=a):o!=Eo(i,a)<0&&(i=a)}return new ce(n,i)}return new ce(a||i,i)}function _e(e,t,i,a){$e(e,new de([be(e,e.sel.primary(),t,i)],0),a)}function ye(e,t,i){for(var a=[],n=0;n<e.sel.ranges.length;n++)a[n]=be(e,e.sel.ranges[n],t[n],null);var o=ue(a,e.sel.primIndex);$e(e,o,i)}function Ae(e,t,i,a){var n=e.sel.ranges.slice(0);n[t]=i,$e(e,ue(n,e.sel.primIndex),a)}function we(e,t,i,a){$e(e,pe(t,i),a)}function xe(e,t){var i={ranges:t.ranges,update:function(t){this.ranges=[];
for(var i=0;i<t.length;i++)this.ranges[i]=new ce(fe(e,t[i].anchor),fe(e,t[i].head))}};return kr(e,"beforeSelectionChange",e,i),e.cm&&kr(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?ue(i.ranges,i.ranges.length-1):t}function ke(e,t,i){var a=e.history.done,n=Sn(a);n&&n.ranges?(a[a.length-1]=t,Ce(e,t,i)):$e(e,t,i)}function $e(e,t,i){Ce(e,t,i),rn(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Ce(e,t,i){(wn(e,"beforeSelectionChange")||e.cm&&wn(e.cm,"beforeSelectionChange"))&&(t=xe(e,t));var a=i&&i.bias||(Eo(t.primary().head,e.sel.primary().head)<0?-1:1);Se(e,De(e,t,a,!0)),i&&i.scroll===!1||!e.cm||Pi(e.cm)}function Se(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,An(e.cm)),bn(e,"cursorActivity",e))}function Te(e){Se(e,De(e,e.sel,null,!1),Tr)}function De(e,t,i,a){for(var n,o=0;o<t.ranges.length;o++){var r=t.ranges[o],s=Ie(e,r.anchor,i,a),l=Ie(e,r.head,i,a);(n||s!=r.anchor||l!=r.head)&&(n||(n=t.ranges.slice(0,o)),n[o]=new ce(s,l))}return n?ue(n,t.primIndex):t}function Ie(e,t,i,a){var n=!1,o=t,r=i||1;e.cantEdit=!1;e:for(;;){var s=Ua(e,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var d=s.markedSpans[l],c=d.marker;if((null==d.from||(c.inclusiveLeft?d.from<=o.ch:d.from<o.ch))&&(null==d.to||(c.inclusiveRight?d.to>=o.ch:d.to>o.ch))){if(a&&(kr(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!c.atomic)continue;var u=c.find(r<0?-1:1);if(0==Eo(u,o)&&(u.ch+=r,u.ch<0?u=u.line>e.first?fe(e,Io(u.line-1)):null:u.ch>s.text.length&&(u=u.line<e.first+e.size-1?Io(u.line+1,0):null),!u)){if(n)return a?(e.cantEdit=!0,Io(e.first,0)):Ie(e,t,i,!0);n=!0,u=t,r=-r}o=u;continue e}}return o}}function Ee(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Pe(e,t){for(var i=e.doc,a={},n=a.cursors=document.createDocumentFragment(),o=a.selection=document.createDocumentFragment(),r=0;r<i.sel.ranges.length;r++)if(t!==!1||r!=i.sel.primIndex){var s=i.sel.ranges[r],l=s.empty();(l||e.options.showCursorWhenSelecting)&&Me(e,s,n),l||Oe(e,s,o)}return a}function Me(e,t,i){var a=ct(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(jn("div","\xa0","CodeMirror-cursor"));if(n.style.left=a.left+"px",n.style.top=a.top+"px",n.style.height=Math.max(0,a.bottom-a.top)*e.options.cursorHeight+"px",a.other){var o=i.appendChild(jn("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=a.other.left+"px",o.style.top=a.other.top+"px",o.style.height=.85*(a.other.bottom-a.other.top)+"px"}}function Oe(e,t,i){function a(e,t,i,a){t<0&&(t=0),t=Math.round(t),a=Math.round(a),s.appendChild(jn("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?c-e:i)+"px; height: "+(a-t)+"px"))}function n(t,i,n){function o(i,a){return dt(e,Io(t,i),"div",u,a)}var s,l,u=Ua(r,t),p=u.text.length;return Jn(Qa(u),i||0,null==n?p:n,function(e,t,r){var u,h,f,m=o(e,"left");if(e==t)u=m,h=f=m.left;else{if(u=o(t-1,"right"),"rtl"==r){var g=m;m=u,u=g}h=m.left,f=u.right}null==i&&0==e&&(h=d),u.top-m.top>3&&(a(h,m.top,null,m.bottom),h=d,m.bottom<u.top&&a(h,m.bottom,null,u.top)),null==n&&t==p&&(f=c),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!l||u.bottom>l.bottom||u.bottom==l.bottom&&u.right>l.right)&&(l=u),h<d+1&&(h=d),a(h,u.top,f-h,u.bottom)}),{start:s,end:l}}var o=e.display,r=e.doc,s=document.createDocumentFragment(),l=He(e.display),d=l.left,c=Math.max(o.sizerWidth,We(e)-o.sizer.offsetLeft)-l.right,u=t.from(),p=t.to();if(u.line==p.line)n(u.line,u.ch,p.ch);else{var h=Ua(r,u.line),f=Ua(r,p.line),m=pa(h)==pa(f),g=n(u.line,u.ch,m?h.text.length+1:null).end,v=n(p.line,m?0:null,p.ch).start;m&&(g.top<v.top-2?(a(g.right,g.top,null,g.bottom),a(d,v.top,v.left,v.bottom)):a(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&a(d,g.bottom,null,v.top)}i.appendChild(s)}function Le(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ne(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Mn(je,e))}function je(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,a=er(t.mode,ze(e,t.frontier)),n=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var r=o.styles,s=Ta(e,o,a,!0);o.styles=s.styles;var l=o.styleClasses,d=s.classes;d?o.styleClasses=d:l&&(o.styleClasses=null);for(var c=!r||r.length!=o.styles.length||l!=d&&(!l||!d||l.bgClass!=d.bgClass||l.textClass!=d.textClass),u=0;!c&&u<r.length;++u)c=r[u]!=o.styles[u];c&&n.push(t.frontier),o.stateAfter=er(t.mode,a)}else Ia(e,o.text,a),o.stateAfter=t.frontier%5==0?er(t.mode,a):null;if(++t.frontier,+new Date>i)return Ne(e,e.options.workDelay),!0}),n.length&&Ct(e,function(){for(var t=0;t<n.length;t++)Mt(e,n[t],"text")})}}function Re(e,t,i){for(var a,n,o=e.doc,r=i?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>r;--s){if(s<=o.first)return o.first;var l=Ua(o,s-1);if(l.stateAfter&&(!i||s<=o.frontier))return s;var d=Er(l.text,null,e.options.tabSize);(null==n||a>d)&&(n=s-1,a=d)}return n}function ze(e,t,i){var a=e.doc,n=e.display;if(!a.mode.startState)return!0;var o=Re(e,t,i),r=o>a.first&&Ua(a,o-1).stateAfter;return r=r?er(a.mode,r):tr(a.mode),a.iter(o,t,function(i){Ia(e,i.text,r);var s=o==t-1||o%5==0||o>=n.viewFrom&&o<n.viewTo;i.stateAfter=s?er(a.mode,r):null,++o}),i&&(a.frontier=o),r}function Fe(e){return e.lineSpace.offsetTop}function qe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function He(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=zn(e.measure,jn("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,a={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(a.left)||isNaN(a.right)||(e.cachedPaddingH=a),a}function Ve(e){return Cr-e.display.nativeBarWidth}function We(e){return e.display.scroller.clientWidth-Ve(e)-e.display.barWidth}function Ue(e){return e.display.scroller.clientHeight-Ve(e)-e.display.barHeight}function Be(e,t,i){var a=e.options.lineWrapping,n=a&&We(e);if(!t.measure.heights||a&&t.measure.width!=n){var o=t.measure.heights=[];if(a){t.measure.width=n;for(var r=t.text.firstChild.getClientRects(),s=0;s<r.length-1;s++){var l=r[s],d=r[s+1];Math.abs(l.bottom-d.bottom)>2&&o.push((l.bottom+d.top)/2-i.top)}}o.push(i.bottom-i.top)}}function Ye(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var a=0;a<e.rest.length;a++)if(e.rest[a]==t)return{map:e.measure.maps[a],cache:e.measure.caches[a]};for(var a=0;a<e.rest.length;a++)if(Ja(e.rest[a])>i)return{map:e.measure.maps[a],cache:e.measure.caches[a],before:!0}}function Ke(e,t){t=pa(t);var i=Ja(t),a=e.display.externalMeasured=new It(e.doc,t,i);a.lineN=i;var n=a.built=Pa(e,a);return a.text=n.pre,zn(e.display.lineMeasure,n.pre),a}function Je(e,t,i,a){return Qe(e,Xe(e,t),i,a)}function Ge(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Lt(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function Xe(e,t){var i=Ja(t),a=Ge(e,i);a&&!a.text?a=null:a&&a.changes&&L(e,a,i,M(e)),a||(a=Ke(e,t));var n=Ye(a,t,i);return{line:t,view:a,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Qe(e,t,i,a,n){t.before&&(i=-1);var o,r=i+(a||"");return t.cache.hasOwnProperty(r)?o=t.cache[r]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Be(e,t.view,t.rect),t.hasHeights=!0),o=et(e,t,i,a),o.bogus||(t.cache[r]=o)),{left:o.left,right:o.right,top:n?o.rtop:o.top,bottom:n?o.rbottom:o.bottom}}function Ze(e,t,i){for(var a,n,o,r,s=0;s<e.length;s+=3){var l=e[s],d=e[s+1];if(t<l?(n=0,o=1,r="left"):t<d?(n=t-l,o=n+1):(s==e.length-3||t==d&&e[s+3]>t)&&(o=d-l,n=o-1,t>=d&&(r="right")),null!=n){if(a=e[s+2],l==d&&i==(a.insertLeft?"left":"right")&&(r=i),"left"==i&&0==n)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)a=e[(s-=3)+2],r="left";if("right"==i&&n==d-l)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)a=e[(s+=3)+2],r="right";break}}return{node:a,start:n,end:o,collapse:r,coverStart:l,coverEnd:d}}function et(e,t,i,a){var n,o=Ze(t.map,i,a),r=o.node,s=o.start,l=o.end,d=o.collapse;if(3==r.nodeType){for(var c=0;c<4;c++){for(;s&&Nn(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+l<o.coverEnd&&Nn(t.line.text.charAt(o.coverStart+l));)++l;if(po&&ho<9&&0==s&&l==o.coverEnd-o.coverStart)n=r.parentNode.getBoundingClientRect();else if(po&&e.options.lineWrapping){var u=Or(r,s,l).getClientRects();n=u.length?u["right"==a?u.length-1:0]:No}else n=Or(r,s,l).getBoundingClientRect()||No;if(n.left||n.right||0==s)break;l=s,s-=1,d="right"}po&&ho<11&&(n=tt(e.display.measure,n))}else{s>0&&(d=a="right");var u;n=e.options.lineWrapping&&(u=r.getClientRects()).length>1?u["right"==a?u.length-1:0]:r.getBoundingClientRect()}if(po&&ho<9&&!s&&(!n||!n.left&&!n.right)){var p=r.parentNode.getClientRects()[0];n=p?{left:p.left,right:p.left+gt(e.display),top:p.top,bottom:p.bottom}:No}for(var h=n.top-t.rect.top,f=n.bottom-t.rect.top,m=(h+f)/2,g=t.view.measure.heights,c=0;c<g.length-1&&!(m<g[c]);c++);var v=c?g[c-1]:0,b=g[c],_={left:("right"==d?n.right:n.left)-t.rect.left,right:("left"==d?n.left:n.right)-t.rect.left,top:v,bottom:b};return n.left||n.right||(_.bogus=!0),e.options.singleCursorHeightPerLine||(_.rtop=h,_.rbottom=f),_}function tt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Kn(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*a,bottom:t.bottom*a}}function it(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function at(e){e.display.externalMeasure=null,Rn(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)it(e.display.view[t])}function nt(e){at(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ot(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function rt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function st(e,t,i,a){if(t.widgets)for(var n=0;n<t.widgets.length;++n)if(t.widgets[n].above){var o=_a(t.widgets[n]);i.top+=o,i.bottom+=o}if("line"==a)return i;a||(a="local");var r=Xa(t);if("local"==a?r+=Fe(e.display):r-=e.display.viewOffset,"page"==a||"window"==a){var s=e.display.lineSpace.getBoundingClientRect();r+=s.top+("window"==a?0:rt());var l=s.left+("window"==a?0:ot());i.left+=l,i.right+=l}return i.top+=r,i.bottom+=r,i}function lt(e,t,i){if("div"==i)return t;var a=t.left,n=t.top;if("page"==i)a-=ot(),n-=rt();else if("local"==i||!i){var o=e.display.sizer.getBoundingClientRect();a+=o.left,n+=o.top}var r=e.display.lineSpace.getBoundingClientRect();return{left:a-r.left,top:n-r.top}}function dt(e,t,i,a,n){return a||(a=Ua(e.doc,t.line)),st(e,a,Je(e,a,t.ch,n),i)}function ct(e,t,i,a,n,o){function r(t,r){var s=Qe(e,n,t,r?"right":"left",o);return r?s.left=s.right:s.right=s.left,st(e,a,s,i)}function s(e,t){var i=l[t],a=i.level%2;return e==Gn(i)&&t&&i.level<l[t-1].level?(i=l[--t],e=Xn(i)-(i.level%2?0:1),a=!0):e==Xn(i)&&t<l.length-1&&i.level<l[t+1].level&&(i=l[++t],e=Gn(i)-i.level%2,a=!1),a&&e==i.to&&e>i.from?r(e-1):r(e,a)}a=a||Ua(e.doc,t.line),n||(n=Xe(e,a));var l=Qa(a),d=t.ch;if(!l)return r(d);var c=no(l,d),u=s(d,c);return null!=Gr&&(u.other=s(d,Gr)),u}function ut(e,t){var i=0,t=fe(e.doc,t);e.options.lineWrapping||(i=gt(e.display)*t.ch);var a=Ua(e.doc,t.line),n=Xa(a)+Fe(e.display);return{left:i,right:i,top:n,bottom:n+a.height}}function pt(e,t,i,a){var n=Io(e,t);return n.xRel=a,i&&(n.outside=!0),n}function ht(e,t,i){var a=e.doc;if(i+=e.display.viewOffset,i<0)return pt(a.first,0,!0,-1);var n=Ga(a,i),o=a.first+a.size-1;if(n>o)return pt(a.first+a.size-1,Ua(a,o).text.length,!0,1);t<0&&(t=0);for(var r=Ua(a,n);;){var s=ft(e,r,n,t,i),l=ca(r),d=l&&l.find(0,!0);if(!l||!(s.ch>d.from.ch||s.ch==d.from.ch&&s.xRel>0))return s;n=Ja(r=d.to.line)}}function ft(e,t,i,a,n){function o(a){var n=ct(e,Io(i,a),"line",t,d);return s=!0,r>n.bottom?n.left-l:r<n.top?n.left+l:(s=!1,n.left)}var r=n-Xa(t),s=!1,l=2*e.display.wrapper.clientWidth,d=Xe(e,t),c=Qa(t),u=t.text.length,p=Qn(t),h=Zn(t),f=o(p),m=s,g=o(h),v=s;if(a>g)return pt(i,h,v,1);for(;;){if(c?h==p||h==ro(t,p,1):h-p<=1){for(var b=a<f||a-f<=g-a?p:h,_=a-(b==p?f:g);Nn(t.text.charAt(b));)++b;var y=pt(i,b,b==p?m:v,_<-1?-1:_>1?1:0);return y}var A=Math.ceil(u/2),w=p+A;if(c){w=p;for(var x=0;x<A;++x)w=ro(t,w,1)}var k=o(w);k>a?(h=w,g=k,(v=s)&&(g+=1e3),u=A):(p=w,f=k,m=s,u-=A)}}function mt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Mo){Mo=jn("pre");for(var t=0;t<49;++t)Mo.appendChild(document.createTextNode("x")),Mo.appendChild(jn("br"));Mo.appendChild(document.createTextNode("x"))}zn(e.measure,Mo);var i=Mo.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),Rn(e.measure),i||1}function gt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=jn("span","xxxxxxxxxx"),i=jn("pre",[t]);zn(e.measure,i);var a=t.getBoundingClientRect(),n=(a.right-a.left)/10;return n>2&&(e.cachedCharWidth=n),n||10}function vt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ro},jo?jo.ops.push(e.curOp):e.curOp.ownsGroup=jo={ops:[e.curOp],delayedCallbacks:[]}}function bt(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i]();for(var a=0;a<e.ops.length;a++){var n=e.ops[a];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++](n.cm)}}while(i<t.length)}function _t(e){var t=e.curOp,i=t.ownsGroup;if(i)try{bt(i)}finally{jo=null;for(var a=0;a<i.ops.length;a++)i.ops[a].cm.curOp=null;yt(i)}}function yt(e){for(var t=e.ops,i=0;i<t.length;i++)At(t[i]);for(var i=0;i<t.length;i++)wt(t[i]);for(var i=0;i<t.length;i++)xt(t[i]);for(var i=0;i<t.length;i++)kt(t[i]);for(var i=0;i<t.length;i++)$t(t[i])}function At(e){var t=e.cm,i=t.display;C(t),e.updateMaxLine&&p(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new $(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function wt(e){e.updatedDisplay=e.mustUpdate&&S(e.cm,e.update)}function xt(e){var t=e.cm,i=t.display;e.updatedDisplay&&E(t),e.barMeasure=f(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Je(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Ve(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-We(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function kt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Zt(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&I(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&b(t,e.barMeasure),e.selectionChanged&&Le(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),e.focus&&G(e.cm)}function $t(e){var t=e.cm,i=t.display,a=t.doc;if(e.updatedDisplay&&T(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null==e.scrollTop||i.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(a.scrollTop=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop)),i.scrollbars.setScrollTop(a.scrollTop),i.scroller.scrollTop=a.scrollTop),null==e.scrollLeft||i.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(a.scrollLeft=Math.max(0,Math.min(i.scroller.scrollWidth-We(t),e.scrollLeft)),i.scrollbars.setScrollLeft(a.scrollLeft),i.scroller.scrollLeft=a.scrollLeft,A(t)),e.scrollToPos){var n=Ti(t,fe(a,e.scrollToPos.from),fe(a,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Si(t,n)}var o=e.maybeHiddenMarkers,r=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||kr(o[s],"hide");if(r)for(var s=0;s<r.length;++s)r[s].lines.length&&kr(r[s],"unhide");i.wrapper.offsetHeight&&(a.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&kr(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Ct(e,t){if(e.curOp)return t();vt(e);try{return t()}finally{_t(e)}}function St(e,t){return function(){if(e.curOp)return t.apply(e,arguments);vt(e);try{return t.apply(e,arguments)}finally{_t(e)}}}function Tt(e){return function(){if(this.curOp)return e.apply(this,arguments);vt(this);try{return e.apply(this,arguments)}finally{_t(this)}}}function Dt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);vt(t);try{return e.apply(this,arguments)}finally{_t(t)}}}function It(e,t,i){this.line=t,this.rest=ha(t),this.size=this.rest?Ja(Sn(this.rest))-i+1:1,this.node=this.text=null,this.hidden=ga(e,t)}function Et(e,t,i){for(var a,n=[],o=t;o<i;o=a){var r=new It(e.doc,Ua(e.doc,o),o);a=o+r.size,n.push(r)}return n}function Pt(e,t,i,a){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),a||(a=0);var n=e.display;if(a&&i<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)Do&&fa(e.doc,t)<n.viewTo&&Ot(e);else if(i<=n.viewFrom)Do&&ma(e.doc,i+a)>n.viewFrom?Ot(e):(n.viewFrom+=a,n.viewTo+=a);else if(t<=n.viewFrom&&i>=n.viewTo)Ot(e);else if(t<=n.viewFrom){var o=Nt(e,i,i+a,1);o?(n.view=n.view.slice(o.index),n.viewFrom=o.lineN,n.viewTo+=a):Ot(e)}else if(i>=n.viewTo){var o=Nt(e,t,t,-1);o?(n.view=n.view.slice(0,o.index),n.viewTo=o.lineN):Ot(e)}else{var r=Nt(e,t,t,-1),s=Nt(e,i,i+a,1);r&&s?(n.view=n.view.slice(0,r.index).concat(Et(e,r.lineN,s.lineN)).concat(n.view.slice(s.index)),n.viewTo+=a):Ot(e)}var l=n.externalMeasured;l&&(i<l.lineN?l.lineN+=a:t<l.lineN+l.size&&(n.externalMeasured=null))}function Mt(e,t,i){e.curOp.viewChanged=!0;var a=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(a.externalMeasured=null),!(t<a.viewFrom||t>=a.viewTo)){var o=a.view[Lt(e,t)];if(null!=o.node){var r=o.changes||(o.changes=[]);Tn(r,i)==-1&&r.push(i)}}}function Ot(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Lt(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,t<0)return null;for(var i=e.display.view,a=0;a<i.length;a++)if(t-=i[a].size,t<0)return a}function Nt(e,t,i,a){var n,o=Lt(e,t),r=e.display.view;if(!Do||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var s=0,l=e.display.viewFrom;s<o;s++)l+=r[s].size;if(l!=t){if(a>0){if(o==r.length-1)return null;n=l+r[o].size-t,o++}else n=l-t;t+=n,i+=n}for(;fa(e.doc,i)!=i;){if(o==(a<0?0:r.length-1))return null;i+=a*r[o-(a<0?1:0)].size,o+=a}return{index:o,lineN:i}}function jt(e,t,i){var a=e.display,n=a.view;0==n.length||t>=a.viewTo||i<=a.viewFrom?(a.view=Et(e,t,i),a.viewFrom=t):(a.viewFrom>t?a.view=Et(e,t,a.viewFrom).concat(a.view):a.viewFrom<t&&(a.view=a.view.slice(Lt(e,t))),a.viewFrom=t,a.viewTo<i?a.view=a.view.concat(Et(e,a.viewTo,i)):a.viewTo>i&&(a.view=a.view.slice(0,Lt(e,i)))),a.viewTo=i}function Rt(e){for(var t=e.display.view,i=0,a=0;a<t.length;a++){var n=t[a];n.hidden||n.node&&!n.changes||++i}return i}function zt(e){function t(){n.activeTouch&&(o=setTimeout(function(){n.activeTouch=null},1e3),r=n.activeTouch,r.end=+new Date)}function i(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function a(e,t){if(null==t.left)return!0;var i=t.left-e.left,a=t.top-e.top;return i*i+a*a>400}var n=e.display;wr(n.scroller,"mousedown",St(e,Wt)),po&&ho<11?wr(n.scroller,"dblclick",St(e,function(t){if(!yn(e,t)){var i=Vt(e,t);if(i&&!Jt(e,t)&&!Ht(e.display,t)){_r(t);var a=e.findWordAt(i);_e(e.doc,a.anchor,a.head)}}})):wr(n.scroller,"dblclick",function(t){yn(e,t)||_r(t)}),So||wr(n.scroller,"contextmenu",function(t){hi(e,t)});var o,r={end:0};wr(n.scroller,"touchstart",function(e){if(!i(e)){clearTimeout(o);var t=+new Date;n.activeTouch={start:t,moved:!1,prev:t-r.end<=300?r:null},1==e.touches.length&&(n.activeTouch.left=e.touches[0].pageX,n.activeTouch.top=e.touches[0].pageY)}}),wr(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),wr(n.scroller,"touchend",function(i){var o=n.activeTouch;if(o&&!Ht(n,i)&&null!=o.left&&!o.moved&&new Date-o.start<300){var r,s=e.coordsChar(n.activeTouch,"page");r=!o.prev||a(o,o.prev)?new ce(s,s):!o.prev.prev||a(o,o.prev.prev)?e.findWordAt(s):new ce(Io(s.line,0),fe(e.doc,Io(s.line+1,0))),e.setSelection(r.anchor,r.head),e.focus(),_r(i)}t()}),wr(n.scroller,"touchcancel",t),wr(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Qt(e,n.scroller.scrollTop),Zt(e,n.scroller.scrollLeft,!0),kr(e,"scroll",e))}),wr(n.scroller,"mousewheel",function(t){ei(e,t)}),wr(n.scroller,"DOMMouseScroll",function(t){ei(e,t)}),wr(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={simple:function(t){yn(e,t)||Ar(t)},start:function(t){Xt(e,t)},drop:St(e,Gt)};var s=n.input.getField();wr(s,"keyup",function(t){li.call(e,t)}),wr(s,"keydown",St(e,ri)),wr(s,"keypress",St(e,di)),wr(s,"focus",Mn(ui,e)),wr(s,"blur",Mn(pi,e))}function Ft(t,i,a){var n=a&&a!=e.Init;if(!i!=!n){var o=t.display.dragFunctions,r=i?wr:xr;r(t.display.scroller,"dragstart",o.start),r(t.display.scroller,"dragenter",o.simple),r(t.display.scroller,"dragover",o.simple),r(t.display.scroller,"drop",o.drop)}}function qt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Ht(e,t){for(var i=gn(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function Vt(e,t,i,a){var n=e.display;if(!i&&"true"==gn(t).getAttribute("cm-not-content"))return null;var o,r,s=n.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,r=t.clientY-s.top}catch(t){return null}var l,d=ht(e,o,r);if(a&&1==d.xRel&&(l=Ua(e.doc,d.line).text).length==d.ch){var c=Er(l,l.length,e.options.tabSize)-l.length;d=Io(d.line,Math.max(0,Math.round((o-He(e.display).left)/gt(e.display))-c))}return d}function Wt(e){var t=this,i=t.display;if(!(i.activeTouch&&i.input.supportsTouch()||yn(t,e))){if(i.shift=e.shiftKey,Ht(i,e))return void(fo||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Jt(t,e)){var a=Vt(t,e);switch(window.focus(),vn(e)){case 1:a?Ut(t,e,a):gn(e)==i.scroller&&_r(e);break;case 2:fo&&(t.state.lastMiddleDown=+new Date),a&&_e(t.doc,a),setTimeout(function(){i.input.focus()},20),_r(e);break;case 3:So?hi(t,e):ci(t)}}}}function Ut(e,t,i){po?setTimeout(Mn(G,e),0):e.curOp.focus=!0;var a,n=+new Date;Lo&&Lo.time>n-400&&0==Eo(Lo.pos,i)?a="triple":Oo&&Oo.time>n-400&&0==Eo(Oo.pos,i)?(a="double",Lo={time:n,pos:i}):(a="single",Oo={time:n,pos:i});var o,r=e.doc.sel,s=xo?t.metaKey:t.ctrlKey;e.options.dragDrop&&Wr&&!X(e)&&"single"==a&&(o=r.contains(i))>-1&&!r.ranges[o].empty()?Bt(e,t,i,s):Yt(e,t,i,a,s)}function Bt(e,t,i,a){var n=e.display,o=St(e,function(r){fo&&(n.scroller.draggable=!1),e.state.draggingText=!1,xr(document,"mouseup",o),xr(n.scroller,"drop",o),Math.abs(t.clientX-r.clientX)+Math.abs(t.clientY-r.clientY)<10&&(_r(r),a||_e(e.doc,i),fo||po&&9==ho?setTimeout(function(){document.body.focus(),n.input.focus()},20):n.input.focus())});fo&&(n.scroller.draggable=!0),e.state.draggingText=o,n.scroller.dragDrop&&n.scroller.dragDrop(),wr(document,"mouseup",o),wr(n.scroller,"drop",o)}function Yt(e,t,i,a,n){function o(t){if(0!=Eo(g,t))if(g=t,"rect"==a){for(var n=[],o=e.options.tabSize,r=Er(Ua(d,i.line).text,i.ch,o),s=Er(Ua(d,t.line).text,t.ch,o),l=Math.min(r,s),h=Math.max(r,s),f=Math.min(i.line,t.line),m=Math.min(e.lastLine(),Math.max(i.line,t.line));f<=m;f++){var v=Ua(d,f).text,b=$n(v,l,o);l==h?n.push(new ce(Io(f,b),Io(f,b))):v.length>b&&n.push(new ce(Io(f,b),Io(f,$n(v,h,o))))}n.length||n.push(new ce(i,i)),$e(d,ue(p.ranges.slice(0,u).concat(n),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var _=c,y=_.anchor,A=t;if("single"!=a){if("double"==a)var w=e.findWordAt(t);else var w=new ce(Io(t.line,0),fe(d,Io(t.line+1,0)));Eo(w.anchor,y)>0?(A=w.head,y=J(_.from(),w.anchor)):(A=w.anchor,y=K(_.to(),w.head))}var n=p.ranges.slice(0);n[u]=new ce(fe(d,y),A),$e(d,ue(n,u),Dr)}}function r(t){var i=++b,n=Vt(e,t,!0,"rect"==a);if(n)if(0!=Eo(n,g)){e.curOp.focus=!0,o(n);var s=y(l,d);(n.line>=s.to||n.line<s.from)&&setTimeout(St(e,function(){b==i&&r(t)}),150)}else{var c=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;c&&setTimeout(St(e,function(){b==i&&(l.scroller.scrollTop+=c,r(t))}),50)}}function s(e){b=1/0,_r(e),l.input.focus(),xr(document,"mousemove",_),xr(document,"mouseup",A),d.history.lastSelOrigin=null}var l=e.display,d=e.doc;_r(t);var c,u,p=d.sel,h=p.ranges;if(n&&!t.shiftKey?(u=d.sel.contains(i),c=u>-1?h[u]:new ce(i,i)):(c=d.sel.primary(),u=d.sel.primIndex),t.altKey)a="rect",n||(c=new ce(i,i)),i=Vt(e,t,!0,!0),u=-1;else if("double"==a){var f=e.findWordAt(i);c=e.display.shift||d.extend?be(d,c,f.anchor,f.head):f}else if("triple"==a){var m=new ce(Io(i.line,0),fe(d,Io(i.line+1,0)));c=e.display.shift||d.extend?be(d,c,m.anchor,m.head):m}else c=be(d,c,i);n?u==-1?(u=h.length,$e(d,ue(h.concat([c]),u),{scroll:!1,origin:"*mouse"})):h.length>1&&h[u].empty()&&"single"==a&&!t.shiftKey?($e(d,ue(h.slice(0,u).concat(h.slice(u+1)),0)),p=d.sel):Ae(d,u,c,Dr):(u=0,$e(d,new de([c],0),Dr),p=d.sel);var g=i,v=l.wrapper.getBoundingClientRect(),b=0,_=St(e,function(e){vn(e)?r(e):s(e)}),A=St(e,s);wr(document,"mousemove",_),wr(document,"mouseup",A)}function Kt(e,t,i,a,n){try{var o=t.clientX,r=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;a&&_r(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(r>l.bottom||!wn(e,i))return mn(t);r-=l.top-s.viewOffset;for(var d=0;d<e.options.gutters.length;++d){var c=s.gutters.childNodes[d];if(c&&c.getBoundingClientRect().right>=o){var u=Ga(e.doc,r),p=e.options.gutters[d];return n(e,i,e,u,p,t),mn(t)}}}function Jt(e,t){return Kt(e,t,"gutterClick",!0,bn)}function Gt(e){var t=this;if(!yn(t,e)&&!Ht(t.display,e)){_r(e),po&&(zo=+new Date);var i=Vt(t,e,!0),a=e.dataTransfer.files;if(i&&!X(t))if(a&&a.length&&window.FileReader&&window.File)for(var n=a.length,o=Array(n),r=0,s=function(e,a){var s=new FileReader;s.onload=St(t,function(){if(o[a]=s.result,++r==n){i=fe(t.doc,i);var e={from:i,to:i,text:Ur(o.join("\n")),origin:"paste"};yi(t.doc,e),ke(t.doc,pe(i,Uo(e)))}}),s.readAsText(e)},l=0;l<n;++l)s(a[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(xo?e.altKey:e.ctrlKey))var d=t.listSelections();if(Ce(t.doc,pe(i,i)),d)for(var l=0;l<d.length;++l)Ci(t.doc,"",d[l].anchor,d[l].head,"drag");t.replaceSelection(o,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Xt(e,t){if(po&&(!e.state.draggingText||+new Date-zo<100))return void Ar(t);if(!yn(e,t)&&!Ht(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!bo)){var i=jn("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",vo&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),vo&&i.parentNode.removeChild(i)}}function Qt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,lo||D(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),lo&&D(e),Ne(e,100))}function Zt(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,A(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ei(e,t){var i=Ho(t),a=i.x,n=i.y,o=e.display,r=o.scroller;if(a&&r.scrollWidth>r.clientWidth||n&&r.scrollHeight>r.clientHeight){if(n&&xo&&fo)e:for(var s=t.target,l=o.view;s!=r;s=s.parentNode)for(var d=0;d<l.length;d++)if(l[d].node==s){e.display.currentWheelTarget=s;break e}if(a&&!lo&&!vo&&null!=qo)return n&&Qt(e,Math.max(0,Math.min(r.scrollTop+n*qo,r.scrollHeight-r.clientHeight))),Zt(e,Math.max(0,Math.min(r.scrollLeft+a*qo,r.scrollWidth-r.clientWidth))),_r(t),void(o.wheelStartX=null);if(n&&null!=qo){var c=n*qo,u=e.doc.scrollTop,p=u+o.wrapper.clientHeight;c<0?u=Math.max(0,u+c-50):p=Math.min(e.doc.height,p+c+50),D(e,{top:u,bottom:p})}Fo<20&&(null==o.wheelStartX?(o.wheelStartX=r.scrollLeft,o.wheelStartY=r.scrollTop,o.wheelDX=a,o.wheelDY=n,setTimeout(function(){if(null!=o.wheelStartX){var e=r.scrollLeft-o.wheelStartX,t=r.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(qo=(qo*Fo+i)/(Fo+1),++Fo)}},200)):(o.wheelDX+=a,o.wheelDY+=n))}}function ti(e,t,i){if("string"==typeof t&&(t=ir[t],!t))return!1;e.display.input.ensurePolled();var a=e.display.shift,n=!1;try{X(e)&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=Sr}finally{e.display.shift=a,e.state.suppressEdits=!1}return n}function ii(e,t,i){for(var a=0;a<e.state.keyMaps.length;a++){var n=nr(t,e.state.keyMaps[a],i,e);if(n)return n}return e.options.extraKeys&&nr(t,e.options.extraKeys,i,e)||nr(t,e.options.keyMap,i,e)}function ai(e,t,i,a){var n=e.state.keySeq;if(n){if(or(t))return"handled";Vo.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),t=n+" "+t}var o=ii(e,t,a);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&bn(e,"keyHandled",e,t,i),"handled"!=o&&"multi"!=o||(_r(i),Le(e)),n&&!o&&/\'$/.test(t)?(_r(i),!0):!!o}function ni(e,t){var i=rr(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?ai(e,"Shift-"+i,t,function(t){return ti(e,t,!0)})||ai(e,i,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ti(e,t)}):ai(e,i,t,function(t){return ti(e,t)}))}function oi(e,t,i){return ai(e,"'"+i+"'",t,function(t){return ti(e,t,!0)})}function ri(e){var t=this;if(t.curOp.focus=!0,!yn(t,e)){po&&ho<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var a=ni(t,e);vo&&(Wo=a?i:null,!a&&88==i&&!Yr&&(xo?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||si(t)}}function si(e){function t(e){18!=e.keyCode&&e.altKey||(qr(i,"CodeMirror-crosshair"),xr(document,"keyup",t),xr(document,"mouseover",t))}var i=e.display.lineDiv;Hr(i,"CodeMirror-crosshair"),wr(document,"keyup",t),wr(document,"mouseover",t)}function li(e){16==e.keyCode&&(this.doc.sel.shift=!1),yn(this,e)}function di(e){var t=this;if(!(Ht(t.display,e)||yn(t,e)||e.ctrlKey&&!e.altKey||xo&&e.metaKey)){var i=e.keyCode,a=e.charCode;if(vo&&i==Wo)return Wo=null,void _r(e);if(!vo||e.which&&!(e.which<10)||!ni(t,e)){var n=String.fromCharCode(null==a?i:a);oi(t,e,n)||t.display.input.onKeyPress(e)}}}function ci(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,pi(e))},100)}function ui(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(kr(e,"focus",e),
e.state.focused=!0,Hr(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),fo&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Le(e))}function pi(e){e.state.delayingBlurEvent||(e.state.focused&&(kr(e,"blur",e),e.state.focused=!1,qr(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function hi(e,t){Ht(e.display,t)||fi(e,t)||e.display.input.onContextMenu(t)}function fi(e,t){return!!wn(e,"gutterContextMenu")&&Kt(e,t,"gutterContextMenu",!1,kr)}function mi(e,t){if(Eo(e,t.from)<0)return e;if(Eo(e,t.to)<=0)return Uo(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,a=e.ch;return e.line==t.to.line&&(a+=Uo(t).ch-t.to.ch),Io(i,a)}function gi(e,t){for(var i=[],a=0;a<e.sel.ranges.length;a++){var n=e.sel.ranges[a];i.push(new ce(mi(n.anchor,t),mi(n.head,t)))}return ue(i,e.sel.primIndex)}function vi(e,t,i){return e.line==t.line?Io(i.line,e.ch-t.ch+i.ch):Io(i.line+(e.line-t.line),e.ch)}function bi(e,t,i){for(var a=[],n=Io(e.first,0),o=n,r=0;r<t.length;r++){var s=t[r],l=vi(s.from,n,o),d=vi(Uo(s),n,o);if(n=s.to,o=d,"around"==i){var c=e.sel.ranges[r],u=Eo(c.head,c.anchor)<0;a[r]=new ce(u?d:l,u?l:d)}else a[r]=new ce(l,l)}return new de(a,e.sel.primIndex)}function _i(e,t,i){var a={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(a.update=function(t,i,a,n){t&&(this.from=fe(e,t)),i&&(this.to=fe(e,i)),a&&(this.text=a),void 0!==n&&(this.origin=n)}),kr(e,"beforeChange",e,a),e.cm&&kr(e.cm,"beforeChange",e.cm,a),a.canceled?null:{from:a.from,to:a.to,text:a.text,origin:a.origin}}function yi(e,t,i){if(e.cm){if(!e.cm.curOp)return St(e.cm,yi)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(wn(e,"beforeChange")||e.cm&&wn(e.cm,"beforeChange"))||(t=_i(e,t,!0))){var a=To&&!i&&ia(e,t.from,t.to);if(a)for(var n=a.length-1;n>=0;--n)Ai(e,{from:a[n].from,to:a[n].to,text:n?[""]:t.text});else Ai(e,t)}}function Ai(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Eo(t.from,t.to)){var i=gi(e,t);nn(e,t,i,e.cm?e.cm.curOp.id:NaN),ki(e,t,i,Zi(e,t));var a=[];Va(e,function(e,i){i||Tn(a,e.history)!=-1||(fn(e.history,t),a.push(e.history)),ki(e,t,null,Zi(e,t))})}}function wi(e,t,i){if(!e.cm||!e.cm.state.suppressEdits){for(var a,n=e.history,o=e.sel,r="undo"==t?n.done:n.undone,s="undo"==t?n.undone:n.done,l=0;l<r.length&&(a=r[l],i?!a.ranges||a.equals(e.sel):a.ranges);l++);if(l!=r.length){for(n.lastOrigin=n.lastSelOrigin=null;a=r.pop(),a.ranges;){if(sn(a,s),i&&!a.equals(e.sel))return void $e(e,a,{clearRedo:!1});o=a}var d=[];sn(o,s),s.push({changes:d,generation:n.generation}),n.generation=a.generation||++n.maxGeneration;for(var c=wn(e,"beforeChange")||e.cm&&wn(e.cm,"beforeChange"),l=a.changes.length-1;l>=0;--l){var u=a.changes[l];if(u.origin=t,c&&!_i(e,u,!1))return void(r.length=0);d.push(en(e,u));var p=l?gi(e,u):Sn(r);ki(e,u,p,ta(e,u)),!l&&e.cm&&e.cm.scrollIntoView({from:u.from,to:Uo(u)});var h=[];Va(e,function(e,t){t||Tn(h,e.history)!=-1||(fn(e.history,u),h.push(e.history)),ki(e,u,null,ta(e,u))})}}}}function xi(e,t){if(0!=t&&(e.first+=t,e.sel=new de(Dn(e.sel.ranges,function(e){return new ce(Io(e.anchor.line+t,e.anchor.ch),Io(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Pt(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,a=i.viewFrom;a<i.viewTo;a++)Mt(e.cm,a,"gutter")}}function ki(e,t,i,a){if(e.cm&&!e.cm.curOp)return St(e.cm,ki)(e,t,i,a);if(t.to.line<e.first)return void xi(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);xi(e,n),t={from:Io(e.first,0),to:Io(t.to.line+n,t.to.ch),text:[Sn(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Io(o,Ua(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ba(e,t.from,t.to),i||(i=gi(e,t)),e.cm?$i(e.cm,t,a):Fa(e,t,a),Ce(e,i,Tr)}}function $i(e,t,i){var a=e.doc,n=e.display,r=t.from,s=t.to,l=!1,d=r.line;e.options.lineWrapping||(d=Ja(pa(Ua(a,r.line))),a.iter(d,s.line+1,function(e){if(e==n.maxLine)return l=!0,!0})),a.sel.contains(t.from,t.to)>-1&&An(e),Fa(a,t,i,o(e)),e.options.lineWrapping||(a.iter(d,r.line+t.text.length,function(e){var t=u(e);t>n.maxLineLength&&(n.maxLine=e,n.maxLineLength=t,n.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),a.frontier=Math.min(a.frontier,r.line),Ne(e,400);var c=t.text.length-(s.line-r.line)-1;t.full?Pt(e):r.line!=s.line||1!=t.text.length||za(e.doc,t)?Pt(e,r.line,s.line+1,c):Mt(e,r.line,"text");var p=wn(e,"changes"),h=wn(e,"change");if(h||p){var f={from:r,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&bn(e,"change",e,f),p&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function Ci(e,t,i,a,n){if(a||(a=i),Eo(a,i)<0){var o=a;a=i,i=o}"string"==typeof t&&(t=Ur(t)),yi(e,{from:i,to:a,text:t,origin:n})}function Si(e,t){if(!yn(e,"scrollCursorIntoView")){var i=e.display,a=i.sizer.getBoundingClientRect(),n=null;if(t.top+a.top<0?n=!0:t.bottom+a.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!yo){var o=jn("div","\u200b",null,"position: absolute; top: "+(t.top-i.viewOffset-Fe(e.display))+"px; height: "+(t.bottom-t.top+Ve(e)+i.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(n),e.display.lineSpace.removeChild(o)}}}function Ti(e,t,i,a){null==a&&(a=0);for(var n=0;n<5;n++){var o=!1,r=ct(e,t),s=i&&i!=t?ct(e,i):r,l=Ii(e,Math.min(r.left,s.left),Math.min(r.top,s.top)-a,Math.max(r.left,s.left),Math.max(r.bottom,s.bottom)+a),d=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=l.scrollTop&&(Qt(e,l.scrollTop),Math.abs(e.doc.scrollTop-d)>1&&(o=!0)),null!=l.scrollLeft&&(Zt(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)break}return r}function Di(e,t,i,a,n){var o=Ii(e,t,i,a,n);null!=o.scrollTop&&Qt(e,o.scrollTop),null!=o.scrollLeft&&Zt(e,o.scrollLeft)}function Ii(e,t,i,a,n){var o=e.display,r=mt(e.display);i<0&&(i=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=Ue(e),d={};n-i>l&&(n=i+l);var c=e.doc.height+qe(o),u=i<r,p=n>c-r;if(i<s)d.scrollTop=u?0:i;else if(n>s+l){var h=Math.min(i,(p?c:n)-l);h!=s&&(d.scrollTop=h)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=We(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=a-t>m;return g&&(a=t+m),t<10?d.scrollLeft=0:t<f?d.scrollLeft=Math.max(0,t-(g?0:10)):a>m+f-3&&(d.scrollLeft=a+(g?0:10)-m),d}function Ei(e,t,i){null==t&&null==i||Mi(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function Pi(e){Mi(e);var t=e.getCursor(),i=t,a=t;e.options.lineWrapping||(i=t.ch?Io(t.line,t.ch-1):t,a=Io(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:a,margin:e.options.cursorScrollMargin,isCursor:!0}}function Mi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=ut(e,t.from),a=ut(e,t.to),n=Ii(e,Math.min(i.left,a.left),Math.min(i.top,a.top)-t.margin,Math.max(i.right,a.right),Math.max(i.bottom,a.bottom)+t.margin);e.scrollTo(n.scrollLeft,n.scrollTop)}}function Oi(e,t,i,a){var n,o=e.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?n=ze(e,t):i="prev");var r=e.options.tabSize,s=Ua(o,t),l=Er(s.text,null,r);s.stateAfter&&(s.stateAfter=null);var d,c=s.text.match(/^\s*/)[0];if(a||/\S/.test(s.text)){if("smart"==i&&(d=o.mode.indent(n,s.text.slice(c.length),s.text),d==Sr||d>150)){if(!a)return;i="prev"}}else d=0,i="not";"prev"==i?d=t>o.first?Er(Ua(o,t-1).text,null,r):0:"add"==i?d=l+e.options.indentUnit:"subtract"==i?d=l-e.options.indentUnit:"number"==typeof i&&(d=l+i),d=Math.max(0,d);var u="",p=0;if(e.options.indentWithTabs)for(var h=Math.floor(d/r);h;--h)p+=r,u+="\t";if(p<d&&(u+=Cn(d-p)),u!=c)Ci(o,u,Io(t,0),Io(t,c.length),"+input");else for(var h=0;h<o.sel.ranges.length;h++){var f=o.sel.ranges[h];if(f.head.line==t&&f.head.ch<c.length){var p=Io(t,c.length);Ae(o,h,new ce(p,p));break}}s.stateAfter=null}function Li(e,t,i,a){var n=t,o=t;return"number"==typeof t?o=Ua(e,he(e,t)):n=Ja(t),null==n?null:(a(o,n)&&e.cm&&Mt(e.cm,n,i),o)}function Ni(e,t){for(var i=e.doc.sel.ranges,a=[],n=0;n<i.length;n++){for(var o=t(i[n]);a.length&&Eo(o.from,Sn(a).to)<=0;){var r=a.pop();if(Eo(r.from,o.from)<0){o.from=r.from;break}}a.push(o)}Ct(e,function(){for(var t=a.length-1;t>=0;t--)Ci(e.doc,"",a[t].from,a[t].to,"+delete");Pi(e)})}function ji(e,t,i,a,n){function o(){var t=s+i;return t<e.first||t>=e.first+e.size?u=!1:(s=t,c=Ua(e,t))}function r(e){var t=(n?ro:so)(c,l,i,!0);if(null==t){if(e||!o())return u=!1;l=n?(i<0?Zn:Qn)(c):i<0?c.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,d=i,c=Ua(e,s),u=!0;if("char"==a)r();else if("column"==a)r(!0);else if("word"==a||"group"==a)for(var p=null,h="group"==a,f=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(i<0)||r(!m);m=!1){var g=c.text.charAt(l)||"\n",v=On(g,f)?"w":h&&"\n"==g?"n":!h||/\s/.test(g)?null:"p";if(!h||m||v||(v="s"),p&&p!=v){i<0&&(i=1,r());break}if(v&&(p=v),i>0&&!r(!m))break}var b=Ie(e,Io(s,l),d,!0);return u||(b.hitSide=!0),b}function Ri(e,t,i,a){var n,o=e.doc,r=t.left;if("page"==a){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);n=t.top+i*(s-(i<0?1.5:.5)*mt(e.display))}else"line"==a&&(n=i>0?t.bottom+3:t.top-3);for(;;){var l=ht(e,r,n);if(!l.outside)break;if(i<0?n<=0:n>=o.height){l.hitSide=!0;break}n+=5*i}return l}function zi(t,i,a,n){e.defaults[t]=i,a&&(Yo[t]=n?function(e,t,i){i!=Ko&&a(e,t,i)}:a)}function Fi(e){for(var t,i,a,n,o=e.split(/-(?!$)/),e=o[o.length-1],r=0;r<o.length-1;r++){var s=o[r];if(/^(cmd|meta|m)$/i.test(s))n=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);a=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),n&&(e="Cmd-"+e),a&&(e="Shift-"+e),e}function qi(e){return"string"==typeof e?ar[e]:e}function Hi(e,t,i,a,n){if(a&&a.shared)return Vi(e,t,i,a,n);if(e.cm&&!e.cm.curOp)return St(e.cm,Hi)(e,t,i,a,n);var o=new dr(e,n),r=Eo(t,i);if(a&&Pn(a,o,!1),r>0||0==r&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=jn("span",[o.replacedWith],"CodeMirror-widget"),a.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),a.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(ua(e,t.line,t,i,o)||t.line!=i.line&&ua(e,i.line,t,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Do=!0}o.addToHistory&&nn(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var s,l=t.line,d=e.cm;if(e.iter(l,i.line+1,function(e){d&&o.collapsed&&!d.options.lineWrapping&&pa(e)==d.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&Ka(e,0),Gi(e,new Yi(o,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l}),o.collapsed&&e.iter(t.line,i.line+1,function(t){ga(e,t)&&Ka(t,0)}),o.clearOnEnter&&wr(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(To=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++lr,o.atomic=!0),d){if(s&&(d.curOp.updateMaxLine=!0),o.collapsed)Pt(d,t.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=t.line;c<=i.line;c++)Mt(d,c,"text");o.atomic&&Te(d.doc),bn(d,"markerAdded",d,o)}return o}function Vi(e,t,i,a,n){a=Pn(a),a.shared=!1;var o=[Hi(e,t,i,a,n)],r=o[0],s=a.widgetNode;return Va(e,function(e){s&&(a.widgetNode=s.cloneNode(!0)),o.push(Hi(e,fe(e,t),fe(e,i),a,n));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;r=Sn(o)}),new cr(o,r)}function Wi(e){return e.findMarks(Io(e.first,0),e.clipPos(Io(e.lastLine())),function(e){return e.parent})}function Ui(e,t){for(var i=0;i<t.length;i++){var a=t[i],n=a.find(),o=e.clipPos(n.from),r=e.clipPos(n.to);if(Eo(o,r)){var s=Hi(e,o,r,a.primary,a.primary.type);a.markers.push(s),s.parent=a}}}function Bi(e){for(var t=0;t<e.length;t++){var i=e[t],a=[i.primary.doc];Va(i.primary.doc,function(e){a.push(e)});for(var n=0;n<i.markers.length;n++){var o=i.markers[n];Tn(a,o.doc)==-1&&(o.parent=null,i.markers.splice(n--,1))}}}function Yi(e,t,i){this.marker=e,this.from=t,this.to=i}function Ki(e,t){if(e)for(var i=0;i<e.length;++i){var a=e[i];if(a.marker==t)return a}}function Ji(e,t){for(var i,a=0;a<e.length;++a)e[a]!=t&&(i||(i=[])).push(e[a]);return i}function Gi(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Xi(e,t,i){if(e)for(var a,n=0;n<e.length;++n){var o=e[n],r=o.marker,s=null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==r.type&&(!i||!o.marker.insertLeft)){var l=null==o.to||(r.inclusiveRight?o.to>=t:o.to>t);(a||(a=[])).push(new Yi(r,o.from,l?null:o.to))}}return a}function Qi(e,t,i){if(e)for(var a,n=0;n<e.length;++n){var o=e[n],r=o.marker,s=null==o.to||(r.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==r.type&&(!i||o.marker.insertLeft)){var l=null==o.from||(r.inclusiveLeft?o.from<=t:o.from<t);(a||(a=[])).push(new Yi(r,l?null:o.from-t,null==o.to?null:o.to-t))}}return a}function Zi(e,t){if(t.full)return null;var i=ge(e,t.from.line)&&Ua(e,t.from.line).markedSpans,a=ge(e,t.to.line)&&Ua(e,t.to.line).markedSpans;if(!i&&!a)return null;var n=t.from.ch,o=t.to.ch,r=0==Eo(t.from,t.to),s=Xi(i,n,r),l=Qi(a,o,r),d=1==t.text.length,c=Sn(t.text).length+(d?n:0);if(s)for(var u=0;u<s.length;++u){var p=s[u];if(null==p.to){var h=Ki(l,p.marker);h?d&&(p.to=null==h.to?null:h.to+c):p.to=n}}if(l)for(var u=0;u<l.length;++u){var p=l[u];if(null!=p.to&&(p.to+=c),null==p.from){var h=Ki(s,p.marker);h||(p.from=c,d&&(s||(s=[])).push(p))}else p.from+=c,d&&(s||(s=[])).push(p)}s&&(s=ea(s)),l&&l!=s&&(l=ea(l));var f=[s];if(!d){var m,g=t.text.length-2;if(g>0&&s)for(var u=0;u<s.length;++u)null==s[u].to&&(m||(m=[])).push(new Yi(s[u].marker,null,null));for(var u=0;u<g;++u)f.push(m);f.push(l)}return f}function ea(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function ta(e,t){var i=cn(e,t),a=Zi(e,t);if(!i)return a;if(!a)return i;for(var n=0;n<i.length;++n){var o=i[n],r=a[n];if(o&&r)e:for(var s=0;s<r.length;++s){for(var l=r[s],d=0;d<o.length;++d)if(o[d].marker==l.marker)continue e;o.push(l)}else r&&(i[n]=r)}return i}function ia(e,t,i){var a=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||a&&Tn(a,i)!=-1||(a||(a=[])).push(i)}}),!a)return null;for(var n=[{from:t,to:i}],o=0;o<a.length;++o)for(var r=a[o],s=r.find(0),l=0;l<n.length;++l){var d=n[l];if(!(Eo(d.to,s.from)<0||Eo(d.from,s.to)>0)){var c=[l,1],u=Eo(d.from,s.from),p=Eo(d.to,s.to);(u<0||!r.inclusiveLeft&&!u)&&c.push({from:d.from,to:s.from}),(p>0||!r.inclusiveRight&&!p)&&c.push({from:s.to,to:d.to}),n.splice.apply(n,c),l+=c.length-1}}return n}function aa(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function na(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function oa(e){return e.inclusiveLeft?-1:0}function ra(e){return e.inclusiveRight?1:0}function sa(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var a=e.find(),n=t.find(),o=Eo(a.from,n.from)||oa(e)-oa(t);if(o)return-o;var r=Eo(a.to,n.to)||ra(e)-ra(t);return r?r:t.id-e.id}function la(e,t){var i,a=Do&&e.markedSpans;if(a)for(var n,o=0;o<a.length;++o)n=a[o],n.marker.collapsed&&null==(t?n.from:n.to)&&(!i||sa(i,n.marker)<0)&&(i=n.marker);return i}function da(e){return la(e,!0)}function ca(e){return la(e,!1)}function ua(e,t,i,a,n){var o=Ua(e,t),r=Do&&o.markedSpans;if(r)for(var s=0;s<r.length;++s){var l=r[s];if(l.marker.collapsed){var d=l.marker.find(0),c=Eo(d.from,i)||oa(l.marker)-oa(n),u=Eo(d.to,a)||ra(l.marker)-ra(n);if(!(c>=0&&u<=0||c<=0&&u>=0)&&(c<=0&&(Eo(d.to,i)>0||l.marker.inclusiveRight&&n.inclusiveLeft)||c>=0&&(Eo(d.from,a)<0||l.marker.inclusiveLeft&&n.inclusiveRight)))return!0}}}function pa(e){for(var t;t=da(e);)e=t.find(-1,!0).line;return e}function ha(e){for(var t,i;t=ca(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function fa(e,t){var i=Ua(e,t),a=pa(i);return i==a?t:Ja(a)}function ma(e,t){if(t>e.lastLine())return t;var i,a=Ua(e,t);if(!ga(e,a))return t;for(;i=ca(a);)a=i.find(1,!0).line;return Ja(a)+1}function ga(e,t){var i=Do&&t.markedSpans;if(i)for(var a,n=0;n<i.length;++n)if(a=i[n],a.marker.collapsed){if(null==a.from)return!0;if(!a.marker.widgetNode&&0==a.from&&a.marker.inclusiveLeft&&va(e,t,a))return!0}}function va(e,t,i){if(null==i.to){var a=i.marker.find(1,!0);return va(e,a.line,Ki(a.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n,o=0;o<t.markedSpans.length;++o)if(n=t.markedSpans[o],n.marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(null==n.to||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&va(e,t,n))return!0}function ba(e,t,i){Xa(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ei(e,null,i)}function _a(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Rr(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),zn(t.display.measure,jn("div",[e.node],null,i))}return e.height=e.node.offsetHeight}function ya(e,t,i,a){var n=new ur(e,i,a),o=e.cm;return o&&n.noHScroll&&(o.display.alignWidgets=!0),Li(e,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(null==n.insertAt?i.push(n):i.splice(Math.min(i.length-1,Math.max(0,n.insertAt)),0,n),n.line=t,o&&!ga(e,t)){var a=Xa(t)<e.scrollTop;Ka(t,t.height+_a(n)),a&&Ei(o,null,n.height),o.curOp.forceUpdate=!0}return!0}),n}function Aa(e,t,i,a){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),aa(e),na(e,i);var n=a?a(e):1;n!=e.height&&Ka(e,n)}function wa(e){e.parent=null,aa(e)}function xa(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var a=i[1]?"bgClass":"textClass";null==t[a]?t[a]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[a])||(t[a]+=" "+i[2])}return e}function ka(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var a=e.innerMode(t,i);return a.mode.blankLine?a.mode.blankLine(a.state):void 0}}function $a(t,i,a,n){for(var o=0;o<10;o++){n&&(n[0]=e.innerMode(t,a).mode);var r=t.token(i,a);if(i.pos>i.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function Ca(e,t,i,a){function n(e){return{start:u.start,end:u.pos,string:u.current(),type:o||null,state:e?er(r.mode,c):c}}var o,r=e.doc,s=r.mode;t=fe(r,t);var l,d=Ua(r,t.line),c=ze(e,t.line,i),u=new sr(d.text,e.options.tabSize);for(a&&(l=[]);(a||u.pos<t.ch)&&!u.eol();)u.start=u.pos,o=$a(s,u,c),a&&l.push(n(!0));return a?l:n()}function Sa(e,t,i,a,n,o,r){var s=i.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,d=0,c=null,u=new sr(t,e.options.tabSize),p=e.options.addModeClass&&[null];for(""==t&&xa(ka(i,a),o);!u.eol();){if(u.pos>e.options.maxHighlightLength?(s=!1,r&&Ia(e,t,a,u.pos),u.pos=t.length,l=null):l=xa($a(i,u,a,p),o),p){var h=p[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||c!=l){for(;d<u.start;)d=Math.min(u.start,d+5e4),n(d,c);c=l}u.start=u.pos}for(;d<u.pos;){var f=Math.min(u.pos,d+5e4);n(f,c),d=f}}function Ta(e,t,i,a){var n=[e.state.modeGen],o={};Sa(e,t.text,e.doc.mode,i,function(e,t){n.push(e,t)},o,a);for(var r=0;r<e.state.overlays.length;++r){var s=e.state.overlays[r],l=1,d=0;Sa(e,t.text,s.mode,!0,function(e,t){for(var i=l;d<e;){var a=n[l];a>e&&n.splice(l,1,e,n[l+1],a),l+=2,d=Math.min(e,a)}if(t)if(s.opaque)n.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;i<l;i+=2){var o=n[i+1];n[i+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:n,classes:o.bgClass||o.textClass?o:null}}function Da(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var a=Ta(e,t,t.stateAfter=ze(e,Ja(t)));t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.frontier&&e.doc.frontier++}return t.styles}function Ia(e,t,i,a){var n=e.doc.mode,o=new sr(t,e.options.tabSize);for(o.start=o.pos=a||0,""==t&&ka(n,i);!o.eol()&&o.pos<=e.options.maxHighlightLength;)$a(n,o,i),o.start=o.pos}function Ea(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?fr:hr;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Pa(e,t){var i=jn("span",null,null,fo?"padding-right: .1px":null),a={pre:jn("pre",[i]),content:i,col:0,pos:0,cm:e,splitSpaces:(po||fo)&&e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var o,r=n?t.rest[n-1]:t.line;a.pos=0,a.addToken=Oa,Yn(e.display.measure)&&(o=Qa(r))&&(a.addToken=Na(a.addToken,o)),a.map=[];var s=t!=e.display.externalMeasured&&Ja(r);Ra(r,a,Da(e,r,s)),r.styleClasses&&(r.styleClasses.bgClass&&(a.bgClass=Hn(r.styleClasses.bgClass,a.bgClass||"")),r.styleClasses.textClass&&(a.textClass=Hn(r.styleClasses.textClass,a.textClass||""))),0==a.map.length&&a.map.push(0,0,a.content.appendChild(Bn(e.display.measure))),0==n?(t.measure.map=a.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(a.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return fo&&/\bcm-tab\b/.test(a.content.lastChild.className)&&(a.content.className="cm-tab-wrap-hack"),kr(e,"renderLine",e,t.line,a.pre),a.pre.className&&(a.textClass=Hn(a.pre.className,a.textClass||"")),a}function Ma(e){var t=jn("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Oa(e,t,i,a,n,o,r){if(t){var s=e.splitSpaces?t.replace(/ {3,}/g,La):t,l=e.cm.state.specialChars,d=!1;if(l.test(t))for(var c=document.createDocumentFragment(),u=0;;){l.lastIndex=u;var p=l.exec(t),h=p?p.index-u:t.length-u;if(h){var f=document.createTextNode(s.slice(u,u+h));po&&ho<9?c.appendChild(jn("span",[f])):c.appendChild(f),e.map.push(e.pos,e.pos+h,f),e.col+=h,e.pos+=h}if(!p)break;if(u+=h+1,"\t"==p[0]){var m=e.cm.options.tabSize,g=m-e.col%m,f=c.appendChild(jn("span",Cn(g),"cm-tab"));f.setAttribute("role","presentation"),f.setAttribute("cm-text","\t"),e.col+=g}else{var f=e.cm.options.specialCharPlaceholder(p[0]);f.setAttribute("cm-text",p[0]),po&&ho<9?c.appendChild(jn("span",[f])):c.appendChild(f),e.col+=1}e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var c=document.createTextNode(s);e.map.push(e.pos,e.pos+t.length,c),po&&ho<9&&(d=!0),e.pos+=t.length}if(i||a||n||d||r){var v=i||"";a&&(v+=a),n&&(v+=n);var b=jn("span",[c],v,r);return o&&(b.title=o),e.content.appendChild(b)}e.content.appendChild(c)}}function La(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":"\xa0";return t+=" "}function Na(e,t){return function(i,a,n,o,r,s,l){n=n?n+" cm-force-border":"cm-force-border";for(var d=i.pos,c=d+a.length;;){for(var u=0;u<t.length;u++){var p=t[u];if(p.to>d&&p.from<=d)break}if(p.to>=c)return e(i,a,n,o,r,s,l);e(i,a.slice(0,p.to-d),n,o,null,s,l),o=null,a=a.slice(p.to-d),d=p.to}}}function ja(e,t,i,a){var n=!a&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!a&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t}function Ra(e,t,i){var a=e.markedSpans,n=e.text,o=0;if(a)for(var r,s,l,d,c,u,p,h=n.length,f=0,m=1,g="",v=0;;){if(v==f){l=d=c=u=s="",p=null,v=1/0;for(var b=[],_=0;_<a.length;++_){var y=a[_],A=y.marker;y.from<=f&&(null==y.to||y.to>f)?(null!=y.to&&v>y.to&&(v=y.to,d=""),A.className&&(l+=" "+A.className),A.css&&(s=A.css),A.startStyle&&y.from==f&&(c+=" "+A.startStyle),A.endStyle&&y.to==v&&(d+=" "+A.endStyle),A.title&&!u&&(u=A.title),A.collapsed&&(!p||sa(p.marker,A)<0)&&(p=y)):y.from>f&&v>y.from&&(v=y.from),"bookmark"==A.type&&y.from==f&&A.widgetNode&&b.push(A)}if(p&&(p.from||0)==f&&(ja(t,(null==p.to?h+1:p.to)-f,p.marker,null==p.from),null==p.to))return;if(!p&&b.length)for(var _=0;_<b.length;++_)ja(t,0,b[_])}if(f>=h)break;for(var w=Math.min(h,v);;){if(g){var x=f+g.length;if(!p){var k=x>w?g.slice(0,w-f):g;t.addToken(t,k,r?r+l:l,c,f+k.length==v?d:"",u,s)}if(x>=w){g=g.slice(w-f),f=w;break}f=x,c=""}g=n.slice(o,o=i[m++]),r=Ea(i[m++],t.cm.options)}}else for(var m=1;m<i.length;m+=2)t.addToken(t,n.slice(o,o=i[m]),Ea(i[m+1],t.cm.options))}function za(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Sn(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Fa(e,t,i,a){function n(e){return i?i[e]:null}function o(e,i,n){Aa(e,i,n,a),bn(e,"change",e,t)}function r(e,t){for(var i=e,o=[];i<t;++i)o.push(new pr(d[i],n(i),a));return o}var s=t.from,l=t.to,d=t.text,c=Ua(e,s.line),u=Ua(e,l.line),p=Sn(d),h=n(d.length-1),f=l.line-s.line;if(t.full)e.insert(0,r(0,d.length)),e.remove(d.length,e.size-d.length);else if(za(e,t)){var m=r(0,d.length-1);o(u,u.text,h),f&&e.remove(s.line,f),m.length&&e.insert(s.line,m)}else if(c==u)if(1==d.length)o(c,c.text.slice(0,s.ch)+p+c.text.slice(l.ch),h);else{var m=r(1,d.length-1);m.push(new pr(p+c.text.slice(l.ch),h,a)),o(c,c.text.slice(0,s.ch)+d[0],n(0)),e.insert(s.line+1,m)}else if(1==d.length)o(c,c.text.slice(0,s.ch)+d[0]+u.text.slice(l.ch),n(0)),e.remove(s.line+1,f);else{o(c,c.text.slice(0,s.ch)+d[0],n(0)),o(u,p+u.text.slice(l.ch),h);var m=r(1,d.length-1);f>1&&e.remove(s.line+1,f-1),e.insert(s.line+1,m)}bn(e,"change",e,t)}function qa(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function Ha(e){this.children=e;for(var t=0,i=0,a=0;a<e.length;++a){var n=e[a];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}function Va(e,t,i){function a(e,n,o){if(e.linked)for(var r=0;r<e.linked.length;++r){var s=e.linked[r];if(s.doc!=n){var l=o&&s.sharedHist;i&&!l||(t(s.doc,l),a(s.doc,e,l))}}}a(e,null,!0)}function Wa(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,r(e),i(e),e.options.lineWrapping||p(e),e.options.mode=t.modeOption,Pt(e)}function Ua(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var a=0;;++a){var n=i.children[a],o=n.chunkSize();if(t<o){i=n;break}t-=o}return i.lines[t]}function Ba(e,t,i){var a=[],n=t.line;return e.iter(t.line,i.line+1,function(e){var o=e.text;n==i.line&&(o=o.slice(0,i.ch)),n==t.line&&(o=o.slice(t.ch)),a.push(o),++n}),a}function Ya(e,t,i){var a=[];return e.iter(t,i,function(e){a.push(e.text)}),a}function Ka(e,t){var i=t-e.height;if(i)for(var a=e;a;a=a.parent)a.height+=i}function Ja(e){if(null==e.parent)return null;for(var t=e.parent,i=Tn(t.lines,e),a=t.parent;a;t=a,a=a.parent)for(var n=0;a.children[n]!=t;++n)i+=a.children[n].chunkSize();return i+t.first}function Ga(e,t){var i=e.first;e:do{for(var a=0;a<e.children.length;++a){var n=e.children[a],o=n.height;if(t<o){e=n;continue e}t-=o,i+=n.chunkSize()}return i}while(!e.lines);for(var a=0;a<e.lines.length;++a){var r=e.lines[a],s=r.height;if(t<s)break;t-=s}return i+a}function Xa(e){e=pa(e);for(var t=0,i=e.parent,a=0;a<i.lines.length;++a){var n=i.lines[a];if(n==e)break;t+=n.height}for(var o=i.parent;o;i=o,o=i.parent)for(var a=0;a<o.children.length;++a){var r=o.children[a];if(r==i)break;t+=r.height}return t}function Qa(e){var t=e.order;return null==t&&(t=e.order=Xr(e.text)),t}function Za(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function en(e,t){var i={from:Y(t.from),to:Uo(t),text:Ba(e,t.from,t.to)};return ln(e,i,t.from.line,t.to.line+1),Va(e,function(e){ln(e,i,t.from.line,t.to.line+1)},!0),i}function tn(e){for(;e.length;){var t=Sn(e);if(!t.ranges)break;e.pop()}}function an(e,t){return t?(tn(e.done),Sn(e.done)):e.done.length&&!Sn(e.done).ranges?Sn(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Sn(e.done)):void 0}function nn(e,t,i,a){var n=e.history;n.undone.length=0;var o,r=+new Date;if((n.lastOp==a||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&n.lastModTime>r-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=an(n,n.lastOp==a))){var s=Sn(o.changes);0==Eo(t.from,t.to)&&0==Eo(t.from,s.to)?s.to=Uo(t):o.changes.push(en(e,t))}else{var l=Sn(n.done);for(l&&l.ranges||sn(e.sel,n.done),o={changes:[en(e,t)],generation:n.generation},n.done.push(o);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=r,n.lastOp=n.lastSelOp=a,n.lastOrigin=n.lastSelOrigin=t.origin,s||kr(e,"historyAdded")}function on(e,t,i,a){var n=t.charAt(0);return"*"==n||"+"==n&&i.ranges.length==a.ranges.length&&i.somethingSelected()==a.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function rn(e,t,i,a){var n=e.history,o=a&&a.origin;i==n.lastSelOp||o&&n.lastSelOrigin==o&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==o||on(e,o,Sn(n.done),t))?n.done[n.done.length-1]=t:sn(t,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=o,n.lastSelOp=i,a&&a.clearRedo!==!1&&tn(n.undone)}function sn(e,t){var i=Sn(t);i&&i.ranges&&i.equals(e)||t.push(e)}function ln(e,t,i,a){var n=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,a),function(i){i.markedSpans&&((n||(n=t["spans_"+e.id]={}))[o]=i.markedSpans),++o})}function dn(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function cn(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var a=0,n=[];a<t.text.length;++a)n.push(dn(i[a]));return n}function un(e,t,i){for(var a=0,n=[];a<e.length;++a){var o=e[a];if(o.ranges)n.push(i?de.prototype.deepCopy.call(o):o);else{var r=o.changes,s=[];n.push({changes:s});for(var l=0;l<r.length;++l){var d,c=r[l];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var u in c)(d=u.match(/^spans_(\d+)$/))&&Tn(t,Number(d[1]))>-1&&(Sn(s)[u]=c[u],delete c[u])}}}return n}function pn(e,t,i,a){i<e.line?e.line+=a:t<e.line&&(e.line=t,e.ch=0)}function hn(e,t,i,a){for(var n=0;n<e.length;++n){var o=e[n],r=!0;if(o.ranges){o.copied||(o=e[n]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)pn(o.ranges[s].anchor,t,i,a),pn(o.ranges[s].head,t,i,a)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(i<l.from.line)l.from=Io(l.from.line+a,l.from.ch),l.to=Io(l.to.line+a,l.to.ch);else if(t<=l.to.line){r=!1;break}}r||(e.splice(0,n+1),n=0)}}}function fn(e,t){var i=t.from.line,a=t.to.line,n=t.text.length-(a-i)-1;hn(e.done,i,a,n),hn(e.undone,i,a,n)}function mn(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function gn(e){return e.target||e.srcElement}function vn(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),xo&&e.ctrlKey&&1==t&&(t=3),t}function bn(e,t){function i(e){return function(){e.apply(null,o)}}var a=e._handlers&&e._handlers[t];if(a){var n,o=Array.prototype.slice.call(arguments,2);jo?n=jo.delayedCallbacks:$r?n=$r:(n=$r=[],setTimeout(_n,0));for(var r=0;r<a.length;++r)n.push(i(a[r]))}}function _n(){var e=$r;$r=null;for(var t=0;t<e.length;++t)e[t]()}function yn(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),kr(e,i||t.type,e,t),mn(t)||t.codemirrorIgnore}function An(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),a=0;a<t.length;++a)Tn(i,t[a])==-1&&i.push(t[a])}function wn(e,t){var i=e._handlers&&e._handlers[t];return i&&i.length>0}function xn(e){e.prototype.on=function(e,t){wr(this,e,t)},e.prototype.off=function(e,t){xr(this,e,t)}}function kn(){this.id=null}function $n(e,t,i){for(var a=0,n=0;;){var o=e.indexOf("\t",a);o==-1&&(o=e.length);var r=o-a;if(o==e.length||n+r>=t)return a+Math.min(r,t-n);if(n+=o-a,n+=i-n%i,a=o+1,n>=t)return a}}function Cn(e){for(;Pr.length<=e;)Pr.push(Sn(Pr)+" ");return Pr[e]}function Sn(e){return e[e.length-1];
}function Tn(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function Dn(e,t){for(var i=[],a=0;a<e.length;a++)i[a]=t(e[a],a);return i}function In(){}function En(e,t){var i;return Object.create?i=Object.create(e):(In.prototype=e,i=new In),t&&Pn(t,i),i}function Pn(e,t,i){t||(t={});for(var a in e)!e.hasOwnProperty(a)||i===!1&&t.hasOwnProperty(a)||(t[a]=e[a]);return t}function Mn(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function On(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Nr(e))||t.test(e):Nr(e)}function Ln(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Nn(e){return e.charCodeAt(0)>=768&&jr.test(e)}function jn(e,t,i,a){var n=document.createElement(e);if(i&&(n.className=i),a&&(n.style.cssText=a),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)n.appendChild(t[o]);return n}function Rn(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function zn(e,t){return Rn(e).appendChild(t)}function Fn(){return document.activeElement}function qn(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Hn(e,t){for(var i=e.split(" "),a=0;a<i.length;a++)i[a]&&!qn(i[a]).test(t)&&(t+=" "+i[a]);return t}function Vn(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var a=t[i].CodeMirror;a&&e(a)}}function Wn(){Vr||(Un(),Vr=!0)}function Un(){var e;wr(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Vn(qt)},100))}),wr(window,"blur",function(){Vn(pi)})}function Bn(e){if(null==zr){var t=jn("span","\u200b");zn(e,jn("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(zr=t.offsetWidth<=1&&t.offsetHeight>2&&!(po&&ho<8))}var i=zr?jn("span","\u200b"):jn("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Yn(e){if(null!=Fr)return Fr;var t=zn(e,document.createTextNode("A\u062eA")),i=Or(t,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var a=Or(t,1,2).getBoundingClientRect();return Fr=a.right-i.right<3}function Kn(e){if(null!=Kr)return Kr;var t=zn(e,jn("span","x")),i=t.getBoundingClientRect(),a=Or(t,0,1).getBoundingClientRect();return Kr=Math.abs(i.left-a.left)>1}function Jn(e,t,i,a){if(!e)return a(t,i,"ltr");for(var n=!1,o=0;o<e.length;++o){var r=e[o];(r.from<i&&r.to>t||t==i&&r.to==t)&&(a(Math.max(r.from,t),Math.min(r.to,i),1==r.level?"rtl":"ltr"),n=!0)}n||a(t,i,"ltr")}function Gn(e){return e.level%2?e.to:e.from}function Xn(e){return e.level%2?e.from:e.to}function Qn(e){var t=Qa(e);return t?Gn(t[0]):0}function Zn(e){var t=Qa(e);return t?Xn(Sn(t)):e.text.length}function eo(e,t){var i=Ua(e.doc,t),a=pa(i);a!=i&&(t=Ja(a));var n=Qa(a),o=n?n[0].level%2?Zn(a):Qn(a):0;return Io(t,o)}function to(e,t){for(var i,a=Ua(e.doc,t);i=ca(a);)a=i.find(1,!0).line,t=null;var n=Qa(a),o=n?n[0].level%2?Qn(a):Zn(a):a.text.length;return Io(null==t?Ja(a):t,o)}function io(e,t){var i=eo(e,t.line),a=Ua(e.doc,i.line),n=Qa(a);if(!n||0==n[0].level){var o=Math.max(0,a.text.search(/\S/)),r=t.line==i.line&&t.ch<=o&&t.ch;return Io(i.line,r?0:o)}return i}function ao(e,t,i){var a=e[0].level;return t==a||i!=a&&t<i}function no(e,t){Gr=null;for(var i,a=0;a<e.length;++a){var n=e[a];if(n.from<t&&n.to>t)return a;if(n.from==t||n.to==t){if(null!=i)return ao(e,n.level,e[i].level)?(n.from!=n.to&&(Gr=i),a):(n.from!=n.to&&(Gr=a),i);i=a}}return i}function oo(e,t,i,a){if(!a)return t+i;do t+=i;while(t>0&&Nn(e.text.charAt(t)));return t}function ro(e,t,i,a){var n=Qa(e);if(!n)return so(e,t,i,a);for(var o=no(n,t),r=n[o],s=oo(e,t,r.level%2?-i:i,a);;){if(s>r.from&&s<r.to)return s;if(s==r.from||s==r.to)return no(n,s)==o?s:(r=n[o+=i],i>0==r.level%2?r.to:r.from);if(r=n[o+=i],!r)return null;s=i>0==r.level%2?oo(e,r.to,-1,a):oo(e,r.from,1,a)}}function so(e,t,i,a){var n=t+i;if(a)for(;n>0&&Nn(e.text.charAt(n));)n+=i;return n<0||n>e.text.length?null:n}var lo=/gecko\/\d/i.test(navigator.userAgent),co=/MSIE \d/.test(navigator.userAgent),uo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),po=co||uo,ho=po&&(co?document.documentMode||6:uo[1]),fo=/WebKit\//.test(navigator.userAgent),mo=fo&&/Qt\/\d+\.\d+/.test(navigator.userAgent),go=/Chrome\//.test(navigator.userAgent),vo=/Opera\//.test(navigator.userAgent),bo=/Apple Computer/.test(navigator.vendor),_o=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),yo=/PhantomJS/.test(navigator.userAgent),Ao=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),wo=Ao||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),xo=Ao||/Mac/.test(navigator.platform),ko=/win/i.test(navigator.platform),$o=vo&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);$o&&($o=Number($o[1])),$o&&$o>=15&&(vo=!1,fo=!0);var Co=xo&&(mo||vo&&(null==$o||$o<12.11)),So=lo||po&&ho>=9,To=!1,Do=!1;m.prototype=Pn({update:function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,a=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?a+"px":"0";var n=e.viewHeight-(t?a:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?a+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(i?a:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedOverlay&&e.clientHeight>0&&(0==a&&this.overlayHack(),this.checkedOverlay=!0),{right:i?a:0,bottom:t?a:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e)},overlayHack:function(){var e=xo&&!_o?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=e;var t=this,i=function(e){gn(e)!=t.vert&&gn(e)!=t.horiz&&St(t.cm,Wt)(e)};wr(this.vert,"mousedown",i),wr(this.horiz,"mousedown",i)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},m.prototype),g.prototype=Pn({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),e.scrollbarModel={"native":m,"null":g},$.prototype.signal=function(e,t){wn(e,t)&&this.events.push(arguments)},$.prototype.finish=function(){for(var e=0;e<this.events.length;e++)kr.apply(null,this.events[e])};var Io=e.Pos=function(e,t){return this instanceof Io?(this.line=e,void(this.ch=t)):new Io(e,t)},Eo=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Po=null;te.prototype=Pn({init:function(e){function t(e){if(a.somethingSelected())Po=a.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,o.value=Po.join("\n"),Mr(o));else{var t=Z(a);Po=t.text,"cut"==e.type?a.setSelections(t.ranges,null,Tr):(i.prevInput="",o.value=t.text.join("\n"),Mr(o))}"cut"==e.type&&(a.state.cutIncoming=!0)}var i=this,a=this.cm,n=this.wrapper=ie(),o=this.textarea=n.firstChild;e.wrapper.insertBefore(n,e.wrapper.firstChild),Ao&&(o.style.width="0px"),wr(o,"input",function(){po&&ho>=9&&i.hasSelection&&(i.hasSelection=null),i.poll()}),wr(o,"paste",function(){if(fo&&!a.state.fakedLastChar&&!(new Date-a.state.lastMiddleDown<200)){var e=o.selectionStart,t=o.selectionEnd;o.value+="$",o.selectionEnd=t,o.selectionStart=e,a.state.fakedLastChar=!0}a.state.pasteIncoming=!0,i.fastPoll()}),wr(o,"cut",t),wr(o,"copy",t),wr(e.scroller,"paste",function(t){Ht(e,t)||(a.state.pasteIncoming=!0,i.focus())}),wr(e.lineSpace,"selectstart",function(t){Ht(e,t)||_r(t)})},prepareSelection:function(){var e=this.cm,t=e.display,i=e.doc,a=Pe(e);if(e.options.moveInputWithCursor){var n=ct(e,i.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),r=t.lineDiv.getBoundingClientRect();a.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+r.top-o.top)),a.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+r.left-o.left))}return a},showSelection:function(e){var t=this.cm,i=t.display;zn(i.cursorDiv,e.cursors),zn(i.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,i,a=this.cm,n=a.doc;if(a.somethingSelected()){this.prevInput="";var o=n.sel.primary();t=Yr&&(o.to().line-o.from().line>100||(i=a.getSelection()).length>1e3);var r=t?"-":i||a.getSelection();this.textarea.value=r,a.state.focused&&Mr(this.textarea),po&&ho>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",po&&ho>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!wo||Fn()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){var a=i.poll();a||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,e))}var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,i=this.prevInput;if(!e.state.focused||Br(t)&&!i||X(e)||e.options.disableInput||e.state.keySeq)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var a=t.value;if(a==i&&!e.somethingSelected())return!1;if(po&&ho>=9&&this.hasSelection===a||xo&&/[\uf700-\uf7ff]/.test(a))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var n=a.charCodeAt(0);if(8203!=n||i||(i="\u200b"),8666==n)return this.reset(),this.cm.execCommand("undo")}for(var o=0,r=Math.min(i.length,a.length);o<r&&i.charCodeAt(o)==a.charCodeAt(o);)++o;var s=this;return Ct(e,function(){Q(e,a.slice(o),i.length-o),a.length>1e3||a.indexOf("\n")>-1?t.value=s.prevInput="":s.prevInput=a}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){po&&ho>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=r.selectionStart){var e=n.somethingSelected(),t="\u200b"+(e?r.value:"");r.value="\u21da",r.value=t,a.prevInput=e?"":"\u200b",r.selectionStart=1,r.selectionEnd=t.length,o.selForContextMenu=n.doc.sel}}function i(){if(a.contextMenuPending=!1,a.wrapper.style.position="relative",r.style.cssText=c,po&&ho<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=r.selectionStart){(!po||po&&ho<9)&&t();var e=0,i=function(){o.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"\u200b"==a.prevInput?St(n,ir.selectAll)(n):e++<10?o.detectingSelectAll=setTimeout(i,500):o.input.reset()};o.detectingSelectAll=setTimeout(i,200)}}var a=this,n=a.cm,o=n.display,r=a.textarea,s=Vt(n,e),l=o.scroller.scrollTop;if(s&&!vo){var d=n.options.resetSelectionOnContextMenu;d&&n.doc.sel.contains(s)==-1&&St(n,$e)(n.doc,pe(s),Tr);var c=r.style.cssText;if(a.wrapper.style.position="absolute",r.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(po?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",fo)var u=window.scrollY;if(o.input.focus(),fo&&window.scrollTo(null,u),o.input.reset(),n.somethingSelected()||(r.value=a.prevInput=" "),a.contextMenuPending=!0,o.selForContextMenu=n.doc.sel,clearTimeout(o.detectingSelectAll),po&&ho>=9&&t(),So){Ar(e);var p=function(){xr(window,"mouseup",p),setTimeout(i,20)};wr(window,"mouseup",p)}else setTimeout(i,50)}},setUneditable:In,needsContentAttribute:!1},te.prototype),ae.prototype=Pn({init:function(e){function t(e){if(a.somethingSelected())Po=a.getSelections(),"cut"==e.type&&a.replaceSelection("",null,"cut");else{var t=Z(a);Po=t.text,"cut"==e.type&&a.operation(function(){a.setSelections(t.ranges,0,Tr),a.replaceSelection("",null,"cut")})}if(e.clipboardData&&!Ao)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Po.join("\n"));else{var i=ie(),n=i.firstChild;a.display.lineSpace.insertBefore(i,a.display.lineSpace.firstChild),n.value=Po.join("\n");var o=document.activeElement;Mr(n),setTimeout(function(){a.display.lineSpace.removeChild(i),o.focus()},50)}}var i=this,a=i.cm,n=i.div=e.lineDiv;n.contentEditable="true",ee(n),wr(n,"paste",function(e){var t=e.clipboardData&&e.clipboardData.getData("text/plain");t&&(e.preventDefault(),a.replaceSelection(t,null,"paste"))}),wr(n,"compositionstart",function(e){var t=e.data;if(i.composing={sel:a.doc.sel,data:t,startData:t},t){var n=a.doc.sel.primary(),o=a.getLine(n.head.line),r=o.indexOf(t,Math.max(0,n.head.ch-t.length));r>-1&&r<=n.head.ch&&(i.composing.sel=pe(Io(n.head.line,r),Io(n.head.line,r+t.length)))}}),wr(n,"compositionupdate",function(e){i.composing.data=e.data}),wr(n,"compositionend",function(e){var t=i.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||i.applyComposition(t),i.composing==t&&(i.composing=null)},50))}),wr(n,"touchstart",function(){i.forceCompositionEnd()}),wr(n,"input",function(){i.composing||i.pollContent()||Ct(i.cm,function(){Pt(a)})}),wr(n,"copy",t),wr(n,"cut",t)},prepareSelection:function(){var e=Pe(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),i=re(this.cm,e.anchorNode,e.anchorOffset),a=re(this.cm,e.focusNode,e.focusOffset);if(!i||i.bad||!a||a.bad||0!=Eo(J(i,a),t.from())||0!=Eo(K(i,a),t.to())){var n=ne(this.cm,t.from()),o=ne(this.cm,t.to());if(n||o){var r=this.cm.display.view,s=e.rangeCount&&e.getRangeAt(0);if(n){if(!o){var l=r[r.length-1].measure,d=l.maps?l.maps[l.maps.length-1]:l.map;o={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}}else n={node:r[0].measure.map[2],offset:0};try{var c=Or(n.node,n.offset,o.offset,o.node)}catch(u){}c&&(e.removeAllRanges(),e.addRange(c),s&&null==e.anchorNode?e.addRange(s):lo&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){zn(this.cm.display.cursorDiv,e.cursors),zn(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Rr(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():Ct(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var i=re(t,e.anchorNode,e.anchorOffset),a=re(t,e.focusNode,e.focusOffset);i&&a&&Ct(t,function(){$e(t.doc,pe(i,a),Tr),(i.bad||a.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,i=e.doc.sel.primary(),a=i.from(),n=i.to();if(a.line<t.viewFrom||n.line>t.viewTo-1)return!1;var o;if(a.line==t.viewFrom||0==(o=Lt(e,a.line)))var r=Ja(t.view[0].line),s=t.view[0].node;else var r=Ja(t.view[o].line),s=t.view[o-1].node.nextSibling;var l=Lt(e,n.line);if(l==t.view.length-1)var d=t.viewTo-1,c=t.view[l].node;else var d=Ja(t.view[l+1].line)-1,c=t.view[l+1].node.previousSibling;for(var u=Ur(le(e,s,c,r,d)),p=Ba(e.doc,Io(r,0),Io(d,Ua(e.doc,d).text.length));u.length>1&&p.length>1;)if(Sn(u)==Sn(p))u.pop(),p.pop(),d--;else{if(u[0]!=p[0])break;u.shift(),p.shift(),r++}for(var h=0,f=0,m=u[0],g=p[0],v=Math.min(m.length,g.length);h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var b=Sn(u),_=Sn(p),y=Math.min(b.length-(1==u.length?h:0),_.length-(1==p.length?h:0));f<y&&b.charCodeAt(b.length-f-1)==_.charCodeAt(_.length-f-1);)++f;u[u.length-1]=b.slice(0,b.length-f),u[0]=u[0].slice(h);var A=Io(r,h),w=Io(d,p.length?Sn(p).length-f:0);return u.length>1||u[0]||Eo(A,w)?(Ci(e.doc,u,A,w,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){e.data&&e.data!=e.startData&&St(this.cm,Q)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.setAttribute("contenteditable","false")},onKeyPress:function(e){e.preventDefault(),St(this.cm,Q)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},onContextMenu:In,resetPosition:In,needsContentAttribute:!0},ae.prototype),e.inputStyles={textarea:te,contenteditable:ae},de.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],a=e.ranges[t];if(0!=Eo(i.anchor,a.anchor)||0!=Eo(i.head,a.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ce(Y(this.ranges[t].anchor),Y(this.ranges[t].head));return new de(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var a=this.ranges[i];if(Eo(t,a.from())>=0&&Eo(e,a.to())<=0)return i}return-1}},ce.prototype={from:function(){return J(this.anchor,this.head)},to:function(){return K(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Mo,Oo,Lo,No={left:0,right:0,top:0,bottom:0},jo=null,Ro=0,zo=0,Fo=0,qo=null;po?qo=-.53:lo?qo=15:go?qo=-.7:bo&&(qo=-1/3);var Ho=function(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}};e.wheelEventPixels=function(e){var t=Ho(e);return t.x*=qo,t.y*=qo,t};var Vo=new kn,Wo=null,Uo=e.changeEnd=function(e){return e.text?Io(e.from.line+e.text.length-1,Sn(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,a=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Yo.hasOwnProperty(e)&&St(this,Yo[e])(this,t,a))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](qi(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Tt(function(t,i){var a=t.token?t:e.getMode(this.options,t);if(a.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:a,modeSpec:t,opaque:i&&i.opaque}),this.state.modeGen++,Pt(this)}),removeOverlay:Tt(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var a=t[i].modeSpec;if(a==e||"string"==typeof e&&a.name==e)return t.splice(i,1),this.state.modeGen++,void Pt(this)}}),indentLine:Tt(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ge(this.doc,e)&&Oi(this,e,t,i)}),indentSelection:Tt(function(e){for(var t=this.doc.sel.ranges,i=-1,a=0;a<t.length;a++){var n=t[a];if(n.empty())n.head.line>i&&(Oi(this,n.head.line,e,!0),i=n.head.line,a==this.doc.sel.primIndex&&Pi(this));else{var o=n.from(),r=n.to(),s=Math.max(i,o.line);i=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1;for(var l=s;l<i;++l)Oi(this,l,e);var d=this.doc.sel.ranges;0==o.ch&&t.length==d.length&&d[a].from().ch>0&&Ae(this.doc,a,new ce(o,d[a].to()),Tr)}}}),getTokenAt:function(e,t){return Ca(this,e,t)},getLineTokens:function(e,t){return Ca(this,Io(e),t,!0)},getTokenTypeAt:function(e){e=fe(this.doc,e);var t,i=Da(this,Ua(this.doc,e.line)),a=0,n=(i.length-1)/2,o=e.ch;if(0==o)t=i[2];else for(;;){var r=a+n>>1;if((r?i[2*r-1]:0)>=o)n=r;else{if(!(i[2*r+1]<o)){t=i[2*r+2];break}a=r+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(t).state).mode:i},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Zo.hasOwnProperty(t))return i;var a=Zo[t],n=this.getModeAt(e);if("string"==typeof n[t])a[n[t]]&&i.push(a[n[t]]);else if(n[t])for(var o=0;o<n[t].length;o++){var r=a[n[t][o]];r&&i.push(r)}else n.helperType&&a[n.helperType]?i.push(a[n.helperType]):a[n.name]&&i.push(a[n.name]);for(var o=0;o<a._global.length;o++){var s=a._global[o];s.pred(n,this)&&Tn(i,s.val)==-1&&i.push(s.val)}return i},getStateAfter:function(e,t){var i=this.doc;return e=he(i,null==e?i.first+i.size-1:e),ze(this,e+1,t)},cursorCoords:function(e,t){var i,a=this.doc.sel.primary();return i=null==e?a.head:"object"==typeof e?fe(this.doc,e):e?a.from():a.to(),ct(this,i,t||"page")},charCoords:function(e,t){return dt(this,fe(this.doc,e),t||"page")},coordsChar:function(e,t){return e=lt(this,e,t||"page"),ht(this,e.left,e.top)},lineAtHeight:function(e,t){return e=lt(this,{top:e,left:0},t||"page").top,Ga(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i=!1,a=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>a&&(e=a,i=!0);var n=Ua(this.doc,e);return st(this,n,{top:0,left:0},t||"page").top+(i?this.doc.height-Xa(n):0)},defaultTextHeight:function(){return mt(this.display)},defaultCharWidth:function(){return gt(this.display)},setGutterMarker:Tt(function(e,t,i){return Li(this.doc,e,"gutter",function(e){var a=e.gutterMarkers||(e.gutterMarkers={});return a[t]=i,!i&&Ln(a)&&(e.gutterMarkers=null),!0})}),clearGutter:Tt(function(e){var t=this,i=t.doc,a=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,Mt(t,a,"gutter"),Ln(i.gutterMarkers)&&(i.gutterMarkers=null)),++a})}),lineInfo:function(e){if("number"==typeof e){if(!ge(this.doc,e))return null;var t=e;if(e=Ua(this.doc,e),!e)return null}else{var t=Ja(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,a,n){var o=this.display;e=ct(this,fe(this.doc,e));var r=e.bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==a)r=e.top;else if("above"==a||"near"==a){var l=Math.max(o.wrapper.clientHeight,this.doc.height),d=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==a||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?r=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(r=e.bottom),s+t.offsetWidth>d&&(s=d-t.offsetWidth)}t.style.top=r+"px",t.style.left=t.style.right="","right"==n?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?s=0:"middle"==n&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),i&&Di(this,s,r,s+t.offsetWidth,r+t.offsetHeight)},triggerOnKeyDown:Tt(ri),triggerOnKeyPress:Tt(di),triggerOnKeyUp:li,execCommand:function(e){if(ir.hasOwnProperty(e))return ir[e](this)},findPosH:function(e,t,i,a){var n=1;t<0&&(n=-1,t=-t);for(var o=0,r=fe(this.doc,e);o<t&&(r=ji(this.doc,r,n,i,a),!r.hitSide);++o);return r},moveH:Tt(function(e,t){var i=this;i.extendSelectionsBy(function(a){return i.display.shift||i.doc.extend||a.empty()?ji(i.doc,a.head,e,t,i.options.rtlMoveVisually):e<0?a.from():a.to()},Ir)}),deleteH:Tt(function(e,t){var i=this.doc.sel,a=this.doc;i.somethingSelected()?a.replaceSelection("",null,"+delete"):Ni(this,function(i){var n=ji(a,i.head,e,t,!1);return e<0?{from:n,to:i.head}:{from:i.head,to:n}})}),findPosV:function(e,t,i,a){var n=1,o=a;t<0&&(n=-1,t=-t);for(var r=0,s=fe(this.doc,e);r<t;++r){var l=ct(this,s,"div");if(null==o?o=l.left:l.left=o,s=Ri(this,l,n,i),s.hitSide)break}return s},moveV:Tt(function(e,t){var i=this,a=this.doc,n=[],o=!i.display.shift&&!a.extend&&a.sel.somethingSelected();if(a.extendSelectionsBy(function(r){if(o)return e<0?r.from():r.to();var s=ct(i,r.head,"div");null!=r.goalColumn&&(s.left=r.goalColumn),n.push(s.left);var l=Ri(i,s,e,t);return"page"==t&&r==a.sel.primary()&&Ei(i,null,dt(i,l,"div").top-s.top),l},Ir),n.length)for(var r=0;r<a.sel.ranges.length;r++)a.sel.ranges[r].goalColumn=n[r]}),findWordAt:function(e){var t=this.doc,i=Ua(t,e.line).text,a=e.ch,n=e.ch;if(i){var o=this.getHelper(e,"wordChars");(e.xRel<0||n==i.length)&&a?--a:++n;for(var r=i.charAt(a),s=On(r,o)?function(e){return On(e,o)}:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!On(e)};a>0&&s(i.charAt(a-1));)--a;for(;n<i.length&&s(i.charAt(n));)++n}return new ce(Io(e.line,a),Io(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Hr(this.display.cursorDiv,"CodeMirror-overwrite"):qr(this.display.cursorDiv,"CodeMirror-overwrite"),kr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Fn()},scrollTo:Tt(function(e,t){null==e&&null==t||Mi(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ve(this)-this.display.barHeight,width:e.scrollWidth-Ve(this)-this.display.barWidth,clientHeight:Ue(this),clientWidth:We(this)}},scrollIntoView:Tt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Io(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Mi(this),this.curOp.scrollToPos=e;else{var i=Ii(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:Tt(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var a=this;null!=e&&(a.display.wrapper.style.width=i(e)),null!=t&&(a.display.wrapper.style.height=i(t)),a.options.lineWrapping&&at(this);var n=a.display.viewFrom;a.doc.iter(n,a.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Mt(a,n,"widget");break}++n}),a.curOp.forceUpdate=!0,kr(a,"refresh",this)}),operation:function(e){return Ct(this,e)},refresh:Tt(function(){var e=this.display.cachedTextHeight;Pt(this),this.curOp.forceUpdate=!0,nt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),c(this),(null==e||Math.abs(e-mt(this.display))>.5)&&r(this),kr(this,"refresh",this)}),swapDoc:Tt(function(e){var t=this.doc;return t.cm=null,Wa(this,e),nt(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,bn(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},xn(e);var Bo=e.defaults={},Yo=e.optionHandlers={},Ko=e.Init={toString:function(){return"CodeMirror.Init"}};zi("value","",function(e,t){e.setValue(t)},!0),zi("mode",null,function(e,t){e.doc.modeOption=t,i(e)},!0),zi("indentUnit",2,i,!0),zi("indentWithTabs",!1),zi("smartIndent",!0),zi("tabSize",4,function(e){a(e),nt(e),Pt(e)},!0),zi("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,i,a){t.state.specialChars=new RegExp(i.source+(i.test("\t")?"":"|\t"),"g"),a!=e.Init&&t.refresh()}),zi("specialCharPlaceholder",Ma,function(e){e.refresh()},!0),zi("electricChars",!0),zi("inputStyle",wo?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),zi("rtlMoveVisually",!ko),zi("wholeLineUpdateBefore",!0),zi("theme","default",function(e){s(e),l(e)},!0),zi("keyMap","default",function(t,i,a){var n=qi(i),o=a!=e.Init&&qi(a);o&&o.detach&&o.detach(t,n),n.attach&&n.attach(t,o||null)}),zi("extraKeys",null),zi("lineWrapping",!1,n,!0),zi("gutters",[],function(e){h(e.options),l(e)},!0),zi("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?k(e.display)+"px":"0",e.refresh()},!0),zi("coverGutterNextToScrollbar",!1,function(e){b(e)},!0),zi("scrollbarStyle","native",function(e){v(e),b(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),zi("lineNumbers",!1,function(e){h(e.options),l(e)},!0),zi("firstLineNumber",1,l,!0),zi("lineNumberFormatter",function(e){return e},l,!0),zi("showCursorWhenSelecting",!1,Ee,!0),zi("resetSelectionOnContextMenu",!0),zi("readOnly",!1,function(e,t){"nocursor"==t?(pi(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||e.display.input.reset())}),zi("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),zi("dragDrop",!0,Ft),zi("cursorBlinkRate",530),zi("cursorScrollMargin",0),zi("cursorHeight",1,Ee,!0),zi("singleCursorHeightPerLine",!0,Ee,!0),zi("workTime",100),zi("workDelay",100),zi("flattenSpans",!0,a,!0),zi("addModeClass",!1,a,!0),zi("pollInterval",100),zi("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),zi("historyEventDelay",1250),zi("viewportMargin",10,function(e){e.refresh()},!0),zi("maxHighlightLength",1e4,a,!0),zi("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),zi("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),zi("autofocus",null);var Jo=e.modes={},Go=e.mimeModes={};e.defineMode=function(t,i){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),Jo[t]=i},e.defineMIME=function(e,t){Go[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Go.hasOwnProperty(t))t=Go[t];else if(t&&"string"==typeof t.name&&Go.hasOwnProperty(t.name)){var i=Go[t.name];"string"==typeof i&&(i={name:i}),t=En(i,t),t.name=i.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,i){var i=e.resolveMode(i),a=Jo[i.name];if(!a)return e.getMode(t,"text/plain");var n=a(t,i);if(Xo.hasOwnProperty(i.name)){var o=Xo[i.name];for(var r in o)o.hasOwnProperty(r)&&(n.hasOwnProperty(r)&&(n["_"+r]=n[r]),n[r]=o[r])}if(n.name=i.name,i.helperType&&(n.helperType=i.helperType),i.modeProps)for(var r in i.modeProps)n[r]=i.modeProps[r];return n},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Xo=e.modeExtensions={};e.extendMode=function(e,t){
var i=Xo.hasOwnProperty(e)?Xo[e]:Xo[e]={};Pn(t,i)},e.defineExtension=function(t,i){e.prototype[t]=i},e.defineDocExtension=function(e,t){gr.prototype[e]=t},e.defineOption=zi;var Qo=[];e.defineInitHook=function(e){Qo.push(e)};var Zo=e.helpers={};e.registerHelper=function(t,i,a){Zo.hasOwnProperty(t)||(Zo[t]=e[t]={_global:[]}),Zo[t][i]=a},e.registerGlobalHelper=function(t,i,a,n){e.registerHelper(t,i,n),Zo[t]._global.push({pred:a,val:n})};var er=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var a in t){var n=t[a];n instanceof Array&&(n=n.concat([])),i[a]=n}return i},tr=e.startState=function(e,t,i){return!e.startState||e.startState(t,i)};e.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var ir=e.commands={selectAll:function(e){e.setSelection(Io(e.firstLine(),0),Io(e.lastLine()),Tr)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Tr)},killLine:function(e){Ni(e,function(t){if(t.empty()){var i=Ua(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:Io(t.head.line+1,0)}:{from:t.head,to:Io(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Ni(e,function(t){return{from:Io(t.from().line,0),to:fe(e.doc,Io(t.to().line+1,0))}})},delLineLeft:function(e){Ni(e,function(e){return{from:Io(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Ni(e,function(t){var i=e.charCoords(t.head,"div").top+5,a=e.coordsChar({left:0,top:i},"div");return{from:a,to:t.from()}})},delWrappedLineRight:function(e){Ni(e,function(t){var i=e.charCoords(t.head,"div").top+5,a=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:a}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(Io(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Io(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return eo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return io(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return to(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},Ir)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},Ir)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5,a=e.coordsChar({left:0,top:i},"div");return a.ch<e.getLine(a.line).search(/\S/)?io(e,t.head):a},Ir)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),a=e.options.tabSize,n=0;n<i.length;n++){var o=i[n].from(),r=Er(e.getLine(o.line),o.ch,a);t.push(new Array(a-r%a+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Ct(e,function(){for(var t=e.listSelections(),i=[],a=0;a<t.length;a++){var n=t[a].head,o=Ua(e.doc,n.line).text;if(o)if(n.ch==o.length&&(n=new Io(n.line,n.ch-1)),n.ch>0)n=new Io(n.line,n.ch+1),e.replaceRange(o.charAt(n.ch-1)+o.charAt(n.ch-2),Io(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var r=Ua(e.doc,n.line-1).text;r&&e.replaceRange(o.charAt(0)+"\n"+r.charAt(r.length-1),Io(n.line-1,r.length-1),Io(n.line,1),"+transpose")}i.push(new ce(n,n))}e.setSelections(i)})},newlineAndIndent:function(e){Ct(e,function(){for(var t=e.listSelections().length,i=0;i<t;i++){var a=e.listSelections()[i];e.replaceRange("\n",a.anchor,a.head,"+input"),e.indentLine(a.from().line+1,null,!0),Pi(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},ar=e.keyMap={};ar.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ar.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ar.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},ar.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ar["default"]=xo?ar.macDefault:ar.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==a){delete e[i];continue}for(var n=Dn(i.split(" "),Fi),o=0;o<n.length;o++){var r,s;o==n.length-1?(s=i,r=a):(s=n.slice(0,o+1).join(" "),r="...");var l=t[s];if(l){if(l!=r)throw new Error("Inconsistent bindings for "+s)}else t[s]=r}delete e[i]}for(var d in t)e[d]=t[d];return e};var nr=e.lookupKey=function(e,t,i,a){t=qi(t);var n=t.call?t.call(e,a):t[e];if(n===!1)return"nothing";if("..."===n)return"multi";if(null!=n&&i(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return nr(e,t.fallthrough,i,a);for(var o=0;o<t.fallthrough.length;o++){var r=nr(e,t.fallthrough[o],i,a);if(r)return r}}},or=e.isModifierKey=function(e){var t="string"==typeof e?e:Jr[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},rr=e.keyName=function(e,t){if(vo&&34==e.keyCode&&e["char"])return!1;var i=Jr[e.keyCode],a=i;return null!=a&&!e.altGraphKey&&(e.altKey&&"Alt"!=i&&(a="Alt-"+a),(Co?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(a="Ctrl-"+a),(Co?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(a="Cmd-"+a),!t&&e.shiftKey&&"Shift"!=i&&(a="Shift-"+a),a)};e.fromTextArea=function(t,i){function a(){t.value=d.getValue()}if(i=i?Pn(i):{},i.value=t.value,!i.tabindex&&t.tabIndex&&(i.tabindex=t.tabIndex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var n=Fn();i.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}if(t.form&&(wr(t.form,"submit",a),!i.leaveSubmitMethodAlone)){var o=t.form,r=o.submit;try{var s=o.submit=function(){a(),o.submit=r,o.submit(),o.submit=s}}catch(l){}}i.finishInit=function(e){e.save=a,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,a(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(xr(t.form,"submit",a),"function"==typeof t.form.submit&&(t.form.submit=r))}},t.style.display="none";var d=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},i);return d};var sr=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};sr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else var i=t&&(e.test?e.test(t):e(t));if(i)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Er(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Er(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Er(this.string,null,this.tabSize)-(this.lineStart?Er(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&t!==!1&&(this.pos+=a[0].length),a)}var n=function(e){return i?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(n(o)==n(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var lr=0,dr=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++lr};xn(dr),dr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&vt(e),wn(this,"clear")){var i=this.find();i&&bn(this,"clear",i.from,i.to)}for(var a=null,n=null,o=0;o<this.lines.length;++o){var r=this.lines[o],s=Ki(r.markedSpans,this);e&&!this.collapsed?Mt(e,Ja(r),"text"):e&&(null!=s.to&&(n=Ja(r)),null!=s.from&&(a=Ja(r))),r.markedSpans=Ji(r.markedSpans,s),null==s.from&&this.collapsed&&!ga(this.doc,r)&&e&&Ka(r,mt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=pa(this.lines[o]),d=u(l);d>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=d,e.display.maxLineChanged=!0)}null!=a&&e&&this.collapsed&&Pt(e,a,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Te(e.doc)),e&&bn(e,"markerCleared",e,this),t&&_t(e),this.parent&&this.parent.clear()}},dr.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var i,a,n=0;n<this.lines.length;++n){var o=this.lines[n],r=Ki(o.markedSpans,this);if(null!=r.from&&(i=Io(t?o:Ja(o),r.from),e==-1))return i;if(null!=r.to&&(a=Io(t?o:Ja(o),r.to),1==e))return a}return i&&{from:i,to:a}},dr.prototype.changed=function(){var e=this.find(-1,!0),t=this,i=this.doc.cm;e&&i&&Ct(i,function(){var a=e.line,n=Ja(e.line),o=Ge(i,n);if(o&&(it(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!ga(t.doc,a)&&null!=t.height){var r=t.height;t.height=null;var s=_a(t)-r;s&&Ka(a,a.height+s)}})},dr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&Tn(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},dr.prototype.detachLine=function(e){if(this.lines.splice(Tn(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var lr=0,cr=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};xn(cr),cr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();bn(this,"clear")}},cr.prototype.find=function(e,t){return this.primary.find(e,t)};var ur=e.LineWidget=function(e,t,i){if(i)for(var a in i)i.hasOwnProperty(a)&&(this[a]=i[a]);this.doc=e,this.node=t};xn(ur),ur.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,a=Ja(i);if(null!=a&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var o=_a(this);Ka(i,Math.max(0,i.height-o)),e&&Ct(e,function(){ba(e,i,-o),Mt(e,a,"widget")})}},ur.prototype.changed=function(){var e=this.height,t=this.doc.cm,i=this.line;this.height=null;var a=_a(this)-e;a&&(Ka(i,i.height+a),t&&Ct(t,function(){t.curOp.forceUpdate=!0,ba(t,i,a)}))};var pr=e.Line=function(e,t,i){this.text=e,na(this,t),this.height=i?i(this):1};xn(pr),pr.prototype.lineNo=function(){return Ja(this)};var hr={},fr={};qa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,a=e+t;i<a;++i){var n=this.lines[i];this.height-=n.height,wa(n),bn(n,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var a=0;a<t.length;++a)t[a].parent=this},iterN:function(e,t,i){for(var a=e+t;e<a;++e)if(i(this.lines[e]))return!0}},Ha.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var a=this.children[i],n=a.chunkSize();if(e<n){var o=Math.min(t,n-e),r=a.height;if(a.removeInner(e,o),this.height-=r-a.height,n==o&&(this.children.splice(i--,1),a.parent=null),0==(t-=o))break;e=0}else e-=n}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof qa))){var s=[];this.collapse(s),this.children=[new qa(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var a=0;a<this.children.length;++a){var n=this.children[a],o=n.chunkSize();if(e<=o){if(n.insertInner(e,t,i),n.lines&&n.lines.length>50){for(;n.lines.length>50;){var r=n.lines.splice(n.lines.length-25,25),s=new qa(r);n.height-=s.height,this.children.splice(a+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new Ha(t);if(e.parent){e.size-=i.size,e.height-=i.height;var a=Tn(e.parent.children,e);e.parent.children.splice(a+1,0,i)}else{var n=new Ha(e.children);n.parent=e,e.children=[n,i],e=n}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var a=0;a<this.children.length;++a){var n=this.children[a],o=n.chunkSize();if(e<o){var r=Math.min(t,o-e);if(n.iterN(e,r,i))return!0;if(0==(t-=r))break;e=0}else e-=o}}};var mr=0,gr=e.Doc=function(e,t,i){if(!(this instanceof gr))return new gr(e,t,i);null==i&&(i=0),Ha.call(this,[new qa([new pr("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var a=Io(i,0);this.sel=pe(a),this.history=new Za(null),this.id=++mr,this.modeOption=t,"string"==typeof e&&(e=Ur(e)),Fa(this,{from:a,to:a,text:e}),$e(this,pe(a),Tr)};gr.prototype=En(Ha.prototype,{constructor:gr,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,a=0;a<t.length;++a)i+=t[a].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ya(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:Dt(function(e){var t=Io(this.first,0),i=this.first+this.size-1;yi(this,{from:t,to:Io(i,Ua(this,i).text.length),text:Ur(e),origin:"setValue",full:!0},!0),$e(this,pe(t))}),replaceRange:function(e,t,i,a){t=fe(this,t),i=i?fe(this,i):t,Ci(this,e,t,i,a)},getRange:function(e,t,i){var a=Ba(this,fe(this,e),fe(this,t));return i===!1?a:a.join(i||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ge(this,e))return Ua(this,e)},getLineNumber:function(e){return Ja(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ua(this,e)),pa(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return fe(this,e)},getCursor:function(e){var t,i=this.sel.primary();return t=null==e||"head"==e?i.head:"anchor"==e?i.anchor:"end"==e||"to"==e||e===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Dt(function(e,t,i){we(this,fe(this,"number"==typeof e?Io(e,t||0):e),null,i)}),setSelection:Dt(function(e,t,i){we(this,fe(this,e),fe(this,t||e),i)}),extendSelection:Dt(function(e,t,i){_e(this,fe(this,e),t&&fe(this,t),i)}),extendSelections:Dt(function(e,t){ye(this,ve(this,e,t))}),extendSelectionsBy:Dt(function(e,t){ye(this,Dn(this.sel.ranges,e),t)}),setSelections:Dt(function(e,t,i){if(e.length){for(var a=0,n=[];a<e.length;a++)n[a]=new ce(fe(this,e[a].anchor),fe(this,e[a].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),$e(this,ue(n,t),i)}}),addSelection:Dt(function(e,t,i){var a=this.sel.ranges.slice(0);a.push(new ce(fe(this,e),fe(this,t||e))),$e(this,ue(a,a.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,a=0;a<i.length;a++){var n=Ba(this,i[a].from(),i[a].to());t=t?t.concat(n):n}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],i=this.sel.ranges,a=0;a<i.length;a++){var n=Ba(this,i[a].from(),i[a].to());e!==!1&&(n=n.join(e||"\n")),t[a]=n}return t},replaceSelection:function(e,t,i){for(var a=[],n=0;n<this.sel.ranges.length;n++)a[n]=e;this.replaceSelections(a,t,i||"+input")},replaceSelections:Dt(function(e,t,i){for(var a=[],n=this.sel,o=0;o<n.ranges.length;o++){var r=n.ranges[o];a[o]={from:r.from(),to:r.to(),text:Ur(e[o]),origin:i}}for(var s=t&&"end"!=t&&bi(this,a,t),o=a.length-1;o>=0;o--)yi(this,a[o]);s?ke(this,s):this.cm&&Pi(this.cm)}),undo:Dt(function(){wi(this,"undo")}),redo:Dt(function(){wi(this,"redo")}),undoSelection:Dt(function(){wi(this,"undo",!0)}),redoSelection:Dt(function(){wi(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,a=0;a<e.done.length;a++)e.done[a].ranges||++t;for(var a=0;a<e.undone.length;a++)e.undone[a].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new Za(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:un(this.history.done),undone:un(this.history.undone)}},setHistory:function(e){var t=this.history=new Za(this.history.maxGeneration);t.done=un(e.done.slice(0),null,!0),t.undone=un(e.undone.slice(0),null,!0)},addLineClass:Dt(function(e,t,i){return Li(this,e,"gutter"==t?"gutter":"class",function(e){var a="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[a]){if(qn(i).test(e[a]))return!1;e[a]+=" "+i}else e[a]=i;return!0})}),removeLineClass:Dt(function(e,t,i){return Li(this,e,"gutter"==t?"gutter":"class",function(e){var a="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",n=e[a];if(!n)return!1;if(null==i)e[a]=null;else{var o=n.match(qn(i));if(!o)return!1;var r=o.index+o[0].length;e[a]=n.slice(0,o.index)+(o.index&&r!=n.length?" ":"")+n.slice(r)||null}return!0})}),addLineWidget:Dt(function(e,t,i){return ya(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Hi(this,fe(this,e),fe(this,t),i,"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=fe(this,e),Hi(this,e,e,i,"bookmark")},findMarksAt:function(e){e=fe(this,e);var t=[],i=Ua(this,e.line).markedSpans;if(i)for(var a=0;a<i.length;++a){var n=i[a];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=fe(this,e),t=fe(this,t);var a=[],n=e.line;return this.iter(e.line,t.line+1,function(o){var r=o.markedSpans;if(r)for(var s=0;s<r.length;s++){var l=r[s];n==e.line&&e.ch>l.to||null==l.from&&n!=e.line||n==t.line&&l.from>t.ch||i&&!i(l.marker)||a.push(l.marker.parent||l.marker)}++n}),a},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var a=0;a<i.length;++a)null!=i[a].from&&e.push(i[a].marker)}),e},posFromIndex:function(e){var t,i=this.first;return this.iter(function(a){var n=a.text.length+1;return n>e?(t=e,!0):(e-=n,void++i)}),fe(this,Io(i,t))},indexFromPos:function(e){e=fe(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new gr(Ya(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var a=new gr(Ya(this,t,i),e.mode||this.modeOption,t);return e.sharedHist&&(a.history=this.history),(this.linked||(this.linked=[])).push({doc:a,sharedHist:e.sharedHist}),a.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Ui(a,Wi(this)),a},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){var a=this.linked[i];if(a.doc==t){this.linked.splice(i,1),t.unlinkDoc(this),Bi(Wi(this));break}}if(t.history==this.history){var n=[t.id];Va(t,function(e){n.push(e.id)},!0),t.history=new Za(null),t.history.done=un(this.history.done,n),t.history.undone=un(this.history.undone,n)}},iterLinkedDocs:function(e){Va(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),gr.prototype.eachLine=gr.prototype.iter;var vr="iter insert remove copy getEditor".split(" ");for(var br in gr.prototype)gr.prototype.hasOwnProperty(br)&&Tn(vr,br)<0&&(e.prototype[br]=function(e){return function(){return e.apply(this.doc,arguments)}}(gr.prototype[br]));xn(gr);var _r=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},yr=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Ar=e.e_stop=function(e){_r(e),yr(e)},wr=e.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var a=e._handlers||(e._handlers={}),n=a[t]||(a[t]=[]);n.push(i)}},xr=e.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var a=e._handlers&&e._handlers[t];if(!a)return;for(var n=0;n<a.length;++n)if(a[n]==i){a.splice(n,1);break}}},kr=e.signal=function(e,t){var i=e._handlers&&e._handlers[t];if(i)for(var a=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,a)},$r=null,Cr=30,Sr=e.Pass={toString:function(){return"CodeMirror.Pass"}},Tr={scroll:!1},Dr={origin:"*mouse"},Ir={origin:"+move"};kn.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Er=e.countColumn=function(e,t,i,a,n){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var o=a||0,r=n||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return r+(t-o);r+=s-o,r+=i-r%i,o=s+1}},Pr=[""],Mr=function(e){e.select()};Ao?Mr=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:po&&(Mr=function(e){try{e.select()}catch(t){}});var Or,Lr=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Nr=e.isWordChar=function(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Lr.test(e))},jr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Or=document.createRange?function(e,t,i,a){var n=document.createRange();return n.setEnd(a||e,i),n.setStart(e,t),n}:function(e,t,i){var a=document.body.createTextRange();try{a.moveToElementText(e.parentNode)}catch(n){return a}return a.collapse(!0),a.moveEnd("character",i),a.moveStart("character",t),a};var Rr=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};po&&ho<11&&(Fn=function(){try{return document.activeElement}catch(e){return document.body}});var zr,Fr,qr=e.rmClass=function(e,t){var i=e.className,a=qn(t).exec(i);if(a){var n=i.slice(a.index+a[0].length);e.className=i.slice(0,a.index)+(n?a[1]+n:"")}},Hr=e.addClass=function(e,t){var i=e.className;qn(t).test(i)||(e.className+=(i?" ":"")+t)},Vr=!1,Wr=function(){if(po&&ho<9)return!1;var e=jn("div");return"draggable"in e||"dragDrop"in e}(),Ur=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],a=e.length;t<=a;){var n=e.indexOf("\n",t);n==-1&&(n=e.length);var o=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),r=o.indexOf("\r");r!=-1?(i.push(o.slice(0,r)),t+=r+1):(i.push(o),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},Br=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(i){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Yr=function(){var e=jn("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Kr=null,Jr={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Jr,function(){for(var e=0;e<10;e++)Jr[e+48]=Jr[e+96]=String(e);for(var e=65;e<=90;e++)Jr[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Jr[e+111]=Jr[e+63235]="F"+e}();var Gr,Xr=function(){function e(e){return e<=247?i.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1773?a.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,i){this.level=e,this.from=t,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",a="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,r=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,d="L";return function(i){if(!n.test(i))return!1;for(var a,c=i.length,u=[],p=0;p<c;++p)u.push(a=e(i.charCodeAt(p)));for(var p=0,h=d;p<c;++p){var a=u[p];"m"==a?u[p]=h:h=a}for(var p=0,f=d;p<c;++p){var a=u[p];"1"==a&&"r"==f?u[p]="n":r.test(a)&&(f=a,"r"==a&&(u[p]="R"))}for(var p=1,h=u[0];p<c-1;++p){var a=u[p];"+"==a&&"1"==h&&"1"==u[p+1]?u[p]="1":","!=a||h!=u[p+1]||"1"!=h&&"n"!=h||(u[p]=h),h=a}for(var p=0;p<c;++p){var a=u[p];if(","==a)u[p]="N";else if("%"==a){for(var m=p+1;m<c&&"%"==u[m];++m);for(var g=p&&"!"==u[p-1]||m<c&&"1"==u[m]?"1":"N",v=p;v<m;++v)u[v]=g;p=m-1}}for(var p=0,f=d;p<c;++p){var a=u[p];"L"==f&&"1"==a?u[p]="L":r.test(a)&&(f=a)}for(var p=0;p<c;++p)if(o.test(u[p])){for(var m=p+1;m<c&&o.test(u[m]);++m);for(var b="L"==(p?u[p-1]:d),_="L"==(m<c?u[m]:d),g=b||_?"L":"R",v=p;v<m;++v)u[v]=g;p=m-1}for(var y,A=[],p=0;p<c;)if(s.test(u[p])){var w=p;for(++p;p<c&&s.test(u[p]);++p);A.push(new t(0,w,p))}else{var x=p,k=A.length;for(++p;p<c&&"L"!=u[p];++p);for(var v=x;v<p;)if(l.test(u[v])){x<v&&A.splice(k,0,new t(1,x,v));var $=v;for(++v;v<p&&l.test(u[v]);++v);A.splice(k,0,new t(2,$,v)),x=v}else++v;x<p&&A.splice(k,0,new t(1,x,p))}return 1==A[0].level&&(y=i.match(/^\s+/))&&(A[0].from=y[0].length,A.unshift(new t(0,0,y[0].length))),1==Sn(A).level&&(y=i.match(/\s+$/))&&(Sn(A).to-=y[0].length,A.push(new t(0,c-y[0].length,c))),A[0].level!=Sn(A).level&&A.push(new t(A[0].level,c,c)),A}}();return e.version="5.1.1",
e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.search(a);return t==-1?0:t}var i={},a=/[^\s\u00a0]/,n=e.Pos;e.commands.toggleComment=function(e){for(var t=1/0,i=e.listSelections(),a=null,o=i.length-1;o>=0;o--){var r=i[o].from(),s=i[o].to();r.line>=t||(s.line>=t&&(s=n(t,0)),t=r.line,null==a?e.uncomment(r,s)?a="un":(e.lineComment(r,s),a="line"):"un"==a?e.uncomment(r,s):e.lineComment(r,s))}},e.defineExtension("lineComment",function(e,o,r){r||(r=i);var s=this,l=s.getModeAt(e),d=r.lineComment||l.lineComment;if(!d)return void((r.blockCommentStart||l.blockCommentStart)&&(r.fullLines=!0,s.blockComment(e,o,r)));var c=s.getLine(e.line);if(null!=c){var u=Math.min(0!=o.ch||o.line==e.line?o.line+1:o.line,s.lastLine()+1),p=null==r.padding?" ":r.padding,h=r.commentBlankLines||e.line==o.line;s.operation(function(){if(r.indent)for(var i=c.slice(0,t(c)),o=e.line;o<u;++o){var l=s.getLine(o),f=i.length;(h||a.test(l))&&(l.slice(0,f)!=i&&(f=t(l)),s.replaceRange(i+d+p,n(o,0),n(o,f)))}else for(var o=e.line;o<u;++o)(h||a.test(s.getLine(o)))&&s.replaceRange(d+p,n(o,0))})}}),e.defineExtension("blockComment",function(e,t,o){o||(o=i);var r=this,s=r.getModeAt(e),l=o.blockCommentStart||s.blockCommentStart,d=o.blockCommentEnd||s.blockCommentEnd;if(!l||!d)return void((o.lineComment||s.lineComment)&&0!=o.fullLines&&r.lineComment(e,t,o));var c=Math.min(t.line,r.lastLine());c!=e.line&&0==t.ch&&a.test(r.getLine(c))&&--c;var u=null==o.padding?" ":o.padding;e.line>c||r.operation(function(){if(0!=o.fullLines){var i=a.test(r.getLine(c));r.replaceRange(u+d,n(c)),r.replaceRange(l+u,n(e.line,0));var p=o.blockCommentLead||s.blockCommentLead;if(null!=p)for(var h=e.line+1;h<=c;++h)(h!=c||i)&&r.replaceRange(p+u,n(h,0))}else r.replaceRange(d,t),r.replaceRange(l,e)})}),e.defineExtension("uncomment",function(e,t,o){o||(o=i);var r,s=this,l=s.getModeAt(e),d=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,s.lastLine()),c=Math.min(e.line,d),u=o.lineComment||l.lineComment,p=[],h=null==o.padding?" ":o.padding;e:if(u){for(var f=c;f<=d;++f){var m=s.getLine(f),g=m.indexOf(u);if(g>-1&&!/comment/.test(s.getTokenTypeAt(n(f,g+1)))&&(g=-1),g==-1&&(f!=d||f==c)&&a.test(m))break e;if(g>-1&&a.test(m.slice(0,g)))break e;p.push(m)}if(s.operation(function(){for(var e=c;e<=d;++e){var t=p[e-c],i=t.indexOf(u),a=i+u.length;i<0||(t.slice(a,a+h.length)==h&&(a+=h.length),r=!0,s.replaceRange("",n(e,i),n(e,a)))}}),r)return!0}var v=o.blockCommentStart||l.blockCommentStart,b=o.blockCommentEnd||l.blockCommentEnd;if(!v||!b)return!1;var _=o.blockCommentLead||l.blockCommentLead,y=s.getLine(c),A=d==c?y:s.getLine(d),w=y.indexOf(v),x=A.lastIndexOf(b);if(x==-1&&c!=d&&(A=s.getLine(--d),x=A.lastIndexOf(b)),w==-1||x==-1||!/comment/.test(s.getTokenTypeAt(n(c,w+1)))||!/comment/.test(s.getTokenTypeAt(n(d,x+1))))return!1;var k=y.lastIndexOf(v,e.ch),$=k==-1?-1:y.slice(0,e.ch).indexOf(b,k+v.length);if(k!=-1&&$!=-1&&$+b.length!=e.ch)return!1;$=A.indexOf(b,t.ch);var C=A.slice(t.ch).lastIndexOf(v,$-t.ch);return k=$==-1||C==-1?-1:t.ch+C,($==-1||k==-1||k==t.ch)&&(s.operation(function(){s.replaceRange("",n(d,x-(h&&A.slice(x-h.length,x)==h?h.length:0)),n(d,x+b.length));var e=w+v.length;if(h&&y.slice(e,e+h.length)==h&&(e+=h.length),s.replaceRange("",n(c,w),n(c,e)),_)for(var t=c+1;t<=d;++t){var i=s.getLine(t),o=i.indexOf(_);if(o!=-1&&!a.test(i.slice(0,o))){var r=o+_.length;h&&i.slice(r,r+h.length)==h&&(r+=h.length),s.replaceRange("",n(t,o),n(t,r))}}}),!0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,i){var a,n=e.getWrapperElement();return a=n.appendChild(document.createElement("div")),i?a.className="CodeMirror-dialog CodeMirror-dialog-bottom":a.className="CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?a.innerHTML=t:a.appendChild(t),a}function i(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(a,n,o){function r(e){if("string"==typeof e)u.value=e;else{if(d)return;d=!0,l.parentNode.removeChild(l),c.focus(),o.onClose&&o.onClose(l)}}o||(o={}),i(this,null);var s,l=t(this,a,o.bottom),d=!1,c=this,u=l.getElementsByTagName("input")[0];return u?(o.value&&(u.value=o.value,o.selectValueOnOpen!==!1&&u.select()),o.onInput&&e.on(u,"input",function(e){o.onInput(e,u.value,r)}),o.onKeyUp&&e.on(u,"keyup",function(e){o.onKeyUp(e,u.value,r)}),e.on(u,"keydown",function(t){o&&o.onKeyDown&&o.onKeyDown(t,u.value,r)||((27==t.keyCode||o.closeOnEnter!==!1&&13==t.keyCode)&&(u.blur(),e.e_stop(t),r()),13==t.keyCode&&n(u.value,t))}),$(u).focus(100)):(s=l.getElementsByTagName("button")[0])&&(e.on(s,"click",function(){r(),c.focus()}),o.closeOnBlur!==!1&&e.on(s,"blur",r),s.focus()),r}),e.defineExtension("openConfirm",function(a,n,o){function r(){d||(d=!0,s.parentNode.removeChild(s),c.focus())}i(this,null);var s=t(this,a,o&&o.bottom),l=s.getElementsByTagName("button"),d=!1,c=this,u=1;l[0].focus();for(var p=0;p<l.length;++p){var h=l[p];!function(t){e.on(h,"click",function(i){e.e_preventDefault(i),r(),t&&t(c)})}(n[p]),e.on(h,"blur",function(){--u,setTimeout(function(){u<=0&&r()},200)}),e.on(h,"focus",function(){++u})}}),e.defineExtension("openNotification",function(a,n){function o(){l||(l=!0,clearTimeout(r),s.parentNode.removeChild(s))}i(this,o);var r,s=t(this,a,n&&n.bottom),l=!1,d=n&&"undefined"!=typeof n.duration?n.duration:5e3;return e.on(s,"click",function(t){e.e_preventDefault(t),o()}),d&&(r=setTimeout(o,d)),o})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,a,n){var o=e.getLineHandle(t.line),l=t.ch-1,d=l>=0&&s[o.text.charAt(l)]||s[o.text.charAt(++l)];if(!d)return null;var c=">"==d.charAt(1)?1:-1;if(a&&c>0!=(l==t.ch))return null;var u=e.getTokenTypeAt(r(t.line,l+1)),p=i(e,r(t.line,l+(c>0?1:0)),c,u||null,n);return null==p?null:{from:r(t.line,l),to:p&&p.pos,match:p&&p.ch==d.charAt(0),forward:c>0}}function i(e,t,i,a,n){for(var o=n&&n.maxScanLineLength||1e4,l=n&&n.maxScanLines||1e3,d=[],c=n&&n.bracketRegex?n.bracketRegex:/[(){}[\]]/,u=i>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),p=t.line;p!=u;p+=i){var h=e.getLine(p);if(h){var f=i>0?0:h.length-1,m=i>0?h.length:-1;if(!(h.length>o))for(p==t.line&&(f=t.ch-(i<0?1:0));f!=m;f+=i){var g=h.charAt(f);if(c.test(g)&&(void 0===a||e.getTokenTypeAt(r(p,f+1))==a)){var v=s[g];if(">"==v.charAt(1)==i>0)d.push(g);else{if(!d.length)return{pos:r(p,f),ch:g};d.pop()}}}}}return p-i!=(i>0?e.lastLine():e.firstLine())&&null}function a(e,i,a){for(var n=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),d=0;d<l.length;d++){var c=l[d].empty()&&t(e,l[d].head,!1,a);if(c&&e.getLine(c.from.line).length<=n){var u=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(c.from,r(c.from.line,c.from.ch+1),{className:u})),c.to&&e.getLine(c.to.line).length<=n&&s.push(e.markText(c.to,r(c.to.line,c.to.ch+1),{className:u}))}}if(s.length){o&&e.state.focused&&e.focus();var p=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!i)return p;setTimeout(p,800)}}function n(e){e.operation(function(){l&&(l(),l=null),l=a(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),r=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,i,a){a&&a!=e.Init&&t.off("cursorActivity",n),i&&(t.state.matchBrackets="object"==typeof i?i:{},t.on("cursorActivity",n))}),e.defineExtension("matchBrackets",function(){a(this,!0)}),e.defineExtension("findMatchingBracket",function(e,i,a){return t(this,e,i,a)}),e.defineExtension("scanForBracket",function(e,t,a,n){return i(this,e,t,a,n)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function i(i){i.state.failedTagMatch=!1,i.operation(function(){if(t(i),!i.somethingSelected()){var a=i.getCursor(),n=i.getViewport();n.from=Math.min(n.from,a.line),n.to=Math.max(a.line+1,n.to);var o=e.findMatchingTag(i,a,n);if(o){if(i.state.matchBothTags){var r="open"==o.at?o.open:o.close;r&&(i.state.tagHit=i.markText(r.from,r.to,{className:"CodeMirror-matchingtag"}))}var s="close"==o.at?o.open:o.close;s?i.state.tagOther=i.markText(s.from,s.to,{className:"CodeMirror-matchingtag"}):i.state.failedTagMatch=!0}}})}function a(e){e.state.failedTagMatch&&i(e)}e.defineOption("matchTags",!1,function(n,o,r){r&&r!=e.Init&&(n.off("cursorActivity",i),n.off("viewportChange",a),t(n)),o&&(n.state.matchBothTags="object"==typeof o&&o.bothTags,n.on("cursorActivity",i),n.on("viewportChange",a),i(n))}),e.commands.toMatchingTag=function(t){var i=e.findMatchingTag(t,t.getCursor());if(i){var a="close"==i.at?i.open:i.close;a&&t.extendSelection(a.to,a.from)}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function i(e,t,i,a){this.line=t,this.ch=i,this.cm=e,this.text=e.getLine(t),this.min=a?a.from:e.firstLine(),this.max=a?a.to-1:e.lastLine()}function a(e,t){var i=e.cm.getTokenTypeAt(p(e.line,t));return i&&/\btag\b/.test(i)}function n(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function o(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function r(e){for(;;){var t=e.text.indexOf(">",e.ch);if(t==-1){if(n(e))continue;return}{if(a(e,t+1)){var i=e.text.lastIndexOf("/",t),o=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,o?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(t==-1){if(o(e))continue;return}if(a(e,t+1)){m.lastIndex=t,e.ch=t;var i=m.exec(e.text);if(i&&i.index==t)return i}else e.ch=t}}function l(e){for(;;){m.lastIndex=e.ch;var t=m.exec(e.text);if(!t){if(n(e))continue;return}{if(a(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function d(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(t==-1){if(o(e))continue;return}{if(a(e,t+1)){var i=e.text.lastIndexOf("/",t),n=i>-1&&!/\S/.test(e.text.slice(i+1,t));return e.ch=t+1,n?"selfClose":"regular"}e.ch=t}}}function c(e,t){for(var i=[];;){var a,n=l(e),o=e.line,s=e.ch-(n?n[0].length:0);if(!n||!(a=r(e)))return;if("selfClose"!=a)if(n[1]){for(var d=i.length-1;d>=0;--d)if(i[d]==n[2]){i.length=d;break}if(d<0&&(!t||t==n[2]))return{tag:n[2],from:p(o,s),to:p(e.line,e.ch)}}else i.push(n[2])}}function u(e,t){for(var i=[];;){var a=d(e);if(!a)return;if("selfClose"!=a){var n=e.line,o=e.ch,r=s(e);if(!r)return;if(r[1])i.push(r[2]);else{for(var l=i.length-1;l>=0;--l)if(i[l]==r[2]){i.length=l;break}if(l<0&&(!t||t==r[2]))return{tag:r[2],from:p(e.line,e.ch),to:p(n,o)}}}else s(e)}}var p=e.Pos,h="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=h+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",m=new RegExp("<(/?)(["+h+"]["+f+"]*)","g");e.registerHelper("fold","xml",function(e,t){for(var a=new i(e,t.line,0);;){var n,o=l(a);if(!o||a.line!=t.line||!(n=r(a)))return;if(!o[1]&&"selfClose"!=n){var t=p(a.line,a.ch),s=c(a,o[2]);return s&&{from:t,to:s.from}}}}),e.findMatchingTag=function(e,a,n){var o=new i(e,a.line,a.ch,n);if(o.text.indexOf(">")!=-1||o.text.indexOf("<")!=-1){var l=r(o),d=l&&p(o.line,o.ch),h=l&&s(o);if(l&&h&&!(t(o,a)>0)){var f={from:p(o.line,o.ch),to:d,tag:h[2]};return"selfClose"==l?{open:f,close:null,at:"open"}:h[1]?{open:u(o,h[2]),close:f,at:"close"}:(o=new i(e,d.line,d.ch,n),{open:f,close:c(o,h[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,a){for(var n=new i(e,t.line,t.ch,a);;){var o=u(n);if(!o)break;var r=new i(e,t.line,t.ch,a),s=c(r,o.tag);if(s)return{open:o,close:s}}},e.scanForClosingTag=function(e,t,a,n){var o=new i(e,t.line,t.ch,n?{from:0,to:n}:null);return c(o,a)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,i,a){return{startState:function(){return{base:e.startState(t),overlay:e.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(a){return{base:e.copyState(t,a.base),overlay:e.copyState(i,a.overlay),basePos:a.basePos,baseCur:null,overlayPos:a.overlayPos,overlayCur:null}},token:function(e,n){return(e!=n.streamSeen||Math.min(n.basePos,n.overlayPos)<e.start)&&(n.streamSeen=e,n.basePos=n.overlayPos=e.start),e.start==n.basePos&&(n.baseCur=t.token(e,n.base),n.basePos=e.pos),e.start==n.overlayPos&&(e.pos=e.start,n.overlayCur=i.token(e,n.overlay),n.overlayPos=e.pos),e.pos=Math.min(n.basePos,n.overlayPos),null==n.overlayCur?n.baseCur:null!=n.baseCur&&n.overlay.combineTokens||a&&null==n.overlay.combineTokens?n.baseCur+" "+n.overlayCur:n.overlayCur},indent:t.indent&&function(e,i){return t.indent(e.base,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){t.blankLine&&t.blankLine(e.base),i.blankLine&&i.blankLine(e.overlay)}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function i(e){clearTimeout(a.doRedraw),a.doRedraw=setTimeout(function(){a.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var a=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(a.doUpdate),a.doUpdate=setTimeout(function(){a.computeScale()&&i(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),t.listenForChanges!==!1&&e.on("change",this.changeHandler=function(){i(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.heightAtLine(e.lastLine()+1,"local");if(t!=this.hScale)return this.hScale=t,!0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){e!==!1&&this.computeScale();var t=this.cm,i=this.hScale,a=document.createDocumentFragment(),n=this.annotations;if(t.display.barWidth)for(var o,r=0;r<n.length;r++){for(var s=n[r],l=o||t.charCoords(s.from,"local").top*i,d=t.charCoords(s.to,"local").bottom*i;r<n.length-1&&(o=t.charCoords(n[r+1].from,"local").top*i,!(o>d+.9));)s=n[++r],d=t.charCoords(s.to,"local").bottom*i;if(d!=l){var c=Math.max(d-l,3),u=a.appendChild(document.createElement("div"));u.style.cssText="position: absolute; right: 0px; width: "+Math.max(t.display.barWidth-1,2)+"px; top: "+(l+this.buttonHeight)+"px; height: "+c+"px",u.className=this.options.className}}this.div.textContent="",this.div.appendChild(a)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,i,a){function n(t){var i=e.wheelEventPixels(t)["horizontal"==o.orientation?"x":"y"],a=o.pos;o.moveTo(o.pos+i),o.pos!=a&&e.e_preventDefault(t)}this.orientation=i,this.scroll=a,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=t+"-"+i,this.inner=this.node.appendChild(document.createElement("div"));var o=this;e.on(this.inner,"mousedown",function(t){function i(){e.off(document,"mousemove",a),e.off(document,"mouseup",i)}function a(e){return 1!=e.which?i():void o.moveTo(s+(e[n]-r)*(o.total/o.size))}if(1==t.which){e.e_preventDefault(t);var n="horizontal"==o.orientation?"pageX":"pageY",r=t[n],s=o.pos;e.on(document,"mousemove",a),e.on(document,"mouseup",i)}}),e.on(this.node,"click",function(t){e.e_preventDefault(t);var i,a=o.inner.getBoundingClientRect();i="horizontal"==o.orientation?t.clientX<a.left?-1:t.clientX>a.right?1:0:t.clientY<a.top?-1:t.clientY>a.bottom?1:0,o.moveTo(o.pos+i*o.screen)}),e.on(this.node,"mousewheel",n),e.on(this.node,"DOMMouseScroll",n)}function i(e,i,a){this.addClass=e,this.horiz=new t(e,"horizontal",a),i(this.horiz.node),this.vert=new t(e,"vertical",a),i(this.vert.node),this.width=null}t.prototype.moveTo=function(e,t){e<0&&(e=0),e>this.total-this.screen&&(e=this.total-this.screen),e!=this.pos&&(this.pos=e,this.inner.style["horizontal"==this.orientation?"left":"top"]=e*(this.size/this.total)+"px",t!==!1&&this.scroll(e,this.orientation))};var a=10;t.prototype.update=function(e,t,i){this.screen=t,this.total=e,this.size=i;var n=this.screen*(this.size/this.total);n<a&&(this.size-=a-n,n=a),this.inner.style["horizontal"==this.orientation?"width":"height"]=n+"px",this.inner.style["horizontal"==this.orientation?"left":"top"]=this.pos*(this.size/this.total)+"px"},i.prototype.update=function(e){if(null==this.width){var t=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;t&&(this.width=parseInt(t.height))}var i=this.width||0,a=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1;return this.vert.node.style.display=n?"block":"none",this.horiz.node.style.display=a?"block":"none",n&&(this.vert.update(e.scrollHeight,e.clientHeight,e.viewHeight-(a?i:0)),this.vert.node.style.display="block",this.vert.node.style.bottom=a?i+"px":"0"),a&&(this.horiz.update(e.scrollWidth,e.clientWidth,e.viewWidth-(n?i:0)-e.barLeft),this.horiz.node.style.right=n?i+"px":"0",this.horiz.node.style.left=e.barLeft+"px"),{right:n?i:0,bottom:a?i:0}},i.prototype.setScrollTop=function(e){this.vert.moveTo(e,!1)},i.prototype.setScrollLeft=function(e){this.horiz.moveTo(e,!1)},i.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node),e.removeChild(this.vert.node)},e.scrollbarModel.simple=function(e,t){return new i("CodeMirror-simplescroll",e,t)},e.scrollbarModel.overlay=function(e,t){return new i("CodeMirror-overlayscroll",e,t)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,i,a){this.cm=e;var n={listenForChanges:!1};for(var o in a)n[o]=a[o];n.className||(n.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(n),this.query=t,this.caseFold=i,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var r=this;e.on("change",this.changeHandler=function(e,t){r.onChange(t)})}function i(e,t,i){return e<=t?e:Math.max(t,e+i)}e.defineExtension("showMatchesOnScrollbar",function(e,i,a){return"string"==typeof a&&(a={className:a}),a||(a={}),new t(this,e,i,a)});var a=1e3;t.prototype.findMatches=function(){if(this.gap){for(var t=0;t<this.matches.length;t++){var i=this.matches[t];if(i.from.line>=this.gap.to)break;i.to.line>=this.gap.from&&this.matches.splice(t--,1)}for(var n=this.cm.getSearchCursor(this.query,e.Pos(this.gap.from,0),this.caseFold);n.findNext();){var i={from:n.from(),to:n.to()};if(i.from.line>=this.gap.to)break;if(this.matches.splice(t++,0,i),this.matches.length>a)break}this.gap=null}},t.prototype.onChange=function(t){var a=t.from.line,n=e.changeEnd(t).line,o=n-t.to.line;if(this.gap?(this.gap.from=Math.min(i(this.gap.from,a,o),t.from.line),this.gap.to=Math.max(i(this.gap.to,a,o),t.from.line)):this.gap={from:t.from.line,to:n+1},o)for(var r=0;r<this.matches.length;r++){var s=this.matches[r],l=i(s.from.line,a,o);l!=s.from.line&&(s.from=e.Pos(l,s.from.ch));var d=i(s.to.line,a,o);d!=s.to.line&&(s.to=e.Pos(d,s.to.ch))}clearTimeout(this.update);var c=this;this.update=setTimeout(function(){c.updateAfterChange()},250)},t.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},t.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){"object"==typeof e&&(this.minChars=e.minChars,this.style=e.style,this.showToken=e.showToken,this.delay=e.delay,this.wordsOnly=e.wordsOnly),null==this.style&&(this.style=l),null==this.minChars&&(this.minChars=s),null==this.delay&&(this.delay=d),null==this.wordsOnly&&(this.wordsOnly=c),this.overlay=this.timeout=null}function i(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout),t.timeout=setTimeout(function(){a(e)},t.delay)}function a(e){e.operation(function(){var t=e.state.matchHighlighter;if(t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null),!e.somethingSelected()&&t.showToken){for(var i=t.showToken===!0?/[\w$]/:t.showToken,a=e.getCursor(),o=e.getLine(a.line),s=a.ch,l=s;s&&i.test(o.charAt(s-1));)--s;for(;l<o.length&&i.test(o.charAt(l));)++l;return void(s<l&&e.addOverlay(t.overlay=r(o.slice(s,l),i,t.style)))}var d=e.getCursor("from"),c=e.getCursor("to");if(d.line==c.line&&(!t.wordsOnly||n(e,d,c))){var u=e.getRange(d,c).replace(/^\s+|\s+$/g,"");u.length>=t.minChars&&e.addOverlay(t.overlay=r(u,!1,t.style))}})}function n(e,t,i){var a=e.getRange(t,i);if(null!==a.match(/^\w+$/)){if(t.ch>0){var n={line:t.line,ch:t.ch-1},o=e.getRange(n,t);if(null===o.match(/\W/))return!1}if(i.ch<e.getLine(t.line).length){var n={line:i.line,ch:i.ch+1},o=e.getRange(i,n);if(null===o.match(/\W/))return!1}return!0}return!1}function o(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}function r(e,t,i){return{token:function(a){return!a.match(e)||t&&!o(a,t)?(a.next(),void(a.skipTo(e.charAt(0))||a.skipToEnd())):i}}}var s=2,l="matchhighlight",d=100,c=!1;e.defineOption("highlightSelectionMatches",!1,function(n,o,r){if(r&&r!=e.Init){var s=n.state.matchHighlighter.overlay;s&&n.removeOverlay(s),clearTimeout(n.state.matchHighlighter.timeout),n.state.matchHighlighter=null,n.off("cursorActivity",i)}o&&(n.state.matchHighlighter=new t(o),a(n),n.on("cursorActivity",i))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var i=e.exec(t.string);return i&&i.index==t.pos?(t.pos+=i[0].length,"searching"):void(i?t.pos=i.index:t.skipToEnd())}}}function i(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function a(e){return e.state.search||(e.state.search=new i)}function n(e){return"string"==typeof e&&e==e.toLowerCase()}function o(e,t,i){return e.getSearchCursor(t,i,n(t))}function r(e,t,i,a,n){e.openDialog?e.openDialog(t,n,{value:a}):n(prompt(i,a))}function s(e,t,i,a){e.openConfirm?e.openConfirm(t,a):confirm(i)&&a[0]()}function l(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],t[2].indexOf("i")==-1?"":"i")}catch(i){}return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function d(e,i){var o=a(e);return o.query?c(e,i):void r(e,h,"Search for:",e.getSelection(),function(a){e.operation(function(){a&&!o.query&&(o.query=l(a),e.removeOverlay(o.overlay,n(o.query)),o.overlay=t(o.query,n(o.query)),e.addOverlay(o.overlay),e.showMatchesOnScrollbar&&(o.annotate&&(o.annotate.clear(),o.annotate=null),o.annotate=e.showMatchesOnScrollbar(o.query,n(o.query))),o.posFrom=o.posTo=e.getCursor(),c(e,i))})})}function c(t,i){t.operation(function(){var n=a(t),r=o(t,n.query,i?n.posFrom:n.posTo);(r.find(i)||(r=o(t,n.query,i?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),r.find(i)))&&(t.setSelection(r.from(),r.to()),t.scrollIntoView({from:r.from(),to:r.to()}),n.posFrom=r.from(),n.posTo=r.to())})}function u(e){e.operation(function(){var t=a(e);t.query&&(t.query=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function p(e,t){e.getOption("readOnly")||r(e,f,"Replace:",e.getSelection(),function(i){i&&(i=l(i),r(e,m,"Replace with:","",function(a){if(t)e.operation(function(){for(var t=o(e,i);t.findNext();)if("string"!=typeof i){var n=e.getRange(t.from(),t.to()).match(i);t.replace(a.replace(/\$(\d)/g,function(e,t){return n[t]}))}else t.replace(a)});else{u(e);var n=o(e,i,e.getCursor()),r=function(){var t,a=n.from();!(t=n.findNext())&&(n=o(e,i),!(t=n.findNext())||a&&n.from().line==a.line&&n.from().ch==a.ch)||(e.setSelection(n.from(),n.to()),e.scrollIntoView({from:n.from(),to:n.to()}),s(e,g,"Replace?",[function(){l(t)},r]))},l=function(e){n.replace("string"==typeof i?a:a.replace(/\$(\d)/g,function(t,i){return e[i]})),r()};r()}}))})}var h='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',f='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',m='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',g="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";e.commands.find=function(e){u(e),d(e)},e.commands.findNext=d,e.commands.findPrev=function(e){d(e,!0)},e.commands.clearSearch=u,e.commands.replace=p,e.commands.replaceAll=function(e){p(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,o){if(this.atOccurrence=!1,this.doc=e,null==o&&"string"==typeof t&&(o=!1),n=n?e.clipPos(n):a(0,0),this.pos={from:n,to:n},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(i,n){if(i){t.lastIndex=0;for(var o,r,s=e.getLine(n.line).slice(0,n.ch),l=0;;){t.lastIndex=l;var d=t.exec(s);if(!d)break;if(o=d,r=o.index,l=o.index+(o[0].length||1),l==s.length)break}var c=o&&o[0].length||0;c||(0==r&&0==s.length?o=void 0:r!=e.getLine(n.line).length&&c++)}else{t.lastIndex=n.ch;var s=e.getLine(n.line),o=t.exec(s),c=o&&o[0].length||0,r=o&&o.index;r+c==s.length||c||(c=1)}if(o&&c)return{from:a(n.line,r),to:a(n.line,r+c),match:o}};else{var r=t;o&&(t=t.toLowerCase());var s=o?function(e){return e.toLowerCase()}:function(e){return e},l=t.split("\n");if(1==l.length)t.length?this.matches=function(n,o){if(n){var l=e.getLine(o.line).slice(0,o.ch),d=s(l),c=d.lastIndexOf(t);if(c>-1)return c=i(l,d,c),{from:a(o.line,c),to:a(o.line,c+r.length)}}else{var l=e.getLine(o.line).slice(o.ch),d=s(l),c=d.indexOf(t);if(c>-1)return c=i(l,d,c)+o.ch,{from:a(o.line,c),to:a(o.line,c+r.length)}}}:this.matches=function(){};else{var d=r.split("\n");this.matches=function(t,i){var n=l.length-1;if(t){if(i.line-(l.length-1)<e.firstLine())return;if(s(e.getLine(i.line).slice(0,d[n].length))!=l[l.length-1])return;for(var o=a(i.line,d[n].length),r=i.line-1,c=n-1;c>=1;--c,--r)if(l[c]!=s(e.getLine(r)))return;var u=e.getLine(r),p=u.length-d[0].length;if(s(u.slice(p))!=l[0])return;return{from:a(r,p),to:o}}if(!(i.line+(l.length-1)>e.lastLine())){var u=e.getLine(i.line),p=u.length-d[0].length;if(s(u.slice(p))==l[0]){for(var h=a(i.line,p),r=i.line+1,c=1;c<n;++c,++r)if(l[c]!=s(e.getLine(r)))return;if(s(e.getLine(r).slice(0,d[n].length))==l[n])return{from:h,to:a(r,d[n].length)}}}}}}}function i(e,t,i){if(e.length==t.length)return i;for(var a=Math.min(i,e.length);;){var n=e.slice(0,a).toLowerCase().length;if(n<i)++a;else{if(!(n>i))return a;--a}}}var a=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=a(e,0);return i.pos={from:t,to:t},i.atOccurrence=!1,!1}for(var i=this,n=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,n))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!n.line)return t(0);n=a(n.line-1,this.doc.getLine(n.line-1).length)}else{var o=this.doc.lineCount();if(n.line==o-1)return t(o);n=a(n.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,i){if(this.atOccurrence){var n=e.splitLines(t);this.doc.replaceRange(n,this.pos.from,this.pos.to,i),this.pos.to=a(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,i,a){return new t(this.doc,e,i,a)}),e.defineDocExtension("getSearchCursor",function(e,i,a){return new t(this,e,i,a)}),e.defineExtension("selectMatches",function(t,i){for(var a,n=[],o=this.getSearchCursor(t,this.getCursor("from"),i);(a=o.findNext())&&!(e.cmpPos(o.to(),this.getCursor("to"))>0);)n.push({anchor:o.from(),head:o.to()});n.length&&this.setSelections(n,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",o),e.removeLineClass(e.state.activeLines[t],"background",r)}function i(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}function a(e,a){for(var n=[],s=0;s<a.length;s++){var l=a[s];if(l.empty()){var d=e.getLineHandleVisualStart(l.head.line);n[n.length-1]!=d&&n.push(d)}}i(e.state.activeLines,n)||e.operation(function(){t(e);for(var i=0;i<n.length;i++)e.addLineClass(n[i],"wrap",o),e.addLineClass(n[i],"background",r);e.state.activeLines=n})}function n(e,t){a(e,t.ranges)}var o="CodeMirror-activeline",r="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(i,o,r){var s=r&&r!=e.Init;o&&!s?(i.state.activeLines=[],a(i,i.listSelections()),i.on("beforeSelectionChange",n)):!o&&s&&(i.off("beforeSelectionChange",n),t(i),delete i.state.activeLines)})}),CodeMirror.controlsSetup=function(e){var t=$('<span class="CodeMirror-controls"></span>'),i=$('<span class="change-style" title="Click to cycle style.  Your style preference will be saved using a browser cookie."></span>'),a=$('<span class="toggle-fullscreen" title="Click to toggle full screen mode (F11)."></span>'),n=$('<span class="toggle-wrap" title="Click to toggle line wrapping."></span>');
t.append(a,n,i),t.find("span").tipTip(),$(e.getWrapperElement()).append(t);var o=["default","ambiance","blackboard","cobalt","monokai","neat"];null===proboards.code_editor_style&&(proboards.code_editor_style=proboards.cookie("code_editor_style")||o[0]),e.setOption("theme",proboards.code_editor_style),i.on("click",function(e){var t=$.inArray(proboards.code_editor_style,o);t===o.length-1&&(t=-1),proboards.code_editor_style=o[t+1],$(".CodeMirror").each(function(){$(this).data("editor").setOption("theme",proboards.code_editor_style)}),proboards.cookie("code_editor_style",proboards.code_editor_style,{expires:"never",path:"/"})}),e.toggleFullScreen=function(){var e=$(this.getWrapperElement()),t=($(this.getGutterElement()),$(this.getScrollerElement()));e.data("isFullScreen")?(e.removeClass("fullscreen").data("isFullScreen",!1),document.documentElement.style.overflow="",e.attr("style",e.data("oldStyle")),t.attr("style",t.data("oldStyle"))):(e.addClass("fullscreen").data("isFullScreen",!0),document.documentElement.style.overflow="hidden",e.data("oldStyle",e.attr("style")).removeAttr("style"),t.data("oldStyle",t.attr("style")).removeAttr("style")),this.refresh()};var r=e.getOption("extraKeys");$.extend(r,{F11:function(e){e.toggleFullScreen()},Esc:function(e){$(e.getWrapperElement()).data("fullscreen",!0),e.toggleFullScreen()}}),e.setOption("extraKeys",r),a.on("click",function(){e.toggleFullScreen()});var s=proboards.cookie("code_editor_wrap"),l=null!=s&&"false"!=s.toLowerCase();l&&(n.addClass("wrap"),e.setOption("lineWrapping",!0)),n.on("click",function(){l=!l,$(".CodeMirror").each(function(){$(this).data("editor").setOption("lineWrapping",l),$(".CodeMirror-controls .toggle-wrap",this).toggleClass("wrap",l)}),proboards.cookie("code_editor_wrap",l,{expires:"never",path:"/"})})},CodeMirror.defineMode("pbTemplate",function(e,t){var i={token:function(e,t){var i;if(e.match("$["))for(;null!=(i=e.next());)if("]"==i)return"pbTemplate";for(;null!=e.next()&&!e.match("$[",!1););return null}};return CodeMirror.overlayMode(CodeMirror.getMode(e,t.backdrop||"text/html"),i)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=!0;return t}function i(e,t){for(var i,a=!1;null!=(i=e.next());){if(a&&"/"==i){t.tokenize=null;break}a="*"==i}return["comment","comment"]}function a(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,i){function a(e,t){return h=t,e}function n(e,t){var i=e.next();if(g[i]){var n=g[i](e,t);if(n!==!1)return n}return"@"==i?(e.eatWhile(/[\w\\\-]/),a("def",e.current())):"="==i||("~"==i||"|"==i)&&e.eat("=")?a(null,"compare"):'"'==i||"'"==i?(t.tokenize=o(i),t.tokenize(e,t)):"#"==i?(e.eatWhile(/[\w\\\-]/),a("atom","hash")):"!"==i?(e.match(/^\s*\w*/),a("keyword","important")):/\d/.test(i)||"."==i&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),a("number","unit")):"-"!==i?/[,+>*\/]/.test(i)?a(null,"select-op"):"."==i&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?a("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(i)?a(null,i):"u"==i&&e.match(/rl(-prefix)?\(/)||"d"==i&&e.match("omain(")||"r"==i&&e.match("egexp(")?(e.backUp(1),t.tokenize=r,a("property","word")):/[\w\\\-]/.test(i)?(e.eatWhile(/[\w\\\-]/),a("property","word")):a(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),a("number","unit")):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?a("variable-2","variable-definition"):a("variable-2","variable")):e.match(/^\w+-/)?a("meta","meta"):void 0}function o(e){return function(t,i){for(var n,o=!1;null!=(n=t.next());){if(n==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==n}return(n==e||!o&&")"!=e)&&(i.tokenize=null),a("string","string")}}function r(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=o(")"),a(null,"(")}function s(e,t,i){this.type=e,this.indent=t,this.prev=i}function l(e,t,i){return e.context=new s(i,t.indentation()+m,e.context),i}function d(e){return e.context=e.context.prev,e.context.type}function c(e,t,i){return S[i.context.type](e,t,i)}function u(e,t,i,a){for(var n=a||1;n>0;n--)i.context=i.context.prev;return c(e,t,i)}function p(e){var t=e.current().toLowerCase();f=$.hasOwnProperty(t)?"atom":k.hasOwnProperty(t)?"keyword":"variable"}i.propertyKeywords||(i=e.resolveMode("text/css"));var h,f,m=t.indentUnit,g=i.tokenHooks,v=i.documentTypes||{},b=i.mediaTypes||{},_=i.mediaFeatures||{},y=i.propertyKeywords||{},A=i.nonStandardPropertyKeywords||{},w=i.fontProperties||{},x=i.counterDescriptors||{},k=i.colorKeywords||{},$=i.valueKeywords||{},C=i.allowNested,S={};return S.top=function(e,t,i){if("{"==e)return l(i,t,"block");if("}"==e&&i.context.prev)return d(i);if(/@(media|supports|(-moz-)?document)/.test(e))return l(i,t,"atBlock");if(/@(font-face|counter-style)/.test(e))return i.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(i,t,"at");if("hash"==e)f="builtin";else if("word"==e)f="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(i,t,"interpolation");if(":"==e)return"pseudo";if(C&&"("==e)return l(i,t,"parens")}return i.context.type},S.block=function(e,t,i){if("word"==e){var a=t.current().toLowerCase();return y.hasOwnProperty(a)?(f="property","maybeprop"):A.hasOwnProperty(a)?(f="string-2","maybeprop"):C?(f=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(f+=" error","maybeprop")}return"meta"==e?"block":C||"hash"!=e&&"qualifier"!=e?S.top(e,t,i):(f="error","block")},S.maybeprop=function(e,t,i){return":"==e?l(i,t,"prop"):c(e,t,i)},S.prop=function(e,t,i){if(";"==e)return d(i);if("{"==e&&C)return l(i,t,"propBlock");if("}"==e||"{"==e)return u(e,t,i);if("("==e)return l(i,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)p(t);else if("interpolation"==e)return l(i,t,"interpolation")}else f+=" error";return"prop"},S.propBlock=function(e,t,i){return"}"==e?d(i):"word"==e?(f="property","maybeprop"):i.context.type},S.parens=function(e,t,i){return"{"==e||"}"==e?u(e,t,i):")"==e?d(i):"("==e?l(i,t,"parens"):"interpolation"==e?l(i,t,"interpolation"):("word"==e&&p(t),"parens")},S.pseudo=function(e,t,i){return"word"==e?(f="variable-3",i.context.type):c(e,t,i)},S.atBlock=function(e,t,i){if("("==e)return l(i,t,"atBlock_parens");if("}"==e)return u(e,t,i);if("{"==e)return d(i)&&l(i,t,C?"block":"top");if("word"==e){var a=t.current().toLowerCase();f="only"==a||"not"==a||"and"==a||"or"==a?"keyword":v.hasOwnProperty(a)?"tag":b.hasOwnProperty(a)?"attribute":_.hasOwnProperty(a)?"property":y.hasOwnProperty(a)?"property":A.hasOwnProperty(a)?"string-2":$.hasOwnProperty(a)?"atom":"error"}return i.context.type},S.atBlock_parens=function(e,t,i){return")"==e?d(i):"{"==e||"}"==e?u(e,t,i,2):S.atBlock(e,t,i)},S.restricted_atBlock_before=function(e,t,i){return"{"==e?l(i,t,"restricted_atBlock"):"word"==e&&"@counter-style"==i.stateArg?(f="variable","restricted_atBlock_before"):c(e,t,i)},S.restricted_atBlock=function(e,t,i){return"}"==e?(i.stateArg=null,d(i)):"word"==e?(f="@font-face"==i.stateArg&&!w.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==i.stateArg&&!x.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},S.keyframes=function(e,t,i){return"word"==e?(f="variable","keyframes"):"{"==e?l(i,t,"top"):c(e,t,i)},S.at=function(e,t,i){return";"==e?d(i):"{"==e||"}"==e?u(e,t,i):("word"==e?f="tag":"hash"==e&&(f="builtin"),"at")},S.interpolation=function(e,t,i){return"}"==e?d(i):"{"==e||";"==e?u(e,t,i):("word"==e?f="variable":"variable"!=e&&(f="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new s("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var i=(t.tokenize||n)(e,t);return i&&"object"==typeof i&&(h=i[1],i=i[0]),f=i,t.state=S[t.state](h,e,t),f},indent:function(e,t){var i=e.context,a=t&&t.charAt(0),n=i.indent;return"prop"!=i.type||"}"!=a&&")"!=a||(i=i.prev),!i.prev||("}"!=a||"block"!=i.type&&"top"!=i.type&&"interpolation"!=i.type&&"restricted_atBlock"!=i.type)&&(")"!=a||"parens"!=i.type&&"atBlock_parens"!=i.type)&&("{"!=a||"at"!=i.type&&"atBlock"!=i.type)||(n=i.indent-m,i=i.prev),n},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var n=["domain","regexp","url","url-prefix"],o=t(n),r=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],s=t(r),l=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],d=t(l),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=t(c),p=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],h=t(p),f=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],m=t(f),g=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],v=t(g),b=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],_=t(b),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scale","scale3d","scaleX","scaleY","scaleZ","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","x-large","x-small","xor","xx-large","xx-small"],A=t(y),w=n.concat(r).concat(l).concat(c).concat(p).concat(b).concat(y);e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:o,mediaTypes:s,mediaFeatures:d,propertyKeywords:u,nonStandardPropertyKeywords:h,fontProperties:m,counterDescriptors:v,colorKeywords:_,valueKeywords:A,tokenHooks:{"<":function(e,t){return!!e.match("!--")&&(t.tokenize=a,a(e,t))},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=i,i(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:s,mediaFeatures:d,propertyKeywords:u,nonStandardPropertyKeywords:h,colorKeywords:_,valueKeywords:A,fontProperties:m,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:s,mediaFeatures:d,propertyKeywords:u,nonStandardPropertyKeywords:h,colorKeywords:_,valueKeywords:A,fontProperties:m,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=i,i(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("htmlmixed",function(t,i){function a(e,t){var i=t.htmlState.tagName;i&&(i=i.toLowerCase());var a=s.token(e,t.htmlState);if("script"==i&&/\btag\b/.test(a)&&">"==e.current()){var n=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);n=n?n[1]:"",n&&/[\"\']/.test(n.charAt(0))&&(n=n.slice(1,n.length-1));for(var c=0;c<d.length;++c){var u=d[c];if("string"==typeof u.matches?n==u.matches:u.matches.test(n)){u.mode&&(t.token=o,t.localMode=u.mode,t.localState=u.mode.startState&&u.mode.startState(s.indent(t.htmlState,"")));break}}}else"style"==i&&/\btag\b/.test(a)&&">"==e.current()&&(t.token=r,t.localMode=l,t.localState=l.startState(s.indent(t.htmlState,"")));return a}function n(e,t,i){var a,n=e.current(),o=n.search(t);return o>-1?e.backUp(n.length-o):(a=n.match(/<\/?$/))&&(e.backUp(n.length),e.match(t,!1)||e.match(n)),i}function o(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=a,t.localState=t.localMode=null,null):n(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function r(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=a,t.localState=t.localMode=null,null):n(e,/<\/\s*style\s*>/,l.token(e,t.localState))}var s=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:i.multilineTagIndentFactor,multilineTagIndentPastTag:i.multilineTagIndentPastTag}),l=e.getMode(t,"css"),d=[],c=i&&i.scriptTypes;if(d.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")}),c)for(var u=0;u<c.length;++u){var p=c[u];d.push({matches:p.matches,mode:p.mode&&e.getMode(t,p.mode)})}return d.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function(){var e=s.startState();return{token:a,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var i=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:i,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,i){return!t.localMode||/^\s*<\//.test(i)?s.indent(t.htmlState,i):t.localMode.indent?t.localMode.indent(t.localState,i):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,i){function a(e){for(var t,i=!1,a=!1;null!=(t=e.next());){if(!i){if("/"==t&&!a)return;"["==t?a=!0:a&&"]"==t&&(a=!1)}i=!i&&"\\"==t}}function n(e,t,i){return ge=e,ve=i,t}function o(e,t){var i=e.next();if('"'==i||"'"==i)return t.tokenize=r(i),t.tokenize(e,t);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return n("number","number");if("."==i&&e.match(".."))return n("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return n(i);if("="==i&&e.eat(">"))return n("=>","operator");if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),n("number","number");if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),n("number","number");if("/"==i)return e.eat("*")?(t.tokenize=s,s(e,t)):e.eat("/")?(e.skipToEnd(),n("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(a(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),n("regexp","string-2")):(e.eatWhile($e),n("operator","operator",e.current()));if("`"==i)return t.tokenize=l,l(e,t);if("#"==i)return e.skipToEnd(),n("error","error");if($e.test(i))return e.eatWhile($e),n("operator","operator",e.current());if(xe.test(i)){e.eatWhile(xe);var o=e.current(),d=ke.propertyIsEnumerable(o)&&ke[o];return d&&"."!=t.lastType?n(d.type,d.style,o):n("variable","variable",o)}}function r(e){return function(t,i){var a,r=!1;if(ye&&"@"==t.peek()&&t.match(Ce))return i.tokenize=o,n("jsonld-keyword","meta");for(;null!=(a=t.next())&&(a!=e||r);)r=!r&&"\\"==a;return r||(i.tokenize=o),n("string","string")}}function s(e,t){for(var i,a=!1;i=e.next();){if("/"==i&&a){t.tokenize=o;break}a="*"==i}return n("comment","comment")}function l(e,t){for(var i,a=!1;null!=(i=e.next());){if(!a&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=o;break}a=!a&&"\\"==i}return n("quasi","string-2",e.current())}function d(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i=e.string.indexOf("=>",e.start);if(!(i<0)){for(var a=0,n=!1,o=i-1;o>=0;--o){var r=e.string.charAt(o),s=Se.indexOf(r);if(s>=0&&s<3){if(!a){++o;break}if(0==--a)break}else if(s>=3&&s<6)++a;else if(xe.test(r))n=!0;else{if(/["'\/]/.test(r))return;if(n&&!a){++o;break}}}n&&!a&&(t.fatArrowAt=o)}}function c(e,t,i,a,n,o){this.indented=e,this.column=t,this.type=i,this.prev=n,this.info=o,null!=a&&(this.align=a)}function u(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0;for(var a=e.context;a;a=a.prev)for(var i=a.vars;i;i=i.next)if(i.name==t)return!0}function p(e,t,i,a,n){var o=e.cc;for(De.state=e,De.stream=n,De.marked=null,De.cc=o,De.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var r=o.length?o.pop():Ae?w:A;if(r(i,a)){for(;o.length&&o[o.length-1].lex;)o.pop()();return De.marked?De.marked:"variable"==i&&u(e,a)?"variable-2":t}}}function h(){for(var e=arguments.length-1;e>=0;e--)De.cc.push(arguments[e])}function f(){return h.apply(null,arguments),!0}function m(e){function t(t){for(var i=t;i;i=i.next)if(i.name==e)return!0;return!1}var a=De.state;if(a.context){if(De.marked="def",t(a.localVars))return;a.localVars={name:e,next:a.localVars}}else{if(t(a.globalVars))return;i.globalVars&&(a.globalVars={name:e,next:a.globalVars})}}function g(){De.state.context={prev:De.state.context,vars:De.state.localVars},De.state.localVars=Ie}function v(){De.state.localVars=De.state.context.vars,De.state.context=De.state.context.prev}function b(e,t){var i=function(){var i=De.state,a=i.indented;if("stat"==i.lexical.type)a=i.lexical.indented;else for(var n=i.lexical;n&&")"==n.type&&n.align;n=n.prev)a=n.indented;i.lexical=new c(a,De.stream.column(),e,null,i.lexical,t)};return i.lex=!0,i}function _(){var e=De.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function y(e){function t(i){return i==e?f():";"==e?h():f(t)}return t}function A(e,t){return"var"==e?f(b("vardef",t.length),V,y(";"),_):"keyword a"==e?f(b("form"),w,A,_):"keyword b"==e?f(b("form"),A,_):"{"==e?f(b("}"),F,_):";"==e?f():"if"==e?("else"==De.state.lexical.info&&De.state.cc[De.state.cc.length-1]==_&&De.state.cc.pop()(),f(b("form"),w,A,_,K)):"function"==e?f(ee):"for"==e?f(b("form"),J,A,_):"variable"==e?f(b("stat"),M):"switch"==e?f(b("form"),w,b("}","switch"),y("{"),F,_,_):"case"==e?f(w,y(":")):"default"==e?f(y(":")):"catch"==e?f(b("form"),g,y("("),te,y(")"),A,_,v):"module"==e?f(b("form"),g,re,v,_):"class"==e?f(b("form"),ie,_):"export"==e?f(b("form"),se,_):"import"==e?f(b("form"),le,_):h(b("stat"),w,y(";"),_);
}function w(e){return k(e,!1)}function x(e){return k(e,!0)}function k(e,t){if(De.state.fatArrowAt==De.stream.start){var i=t?P:E;if("("==e)return f(g,b(")"),R(W,")"),_,y("=>"),i,v);if("variable"==e)return h(g,W,y("=>"),i,v)}var a=t?T:S;return Te.hasOwnProperty(e)?f(a):"function"==e?f(ee,a):"keyword c"==e?f(t?C:$):"("==e?f(b(")"),$,fe,y(")"),_,a):"operator"==e||"spread"==e?f(t?x:w):"["==e?f(b("]"),pe,_,a):"{"==e?z(L,"}",null,a):"quasi"==e?h(D,a):f()}function $(e){return e.match(/[;\}\)\],]/)?h():h(w)}function C(e){return e.match(/[;\}\)\],]/)?h():h(x)}function S(e,t){return","==e?f(w):T(e,t,!1)}function T(e,t,i){var a=0==i?S:T,n=0==i?w:x;return"=>"==e?f(g,i?P:E,v):"operator"==e?/\+\+|--/.test(t)?f(a):"?"==t?f(w,y(":"),n):f(n):"quasi"==e?h(D,a):";"!=e?"("==e?z(x,")","call",a):"."==e?f(O,a):"["==e?f(b("]"),$,y("]"),_,a):void 0:void 0}function D(e,t){return"quasi"!=e?h():"${"!=t.slice(t.length-2)?f(D):f(w,I)}function I(e){if("}"==e)return De.marked="string-2",De.state.tokenize=l,f(D)}function E(e){return d(De.stream,De.state),h("{"==e?A:w)}function P(e){return d(De.stream,De.state),h("{"==e?A:x)}function M(e){return":"==e?f(_,A):h(S,y(";"),_)}function O(e){if("variable"==e)return De.marked="property",f()}function L(e,t){return"variable"==e||"keyword"==De.style?(De.marked="property",f("get"==t||"set"==t?N:j)):"number"==e||"string"==e?(De.marked=ye?"property":De.style+" property",f(j)):"jsonld-keyword"==e?f(j):"["==e?f(w,y("]"),j):void 0}function N(e){return"variable"!=e?h(j):(De.marked="property",f(ee))}function j(e){return":"==e?f(x):"("==e?h(ee):void 0}function R(e,t){function i(a){if(","==a){var n=De.state.lexical;return"call"==n.info&&(n.pos=(n.pos||0)+1),f(e,i)}return a==t?f():f(y(t))}return function(a){return a==t?f():h(e,i)}}function z(e,t,i){for(var a=3;a<arguments.length;a++)De.cc.push(arguments[a]);return f(b(t,i),R(e,t),_)}function F(e){return"}"==e?f():h(A,F)}function q(e){if(we&&":"==e)return f(H)}function H(e){if("variable"==e)return De.marked="variable-3",f()}function V(){return h(W,q,B,Y)}function W(e,t){return"variable"==e?(m(t),f()):"["==e?z(W,"]"):"{"==e?z(U,"}"):void 0}function U(e,t){return"variable"!=e||De.stream.match(/^\s*:/,!1)?("variable"==e&&(De.marked="property"),f(y(":"),W,B)):(m(t),f(B))}function B(e,t){if("="==t)return f(x)}function Y(e){if(","==e)return f(V)}function K(e,t){if("keyword b"==e&&"else"==t)return f(b("form","else"),A,_)}function J(e){if("("==e)return f(b(")"),G,y(")"),_)}function G(e){return"var"==e?f(V,y(";"),Q):";"==e?f(Q):"variable"==e?f(X):h(w,y(";"),Q)}function X(e,t){return"in"==t||"of"==t?(De.marked="keyword",f(w)):f(S,Q)}function Q(e,t){return";"==e?f(Z):"in"==t||"of"==t?(De.marked="keyword",f(w)):h(w,y(";"),Z)}function Z(e){")"!=e&&f(w)}function ee(e,t){return"*"==t?(De.marked="keyword",f(ee)):"variable"==e?(m(t),f(ee)):"("==e?f(g,b(")"),R(te,")"),_,A,v):void 0}function te(e){return"spread"==e?f(te):h(W,q)}function ie(e,t){if("variable"==e)return m(t),f(ae)}function ae(e,t){return"extends"==t?f(w,ae):"{"==e?f(b("}"),ne,_):void 0}function ne(e,t){return"variable"==e||"keyword"==De.style?"static"==t?(De.marked="keyword",f(ne)):(De.marked="property","get"==t||"set"==t?f(oe,ee,ne):f(ee,ne)):"*"==t?(De.marked="keyword",f(ne)):";"==e?f(ne):"}"==e?f():void 0}function oe(e){return"variable"!=e?h():(De.marked="property",f())}function re(e,t){return"string"==e?f(A):"variable"==e?(m(t),f(ue)):void 0}function se(e,t){return"*"==t?(De.marked="keyword",f(ue,y(";"))):"default"==t?(De.marked="keyword",f(w,y(";"))):h(A)}function le(e){return"string"==e?f():h(de,ue)}function de(e,t){return"{"==e?z(de,"}"):("variable"==e&&m(t),"*"==t&&(De.marked="keyword"),f(ce))}function ce(e,t){if("as"==t)return De.marked="keyword",f(de)}function ue(e,t){if("from"==t)return De.marked="keyword",f(w)}function pe(e){return"]"==e?f():h(x,he)}function he(e){return"for"==e?h(fe,y("]")):","==e?f(R(C,"]")):h(R(x,"]"))}function fe(e){return"for"==e?f(J,fe):"if"==e?f(w,fe):void 0}function me(e,t){return"operator"==e.lastType||","==e.lastType||$e.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var ge,ve,be=t.indentUnit,_e=i.statementIndent,ye=i.jsonld,Ae=i.json||ye,we=i.typescript,xe=i.wordCharacters||/[\w$\xa1-\uffff]/,ke=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),a=e("keyword c"),n=e("operator"),o={type:"atom",style:"atom"},r={"if":e("if"),"while":t,"with":t,"else":i,"do":i,"try":i,"finally":i,"return":a,"break":a,"continue":a,"new":a,"delete":a,"throw":a,"debugger":a,"var":e("var"),"const":e("var"),"let":e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":n,"typeof":n,"instanceof":n,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":a,"export":e("export"),"import":e("import"),"extends":a};if(we){var s={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:s,number:s,bool:s,any:s};for(var d in l)r[d]=l[d]}return r}(),$e=/[+\-*&%=<>!?|~^]/,Ce=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Se="([{}])",Te={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},De={state:null,column:null,marked:null,cc:null},Ie={name:"this",next:{name:"arguments"}};return _.lex=!0,{startState:function(e){var t={tokenize:o,lastType:"sof",cc:[],lexical:new c((e||0)-be,0,"block",(!1)),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:0};return i.globalVars&&"object"==typeof i.globalVars&&(t.globalVars=i.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),d(e,t)),t.tokenize!=s&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==ge?i:(t.lastType="operator"!=ge||"++"!=ve&&"--"!=ve?ge:"incdec",p(t,i,ge,ve,e))},indent:function(t,a){if(t.tokenize==s)return e.Pass;if(t.tokenize!=o)return 0;var n=a&&a.charAt(0),r=t.lexical;if(!/^\s*else\b/.test(a))for(var l=t.cc.length-1;l>=0;--l){var d=t.cc[l];if(d==_)r=r.prev;else if(d!=K)break}"stat"==r.type&&"}"==n&&(r=r.prev),_e&&")"==r.type&&"stat"==r.prev.type&&(r=r.prev);var c=r.type,u=n==c;return"vardef"==c?r.indented+("operator"==t.lastType||","==t.lastType?r.info+1:0):"form"==c&&"{"==n?r.indented:"form"==c?r.indented+be:"stat"==c?r.indented+(me(t,a)?_e||be:0):"switch"!=r.info||u||0==i.doubleIndentSwitch?r.align?r.column+(u?0:1):r.indented+(u?0:be):r.indented+(/^(?:case|default)\b/.test(a)?be:2*be)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ae?null:"/*",blockCommentEnd:Ae?null:"*/",lineComment:Ae?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ae?"json":"javascript",jsonldMode:ye,jsonMode:Ae}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("xml",function(t,i){function a(e,t){function i(i){return t.tokenize=i,i(e,t)}var a=e.next();if("<"==a)return e.eat("!")?e.eat("[")?e.match("CDATA[")?i(r("atom","]]>")):null:e.match("--")?i(r("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(s(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=r("meta","?>"),"meta"):(x=e.eat("/")?"closeTag":"openTag",t.tokenize=n,"tag bracket");if("&"==a){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function n(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=a,x=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return x="equals",null;if("<"==i){t.tokenize=a,t.state=u,t.tagName=t.tagStart=null;var n=t.tokenize(e,t);return n?n+" tag error":"tag error"}return/[\'\"]/.test(i)?(t.tokenize=o(i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(e){var t=function(t,i){for(;!t.eol();)if(t.next()==e){i.tokenize=n;break}return"string"};return t.isInAttribute=!0,t}function r(e,t){return function(i,n){for(;!i.eol();){if(i.match(t)){n.tokenize=a;break}i.next()}return e}}function s(e){return function(t,i){for(var n;null!=(n=t.next());){if("<"==n)return i.tokenize=s(e+1),i.tokenize(t,i);if(">"==n){if(1==e){i.tokenize=a;break}return i.tokenize=s(e-1),i.tokenize(t,i)}}return"meta"}}function l(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,($.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function d(e){e.context&&(e.context=e.context.prev)}function c(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!$.contextGrabbers.hasOwnProperty(i)||!$.contextGrabbers[i].hasOwnProperty(t))return;d(e)}}function u(e,t,i){return"openTag"==e?(i.tagStart=t.column(),p):"closeTag"==e?h:u}function p(e,t,i){return"word"==e?(i.tagName=t.current(),k="tag",g):(k="error",p)}function h(e,t,i){if("word"==e){var a=t.current();return i.context&&i.context.tagName!=a&&$.implicitlyClosed.hasOwnProperty(i.context.tagName)&&d(i),i.context&&i.context.tagName==a?(k="tag",f):(k="tag error",m)}return k="error",m}function f(e,t,i){return"endTag"!=e?(k="error",f):(d(i),u)}function m(e,t,i){return k="error",f(e,t,i)}function g(e,t,i){if("word"==e)return k="attribute",v;if("endTag"==e||"selfcloseTag"==e){var a=i.tagName,n=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||$.autoSelfClosers.hasOwnProperty(a)?c(i,a):(c(i,a),i.context=new l(i,a,n==i.indented)),u}return k="error",g}function v(e,t,i){return"equals"==e?b:($.allowMissing||(k="error"),g(e,t,i))}function b(e,t,i){return"string"==e?_:"word"==e&&$.allowUnquoted?(k="string",g):(k="error",g(e,t,i))}function _(e,t,i){return"string"==e?_:g(e,t,i)}var y=t.indentUnit,A=i.multilineTagIndentFactor||1,w=i.multilineTagIndentPastTag;null==w&&(w=!0);var x,k,$=i.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},C=i.alignCDATA;return{startState:function(){return{tokenize:a,state:u,indented:0,tagName:null,tagStart:null,context:null}},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;x=null;var i=t.tokenize(e,t);return(i||x)&&"comment"!=i&&(k=null,t.state=t.state(x||i,e,t),k&&(i="error"==k?i+" error":k)),i},indent:function(t,i,o){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+y;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=n&&t.tokenize!=a)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return w?t.tagStart+t.tagName.length+2:t.tagStart+y*A;if(C&&/<!\[CDATA\[/.test(i))return 0;var s=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(s&&s[1])for(;r;){if(r.tagName==s[2]){r=r.prev;break}if(!$.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(s)for(;r;){var l=$.contextGrabbers[r.tagName];if(!l||!l.hasOwnProperty(s[2]))break;r=r.prev}for(;r&&!r.startOfLine;)r=r.prev;return r?r.indent+y:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:i.htmlMode?"html":"xml",helperType:i.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),"function"!=typeof proboards&&(proboards=function(){}),$.extend(proboards,{dataHash:{},data:function(e,t){if(!$.isArray(e)&&"undefined"==typeof t)return"undefined"==typeof this.dataHash[e]?null:this.dataHash[e];$.isArray(e)||(e=[[e,t]]);for(var i=e,a=0;a<i.length;a++){var e=i[a][0],t=i[a][1];"proboards."==e.substr(0,10)&&"object"==typeof this.dataHash[e]?$.extend(this.dataHash[e],t):this.dataHash[e]=t}},unsaved_changes:0,active_ajax_calls:0,ajax:function(e){var t={async:!0,type:"post"};e=$.extend(t,e);var i=null;"function"==typeof e.beforeSend&&(i=e.beforeSend);var a=null;"function"==typeof e.success&&(a=e.success);var n=null;"function"==typeof e.error&&(n=e.error);var o=null;if("function"==typeof e.complete&&(o=e.complete),"post"==e.type.toLowerCase()){var r=proboards.data("csrf_token")||"null",s=proboards.analytics?proboards.analytics.google.getClientId():"";"undefined"==typeof e.data&&(e.data={}),"undefined"!=typeof FormData&&e.data instanceof FormData&&e.data.append?(e.data.append("csrf_token",r),s&&e.data.append("ga_client_id",s)):"string"==typeof e.data?(e.data+="&csrf_token="+r,s&&(e.data+="&ga_client_id="+s)):(e.data.csrf_token=r,s&&(e.data.ga_client_id=s))}return e.beforeSend=function(e,t){if(t.ignorePending||proboards.active_ajax_calls++,1==proboards.data("admin_v6")){var a="admin_v6=1";"string"==typeof t.data?t.data+="&"+a:"undefined"==typeof t.data&&(t.data=a)}null!=i&&i.call(this,e,t)},e.success=function(t,i,o){if(e.ignorePending||proboards.active_ajax_calls--,"object"==typeof t&&null!=t&&"object"==typeof t.pb_data)for(_key in t.pb_data)switch(_key){case"_google_analytics_events":proboards.analytics&&proboards.analytics.google.send(t.pb_data[_key]);case"_plugin_data":proboards.plugin&&proboards.plugin._add_data&&proboards.plugin._add_data(t.pb_data[_key]);break;case"_user_ids_on_page":null!=proboards.data("_user_ids_on_page")&&proboards.data(_key,$.unique_array(proboards.data(_key).concat(t.pb_data[_key])));break;default:proboards.data(_key,t.pb_data[_key])}if("object"==typeof t&&null!=t&&"string"==typeof t.error)return void(null!=n?n.call(this,t,o,"servererror"):proboards.error(t.error));if(null!=a)try{a.call(this,t,i,o)}catch(r){console.log("JS Error ",r.stack),proboards.error("JS Error: "+r)}},e.error=function(t,i,a){e.ignorePending||proboards.active_ajax_calls--;var o=t.getResponseHeader("Content-Type");if(null!=o&&o.match(/json/))try{var r=$.parseJSON(t.responseText,{throwError:!0}),s="object"==typeof r&&void 0!=r.internal_server_error;null!=n?(s&&(proboards.error(r.error),r.error="Server Error"),n.call(this,r,t,i,a)):proboards.error(r.error)}catch(l){console.log(l),proboards.error("JS Error: "+l)}else null!=n?n.call(this,t.responseText):t.responseText?proboards.error(t.responseText):console.log(i,"An AJAX request may have been interrupted.",a,t)},e.complete=function(e,t){null!=o&&o.call(this,e,t)},$.ajax(e)},error:function(e){proboards.dialog("error-message",{title:"Error",html:e})},escape_html:function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}),"function"!=typeof proboards&&(proboards=function(){}),$.extend(proboards,{item:function(e,t,i,a){if("member"==e&&(e="user"),"undefined"==typeof this.dataHash["proboards."+e]&&(this.dataHash["proboards."+e]={}),"undefined"!=typeof a)"undefined"==typeof this.dataHash["proboards."+e][t]&&(this.dataHash["proboards."+e][t]={}),this.dataHash["proboards."+e][t][i]=a;else{if("undefined"==typeof i)return"undefined"==typeof this.dataHash["proboards."+e][t]?null:this.dataHash["proboards."+e][t];this.dataHash["proboards."+e][t]=i}},nl2br:function(e){return"string"!=typeof e?e:e.replace(/\r\n|\n|\r/g,"<br />")},nbsp:function(e){return"string"!=typeof e?e:e.replace(/\t/g,"    ").replace(/  /g,"&nbsp; ").replace(/  /g,"&nbsp; ")},mono:function(e){return"string"!=typeof e?e:proboards.nl2br(proboards.nbsp(proboards.escape_html(e)))},capitalize:function(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})},commify:function(e){return text=reverse(e).replace(/(\d{3})(?=\d)(?!\d*\.)/g,"$1,"),reverse(text)},console_log:function(e){for(var t=0;t<e.length;++t){var i=e[t];console.log("%c ProBoards Log: ","color: #000099",i.log)}},add_commified_numbers:function(e){for(var t=0,i=0;i<e.length;i++){var a=e[i];"string"==typeof a&&(a=parseInt(a.replace(",",""))),"number"==typeof a&&(t+=a)}return this.commify(t)},size:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},preload:function(e){$(e).each(function(){$("<img/>")[0].src=this})},dialog:function(e,t){var i=$("#"+e);if(i.length||(i=$('<div id="'+proboards.escape_html(e)+'"></div>'),$(document.body).append(i)),"undefined"!=typeof t){void 0!=t.html&&i.html(t.html);var a=t.autoOpen;t.autoOpen=!1,t.title=proboards.escape_html(t.title),i.dialog(t),i.off("dialogopen.enter").on("dialogopen.enter",function(){proboards.dialogEnter(i,t.enterButton)}),("undefined"==typeof a||a)&&i.dialog("open")}return i.add(i.closest(".ui-dialog")).css("box-sizing","content-box"),i},dialog_toggle_buttons:function(e,t){var i=$("#"+e);if(i.length){var a=i.parents(".ui-dialog").find(".ui-dialog-buttonpane .ui-button");return"boolean"!=typeof t&&(t=!a.prop("disabled")),a.length&&a.prop("disabled",t),a}},dialogEnter:function(e,t){var i=e.data("dialog");if(i){var a=i.options.buttons;if(i.options.buttons){var n=$("input, select",e);if(0!=n.length){t&&(t=t.toLowerCase());var o=null;if($.isArray(a)){if(!t&&a.length)o=a[0].click;else if(t)for(var r=1,s=a.length;r<s;r++)if(a[r].text&&a[r].text.toLowerCase()==t){o=a[r].click;break}}else if(t){for(var r in a)if(a.hasOwnProperty(r)&&r.toLowerCase()==t){o=a[r];break}}else for(var r in a)if(a.hasOwnProperty(r)){o=a[r];break}"function"==typeof o&&n.off("keyup.dialogenter").on("keyup.dialogenter",function(t){var i=t.keyCode?t.keyCode:t.which;i==Keys.enter&&o.call(e)})}}}},confirm:function(e,t,i){var i=$.extend({modal:!1,onNo:function(){},onClose:function(){},title:"Confirm"},i);void 0!==i.width||$.browser.msie&&parseInt($.browser.version)<8||(i.width="auto");var a=proboards.dialog("confirmation",{title:i.title,html:e,width:i.width,modal:i.modal,buttons:{Yes:function(){$(this).dialog("close"),t()},No:function(){$(this).dialog("close"),i.onNo()}},open:function(){i.overlay&&$(this).data("overlay",$(document.body).overlay({css:{backgroundImage:"none",height:"100%",width:"100%",position:"fixed"}}))},close:function(){i.overlay&&$(this).data("overlay").remove(),"function"==typeof i.onClose&&i.onClose()}});return a},alert:function(e,t,i){"undefined"==typeof t?(t=e,e="Alert"):"undefined"==typeof i&&"object"==typeof t&&(i=t,t=e,e="Alert"),i=$.extend({title:e,html:t,buttons:{OK:function(){$(this).dialog("close")}}},i);proboards.dialog("alert",i)},loading:function(e,t){if("undefined"==typeof t){var t=e;if(t){proboards.dialog("loading-dialog",{title:"Loading...",width:400,modal:!0,html:'<div style="text-align: center;padding: 50px 0;">'+proboards.processing_icon()+"</div>",open:function(e,t){$(".ui-dialog-titlebar-close",$(this).parent()).hide()}})}else $("#loading-dialog").dialog("close")}else{var i=$(e);i.data("overlay")?i.data("overlay")&&(i.data("overlay").remove(),i.data("overlay",!1)):i.data("overlay",i.overlay())}},saving:function(e,t,i){proboards.loading($(e).closest(".content-container"),t),$(e).each(function(){var e=$(this),a=e.get(0).nodeName,n="INPUT"==a?"val":"BUTTON"==a?"text":"html";t?(e.data("original-text",e[n]()),e[n]("Saving..."),e.attr("disabled","disabled")):(e[n](e.data("original-text")),e.removeAttr("disabled"),"undefined"!=typeof i&&"success"!==i||e.setStatus("saved",{position:"after"}))})},confirm_dialog:function(e,t,i,a,n){i=$.unique_array(i);var o="";o="users"==e?"forum Accounts":e;var r=e.substr(0,e.length-1),s=t.charAt(0).toUpperCase()+t.slice(1)+" "+o.charAt(0).toUpperCase()+o.substr(1,o.length-2)+(1!=i.length?"s":""),l=t;"e"==t.charAt(t.length-1)&&(l=t.substring(0,t.length-1)),l=l.charAt(0).toUpperCase()+l.slice(1)+"ing",$("#confirm-container").length||$(document.body).append('<div id="confirm-container"></div>'),proboards.dialog("confirm-container",{autoOpen:!1,width:620,title:s,buttons:[{text:s,id:"action-button",click:function(){$("#confirm-container form").submit()}}]}),$("#confirm-container").dialog("open"),$("#confirm-container").html('<div class="center pad-top-bottom-thick">'+proboards.processing_icon({alt:"Loading, "})+" Please Wait</div>"),$("#action-button").button("disable").addClass("ui-state-disabled"),proboards.ajax({url:proboards.route(r+"_confirm",{action:t}),dataType:"html",data:{"ids[]":i,data:n},success:function(e){$("#action-button").button("enable").removeClass("ui-state-disabled"),$("#confirm-container").html(e),$("#confirm-container form").bind("validated",function(e){return e.preventDefault(),$("#action-button").button("disable").addClass("ui-state-disabled"),proboards.ajax({url:$("#confirm-container form").attr("action"),data:$("#confirm-container form").serialize(),dataType:"json",success:function(e){$("#confirm-container").dialog("close"),"undefined"!=typeof a&&a(e)}}),$("#confirm-container").html('<div class="center pad-top-bottom-thick">'+proboards.processing_icon({alt:"Loading, "})+l+"</div>"),!1}),$("#confirm-container").dialog("open")},error:function(e){$("#confirm-container").dialog("option","buttons",[{text:"Close",click:function(){$(this).dialog("close")}}]),"undefined"!=typeof e&&""!=e?$("#confirm-container").html('<div class="center pad-top-bottom-thick">'+e+"</div>"):$("#confirm-container").html('<div class="center pad-top-bottom-thick">Error</div>')}})},select_dialog:function(e){var t=$.extend({title:"Selection",options:[],selected:[],max:0,labelTextType:"text",onComplete:function(){},id:"selectDialog",width:400,height:300},e),i="max-"+t.max,a=1!=t.max?[{text:"Select All",click:function(){$(this).find(":checkbox").attr("checked","checked")}},{text:"Select None",click:function(){$(this).find(":checkbox").removeAttr("checked")}},{text:"Done",click:function(){var e=[];$(this).find(":checkbox").each(function(){void 0!=$(this).attr("checked")&&e.push($(this).val())}),$(this).dialog("close"),t.onComplete(e)}}]:[],n=proboards.dialog(t.id,{autoOpen:!1,title:t.title,width:t.width,height:t.height,buttons:a,open:function(){$(this).addClass(i)},close:function(){$(this).removeClass(i)}}),o=function(e){for(var i="",a=0;a<e.length;++a){var n=e[a];if(i+="<li>",void 0!=n.header)i+="<h2>"+proboards.escape_html(n.header)+"</h2>";else{var r=$.unique_id(a);i+='<input type="checkbox" id="'+r+'" value="'+proboards.escape_html(n.value)+'" '+($.inArrayLoose(n.value,t.selected)!=-1?'checked="checked"':"")+"> ",i+='<label for="'+r+'">'+("html"==t.labelTextType?n.label:proboards.escape_html(n.label))+"</label>",$.browser.msie&&(i+='<script type="text/javascript">$(\'label[for="'+r+'"] img\').click(function(e){e.preventDefault();var cb=$("#'+r+'");cb.attr("checked", !cb.attr("checked")).change();})</script>')}void 0!=n.options&&(i+="<ul>"+o(n.options)+"</ul>"),i+="</li>"}return i};n.html("<ul>"+o(t.options)+"</ul>");var r=$("input",n);if(1==t.max)$.browser.msie?r.css("width",0).css("margin",0).css("padding",0):r.hide(),r.change(function(e){n.dialog("close"),t.onComplete([$(this).val()])});else if(t.max>1){var s=0;r.change(function(e){$(this).is(":checked")?s>=t.max?$(this).removeAttr("checked"):++s:--s})}return n.dialog("open")},trimmable_list:function(e){var t=$.extend({options:[],selected:[],container:null,onChange:function(){},labelTextType:"text"},e),i=[];t.container&&(i=t.container.is("ul.trim-list")?t.container:$("> ul.trim-list",t.container)),i.length||(i=$('<ul class="trim-list"></ul>'),t.container&&t.container.append(i)),t.container||(t.container=i);var a={};$(".row",i).each(function(){a[$(this).idFromClass("row")]=!1});var n=function(e){for(var o=0;o<e.length;++o){var r=e[o];if(void 0!=r.value){var s=$(".row-"+r.value,i);if($.inArrayLoose(r.value,t.selected)!=-1)if(a[parseInt(r.value)]=!0,s.length)i.append(s);else{var l=$('<li class="row row-'+proboards.escape_html(r.value)+'"><label>'+("html"==t.labelTextType?r.label:proboards.escape_html(r.label))+'</label><div class="delete"><span></span></div></li>');i.append(l)}}void 0!=r.options&&n(r.options)}i.setEven()};n(t.options);for(id in a)a[id]||$(".row-"+id,i).remove();return $(".delete",i).unbind("click"),$(".delete",i).click(function(){var e=$(this).parents("li.row"),a=""+e.idFromClass("row"),n=$.inArrayLoose(a,t.selected);t.selected.splice(n,1),e.remove(),i.setEven(),t.onChange(t.selected)}),t.container},image_preview:function(e){var t=$("<img />").attr("src",e),i=function(){proboards.dialog("image-preview",{title:"Image Preview",width:Math.min(t[0].width+5,$(window).width()-100),height:Math.min(t[0].height+56,$(window).height()-100),html:'<div style="text-align: center;margin-top: 2px;"></div>'}),$("#image-preview").css("padding","0px"),$("#image-preview > div").append(t)};t[0].complete?i():t.load(i)},code_editor:function(e){var t=$.extend({textarea:null,mode:"htmlmixed",tabMode:"indent",indentUnit:4,lineNumbers:!0,height:null,matchBrackets:!0,matchTags:!0,toMatchingTag:!0,styleActiveLine:!0,scrollbarStyle:"native",extraKeys:{"Ctrl-J":"toMatchingTag","Ctrl-/":"toggleComment"}},e);switch(t.mode){case"js":t.mode="javascript";break;case"html":t.mode="pbTemplate"}var i=$(t.textarea),a=i.parent(),n=i.is(":visible");n||$(document.body).append(i);var o=CodeMirror.fromTextArea(i.get(0),t),r=$(o.getWrapperElement()),s=$(o.getScrollerElement());return t.height&&(r.height(t.height),s.height(t.height)),n||($(a).append(i),setTimeout(function(){$(a).append(r)},1)),i.data("editor",o),r.data("editor",o),s.bind("mousewheel",function(e){var t=s.scrollTop(),i=s.get(0).scrollHeight-s.get(0).clientHeight,a=e.originalEvent.wheelDelta;(a>0&&0===t||a<0&&t===i)&&e.preventDefault()}),i.addClass("CodeMirror-textarea"),CodeMirror.controlsSetup(o),"function"==typeof t.onChange&&o.on("change",t.onChange),o},code_editor_style:null,cookie:function(e,t,i){if("undefined"!=typeof t){if(i=$.extend({},i),"never"===i.expires&&(i.expires=18250),"number"==typeof i.expires){var a=i.expires;i.expires=new Date,i.expires.setDate(i.expires.getDate()+a)}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+(i.expires?"; expires="+i.expires.toUTCString():"")+(i.path?"; path="+i.path:"")+(i.domain?"; domain="+i.domain:"")+(i.secure?"; secure":"")}for(var n=document.cookie.split("; "),o=0;o<n.length;++o){var r=n[o].split("=");if(r[0]===e)return decodeURIComponent(r[1])}return null},image_path:function(){return proboards.data("image_path")||"//storage.proboards.com/forum/images"},get_image:function(e){e=$.extend(e,{}),e.src&&!e.src.match(/^(https?:)?\/\//)&&(e.src=proboards.image_path()+e.src);var t="<img ";return $.each(e,function(e,i){t+=proboards.escape_html(e)+'="'+proboards.escape_html(i)+'" '}),t+="/>"},help_icon:function(e){return"undefined"==typeof e&&(e=""),$('<img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png">').attr("title",e).tipTip()},help_icon_plain:function(e){return e=$.extend(e,{src:"/admin/pbhelpicon.png","class":"help-icon"}),proboards.get_image(e)},processing_icon:function(e){return e=$.extend(e,{src:proboards.image_path()+"/loader/processing.gif"}),proboards.get_image(e)},is_valid_url:function(e){return $.check_url(e)},is_valid_image_url:function(e){return"url("==e.slice(0,4)&&(e=e.slice(5,-2)),!!/\.(gif|jp(?:e|g|eg)|a?png)$/i.test(e)&&$.check_url(e)},refresh_ads:function(e,t){return window.pbtp?(window.pbtp.s=t||0,void("undefined"!=typeof adServer&&adServer.renderNewAdsForAdUnitCodes())):this.refresh_ads_old(e,t)},refresh_ads_old:function(e,t){$(".pb-ads").each(function(){var e=$(this).clone(),i=e.attr("src");i=i.replace(/&cb=[0-9\.]+/,"&cb="+Math.random()),i=i.replace(/&s=\d+/,"&s="+t),e.attr("src",i),$(this).replaceWith(e)})},instapost:function(e,t,i){if(e){i||(i={});var a=$('<form id="instapost" action="'+e+'" method="post"></form>');if(i.target&&a.attr("target",i.target),$("body").append(a),$.isArray(t)){var n={};$.each(t,function(e,t){n[t.name]=t.value}),t=n}t||(t={}),t.csrf_token=proboards.data("csrf_token"),$.each(t,function(e,t){var i=$('<input type="hidden">').attr("name",e).val(t);a.append(i)}),a.submit()}},validateUnicode:function(e){return e=e.replace(/[\uD800-\uDBFF]($|[^\uDC00-\uDFFF])/g,"$1"),e=e.replace(/(^|[^\uD800-\uDBFF])[\uDC00-\uDFFF]/g,"$1")},reportAd:function(){$(".pb-ads").each(function(){var e=$(this).attr("src").split("#");$(this).attr("src",e[0]+"#adreport")})},consolidateParams:function(e){e&&0!=e.length||(e=["search","route","hash"]);for(var t={},i=[],a=0,n=e.length;a<n;a++)switch(e[a]){case"search":var o={},r=window.location.search;if(r&&"?"!=r){for(var s=0,l=i.length;s<l;s++)delete t[i[s]];i=[];for(var d=r.substr(1).split("&"),c=d.length;c--;){var u=d[c].split("="),p=u[0],h=decodeURIComponent(u[1]);p.indexOf("[]")!=-1&&p.indexOf("[]")==p.length-2?("undefined"==typeof o[p]&&(t[p]=[],o[p]=1,i.push(p)),t[p].push(h)):t[p]=h}}break;case"route":$.extend(t,proboards.data("route").params);break;case"hash":var o={},f=window.location.hash;if(f&&"#"!=f){for(var s=0,l=i.length;s<l;s++)delete t[i[s]];i=[];for(var d=f.substr(1).split("&"),c=d.length;c--;){var u=d[c].split("="),p=u[0];if(2==u.length){var h=decodeURIComponent(u[1]);p.indexOf("[]")!=-1&&p.indexOf("[]")==p.length-2?("undefined"==typeof o[p]&&(t[p]=[],o[p]=1,i.push(p)),t[p].push(h)):t[p]=h}}}}return t},guestsOnlineDialog:function(e){var t=$("#guests-online");t.length?t.dialog("open"):(proboards.loading(!0),proboards.ajax({url:e?proboards.route("board_guests",{board_id:e}):proboards.route("guests"),complete:function(){proboards.loading(!1)},success:function(e){if(e.ips){for(var t='<table><thead><tr><th class="name">IP Address</th></tr></thead><tbody>',i=0;i<e.ips.length;i++)t+='<tr><td class="name">'+e.ips[i]+"</td></tr>";t+="</tbody></table>",proboards.dialog("guests-online",{html:t,title:"Guests Online",width:200,height:400})}}}))},route:function(e,t){if(!proboards.routeMap||!proboards.routeMap[e])return"";var i=proboards.routeMap[e];for(var a in t)t.hasOwnProperty(a)&&(i=i.replace(":"+a,t[a]));return(proboards.data("insite_path")||"")+i},listManagers:{}}),window.onbeforeunload=function(e){return $('input[type="submit"]',this.element).removeAttr("disabled"),proboards.active_ajax_calls>0?"There are still some AJAX processes pending. If you leave the page now, you may lose any changes you have made.":proboards.unsaved_changes?"You are about to discard all changes.":void 0},$.event.props=$.event.props.join("|").replace("layerX|layerY|","").split("|"),$(document).ready(function(){if(function(){window.console||(window.console={});for(var e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],t=function(){},i=0;i<e.length;i++)window.console[e[i]]||(window.console[e[i]]=t);
}(),"function"==typeof $.parseJSON){var e=$.parseJSON;$.parseJSON=function(t,i){i=$.extend({defaultValue:null,pbError:!0,throwError:!1},i);var a=i.defaultValue;try{a=e(t)}catch(n){var o="Some data could not be parsed. Refresh and try again.";if(i.throwError)throw o;i.pbError&&proboards.error(o)}return a}}var t=new Date,i=10*parseInt(t.getFullYear()/10,10),a=proboards.data("locale_settings"),n=a.input_date_format;a.input_date_dp_format=n.replace("%Y","yy").replace("%m","mm").replace("%d","dd"),$("input.date").livequery(function(){var e={changeMonth:!1,changeYear:!1,dateFormat:a.input_date_dp_format,yearRange:i-50+":"+(i+50),onSelect:function(e,t){$(this).trigger("change")}};$(this).datepicker(e)}),$("input.time").livequery(function(){$(this).timepicker({onSelect:function(){$(this).trigger("change")}})}),$('#change_version_form input[name="path"]').attr("value",window.location.pathname),$("#pbn-bar-wrapper > img, #pbn-bar-wrapper-admin > img").click(function(e){var t=$("#pbn-bar");t.toggle(),t.is(":visible")?(t.css("display","inline-block"),$(this).attr("src",proboards.image_path()+"/button_collapse.png"),$(this).attr("alt",">")):($(this).attr("src",proboards.image_path()+"/button_expand.png"),$(this).attr("alt","<")),null!==proboards.data("user")&&proboards.data("user").is_logged_in&&proboards.ajax({url:proboards.route("pbn_bar_hide"),type:"post",data:{minimized:t.is(":visible")?0:1}})}),$(".request_headers.enable").on("click",function(){var e=$(this).attr("id"),t=["override=1"];"staff_enable_headers_footers"==e?t.push("noheaders=1"):"staff_enable_plugins"==e?t.push("noplugins=1"):"staff_enable_templates"==e?t.push("notemplates=1"):"staff_enable_css"==e?t.push("nocss=1"):"staff_enable_staff"==e?t.push("pbstaff=0"):"staff_enable_all_settings"==e?t=t.concat(["noheaders=1","noplugins=1","notemplates=1","nocss=1"]):"staff_switch_pbn_bar"==e&&t.push("pbn_user_bar=1");for(var i=window.location.href.split("?"),a=i[1].split("&"),n=a.length;n--;)$.inArray(a[n],t)>=0&&a.splice(n,1);a.length?window.location=i[0]+"?"+a.join("&")+"&override=1":window.location=i[0]+"?override=1"}),$(".request_headers.disable").on("click",function(){var e=$(this).attr("id"),t=window.location.href;t+=t.indexOf("?")!==-1?"&":"?","staff_disable_headers_footers"==e?t+="noheaders=1":"staff_disable_plugins"==e?t+="noplugins=1":"staff_disable_templates"==e?t+="notemplates=1":"staff_disable_css"==e?t+="nocss=1":"staff_disable_staff"==e?t+="pbstaff=0":"staff_disable_all_settings"==e?t+="noheaders=1&noplugins=1&notemplates=1&nocss=1":"staff_switch_pbn_bar"==e&&(t+="pbn_user_bar=1"),window.location.href=t}),$("#staff_disable_specific_plugins").on("click",function(e){var t=$("#plugin-selection-dialog"),i="",a=window.location.href,n=/disable_plugins=([0-9]+(,[0-9]+)*,?)/,o=n.exec(a),r=[];o&&(r=o[1].split(",")),t.length?t.dialog("open"):(proboards.loading(!0),proboards.ajax({url:proboards.route("pb_staff_page_plugin_list"),data:{disabled_plugins:r},complete:function(){proboards.loading(!1)},success:function(e){proboards.dialog("plugin-selection-dialog",{width:600,height:600,html:e.html,title:"Plugins",buttons:[{text:"Disable Selected Plugins",click:function(){i=$("#plugin-disable-selection input:checkbox:checked").map(function(){return this.value}).get().join(","),a=a.replace(/[\&|\?]disable_plugins=(([0-9]+(,[0-9]+)*,?)?)/i,""),a+=a.indexOf("?")!==-1?"&":"?",i&&(a+="disable_plugins="+i),window.location.href=a}}]})}}))});var o=new Date(proboards.data("serverDate")),r=15e3,s=proboards.data("timezone"),l=o.getTimezoneOffset()/-60;null!==proboards.data("user")&&proboards.data("user").is_logged_in&&!proboards.data("user").assimilated&&s!=l&&proboards.ajax({url:proboards.route("update_user_timezone"),data:{timezone:l},success:function(){proboards.data("timezone",l)}});var d=Date.parse((new Date).toUTCString()),c=Date.parse(o.toUTCString()),u=d-c;$("abbr.time").livequery(function(){function e(t){var i=parseInt($(t).attr("data-timestamp"));if(0==i||!$.isNumeric(i))return $(t).text("Not Available"),void $(t).attr("title","Not Available");var a,n=i+u;localDate=new Date,n=parseInt(n,10),a=new Date(n),non_mod_date=new Date(i);var n=$.datepicker.formatDate(proboards.data("time_style")?"d M yy":"M d, yy",non_mod_date)+" at "+$.formatTime(proboards.data("military_time")?"HH:mm":"h:mmp",non_mod_date),o=(localDate.getTime()-a.getTime())/6e4,s=(localDate.getTime()-a.getTime())/1e3;(localDate.getTime()-non_mod_date.getTime())/6e4,(localDate.getTime()-non_mod_date.getTime())/1e3;if(o/60<24&&o>0?$(t).addClass("recent_time"):$(t).removeClass("recent_time"),s<-10)$(t).text(n);else if(s<30)$(t).text("a few seconds ago"),setTimeout(function(){e(t)},r);else if(o<1)$(t).text("less than a minute ago"),setTimeout(function(){e(t)},r);else if(o<60){var l=Math.floor(o)+" minute";o>2&&(l+="s"),l+=" ago",$(t).text(l),setTimeout(function(){e(t)},r)}else{var d=o/60;if(d<2)$(t).text("about an hour ago"),setTimeout(function(){e(t)},r);else if(d<24)$(t).text(Math.floor(d)+" hours ago"),setTimeout(function(){e(t)},r);else{var c=d/24;if(c<2){var p=parseInt($.formatTime("H",a)),h=parseInt($.formatTime("m",a)),f=parseInt($.formatTime("s",a)),m=parseInt($.formatTime("H",localDate)),g=parseInt($.formatTime("m",localDate)),v=parseInt($.formatTime("s",localDate));p>m||p==m&&h>g||p==m&&h==g&&f>v?$(t).text(n):($(t).text("yesterday at "+(proboards.data("military_time")?$.formatTime("HH:mm",non_mod_date):$.formatTime("h:mmp",non_mod_date))),setTimeout(function(){e(t)},r))}else $(t).text(n)}}$(t).attr("title",non_mod_date)}e(this)});var p=parseInt($.browser.version);if($.browser.msie&&p<10&&($('textarea[placeholder]:visible, input[type!="password"][placeholder]:visible').livequery(function(){var e=$(this);e.off(".placeholder"),e.on("focus.placeholder",function(){var e=$(this);e.val()==e.attr("placeholder")&&e.hasClass("placeholder")&&(e.val(""),e.removeClass("placeholder"))}).on("blur.placeholder",function(){var e=$(this);""==e.val()&&(e.val(e.attr("placeholder")),e.addClass("placeholder"))}).closest("form").submit(function(){$(this).find("[placeholder]").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.hasClass("placeholder")&&e.val("")})}),$(this).prop("autofocus")||e.triggerHandler("blur")}),$('input[type="password"][placeholder]').each(function(){var e=$(this),t=e.attr("class"),i=document.createElement("input");i.id=e.attr("id"),i["class"]=t?t+" placeholder":"placeholder",i.type="text",i.name=e.attr("name")+"_temporary",i.value=e.attr("placeholder"),i.tabIndex=e.attr("tabindex"),e.hide().after(i),e.on("focusout",function(){""==$(this).val()&&($(this).hide(),$(i).show())}),$(i).on("focus",function(){$(this).hide(),e.show().focus()})})),$.browser.msie&&parseInt($.browser.version)<8){var h=1e3;$(".popup_html li").each(function(){$(this).css("z-index",--h)}),$("#nav-tree > li").each(function(){$(this).css("z-index",--h)});var f=$(".popup_html ul");f.css({left:"9999px"}).show(),$("> li > a",f).each(function(){var e=$(this);e.width()>550&&e.css({width:"550px",overflow:"hidden"})}),f.hide()}$("a.button").livequery(function(){$(this).attr("role","button")}),$(document).on("click",".guest-prompt",function(e){if(null!==proboards.data("user")&&proboards.data("user").is_logged_in)return!0;var t=window.location,i=proboards.data("register_url"),a=proboards.data("login_url"),n=[];a&&n.push("login"),i&&n.push("register");var o=n.join(" or ");o||(o="login or register");var r="You need to "+o+" on this forum to post.",s=400;$(this).hasClass("members-link")&&(r="You need to "+o+" on this forum to view members.",s=435),e.preventDefault(),e.stopImmediatePropagation();var l=$(this).attr("alt")?$(this).attr("alt"):$(this).text();if(0==$("#registration-helper").length){var d='<div id="registration-helper">'+r+"</div>";$(document.body).append(d);var c=null;if(proboards.data("ext_reg_only"))c=function(e){window.location=e};else{var u='<form id="guest-helper" method="post"><input type="hidden" name="origin" /></form>',p=$(u).appendTo(document.body);c=function(e){p.attr("action",e).find('input[name="origin"]').val(t).end().submit()}}for(var h={login:{text:"Login",click:function(){c(a)}},register:{text:"Register",click:function(){c(i)}},cancel:{text:"Cancel",click:function(){$(this).dialog("close")}}},f=[],m=0,g=n.length;m<g;m++)f.push(h[n[m]]);f.push(h.cancel),proboards.dialog("registration-helper",{autoOpen:!1,width:s,buttons:f})}else $("#registration-helper").html(r),$("#registration-helper").dialog("option","width",s);return proboards.dialog("registration-helper",{title:l}),$("#registration-helper").dialog("open"),!1}),proboards.data("is_current_user_guest")&&!proboards.data("ext_reg_only")&&$("#welcome a").on("click",function(e){var t=null,i=$(this).attr("href"),a=window.location;return $("#guest-helper").length?t=$("#guest-helper"):(t=$('<form id="guest-helper" method="post"><input type="hidden" name="origin" /></form>'),$(document.body).append(t)),2!=e.which&&1!=e.ctrlKey||t.attr("target","_blank"),t.attr("action",i).find('input[name="origin"]').val(a).end().submit().removeAttr("target"),!1}),$("img.help-icon, img.tiptipify").tipTip({defaultPosition:"top"}),proboards.data("shoutbox_init")&&proboards.shoutbox.init(proboards.data("shoutbox_init")),$("#staff-debug").click(function(e){e.preventDefault(),window.open((proboards.data("insite_path")||"")+"/debug/requests","staff_debug","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=1000,height=596")}),$(".recent-threads-button").bind("click",function(e){var t=$("#recent-threads");e.preventDefault(),0==t.length?(proboards.loading(!0),proboards.ajax({url:proboards.route("participated_threads"),complete:function(){proboards.loading(!1)},success:function(e){t=proboards.dialog("recent-threads",{html:e,title:"Participated",width:575,height:363}),$(".dialog-fixed",t).insertBefore(t)}})):t.is(":visible")?t.dialog("close"):t.dialog("open")}),$.browser.msie&&parseInt($.browser.version)<=7?check_control_bar_ie():check_control_bar(),$(".clickable").clickable(),$(".show-user .badge-thumb, .badges-have .badge-thumb, .badges-icons .badge-icon").live("click",function(e){e.preventDefault(),proboards.badge.summary($(this).idFromClass("user"),$(this).idFromClass("badge"))}),$("#mobile-switch").click(function(){var e=$('<form action="'+proboards.route("set_version")+'" method="post">\t<input type="hidden" name="path" value="'+proboards.route("home")+'" />\t<input type="hidden" name="version" value="mobile" /></form>');$(document.body).append(e),e.submit()}),$(".disable-maintenance-button").click(function(e){e.preventDefault(),proboards.shared.maintenance.dialog()}),$("head link").filter('[rel="prev"], [rel="next"]').length&&$("body").append('<div style="position: absolute; width: 1px; height: 1px; background-color: transparent;"></div>');try{sessionStorage&&(sessionStorage.removeItem("referrer"),document.referrer&&sessionStorage.setItem("referrer",document.referrer))}catch(m){}$("#pbn-bar #switch-account").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),i='<form method="post"><input type="hidden" name="origin" /></form>',a=$(i).appendTo(document.body);a.attr("action",t).find('input[name="origin"]').val(window.location).end().submit()})}),$.fn.force_ie7_rerender=function(){$.browser.msie&&parseInt($.browser.version)<8&&$(this).hide().show()},function(e){e.fn.bind_first=function(t,i,a){return e(this).each(function(){e(this).bind(t,i,a);var n=e(this).data("events")[t];return n.unshift(n.pop()),e(this).data("events")[t]=n,this})},e.fn.progress_text=function(t){var i,a=e.extend({dots:3,tick:500},t),n=0,o=e(this),r=o.is("input")?"val":"html",s="val"==r?" ":"&nbsp;",l=o[r](),d=l,c=function(){if(o[r]()!=d)return void clearInterval(i);d=o[r]();var e=new Array(n+1).join(".")+new Array(a.dots-n+1).join(s);o[r](l+e),n==a.dots?n=0:++n};return i=setInterval(c,a.tick),c(),this},e.fn.isTextNode=function(){return 3==this.get(0).nodeType},e.fn.textNodes=function(){var t=function(){return 3==this.nodeType};return e(this).contents().filter(t).add(e(this).find("*").contents().filter(t))},e.fn.nextSelectable=function(t){var i=this;do{var a=i.parent().contents(),n=e.inArray(i.get(0),a);if(n<a.length-1){if(i=e(a.get(n+1)),e(i).text().length)return i}else i=i.parent()}while(i.length&&i.not("body"));return e("")},e.fn.prevSelectable=function(t){var i=this;do{var a=i.parent().contents(),n=e.inArray(i.get(0),a);if(n>0){if(i=e(a.get(n-1)),e(i).text().length)return i}else i=i.parent()}while(i.length&&i.not("body"));return e("")},e.fn.trimValue=function(){return e(this).val(e.trim(e(this).val()))},e.fn.arrayValue=function(t){if("undefined"==typeof t){var t=e(this).val();return""===t?[]:t.split(",")}return e(this).val(t.join(",")),e(this)},e.unique_array=function(e){for(var t={},i=[],a=0,n=e.length;a<n;++a)e[a]in t||(i.push(e[a]),t[e[a]]=1);return i},e.styleSupport=function(t){var i,a=["Moz","Webkit","O","ms"],n=document.createElement("div");if(t=e.camelCase(t),t in n.style)i=t;else for(var o=0;o<a.length;o++){var r=t.charAt(0).toUpperCase()+t.slice(1),s=a[o]+r;if(s in n.style){i=s;break}}return n=null,i},e.tabinate=function(t){function i(){var e=window.location.hash.length>1?window.location.hash:o;if(a!=e||"undefined"==typeof a){var t=r(e);t.length||(t=r(o)),t.click()}}var a,n,o=t.tabs.find(">*:first a").attr("href")+"-tab",r=function(e){return t.tabs.find('a[href="'+e.substr(0,e.length-4)+'"]').parent()};t.tabs.children().click(function(i){i.preventDefault();var o=e(this).find("a").attr("href");n=t.tabs.children(".ui-active").children("a").attr("href"),t.tabs.children().removeClass("ui-active"),t.content.children(":not(.tab-ignore)").hide(),e(this).addClass("ui-active"),e(o,t.content).show(),t.useHash&&(window.location.hash=o+"-tab",a=window.location.hash,n+="-tab"),t.callback&&"function"==typeof t.callback&&t.callback(a?a.substr(1):null,n?n.substr(1):null)}),i(),t.useHash&&(e("html").is(".ie7")?setInterval(i,200):e(window).bind("hashchange",i))},e.fn.setEven=function(){var t=e(this).children();return t.removeClass("even"),t.filter(":odd").addClass("even"),e(this)},e.fn.autoSubmit=function(t){e.unique_id();return this.each(function(){function i(t,i){e(i).css("background",t),setTimeout(function(){e(i).css("background","white")},800)}var a=e.extend({url:"",statusElement:null,beforeSendData:function(){},beforeSend:function(){},send:null,success:function(){},wait:1500,statusTime:3e3,instantUpdate:null,skipElement:0},t),n=e(this),o=e(this).get(0).nodeName,r="INPUT"==o?n.attr("type").toLowerCase():"",s="TEXTAREA"==o||e.inArray(r,["text","password","number"])!=-1;s&&n.data("as-value",n.val());var l="INPUT"==o&&"radio"==r,d=a.instantUpdate;null==d&&(d="SELECT"==o||"INPUT"==o&&"checkbox"==r||"INPUT"==o&&"radio"==r),null==a.statusElement&&(a.statusElement=e('<span class="status-box '+n.attr("name")+'-status"></span>'),n.after(a.statusElement));var c=a.statusElement,u={display:"inline"};c.loadingStatus({loadingClass:"saved",loadingCss:u,successClass:"saved",successCss:u,successText:"Saved!",errorCss:u,saveDisplayTime:a.statusTime,errorDisplayTime:a.statusTime+1e3});var p=c.data("loadingStatus"),h=null!==a.send?a.send:function(){var e={},t=n.val();n.val()==n.attr("placeholder")&&n.hasClass("placeholder")&&(t=""),"undefined"==typeof n.attr("type")||"checkbox"!=n.attr("type").toLowerCase()||n.attr("checked")||(t=0),e[n.attr("name")]=t,a.skipElement||p.setStatus("loading"),"function"==typeof a.beforeSendData&&a.beforeSendData.call(n,e),proboards.ajax({url:a.url,data:e,dataType:"json",beforeSend:function(t,i){e.error&&(proboards.active_ajax_calls--,a.skipElement||p.setStatus("error",e.error),t.abort())},success:function(e){a.skipElement?i("#57c566",a.backgroundClass):p.setStatus("success"),n.data("as-value",t),a.success.call(n,e)},error:function(e){a.skipElement?i("red",a.backgroundClass):p.setStatus("error","Error: "+e.error)}})};return n.bind(d?"change":"keyup",function(e){if(!l||n.is(":checked")){var t=n.data("as-value");if(!s||t!=n.val())if(d)h(n);else{void 0!=n.data("timeout")&&clearTimeout(n.data("timeout"));var i=setTimeout(function(){h(n)},a.wait);n.data("timeout",i)}}}),n}),this},e.fn.overlay=function(t,i){var a=e.extend(!0,{"class":"js-overlay",includeMargins:!1,css:{backgroundColor:"#000000",backgroundImage:"url("+proboards.image_path()+"/loader/processing.gif)",backgroundPosition:"center center",backgroundRepeat:"no-repeat",opacity:.5,position:"absolute",zIndex:"1"}},t),n=e(this),o=n.outerHeight(a.includeMargins),r=n.outerWidth(a.includeMargins);a.css.height||(a.css.height=o),a.css.width||(a.css.width=r);var s=n.offset();!i&&s||(s={top:0,left:0}),e.extend(a.css,s);var l=e("<div></div>").addClass(a["class"]).css(a.css);return i?e(this).css("position","relative").append(l):e(document.body).append(l),l},e.unique_id=function(t){"undefined"==typeof t&&(t="");var i;do i=t+parseInt(1e7*Math.random());while(e("#"+i).length);return i},e.inArrayLoose=function(e,t,i){if("object"!=typeof t)return-1;for("undefined"==typeof i&&(i=0);i<t.length;++i)if(t[i]==e)return i;return-1},e.byteSize=function(e,t){var i="",a=Math.pow(10,t||0);return e<1024?i="B":e<1048576?(e/=1024,i="KB"):e<1073741824?(e/=1048576,i="MB"):(e/=1073741824,i="GB"),e=parseInt(e*a)/a,e+""+i},e.fn.idFromClass=function(t){if("undefined"==typeof t&&(t=""),"undefined"==typeof e(this).attr("class"))return 0;var i=new RegExp(t+"-(\\d+)"),a=e(this).attr("class").match(i);return!!a&&parseInt(a[1])};var t=e.styleSupport("transform");e.cssHooks&&t&&"transform"!==t&&(e.cssHooks.transform={get:function(i,a,n){return e.css(i,t)},set:function(e,i){e.style[t]=i}}),e.fn.resizecomplete=function(t){return this.each(function(){var i=null;e(this).bind("resize",function(e){null!==i&&clearTimeout(i),i=setTimeout(function(e){t.call(this,e)},200)})}),this},e.fn.colorPickMe=function(t,i){return t||(t={}),i||(i={}),this.each(function(){var a=e(this);if(!a.data("colorPickerReady")){var n=e('<span class="style-wrapper color-picker-wrapper"></span>'),o=e('<span role="button" class="color-picker"><img src="'+proboards.image_path()+'/admin/themes/icons/color-picker.png"></span>'),r=e('<span class="color-picker-preview"></span>');a.wrap(n).after(o),r.css("background-color","#"+a.val()),a.before(r),a.data("colorPickerReady",!0),a.add(o).bind("click focus",function(){i=e.extend({autoUpdate:!1},i),a.colorPicker(i);var n=function(i){a.val(i);var n="transparent"!=i?"#"+i:i;r.css("background-color",n),e(this).colorPicker("hide"),"function"==typeof t.update&&t.update.call(this,i)};a.colorPicker("option","update",n),a.colorPicker("show")})}})},e.fn.autoRow=function(t){var i=t;this.each(function(){var t=e(this),a=e(".row-template",this),n=0,o=function(i){var r=a.clone().removeClass("row-template"),s=++n;r.data("index",s),r.html(r.html().replace(/{i}/g,'<span class="index">'+s+"</span>"));var l=e("input",r);if(l.bind("keyup keypress",function(){var e=l.filter('[value=""]').length;e!=l.length&&r.data("index")==n&&o()}),l.bind("blur",function(){if(n!=r.data("index")&&!r.data("deleting")){var t=l.filter('[value=""]').length;t==l.length&&(l.unbind("keydown keypress"),r.nextAll().each(function(){e(this).data("index",e(this).data("index")-1),e("span.index",this).text(e(this).data("index"))}),r.fadeOut(),r.data("deleting",!0),--n)}}),e(".delete",r).click(function(){n==r.data("index")||r.data("deleting")||(l.unbind("keydown keypress"),r.nextAll().each(function(){e(this).data("index",e(this).data("index")-1),e("span.index",this).text(e(this).data("index"))}),r.fadeOut(),r.data("deleting",!0),--n)}),"object"==typeof i)for(k in i)e('*[name="'+k+'"]',r).val(i[k]);r.hide().fadeIn(),t.append(r)};if(a.hide(),"undefined"!=typeof i&&e.isArray(i))for(var r=0;r<i.length;++r)o(i[r]);o()})},e.fn.clickable=function(t){t=e.extend({event:"mousedown",itemType:null,eventNamespace:"clickable"},t);var i=t.itemType,a=t.event,n=t.eventNamespace;return e(this).off("."+n),e(this).on(a+"."+n,function(t){var n=t.target,o=function(e){3==t.which||(t.ctrlKey||t.metaKey||2==t.which?window.open(e,"_blank"):location.href=e)};if(e(n).is("a")||e(n).is('input[type="checkbox"]')||e(n).hasClass("ui-label"))return!0;t.preventDefault(),t.stopImmediatePropagation();var r=e('a.target,input[type="checkbox"].target',this);if(r.length||(r=e('.target a,.target input[type="checkbox"]',this)),r.length||(r=e('a,input[type="checkbox"]',this)),r.length)if(r.is('input[type="checkbox"]'))r[r.is(":checked")?"removeAttr":"attr"]("checked","checked"),r.triggerHandler(a);else{var s=r.attr("href").replace(window.location.href.split("#")[0],"");"undefined"!=typeof s&&""!=s&&"#"!=s?o(s):r.triggerHandler(a)}if(i){var l=proboards.item(i,listManagerPrototype.getItemId(n));if(null!=l)return o(l.url)}}),this},e.fn.pulse=function(e){if(e){var t=this,i=proboards.shared.hexToRgb(e).join(","),a=function(e,t,n,o,r){t+=t>n?-o:o,e.css("background-color","rgba("+i+","+t/100+")"),t!=n?setTimeout(function(){a(e,t,n,o,r)},20):r&&r.call(e)},n=function(){this.attr("style",this.data("originalStyle"))};return t.data("originalStyle",t.attr("style")||""),a(t,0,100,10),a(t,100,0,2.5,n),this}},e.fn.targetBlank=function(e){(e.ctrlKey||e.metaKey||2==e.which)&&this.attr("target","_blank")},e.fn.replaceSelection=function(t){return e(this).each(function(){if(void 0!==this.selectionStart){var i=this.value.substring(0,this.selectionStart),a=this.value.substring(this.selectionEnd);this.value=i+t+a,this.selectionStart=i.length+t.length,this.selectionEnd=i.length+t.length}else if(void 0!==document.selection){e(this).focus();var n=document.selection.createRange();n.text=t,n.collapse(!1),n.select()}}),this}}(jQuery);var Keys={backspace:8,tab:9,enter:13,pause:19,caps:20,esc:27,space:32,page_up:33,page_down:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,del:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,numpad_4:100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,substract:109,decimal:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,shift:16,ctrl:17,alt:18,plus:187,comma:188,minus:189,period:190};Keys.modifies_text=function(e){return(e<37||e>40)&&(e<112||e>123)&&16!=e&&17!=e&&20!=e&&35!=e&&27!=e&&36!=e&&144!=e&&33!=e&&34!=e&&91!=e},Keys.moves_carat=function(e){return(e<112||e>123)&&16!=e&&17!=e&&20!=e&&27!=e&&144!=e&&91!=e},$.pushStateSupport=function(){return"function"==typeof window.history.pushState},$.fn.setStatus=function(e,t){var i=$.extend({classTime:1400,message:"",position:"append",positionOn:null,text:"",textTime:1e3},t);!i.text&&e&&(i.text=e.substr(0,1).toUpperCase()+e.substr(1)),$(this).each(function(){var t=$(this),a=i.positionOn||t,n=t.data("status"),o=t.data("statusElem");n&&(o&&o.remove(),t.removeClass(n),clearTimeout(t.data("timeout1")),clearTimeout(t.data("timeout2"))),o=$('<span class="status-box"></span>'),a[i.position](o),o.html(i.text+(""!=i.message?": "+i.message:"")).addClass(e).hide().fadeIn();var r=setTimeout(function(){o.fadeOut()},i.textTime),s=setTimeout(function(){t.removeClass(e)},i.classTime);t.addClass(e),t.data("status",e),t.data("statusElem",o),t.data("timeout1",r),t.data("timeout2",s)})},$.fn.sortableList=function(e){var t=$.extend({container:"",onComplete:function(){},exclude:""},e),i=$(t.container),a={};$(this).click(function(){var e=$(this).attr("class").match(/^([a-z0-9\-_]+)/)[1],n=[],o="number";$("> .item",i).each(function(){var i=$(this);if(!i.is(t.exclude)){var a=parseInt(i.attr("id").match(/\d+/));if($.isNumeric(a)){var r="",s=$(">."+e,this),l=$("input,select,textarea",s);r=l.length&&l.is('[type="checkbox"]')?l.is(":checked")?1:0:l.length?l.val():s.text(),"number"!==o||$.isNumeric(r)||(o="color"),"color"===o&&!r.match(/^[0-9a-fA-F]{6}$/)&&r.length&&(o="string"),n.push({id:a,element:this,value:r})}}}),"undefined"==typeof a[e]?a[e]="asc":a[e]="asc"===a[e]?"desc":"asc",n.sort(function(t,i){"string"===o?(t=(""+t.value).toLowerCase(),i=(""+i.value).toLowerCase()):"number"===o?(t=parseFloat(t.value),i=parseFloat(i.value)):"color"===o&&(t=(""+t.value).toLowerCase(),i=(""+i.value).toLowerCase());var n=0;return t<i?n=-1:t>i&&(n=1),n*("asc"==a[e]?1:-1)});for(var r=n.length-1;r>=0;--r)i.prepend(n[r].element);t.onComplete(this)})},$.fn.sliderTouchscreen=function(){var e=$(this);return $(".ui-slider-handle",e).on("touchstart",function(t){var i=e.width(),a=parseInt(e.offset().left),n=a+i;e.data("x-pos-min",a),e.data("x-pos-max",n)}).on("touchmove",function(t){var i=t.originalEvent.changedTouches[0],a=i.clientX,n=parseInt(e.data("x-pos-min")),o=parseInt(e.data("x-pos-max")),r=parseInt((a-n)/(o-n)*100);e.slider("value",r)}),e},function(){if($("html").is(".ie7")){var e={},t=null;e.getIframeHash=function(){return t?t.contents().get(0).location.hash||"#":""},e.updateIframe=function(e){var i=t&&t.contents().length?t.contents().get(0):null,a=i?i.location:null;i&&a&&(i.open().close(),a.hash=e)},t||$(document).ready(function(){var i=location.hash||"#";t=$('<iframe src="javascript:0" style="display:none" height="0" width="0" tabindex="-1" title="empty"></iframe>'),$("html").append(t),e.updateIframe(i);var a=function(){var t=null,a=location.hash||"#";a&&a!==i&&(t=!1),e.getIframeHash()!==i&&(t=!0),t===!1?(i=location.hash||"#",e.updateIframe(i)):t===!0&&(location.hash=e.getIframeHash(),i=location.hash||"#")};setInterval(a,100)})}}(),function(e){e.fn.oldReady=e.fn.ready,e.fn.ready=function(t){return e.fn.oldReady.call(this,function(){try{t.apply(this,arguments)}catch(e){"undefined"!=typeof console&&console["function"==typeof console.error?"error":"log"]("An error occurred during a document.ready call: ",e.toString(),"\nWhile executing: ",t)}})}}(jQuery),$.extend(proboards,{shared:{manager:{summary_setup:function(e){var t=[],i=proboards.data("lm_id");if(i){$(".lm-content-"+i+" .item").each(function(){var e=$(this).attr("id"),i=e.match(/[a-z]-(\d+)/i);try{t.push(i[1])}catch(a){}});var a=document.createElement("form");a.setAttribute("method","POST"),a.setAttribute("action",e);for(var n=0;n<t.length;n++){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","summary_ids[]"),o.setAttribute("value",t[n]),a.appendChild(o)}var r=$('.quick-reply [name="message"]');if(r.length&&""!=r.val()){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","quick_message"),o.setAttribute("value",r.val()),a.appendChild(o)}var o=document.createElement("input");return o.setAttribute("type","hidden"),o.setAttribute("name","csrf_token"),o.setAttribute("value",proboards.data("csrf_token")||"null"),a.appendChild(o),document.body.appendChild(a),a}}},browser:{isIE:function(){return!!window.createPopup}},maintenance:{dialog:function(){var e=this,t="Are you sure you want to disable maintenance mode?";2==proboards.data("maintenance_mode")&&1==proboards.data("maintenance_auth")&&(t="Disabling maintenance mode will reset your monthly bill<br />limit and allow unlimited pageviews. You will be charged<br />for additional pageviews according to your chosen plan.<br /><br />"+t),proboards.confirm(t,function(){e.disable()},{title:"Maintenance Mode"})},disable:function(){proboards.ajax({url:proboards.route("disable_maintenance"),success:function(){$(".maintenance-header").remove()}})}},hexToRgb:function(e){0==e.indexOf("#")&&(e=e.substr(1)),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var t=e.match(/([a-f\d]{2})/gi);return 3!=t.length?null:3==t.length?[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16)]:null}}});var pbFileUpload={init:function(e,t){e=$.extend({selFileUploadWidget:"#fileupload",selImgPreview:".preview img",selWysiwygInput:"",enableDragAndDrop:!0,onDragEnter:function(){}},e),t=$.extend({url:proboards.route("attachment"),maxNumberOfFiles:1,maxFileSize:1048576,updateLimits:function(){}},t),e.enableDragAndDrop||(t.dropZone=null);var i={};e.selWysiwygInput&&(i.insertButton=!0,i.deleteButton=!0),$(document.body).append(this.getUploadTemplate()).append(this.getDownloadTemplate(i));var a=$(e.selFileUploadWidget);if(a.length){a.on("mousedown",e.selImgPreview,function(e){e.preventDefault(),e.stopPropagation()}),a.fileupload(t),e.selWysiwygInput&&a.on("click",".insert button",function(t){t.preventDefault(),t.stopPropagation();var i=$(e.selWysiwygInput).data("wysiwyg"),a=$(this).parents(".template-download"),n=parseInt(a.data("id")),o=a.data("name"),r=a.data("sizef"),s=a.data("thumbnail");i.execCommand("addAttachment",0,{id:n,filename:o,size:r,thumbnail:s})}).on("click",".delete button",function(t){t.preventDefault(),t.stopPropagation();var i=$(e.selWysiwygInput).data("wysiwyg"),a=$(this).parents(".template-download"),n=parseInt(a.data("id"));i.execCommand("removeAttachment",0,{id:n})});var n=$("fileupload-overlay");if(!n.length&&e.enableDragAndDrop&&(n=$('\t\t\t\t<div id="fileupload-overlay">\t\t\t\t\t<div>Drop files here to upload</div>\t\t\t\t</div>\t\t\t').appendTo(document.body),n.css({"background-color":"#BBBBBB",display:"none",height:"100%",left:0,position:"fixed",top:0,width:"100%","z-index":10001}).find("div").css({color:"#666666","font-size":"30px",height:"24px",left:"50%","margin-top":"-12px","margin-left":"-200px",position:"fixed","text-align":"center",top:"50%",width:"400px"})),e.enableDragAndDrop&&(navigator.userAgent.indexOf("Safari")==-1||navigator.userAgent.indexOf("Chrome")!=-1)&&!$.browser.msie&&navigator.userAgent.indexOf("Trident")==-1){var o=!1,r=function(){n.stop().fadeOut(500)},s=function(){n.stop().fadeTo(200,1)};$(document).bind("dragenter.attachments",function(t,i){return t.stopPropagation(),t.preventDefault(),"function"==typeof e.onDragEnter&&e.onDragEnter.call(a),s(),!1}),n.bind("dragleave.attachments",function(e,t){e.stopPropagation(),e.preventDefault(),o||setTimeout(r,200)}),$(document).bind("drop,mouseup",function(e,t){r()}),$("div",n).on("dragenter.attachments",function(e){e.stopPropagation(),e.preventDefault(),o=!0}).on("dragleave.attachments",function(e){e.stopPropagation(),e.preventDefault(),o=!1})}}},getDownloadTemplate:function(e){e=$.extend({insertButton:!1,deleteButton:!1},e);var t=3,i="";return e.insertButton&&(i+='<td class="insert"><button>Insert</button></td>',t++),e.deleteButton&&(i+='<td class="delete"><button>Delete</button></td>',t++),'\t\t\t<script id="template-download" type="text/x-jquery-tmpl">\n\t\t\t\t<tr \t\t\t\t\tclass="template-download{{if error}} ui-state-error{{/if}}"\t\t\t\t\tdata-id="${id}"\t\t\t\t\tdata-name="${name}"\t\t\t\t\tdata-sizef="${sizef}"\t\t\t\t\tdata-thumbnail="${thumbnail_url}"\t\t\t\t>\n\t\t\t\t\t<td class="preview">\n\t\t\t\t\t\t<img src="${thumbnail_url}" alt="Thumbnail Preview">\n\t\t\t\t\t\t<table class="no-preview"><tr><td>No Preview</td></tr></table>\n\t\t\t\t\t</td>\n\t\t\t\t\t{{if error}}\n\t\t\t\t\t\t<td colspan="'+(t-1)+'">\n\t\t\t\t\t\t\t<p>Unable to upload file ${name}.</p>\n\t\t\t\t\t\t\t<p class="error">\n\t\t\t\t\t\t\t\t{{if error === "maxFileSize"}}\n\t\t\t\t\t\t\t\t\tError: File is too big\n\t\t\t\t\t\t\t\t{{else error === "uploadedBytes"}}\n\t\t\t\t\t\t\t\t\tError: Uploaded bytes exceed file size\n\t\t\t\t\t\t\t\t{{else error === "emptyResult"}}\n\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\tError: {{html error}}\n\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t{{else}}\n\t\t\t\t\t\t<td class="name">\n\t\t\t\t\t\t\t<span style="vertical-align:middle;">\n\t\t\t\t\t\t\t\t${name}\n\t\t\t\t\t\t\t\t<input type="hidden" name="attachment_ids[]" value="${id}" />\n\t\t\t\t\t\t\t\t<div class="ui-progressbar">\n\t\t\t\t\t\t\t\t\t<div class="ui-progressbar-complete"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="size">\n\t\t\t\t\t\t\t${sizef}\n\t\t\t\t\t\t</td>\n'+i+"\n\t\t\t\t\t{{/if}}\n\t\t\t\t</tr>\n\t\t\t</script>\t\t"},getUploadTemplate:function(){return'\t\t\t<script id="template-upload" type="text/x-jquery-tmpl">\n\t\t\t\t<tr class="template-upload{{if error}} ui-state-error{{/if}}">\n\t\t\t\t\t<td class="preview">\n\t\t\t\t\t\t<table class="no-preview"><tr><td>No Preview</td></tr></table>\n\t\t\t\t\t</td>\n\t\t\t\t\t{{if error}}\n\t\t\t\t\t\t<td colspan="4">\n\t\t\t\t\t\t\t<p>Unable to upload file ${name}.</p>\n\t\t\t\t\t\t\t<p class="error">\n\t\t\t\t\t\t\t\t{{if error === "maxFileSize"}}\n\t\t\t\t\t\t\t\t\tError: File is too big\n\t\t\t\t\t\t\t\t{{else error === "minFileSize"}}\n\t\t\t\t\t\t\t\t\tError: File is too small\n\t\t\t\t\t\t\t\t{{else error === "acceptFileTypes"}}\n\t\t\t\t\t\t\t\t\tError: Filetype not allowed\n\t\t\t\t\t\t\t\t{{else error === "maxNumberOfFiles"}}\n\t\t\t\t\t\t\t\t\tError: Max number of files exceeded\n\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\tError: ${error}\n\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t{{else}}\n\t\t\t\t\t\t<td class="name">\t\t\t\t\t\t\t${name}<div class="progress"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="size">\n\t\t\t\t\t\t\t${sizef}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="cancel">\n\t\t\t\t\t\t\t<button>Cancel</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="start" colspan="2">\n\t\t\t\t\t\t\t<button>Start</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t{{/if}}\n\t\t\t\t</tr>\n\t\t\t</script>\t\t';
}},ANALYTICS_DEBUG=!1;$.extend(proboards,{analytics:{google:{getClientId:function(){if("function"!=typeof ga)return void(ANALYTICS_DEBUG&&console.log("Google analytics not loaded."));var e="";return ga(function(t){e=t.get("clientId")}),e},send:function(e){return"function"!=typeof ga?void(ANALYTICS_DEBUG&&console.log("Google analytics not loaded.")):void(e&&($.isArray(e)||(e=[e]),$.each(e,function(e,t){if("object"==typeof t){var i="send";t.trackerName&&(i=t.trackerName+"."+i),"pageview"===t.hitType?(ga(i,"pageview"),ANALYTICS_DEBUG&&console.log(">>> Pageview Sent",t)):"event"===t.hitType&&void 0!=t.eventCategory&&void 0!=t.eventAction&&(ga(i,t),ANALYTICS_DEBUG&&console.log(">>> Event Sent",t))}})))}}}}),$(document).ready(function(){var e=proboards.data("_google_analytics_events");proboards.analytics.google.send(e)});var AUTOSAVE_THRESHOLD=900,AUTOSAVE_NEW_THREAD=1,AUTOSAVE_THREAD_REPLY=2,AUTOSAVE_QUICK_REPLY=3,AUTOSAVE_NEW_CONV=4,AUTOSAVE_CONV_REPLY=5,AUTOSAVE_CONV_QUICK_REPLY=6;$.extend(proboards,{autosave:{options:{type:0,id:0,subject:"",message:"",oldSubVal:"",oldMessVal:"",mode:"",defaultMode:"",charCount:0,maxChar:100,saved:!1,noDialog:!1,lsKey:location.host+"_draft"},init:function(e){var t=this;if("undefined"!=typeof Storage){if(t.options.type=e,e!=AUTOSAVE_NEW_THREAD&&e!=AUTOSAVE_NEW_CONV||this.bindAutosave($('input[name="subject"]'),!0,null),e!=AUTOSAVE_QUICK_REPLY&&e!=AUTOSAVE_CONV_QUICK_REPLY){if("undefined"==typeof this.options.retriesLeft&&(this.options.retriesLeft=3),2!=$(".editor.visual-editor iframe, .editor.bbcode-editor textarea").length&&this.options.retriesLeft--)return setTimeout(function(){t.init(e)},500);this.bindAutosave($(".editor.visual-editor iframe").contents(),!1,!0),this.bindAutosave($(".editor.bbcode-editor textarea"),!1,!1)}else this.bindAutosave($(".quick-reply .message textarea"),!1,!1);if(1==proboards.data("no_dialog")&&(t.options.noDialog=!0),proboards.data("message_mode")&&(t.options.defaultMode=proboards.data("message_mode")),!t.options.noDialog){var i=null;e!=AUTOSAVE_QUICK_REPLY&&e!=AUTOSAVE_CONV_QUICK_REPLY||(i="bbcode"),this.load(i)}proboards.data("autosave_override")&&t.runAutosave(t.options.defaultMode,!0)}},bindAutosave:function(e,t,i){var a=this;e.bind("keypress",function(){a.options.charCount++,a.options.saved||(a.options.saved=!0,t?(a.options.oldSubVal=e.val(),"block"==$(".editor.visual-editor").css("display")?(a.options.mode="visual",a.options.oldMessVal=$(".editor.visual-editor iframe").contents().find("body").html()):(a.options.mode="bbcode",a.options.oldMessVal=$(".editor.bbcode-editor textarea").val())):a.options.type!=AUTOSAVE_QUICK_REPLY&&a.options.type!=AUTOSAVE_CONV_QUICK_REPLY&&i?(a.options.mode="visual",a.options.oldMessVal=e.find("body").html()):(a.options.mode="bbcode",a.options.oldMessVal=e.val()),autosaveOp=setTimeout(function(){a.runAutosave()},1500))})},runAutosave:function(e,t){var i=this,a=i.options.type;if("bbcode"!=e&&"visual"!=e||(i.options.mode=e),!proboards.data("submitting")){var n,o,r="";if(a!=AUTOSAVE_NEW_THREAD&&a!=AUTOSAVE_NEW_CONV||(n=$('input[name="subject"]').val()),a!=AUTOSAVE_QUICK_REPLY&&a!=AUTOSAVE_CONV_QUICK_REPLY?"visual"==i.options.mode?(o=$(".editor.visual-editor iframe").contents().find("body").html(),r=$(".editor.visual-editor iframe").contents().find("body").text()):o=$(".editor.bbcode-editor textarea").val():o=$(".quick-reply textarea").val(),o.match(/^\s*$/)||"visual"==i.options.mode&&r.match(/^\s*$/))return void(i.options.saved=!1);if(i.options.charCount<i.options.maxChar&&!t)if(a==AUTOSAVE_NEW_THREAD||a==AUTOSAVE_NEW_CONV){if(i.options.oldSubVal!=n||i.options.oldMessVal!=o)return i.options.oldSubVal=n,i.options.oldMessVal=o,void(autosaveOp=setTimeout(function(){i.runAutosave()},1500))}else if(i.options.oldMessVal!=o)return i.options.oldSubVal=n,i.options.oldMessVal=o,void(autosaveOp=setTimeout(function(){i.runAutosave()},1500));var s=i.getTypeId();if(a==AUTOSAVE_NEW_CONV||null!=s){i.options.id=s,i.options.subject=n,i.options.message=o;var l=i.options.lsKey;a!=AUTOSAVE_QUICK_REPLY&&a!=AUTOSAVE_CONV_QUICK_REPLY||a--;var d={type:a,affected_id:i.options.id,subject:i.options.subject,message:i.options.message,mode:i.options.mode,time:parseInt((new Date).getTime()/1e3)};localStorage[l]=JSON.stringify(d),i.options.charCount=0,i.options.saved=!1}}},getTypeId:function(){var e=this,t=e.options.type;return t==AUTOSAVE_NEW_THREAD?proboards.data("page").board.id:t==AUTOSAVE_THREAD_REPLY||t==AUTOSAVE_QUICK_REPLY?proboards.data("page").thread.id:t==AUTOSAVE_CONV_REPLY||t==AUTOSAVE_CONV_QUICK_REPLY?proboards.data("page").conversation.id:null},load:function(e){var t=this,i=t.options.lsKey;if(null!=localStorage[i]){var a=$.parseJSON(localStorage[i]);if(a&&!(parseInt((new Date).getTime()/1e3)-a.time>AUTOSAVE_THRESHOLD)){var n=proboards.data("type");if(n!=AUTOSAVE_QUICK_REPLY&&n!=AUTOSAVE_CONV_QUICK_REPLY||n--,a.type==n&&t.getTypeId()==a.affected_id){var o=e||t.options.defaultMode;t.dialogSetup(a.subject,a.message,a.mode,o)}}}},clear:function(){"undefined"!=typeof localStorage&&localStorage.removeItem(this.options.lsKey)},dialogSetup:function(e,t,i,a){var n=this,o=function(t,i){var a=$('<div id="autosave"><p>We found a recent draft that you were working on.  Would you like to restore it?</p></div>');e&&a.append('<div class="as-wrapper"><div class="subject-header">Subject:</div><div class="subject"></div></div><br />'),a.append('<div class="as-wrapper"><div class="message-header">Message:</div><div class="message"></div></div>'),a.find(".subject").text(e),a.find(".message").html(t),$("body").append(a),proboards.dialog("autosave",{title:"Load Draft",autoOpen:!0,width:585,height:250,buttons:[{text:"Yes",click:function(){return $(".quick-reply .message textarea").length?($(".quick-reply .message textarea").val(i),void $(this).dialog("close")):(null!=e&&$('input[name="subject"]').val(e),"block"==$(".editor.visual-editor").css("display")?$(".editor.visual-editor iframe").contents().find("body").html(i):$(".editor.bbcode-editor textarea").val(i),void $(this).dialog("close"))}},{text:"No",click:function(){n.clear(),$(this).dialog("close")}}]})},r="",s="",l=proboards.data("nosmiles");i!=a?"bbcode"==a?proboards.ajax({url:proboards.route("filter_html2bbcode"),data:{html:t,nosmiles:l},success:function(e){r=e.bbcode,r=r.replace(/>/g,"&gt;"),r=r.replace(/</g,"&lt;"),r=r.replace(/\n/g,"<br>"),s=e.bbcode,o(r,s)}}):proboards.ajax({url:proboards.route("filter_bbcode2html"),data:{bbcode:t,nosmiles:l},success:function(e){r=e.html,s=e.html,o(r,s)}}):"visual"==a?proboards.ajax({url:proboards.route("filter_html2bbcode2html"),data:{html:t,nosmiles:l},success:function(e){r=e.html,s=e.html,o(r,s)}}):(r=t,r=r.replace(/>/g,"&gt;"),r=r.replace(/</g,"&lt;"),r=r.replace(/\n/g,"<br>"),s=t,o(r,s))}}}),$.extend(proboards,{avatar:{editor:{container_id:"",thumb_container_id:"",obj:void 0,obj_id:"avatar-obj",thumb_obj_id:"avatar-thumb-obj",user_id:0,aData:""},attributes:null,attr_links:{},avatar_changed:0,setAttributes:function(e){proboards.avatar.attributes=e},setEditorData:function(e,t){proboards.avatar.editor.user_id=e,proboards.avatar.editor.aData=t},getEditorObject:function(){return"undefined"!=typeof proboards.avatar.editor.obj?proboards.avatar.editor.obj:($("#"+proboards.avatar.editor.obj_id).length>0&&"function"==typeof $("#"+proboards.avatar.editor.obj_id)[0].saveAvatarCallback?proboards.avatar.editor.obj=$("#"+proboards.avatar.editor.obj_id)[0]:proboards.avatar.editor.obj=$("#"+proboards.avatar.editor.obj_id+"-embed")[0],proboards.avatar.editor.obj)},loadThumb:function(e,t,i,a){a=$.extend({width:150,height:150},a);var n=proboards.data("avatar_thumbnail_flash_path");$("."+e).each(function(){$(this).html('<object id="'+t+'" data="'+n+'" width="'+a.width+'" height="'+a.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowScriptAccess" value="sameDomain" /><param name="flashVars" value="aData='+i+'" /><param name="wmode" value="transparent" /><param name="movie" value="'+n+'" /><param name="quality" value="high" /><embed src="'+n+'" allowScriptAccess="sameDomain" flashVars="aData='+i+'" wmode="transparent" quality="high" width="'+a.width+'" height="'+a.height+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object>')})},loadEditor:function(e){proboards.avatar.editor.container_id=e;var t=proboards.avatar.editor.obj_id,i={width:780,height:500},a=proboards.avatar.editor.aData,n=proboards.data("avatar_maker_flash_path");$("#"+e).html('<object id="'+t+'" data="'+n+'" width="'+i.width+'" height="'+i.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowScriptAccess" value="sameDomain" /><param name="flashVars" value="aData='+a+'" /><param name="wmode" value="transparent" /><param name="movie" value="'+n+'" /><param name="quality" value="high" /><embed id="'+t+'-embed" src="'+n+'" allowScriptAccess="sameDomain" flashVars="aData='+a+'" wmode="transparent" quality="high" width="'+i.width+'" height="'+i.height+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object>'),$.colorPicker(),$(document).bind("mousewheel",function(e,t){var i=proboards.avatar.getEditorObject(),a=$(i).offset(),n=e.pageX-a.left,o=e.pageY-a.top;if(n>0&&n<$(i).width()&&o>0&&o<$(i).height())return i.mouseScrollCallback({delta:t,x:n,y:o}),!1})},updateEditor:function(){$("#"+proboards.avatar.editor.container_id+' param[name="flashVars"]').val("aData="+proboards.avatar.editor.aData),$("#"+proboards.avatar.editor.container_id+" embed").attr("flashvars","aData="+proboards.avatar.editor.aData)},loadEditorThumb:function(e){proboards.avatar.editor.thumb_container_id=e,proboards.avatar.loadThumb(e,proboards.avatar.editor.thumb_obj_id,proboards.avatar.editor.aData)},getAttributes:function(){return null!=proboards.avatar.attributes&&proboards.avatar.attributes},save:function(e){proboards.avatar.editor.aData=e+"&pathPrefix="},savePNG:function(e){var t=proboards.avatar.editor.aData,i=t.indexOf("&pathPrefix=");i>0&&(t=t.substr(0,i)),proboards.ajax({url:proboards.route("save_avatar",{user_id:proboards.data("page").member.id}),data:{img_data:e,aData:t},type:"post",success:function(e){var t=proboards.avatar.getEditorObject();t.saveAvatarCallback(e),""!=proboards.avatar.editor.thumb_container_id&&proboards.avatar.loadEditorThumb(proboards.avatar.editor.thumb_container_id),proboards.avatar.updateEditor()}})},savePopup:function(e){this.avatar_changed=e},base64Decode:function(e){var t,i,a,n,o,r,s,l="",d=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)n=c.indexOf(e.charAt(d++)),o=c.indexOf(e.charAt(d++)),r=c.indexOf(e.charAt(d++)),s=c.indexOf(e.charAt(d++)),t=n<<2|o>>4,i=(15&o)<<4|r>>2,a=(3&r)<<6|s,l+=String.fromCharCode(t),64!=r&&(l+=String.fromCharCode(i)),64!=s&&(l+=String.fromCharCode(a));return l},utf8_decode:function(e){for(var t="",i=0,a=c1=c2=0;i<e.length;)a=e.charCodeAt(i),a<128?(t+=String.fromCharCode(a),i++):a>191&&a<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&a)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&a)<<12|(63&c2)<<6|63&c3),i+=3);return t},trace:function(e){},colorPicker:function(e){"undefined"!=typeof e.index&&0!=e.index||(e.index=0);var t="";if("object"==typeof e.suggestedHexes&&e.suggestedHexes.length>0){t+='<div class="suggested-header">Suggested '+e.displayName+' colors:</div><div class="suggested-palette">';for(var i=0;i<e.suggestedHexes.length;i++)t+='<div class="palette-option" style="background: #'+e.suggestedHexes[i]+";\" onclick=\"$.colorPicker('setHex', '"+e.suggestedHexes[i]+"');\"></div>";t+='</div><div class="clear"></div>'}if("object"==typeof e.linkedTo){var a="Link";1==e.index&&(a+=" secondary"),a+=" "+e.displayName+" color to:<br /><div>",a="";var n=0,o=0;for(var r in e.linkedTo){"object"!=typeof proboards.avatar.attr_links[e.name+e.index]&&(proboards.avatar.attr_links[e.name+e.index]={}),proboards.avatar.attr_links[e.name+e.index][r]=e.linkedTo[r];var s=r.match(/([a-zA-Z]+)(\d*)/),l=(s[1],s[2]),d=e.linkedToDisplay[r][e.name][o];o++,"number"!=typeof l&&(l=0),a+='<div class="link-colors"><input id="link_'+r+'_checkbox" type="checkbox"'+(proboards.avatar.attr_links[e.name+e.index][r]?' checked="checked"':"")+" onclick=\"proboards.avatar.attr_links['"+e.name+e.index+"']['"+r+"']=(proboards.avatar.attr_links['"+e.name+e.index+"']['"+r+"']?false:true); $.colorPicker('setHex');\" /><label for=\"link_"+r+'_checkbox"> Link to '+(1==l?"secondary ":"")+d+" color</label></div>",n++}n>0&&(t+=a)}var c=proboards.avatar.getEditorObject(),u=$(c).offset();$.colorPicker("show",{title:e.displayName,hex:e.hex,extraHTML:t,offset:{left:u.left+e.mouseX-7,top:u.top+e.mouseY+10},hide:function(){var e=proboards.avatar.getEditorObject();e.closeHex()},update:function(t){try{if(c.setHex(e.name,e.index,t),"object"==typeof proboards.avatar.attr_links[e.name+e.index])for(var i in proboards.avatar.attr_links[e.name+e.index])if(1==proboards.avatar.attr_links[e.name+e.index][i]){var a=i.match(/([a-zA-Z]+)(\d*)/),n=a[1],o=a[2];"number"!=typeof o&&(o=0),c.setHex(n,o,t)}}catch(r){}}})}}}),$.extend(proboards,{badge:{_summary_cache:{},summary:function(e,t){$(".badge-summary").dialog("close");var i=t+"-"+e;return $("#badge-summary-"+i).length?$("#badge-summary-"+i).dialog("open"):(proboards.loading(!0),void proboards.ajax({url:proboards.route("badge_summary",{user_id:e,badge_id:t}),data:{hide_checkboxes:$('input[name="profile_badges[]"]').length>0?1:0},complete:function(){proboards.loading(!1)},success:function(a){var n=proboards.dialog("badge-summary-"+i,{width:500,height:350,title:"Badge Summary",html:a}).addClass("badge-summary");$('.display-settings input[type="checkbox"]',n).autoSubmit({url:proboards.data("badge_stack_edit_url"),success:function(e){var t=$(this).is(":checked"),i="display_profile"===$(this).attr("name"),a="badge-"+(i?"thumb":"icon"),n=i?$(".show-user"):$(".mini-profile"),o=$(".badge-"+$(this).data("badge_id")+".user-"+$(this).data("user_id")+"."+a,n);o.each(function(){$(this).toggle(t);var e=$(this).closest(i?".badge-thumbs":".badge-icons");e.toggle($("."+a+":visible",e).length>0)})}}).data("badge_id",t).data("user_id",e),$('.gifter input[type="checkbox"]',n).autoSubmit({url:proboards.data("badge_edit_url")}),$('.gifter input[type="checkbox"], .display-settings input[type="checkbox"]',n).each(function(){$(this).next().next().after($(this).next())}),$(".badge-use-action",n).click(function(e){e.preventDefault(),n.dialog("close"),proboards.badge.action.dialog(t)}),$(".badge-gift",n).click(function(i){i.preventDefault(),n.dialog("close"),proboards.badge.gift.dialog(t,e)})}}))},action:{dialog:function(e,t){$(".badge-action").dialog("close");var i="badge-action-"+e+(t?"-"+t:""),a=$("#"+i);if(a.length)return a.dialog("open");var n=t;proboards.loading(!0),proboards.ajax({url:proboards.route("badge_action_prepare",{badge_id:e}),data:t?{user_id:t}:{},complete:function(){proboards.loading(!1)},success:function(t){a=proboards.dialog(i,{width:600,title:"Use Action",html:t,buttons:{"Use Action":function(){var t=$('input[name="user_search_box_input"]',this).val();"undefined"==typeof n&&/^\s*$/.test(t)||(proboards.loading(!0),o.call(this,e,$("select",this).val(),n,t,$("textarea",this).val()))}}}).addClass("badge-action");var r=$.unique_id("user-search"),s=$("<div></div>").attr("id",r),l=$('<input name="user_id" type="hidden" />'),d=$(".user-search",a);d.append(s).append(l),proboards.search.create_user_search({container:s,input:l,results:proboards.data("user_search_results"),change:function(e,t){n=t.ids[0]},formId:"",limit:1,checkedHash:{},isPendingList:0,currentUser:d.hasClass("self_action")?0:proboards.data("user").id,showExisting:1,showAdded:1,searchBox:1,allowManualInput:!0})}});var o=function(e,t,i,n,o){var r=$(this);proboards.ajax({url:proboards.route("badge_action",{badge_id:t}),data:{badge_id:t,user_id:i,user_search_box_input:n,message:o},complete:function(){proboards.loading(!1)},success:function(t){r.dialog("close"),r.remove(),proboards.alert("Success",t.message,{close:function(){window.location.reload(!0)},modal:!0}),a.remove(),$("#badge-summary-"+e+"-"+i).remove()}})}}},gift:{options:{dialogId:"badge-gift-dialog",dialogTitle:"Give Gift",height:"auto",width:"430px"},dialog:function(e,t){var i=this,a=i.options.dialogId,n=255;proboards.loading(!0),proboards.dialog(a,{title:i.options.dialogTitle,autoOpen:!1,buttons:{"Give Gift":function(){var i=$(this),a=(i.parent(),$("#badge-select",i).val()),n=$('input[name="recipient_id"]',i).val(),o=$('input[name="user_search_box_input"]',i).val(),r=$("#badge-dialog-textarea",i).val();return""==n&&/^\s*$/.test(o)?($.inputError($(".user-search-input",i),"Select a recipient."),!1):(proboards.loading(!0),void proboards.ajax({url:proboards.route("gift_send"),data:{user_badge_id:a,recipient_id:n,user_search_box_input:o,message:r},complete:function(){proboards.loading(!1)},success:function(a){$(".user-link",i).on("click",function(){1==proboards.unsaved_changes&&(proboards.unsaved_changes=0)}),i.dialog("close");var n='<p class="center">Gift was successfully sent to '+a.profile+".</p>";proboards.alert("Success",n,{close:function(){window.location.reload(!0)},modal:!0}),$("#badge-action-"+e).remove(),$("#badge-summary-"+e+"-"+t).remove()}}))}},height:i.options.height,width:i.options.width,open:function(){proboards.unsaved_changes++},close:function(){proboards.unsaved_changes--,$.clearInputError()}}),proboards.ajax({url:proboards.route("gift_dialog"),data:{user_id:t,badge_id:e},complete:function(){proboards.loading(!1)},success:function(e){var i=$("#"+a);i.html(e);var o=$("#gift-recipient-searchbox",i),r=$('input[name="recipient_id"]',i);proboards.search.create_user_search({container:o,input:r,change:function(e,t){r.val(t.itemData.id).change()},currentUser:t,searchBox:1,limit:1,allowManualInput:!0}),$("#badge-select",i).on("change",function(){var e=proboards.data("regift_action_data"),t="",a=$(this).val(),o=e[a].regifts_left;o==n?t+=" The badge will always be regiftable.":o-1==0?t+=" The badge will no longer be regiftable.":(o--,o+=1!=o?" more times":" more time",t+=" The badge will be regiftable "+o+".");var r=e[a].actions_left;r==n?t+=" This badge has unlimited actions.":0!=r&&(r+=1!=r?" actions left":" action left",t+=" This badge has "+r+"."),i.data("badgeActions",e[a].actions_left),$("#badge-extra-notes",i).text(t)}).trigger("change"),i.dialog("open")}})}}}}),proboards.board={select:function(e,t){var i=e||function(){},a=$.extend({id:"board_listing",multiSelect:!1,accessible:!0,title:"Select Board",prepend:"",useExisting:!1,disabledIds:null,mimicGuest:!1},t),n=a.accessible?1:0,o=a.mimicGuest?1:0,r={accessible:n,mimic_guest:o},s=null,l=a.id,d=function(){var e=$(this);if($("input",e).prop("disabled",!1).prop("checked",!1),$.isArray(a.disabledIds))for(var t=a.disabledIds,i=0,n=t.length;i<n;i++){var o=e.find('input[value="'+t[i]+'"]');o.prop("disabled",!0),o.attr("title","This board has already been selected.")}};a.multiSelect?(r.multi_select=1,s={"Select All":function(){$(this).find(":checkbox").not(":disabled").prop("checked",!0)},"Select None":function(){$(this).find(":checkbox").not(":disabled").prop("checked",!1)},Done:function(){var e=[],t=[],a=$('input[name="board_id"]:checked',this);a.each(function(){e.push($(this).val()),t.push($(this).next().text())}),e.length>0&&($(this).dialog("close"),i(e,t,$("#remember-board").prop("checked")))}}):s={Select:function(){var e=$('input[name="board_id"]:checked',this),t=e.val(),a=e.next().text();void 0!=t&&($(this).dialog("close"),i(t,a,$("#remember-board").prop("checked")))}},$("#"+l).length&&a.useExisting?d.call($("#"+l).dialog("open")):(proboards.loading(!0),proboards.ajax({url:proboards.route("admin_board_list"),data:r,success:function(e){a.prepend&&(e=a.prepend+e);var t=proboards.dialog(l,{dialogClass:"board-listing",title:a.title,html:e,height:350,width:500,buttons:s});void 0!==a.remember&&t.nextAll(".ui-dialog-buttonpane").prepend('<span class="button-text"><input id="remember-board" type="checkbox" '+(a.remember?"checked ":"")+'/><label for="remember-board">&nbsp;Remember my choice</label></span>'),d.call(t)},complete:function(){proboards.loading(!1)}}))}},$.extend(proboards,{calendar:{init:function(e){var t=this,i=["January","February","March","April","May","June","July","August","September","October","November","December"];e.type=proboards.data("calendar_list_view")?"list":"calendar",this.calendar_selectMenu=$(".select_calendar_type").selectMenu({status:"View "+e.type.charAt(0).toUpperCase()+e.type.substr(1),staticStatus:!1,beforeShow:function(){"list"==e.type?($(this).menu("hideOption","type_list"),$(this).menu("showOption","type_calendar")):($(this).menu("showOption","type_list"),$(this).menu("hideOption","type_calendar"))},menuOptions:{click:function(i,a){e.type=$(a.item).attr("class").substr(5),t.jumpToMonth(e.type,e.month,e.year)}}}),this.month_selectMenu=$(".select_calendar_month").selectMenu({status:i[e.month-1],staticStatus:!1,menuOptions:{click:function(t,a){e.month=$(a.item).attr("class").substr(6),$(this).next().find(".status").text(i[e.month-1])}}}),this.year_selectMenu=$(".select_calendar_year").selectMenu({status:e.year,staticStatus:!1,menuOptions:{click:function(t,i){e.year=$(i.item).attr("class").substr(5),$(this).next().find(".status").text(e.year)}}}),$(".calendar_go_button").show().click(function(){t.jumpToMonth(e.type,e.month,e.year)})},set_date:function(e){e.day||(e.day=1),this.date=e.year+"-"+(e.month<10?"0"+e.month:e.month)+"-"+(e.day<10?"0"+e.day:e.day)},set_board_tree:function(e){this.board_tree=e},new_event:function(e){var t=this;e||(e=this.date),proboards.data("new_event_date",e);var i="time",a=proboards.data("locale_settings");24==a.input_time_format&&(i+=" military");var n=t.$newEventDialog;n?n.dialog("open"):proboards.ajax({url:proboards.data("calendar_event_dialog_url"),dataType:"html",success:function(e){t.$newEventDialog=proboards.dialog("calendar-new-event-dialog",{html:e,autoOpen:!0,width:620,height:420,title:"Add Calendar Event",buttons:{"Create Event":function(){$("form",this).submit()},Cancel:function(){$(this).dialog("close")}},create:function(){var e=$(this),t=$('input[name="start_date"]',this),i=$('input[name="end_date"]',this),a=$('input[name="start_time"]',this),n=$('input[name="end_time"]',this),o=$('input[name="all_day_event"]',this);t.on("change",function(){i.data("edited")||i.val($(this).val())}),i.add(n).on("change",function(){i.data("edited",!0)}),o.bind("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))});var r=proboards.data("locale_settings");$("form",this).form({submit:function(){var e=o.prop("checked")?t.add(i):t.add(i).add(a).add(n),r=$('input[name="board_id"]:checked').val(),s=proboards.data("new_thread_url").replace(":board_id",r)+"?"+e.serialize();return location.href=s,!1},validations:[{field:"board_id",name:"exists",opts:{},message:"You must select a board."},{field:"start_date",name:"exists",opts:{},message:"You must provide an event date."},{field:"end_date",name:"exists",opts:{},message:"You must provide an end date."},{field:"start_date",name:"date_format",opts:$.extend({},r,{if_exists:"start_date"}),message:"Invalid date format for the event date."},{field:"end_date",name:"date_format",opts:$.extend({},r,{if_exists:"end_date"}),message:"Invalid date format for the end date."},{field:"start_time",name:"exists",opts:{if_not_exists:"all_day_event"},message:"You must provide an event time."},{field:"end_time",name:"exists",opts:{if_not_exists:"all_day_event"},message:"You must provide an end time."},{field:"start_time",name:"time_format",opts:{if_exists:"start_time",if_not_exists:"all_day_event"},message:"Invalid time format for the event date."},{field:"end_time",name:"time_format",opts:{if_exists:"end_time",if_not_exists:"all_day_event"},message:"Invalid time format for the end date."},{field:"end_date",name:"date_range",opts:$.extend({},r,{if_exists:["has_event","all_day_event"],fields:["start_date"]}),message:"The end date cannot be before the start date."},{field:"end_date",name:"date_and_time_range",opts:$.extend({},r,{if_exists:"has_event",if_not_exists:["all_day_event"],fields:["start_date","start_time","end_time"]}),message:"The end date and time must be after the start date and time."}]}),e.data("inputs",{startDate:t,endDate:i,startTime:a,endTime:n,allDayEvent:o})},open:function(){var e=$("#calendar-new-event-dialog"),t=e.data("inputs"),i=proboards.data("new_event_date");i=i.replace("-","/");var a=new Date(i);t.allDayEvent.prop("checked",!0).trigger("change"),t.endDate.data("edited",!1);var n=function(){return t.startDate.is(".hasDatepicker")&&t.endDate.is(".hasDatepicker")?(t.startDate.datepicker("setDate",a),t.endDate.datepicker("setDate",a),void t.startDate.blur().datepicker("hide")):setTimeout(n,250)};n()}})}})},jumpToMonth:function(e,t,i){location.href=proboards.data("list"==e?"calendar_list_url":"calendar_month_url").replace(":month",t).replace(":year",i)}}}),$.extend(proboards,{captcha:{options:{initCss:!1},init:function(e){var t=0==jQuery.ui.version.indexOf("1.8")?"form":"ui-form",i={options:{},init:function(){var i=this;$.extend(i.options,e);var a=i.options,n=$("#"+a.form_id),o="captcha_challenge",r="captcha_response";i.captchaLoaded=!1;var s=a.captcha_errors&&a.captcha_error_origin===a.captcha_id;if(i.errors=s,a.mobile||a.integrated||(i.captchaDialog=n.data("dialog"),"undefined"==typeof i.captchaDialog&&(i.captchaDialog=proboards.dialog(a.captcha_container_id,{height:"auto",width:a.adfree?"340px":"330px",modal:!0,autoOpen:!1,title:"Please prove you are human:",buttons:{Submit:function(){n.trigger("submit",["formSubmit"])}},open:function(){if($(document).bind("keydown.captcha",function(e){13==e.which&&n.trigger("submit",["formSubmit"])}),setTimeout(function(){n.data("captchaLib")&&a.recaptcha_version<2&&n.data("captchaLib").focus_response_field()},1500),$("input","#"+a.captcha_container_id).prop("disabled",!1),"undefined"!=typeof FunCaptcha){var e=$("#"+a.captcha_container_id).parent(".ui-dialog").find(".ui-dialog-buttonset button");e.prop("disabled",!0),n.data("dialog-submit-button",e)}},close:function(){$(document).unbind("keydown.captcha"),$('input[type="submit"]',n).add(".ui-dialog-buttonset button","#"+a.captcha_container_id).removeData("form.disabled").prop("disabled",!1),$("input","#"+a.captcha_container_id).prop("disabled",!0)}}),i.captchaDialog.css("padding","10px"),n.data("dialog",i.captchaDialog))),a.mobile&&a.adfree&&2==a.recaptcha_version&&i.run_on_captcha_load(function(){i.renderMobileRecaptcha(a.captcha_container_id)}),n.bind("captcha-submit",function(e,l,d){"undefined"==typeof d&&(d={});var c=!1,u=!1,p=!1;switch(l){case"pageLoad":c=!0;break;case"captchaLoad":u=!0;break;case"formSubmit":p=!0;break;default:u=!0}if(a.attempts>=10)return $("input",n).attr("disabled","disabled"),$('input[type="submit"], .button',n).hide(),void(d.value=!1);if(i.options.mobile){if("function"==typeof a.custom_submit)return void(d.value=a.custom_submit())}else{var h="",f="",m=n.data(t),g=!1;if(!a.integrated&&m&&(g=proboards.form.isValidForm(m)),a.adfree){if(1==a.recaptcha_version)h="rc_challenge_field",f="rc_response_field",!c&&!g||p||null!=Recaptcha.widget&&Recaptcha.widget.id==a.captcha_container_id||(Recaptcha.create(a.key,a.captcha_container_id,{theme:"red",callback:function(){i.error_message(),i.tos_checkbox(),Recaptcha.focus_response_field(),i.captchaLoaded=!0}}),n.data("captchaLib",Recaptcha));else if(2==a.recaptcha_version){var v="gre-"+a.captcha_container_id;!c&&!g||p||0!=$("#"+v).children().length||(n.data("gre-complete",!1),grecaptcha.render(v,{sitekey:a.key,callback:function(){n.data("gre-complete",!0)},"expired-callback":function(){n.data("gre-complete",!1)}}),i.error_message(),i.tos_checkbox(),i.captchaLoaded=!0,0==$('textarea[name="g-recaptcha-response"]',n).length&&n.append('<textarea name="g-recaptcha-response" style="display:none"></textarea>'))}}else if("undefined"==typeof FunCaptcha||"undefined"!=typeof translatePo&&0!=translatePo.language.indexOf("en"))h="adcopy_challenge_field",f="adcopy_response_field",!c&&!g||p||null!=ACPuzzleInfo.widget&&ACPuzzleInfo.divid==a.captcha_container_id||(ACPuzzle.create(a.key,a.captcha_container_id),i.error_message(),i.tos_checkbox(),n.data("captchaLib",ACPuzzle),i.captchaLoaded=!0);else if((c||g)&&!p&&!n.data("funcaptchaLib")){var b=new FunCaptcha({public_key:a.key,target_html:"fun-"+a.captcha_container_id,callback:function(){var e=$('input[name="fc-token"]',n.data("dialog")),t=$('input[name="fc-token"]',n);t.val(e.val()),n.data("dialog-submit-button").prop("disabled",!1)}});i.error_message(),i.tos_checkbox(),i.captchaLoaded=!0,n.data("funcaptchaLib",b)}if(p||(n.data("captchaLib")&&0==n.has("#"+o).length?n.append('<input class="left-align" id="'+o+'" type="hidden" name="'+h+'" value="" /><input class="left-align" id="'+r+'" type="hidden" name="'+f+'" value="" />'):n.data("funcaptchaLib")&&0==n.has("#fc-token").length&&n.append('<input id="fc-token" type="hidden" name="fc-token" value="" />')),c)return a.integrated||!s||a.no_popup||i.display_captcha_dialog(),void(d.value=!1);if(u)return a.integrated||!g&&!a.no_validations||i.display_captcha_dialog(),void(d.value=!1);if(p){if(n.data("submitted"))return void(d.value=!1);if(n.data("gre-complete")===!1)return i.captchaDialog.removeClass("grepulse").width(),i.captchaDialog.addClass("grepulse"),void(d.value=!1);if(a.integrated||i.captchaDialog.dialog("close"),n.data("captchaLib")){var _=n.data("captchaLib").get_challenge(),y=n.data("captchaLib").get_response();$("#"+o,n).val(_),$("#"+r,n).val(y)}else"undefined"!=typeof grecaptcha&&$('textarea[name="g-recaptcha-response"]',n).val(grecaptcha.getResponse());if(a.tos&&$('input[name="tos"]',n).val($('input[name="tos_checkbox"]',i.captchaDialog).attr("checked")?1:0),"function"==typeof a.custom_submit)return void(d.value=a.custom_submit());d.value=!0}}}),n.submit(function(e,i){if(n.data(t).validateAll()){var a={};return n.trigger("captcha-submit",[i,a]),a.value&&n.data("submitted",!0),a.value}}),s){var l=a.error_message;if(l||(l="Captcha failed",a.attempts>=5&&(l+=": "+(10-a.attempts)+" attempts left")),1!=a.no_popup||a.integrated)i.options.mobile?i.options.mobile&&$(".captcha-error-html").length&&(captchaPosTop=$(".captcha-error-html").position().top,window.scroll({top:captchaPosTop,behavior:"smooth"})):(proboards.data("captchaDialogError",l),a.integrated||i.display_on_page_load());else{var d=$(".captcha-error");d.length?d.text(l).show():1==$("#pbn_container").length?$("#pbn_container").prepend('<span style="color: #f00; font-size: 1.16em;">'+l+"</span><br /><br />"):i.options.mobile||proboards.error(l)}}},display_captcha_dialog:function(){var e=this;e.captchaLoaded?e.captchaDialog.dialog("open"):e.run_on_captcha_load(function(){e.captchaDialog.dialog("open")})},display_on_page_load:function(){var e=this,t=$("#"+e.options.form_id);e.run_on_captcha_load(function(){t.trigger("captcha-submit",["pageLoad"])})},run_on_captcha_load:function(e){var t=this,i=($("#"+t.options.form_id),20),a=setInterval(function(){--i||clearInterval(a),"undefined"==typeof ACPuzzle&&"undefined"==typeof Recaptcha&&"undefined"==typeof grecaptcha&&"undefined"==typeof FunCaptcha||(clearInterval(a),"function"==typeof e&&e())},500)},error_message:function(){var e=this;if(e.errors&&0==e.options.no_popup){var t=proboards.data("captchaDialogError");if(t){var i=$('<div style="color: #f00; font-size: 1.16em; margin-bottom: 15px; text-align: center;"></div>').append(t);e.captchaDialog.prepend(i)}}},tos_checkbox:function(){var e=this,t=e.options,i=$("#"+t.form_id);e.options.tos&&$.check_url(t.tos.url)&&t.tos.name.match(/\S/)&&0==$('input[name="tos_checkbox"]',e.captchaDialog).length&&(e.captchaDialog.append('<div style="margin-top: 15px; text-align: center;"><label><input type="checkbox" name="tos_checkbox" style="margin: 0 5px 0 0; vertical-align: middle;">I agree to the <a href="'+proboards.escape_html(t.tos.url)+'" target="_blank">'+proboards.escape_html(t.tos.name)+"</a>.</label></div>"),
i.append('<input type="hidden" name="tos" />'))},renderMobileRecaptcha:function(e){var t=$("#"+this.options.form_id);grecaptcha.render("gre-"+e,{sitekey:this.options.key}),t.data("dialog",$("#"+e)),this.captchaDialog=t.data("dialog"),this.error_message(),this.captchaLoaded=!0}};i.init(),this.initCss(i.options.recaptcha_version)},initCss:function(e){if(1==e&&!this.options.initCss){this.options.initCss=!0;var t="#recaptcha_area input { height: auto; display: inline; }";$(document.head).append("<style>"+t+"</style>")}}}}),proboards.color_scheme={properties:["body_background_color","title_bar_background_color","title_text_color","title_buttons_background_color","buttons_background_color","container_background_color_1","container_background_color_2","container_highlight_color","container_outer_border_color","container_inner_border_color"],favstar_dim_url:proboards.data("image_path")+"/admin/themes/etc/favstar-dim.png",build:function(e,t){for(var i=[],a=0;a<proboards.color_scheme.properties.length;a++)i.push({key:proboards.color_scheme.properties[a],value:e[proboards.color_scheme.properties[a]]});i.sort(function(e,t){if("undefined"==typeof e.value||"undefined"==typeof t.value)return 0;for(var i=0;i<6;i++)if(e.value.charAt(i)!=t.value.charAt(i))return $.isNumeric(e.value)==$.isNumeric(t.value)?e.value.charAt(i).localeCompare(t.value.charAt(i)):$.isNumeric(e.value)?1:-1;return 0});for(var n=$("<div></div>").attr("id","scheme_"+e.scheme_id).addClass("scheme"),o=(i.length,0);o<i.length;o++){var r=0;switch(i[o].key){case"body_background_color":r=15;break;case"title_bar_background_color":r=23;break;case"title_text_color":r=2;break;case"title_buttons_background_color":r=17;break;case"buttons_background_color":r=7;break;case"container_background_color_1":r=12;break;case"container_background_color_2":r=6;break;case"container_highlight_color":r=3;break;case"container_outer_border_color":r=10;break;case"container_inner_border_color":r=5}n.append($("<div></div>").attr("style","background-color: #"+i[o].value+"; width: "+r+"%;").addClass(i[o].key))}var s=n;return 1==t&&(s=$('<div class="scheme_wrapper"></div>'),s.append('<img src="'+favstar_dim_url+'" class="fav-star" alt="click to toggle favorite" title="click to toggle favorite" />'),s.append(n)),n.data("scheme",$.extend(!0,{},e)),s}},proboards.conversation={select:function(e,t){var i=$.extend({},t),a=Math.floor(1e6*Math.random()),n=proboards.dialog("conversation_listing",{title:"Select Conversation",html:'<div id="list_manager"><div class="container conversations">\t<div class="control-bar ui-helper-clearfix"></div>\t<div class="content cap-bottom">\t\t<table class="list">\t\t\t<thead>\t\t\t\t<tr class="head">\t\t\t\t\t<th class="radio_button"></th>\t\t\t\t\t<th class="icon"></th>\t\t\t\t\t<th class="main">Subject</th>\t\t\t\t\t<th class="created-by">Created By</th>\t\t\t\t\t<th class="replies">Replies</th>\t\t\t\t\t<th class="latest last">Last Reply</th>\t\t\t\t</tr>\t\t\t</thead>\t\t\t<tbody class="lm-content-'+a+'"></tbody>\t\t</table>\t</div></div></div>',width:800,height:400,buttons:{Select:function(){var t=$('input[name="conversation_id"]:checked',this).val();void 0!=t&&($(this).dialog("close"),e(t,$("#remember-conversation").prop("checked")))}}});proboards.ajax({url:proboards.route("admin_conversation_list"),dataType:"json",data:{list_manager_id:a},success:function(e){$(".lm-content-"+a,n).html(e.results),$(".control-bar",n).html('<div class="ui-search hide lm-search-'+a+'"></div>'+e.pagination),proboards.data("page_cache",".lm-content-"+a),new listManager("conversations",{total:e.total,limit:e.limit,page:e.page,pageCache:".lm-content-"+a,id:a,hash:!1},{route_name:"admin_conversation_list",float_control_bar:!1}),void 0!==i.remember&&n.nextAll(".ui-dialog-buttonpane").prepend('<span class="button-text"><input id="remember-conversation" type="checkbox" '+(i.remember?"checked ":"")+'/><label for="remember-conversation">&nbsp;Remember my choice</label></span>')}})}},$.extend(proboards,{embedded:{processEmbedded:function(){for(var e=["facebook","gplus","instagram","linkedin","pinterest","twitter","vine"],t=e.length,i=0;i<t;i++){var a=e[i];this.embed[a]()}},embed:{loaded:{},facebook:function(){if($(".fb-post").length){var e=10,t=function(){return"undefined"==typeof FB&&e--?setTimeout(t,500):void FB.XFBML.parse()};this.loaded.facebook?this.loaded.facebook&&"undefined"!=typeof FB&&t():(this.loaded.facebook=!0,$(document.body).prepend('<div id="fb-root"></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; fjs.parentNode.insertBefore(js, fjs); }(document, "script", "facebook-jssdk"));</script>'),t())}},gplus:function(){if($(".g-post").length){var e=10,t=function(){return"undefined"==typeof gapi&&e--?setTimeout(t,500):void gapi.post.go(".g-post")};this.loaded.gplus?this.loaded.gplus&&"undefined"!=typeof gapi&&t():(this.loaded.gplus=!0,$(document.body).prepend('<script>window.__gcfg = { parsetags: "explicit" };</script><script src="https://apis.google.com/js/platform.js" async defer></script>'),t())}},instagram:function(){if($(".pb-instagram").length){var e=10,t=function(){return"undefined"==typeof instgrm&&e--?setTimeout(t,500):void $(".pb-instagram").each(function(){var e=$(this),t=e.data("url");t="//api.instagram.com/oembed?url="+t+"&omitscript=true",$.jsonp({cache:!1,url:t,callbackParameter:"callback",success:function(t,i,a){e.replaceWith(t.html),instgrm.Embeds.process()},error:function(){e.replaceWith("<div>Failed loading Instagram post.</div>")}})})};this.loaded.instagram?this.loaded.instagram&&"undefined"!=typeof instgrm&&t():(this.loaded.instagram=!0,$(document.body).prepend('<script async defer src="//platform.instagram.com/en_US/embeds.js"></script>'),t())}},linkedin:function(){$(".linkedin-profile").length&&(this.loaded.linkedin?this.loaded.linkedin&&"undefined"!=typeof IN&&IN.parse():(this.loaded.linkedin=!0,$(document.body).prepend('<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>')))},pinterest:function(){if($(".pinterest-post").length){var e=10,t=function(){return"undefined"==typeof parsePins&&e--?setTimeout(t,500):void parsePins()};if(this.loaded.pinterest)this.loaded.pinterest&&"undefined"!=typeof parsePins&&t();else{this.loaded.pinterest=!0;var i=document.createElement("SCRIPT");i.type="text/javascript",i.async=!0,i.src="//assets.pinterest.com/js/pinit.js",i.setAttribute("data-pin-build","parsePins"),document.body.appendChild(i),t()}}},twitter:function(){if($(".pb-twitter-wrapper").length){var e=10,t=function(){return"undefined"!=typeof twttr&&"undefined"!=typeof twttr.widgets||!e--?void $(".pb-twitter-wrapper:not(.is-rendered)").each(function(){var e=$(this),t=e.data("tweet-id").substr(1);twttr.widgets.createTweet(t,this),e.addClass("is-rendered")}):setTimeout(t,500)};this.loaded.twitter?this.loaded.twitter&&"undefined"!=typeof twttr&&t():(this.loaded.twitter=!0,$(document.body).prepend('<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>'),t())}},vine:function(){$(".vine-embed").length&&(this.loaded.vine||(this.loaded.vine=!0,$(document.body).prepend('<script src="//platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>')))}}}}),$.extend(proboards,{events:{afterSearch:[],afterSearchOne:[],columnSort:[],columnSortOne:[],moreActivity:[],moreActivityOne:[],moreNotification:[],moreNotificationOne:[],pageChange:[],pageChangeOne:[],run:function(e,t){if(this[e]){for(var i=this[e],a=0,n=i.length;a<n;a++)i[a].call(t);i=this[e+"One"];for(var a=0,n=i.length;a<n;a++)i[a].call(t);this[e+"One"]=[]}}},on:function(e,t){return this.events[e]?"function"!=typeof t?void console.log("You must bind a valid function."):void this.events[e].push(t):void console.log("The event, "+e+" is not a supported ProBoards event.")},one:function(e,t){return this.events[e]?"function"!=typeof t?void console.log("You must bind a valid function."):void this.events[e+"One"].push(t):void console.log("The event, "+e+" is not a supported ProBoards event.")}}),$.extend(proboards,{form:{init:function(){proboards.form.confirm_ignore_changes(".confirm-ignore-changes form:first")},confirm_ignore_changes:function(e){var t=function(){proboards.unsaved_changes=1},i=function(){proboards.unsaved_changes=0},a=$(e);a.each(function(){var e=$(this);$("input,textarea,select",e).live("change",function(){$(this).closest(e).trigger("change")})}),a.bind("change",t),a.bind("submit",i)},generateInput:function(e,t,i){var a=function(t,i,a){proboards.search.create_user_search({container:t,input:i,results:a,change:function(e,t){i.val(t.ids.join(",")).change()},formId:"",limit:1,checkedHash:{},isPendingList:0,currentUser:0,showExisting:1,showAdded:1,searchBox:1,massEmail:0,allowManualInput:e.allowManualInput,eventError:e.eventError})},n=null;if(0==e.std_input_wrapper&&i)n=i;else if(i){var o="undefined"!=typeof e.name&&e.name.length?" input-"+e.name:"";n=$('<span class="input'+o+'"></span>'),i.append(n)}else{var o="undefined"!=typeof e.name&&e.name.length?" input-"+e.name:"";n=$('<span class="input'+o+'"></span>')}var r={};switch(e.type){case"board_select":r.input=$('<input type="text" readonly="readonly" name="'+e.name+'_display" />'),r.hiddenInput=$('<input type="hidden" name="'+e.name+'" />'),r.label=e.label?$("<label>"+e.label+"</label>"):"",n.append(r.label,r.input,r.hiddenInput),null==t?r.input.val("Click to Select Board"):r.hiddenInput.val(t),e.board_id_display&&r.input.val(e.board_id_display),r.input.data({hiddenInput:r.hiddenInput,label:r.label});break;case"checkbox":var s=$('<input type="checkbox" />').attr("name",e.name);n.append(s);var l=$("<label>"+e.label+"</label>").css("display","inline");s.after(l);var d=$.unique_id(e.name);s.attr("value",1).attr("id",d),l.attr("for",d),e.tip&&l.after(proboards.help_icon(e.tip)),t&&s.attr("checked","checked");break;case"freestyle":var c=$(e.html);e.css&&c.css(e.css),n.append(c);break;case"color":e.label&&(n.append('<label class="field-label">'+e.label+"</label>"),e.breaks&&n.append("<br />"));var u=$('<input class="width-7" type="text" />').attr("name",e.name).val(t);e.css&&u.css(e.css),n.append(u),u.colorPickMe({preview:!0});break;case"radio":var p=e.name;e.label&&(n.append('<label class="field-label">'+e.label+"</label>"),e.breaks&&n.append("<br />"));for(var h=0;h<e.options.length;h++){var d=$.unique_id(e.name),s=$('<input type="radio" />').attr("name",p).attr("id",d).val(e.options[h].value);e.options[h].selected&&s.attr("checked","checked"),n.append(s).append($('<label class="field-sub-label">'+e.options[h].text+"</label>").attr("for",d)),e.breaks&&n.append("<br />")}null!=t&&($('input[type="radio"]',n).removeAttr("checked"),$('input[value="'+t+'"]',n).attr("checked","checked"));break;case"select":for(var f=$("<select />").attr("name",e.name),h=0;h<e.options.length;h++){var m=$("<option></option>").val(e.options[h].value).text(e.options[h].text);e.options[h].selected&&!t&&m.attr("selected","selected"),f.append(m)}n.append(f),e.className&&f.attr("class",e.className),e.label&&f.before("<label>"+e.label+"</label>"),t&&f.val(t);break;case"text":var s=$('<input type="text" />').attr("name",e.name);if(n.append(s),e.label){var l=$("<label>"+e.label+"</label>");e.display&&l.css("display",e.display),s.before(l)}e.placeholder&&s.attr("placeholder",e.placeholder),e.css&&s.css(e.css),s.val(t);break;case"textarea":var s=$("<textarea></textarea>").attr("name",e.name);n.append(s),e.label&&s.before("<label>"+e.label+"</label>"),e.placeholder&&s.attr("placeholder",e.placeholder),s.val(t);break;case"code_editor":var s=$("<textarea></textarea>").attr("name",e.name);n.append(s),e.label&&s.before("<label>"+e.label+"</label>"),e.placeholder&&s.attr("placeholder",e.placeholder),s.val(t),proboards.code_editor({textarea:s});break;case"user":var s=$('<input type="hidden" />').attr("name",e.name);n.append(s);var g=$('<div class="searchbox-container"></div>');n.append(g),t?(s.val(t),g.html("Loading").progress_text(),proboards.ajax({url:proboards.route("admin_user_searchbox_results"),data:{ids:[t]},success:function(e){g.html(""),a(g,s,e.results)}})):a(g,s,[])}if(!i)return n;switch(e.type){case"board_select":}},gen_verify_box:function(e,t,i,a,n,o,r,s){n+='<form onSubmit="return false;" class="verify_box"><div class="section center">Type the word <strong>"'+o+'"</strong> in the space below to verify.<br />Verify <input type="text" name="verification" style="margin: 5px; width: 300px;" /></div></form>',proboards.dialog(e,{title:t,html:n,height:i,width:a,buttons:[{text:r,id:"action-button",click:function(){if($('.verify_box input[name="verification"]').val().toLowerCase()==o.toLowerCase())$(this).dialog("close"),s.call();else{clearTimeout(t),0==$(".status_msg").length?$("#"+e).siblings(".ui-dialog-buttonpane").prepend('<span class="status_msg" style="float: left; padding-top: 15px;">Failed</span>'):$(".status_msg").show();var t=setTimeout(function(){$(".status_msg").hide()},3e3)}}}]})},genOptionRange:function(e,t,i,a){for(var n=[],o=e;o<=t;o+=i){var r={value:o,text:o};o==a&&(r.selected=!0),n.push(r)}return n},handleFormError:function(e,t){if("object"!=typeof t||!t.form_error)return void(t.error&&proboards.error(t.error));for(var i in t.form_error)if(t.form_error.hasOwnProperty(i)){var a="#"+e.attr("id")+"_"+i+"_input",n=t.form_error[i][0];$.inputError(a,n);break}},isValidForm:function(e){if("undefined"==typeof e){if($(".ui-form-error").length||"none"==$(".ui-form-error").css("display"))return!0}else if(e.validateAll())return!0;return!1}}}),$.extend(proboards,{genericSelection:function(e){this.init(e)}}),$.extend(proboards.genericSelection.prototype,{modes:{w3c:1,microsoft:2},init:function(e){this.window=e||window,this.mode=this.window.getSelection?"w3c":"microsoft";var t=this;$.each(["container","startContainer","endContainer","selectNode","collapse","collapsed","getSelection","move","offset","remove"],function(){t[this]=t[this+"_"+t.mode]})},getSelection_w3c:function(e){if("undefined"!=typeof e)return e;var t=this.window.getSelection();if(0==t.rangeCount){var i=this.window.document.createRange();i.setStart(this.window.document.body,0),i.setEnd(this.window.document.body,0),t.addRange(i)}var a=t.getRangeAt(0).cloneRange();return{range:a,selection:t,apply:function(){t.removeAllRanges(),t.addRange(a)}}},getSelection_microsoft:function(e){if("undefined"!=typeof e)return e;var t=this.window.document.selection,i=t.createRange();return{range:i,selection:t,apply:function(){i.select()}}},startContainer_w3c:function(e){var t=this.getSelection(e);return $(t.range.startContainer).closest("*").get(0)},startContainer_microsoft:function(e){var t=this.getSelection(e);return"Control"!=t.selection.type&&(t.range.collapse(!0),t.range.parentElement())},endContainer_w3c:function(e){var t=this.getSelection(e);return $(t.range.endContainer).closest("*").get(0)},endContainer_microsoft:function(e){var t=this.getSelection(e);return"Control"!=t.selection.type&&(t.range.collapse(!1),t.range.parentElement())},container_w3c:function(e){return this.endContainer(e)},container_microsoft:function(e){return this.endContainer(e)},selectNode_w3c:function(e,t,i){var a=this.getSelection(i);switch("undefined"==typeof t&&(t="all"),t){case"start":a.range.setStartBefore(e);break;case"end":a.range.setEndAfter(e);break;case"all":a.range.selectNodeContents(e)}return a.apply(),a},selectNode_microsoft:function(e,t,i){var a=this.getSelection(i),n=this.getSelection();if("undefined"==typeof t&&(t="all"),3==e.nodeType){var o=$("<span>X</span>");e=$(e),e.before(o),n.range.moveToPoint(o.offset().left,o.offset().top),o.remove(),n.range.moveEnd("character",e.text().length)}else n.range.moveToElementText(e);return"start"!=t&&"all"!=t||a.range.setEndPoint("StartToStart",n.range),"end"!=t&&"all"!=t||a.range.setEndPoint("EndToEnd",n.range),"all"==t&&a.range.setEndPoint("StartToStart",n.range),a.apply(),a},collapse_w3c:function(e,t){var i=this.getSelection(t);return"undefined"==typeof e||e?i.range.setEnd(i.range.startContainer,i.range.startOffset):i.range.setStart(i.range.endContainer,i.range.endOffset),i.apply(),i},collapse_microsoft:function(e,t){var i=this.getSelection(t);return i.range.collapse("undefined"==typeof e||e),i.apply(),i},move_microsoft:function(e,t,i,a){var n=this.getSelection(a);"undefined"==typeof t&&(t="start");var o="move"+t.charAt(0).toUpperCase()+t.substring(1);return n.range[o]("character",e),i&&n.apply(),n},move_w3c:function(e,t,i,a){var n=this.getSelection(a);"undefined"==typeof t&&(t="start");var o=t+"Container",r=t+"Offset",s="set"+t.charAt(0).toUpperCase()+t.substring(1);if(e>0)for(var l=0;l<e;++l)if(n.range[r]<$(n.range[o]).text().length)n.range[s](n.range[o],n.range[r]+1);else{var d=$(n.range[o]).nextSelectable();if(!d.length)break;d.isTextNode()||(d=d.textNodes().first()),n.range[s](d.get(0),1)}else for(var l=0;l>e;--l)if(n.range[r]>0)n.range[s](n.range[o],n.range[r]-1);else{var c=$(n.range[o]).prevSelectable();if(!c.length)break;c.isTextNode()||(c=c.textNodes().last()),n.range[s](c.get(0),c.text().length-1)}return i&&n.apply(),n},offset_microsoft:function(e){var t=this.getSelection(e),i=this.window.document.body.createTextRange();return i.moveToElementText(t.range.parentElement()),i.setEndPoint("EndToStart",t.range),caretOffset=i.text.length,i.text.length},offset_w3c:function(e){var t=this.getSelection(e),i=(t.range.startOffset,t.range.startContainer);if(3==i.nodeType){for(var a=$(i).parent().contents(),n=t.range.startOffset,o=0;o<a.length&&!$(a[o]).is(i);++o)n+=$(a[o]).text().length;return n}return t.range.startOffset},collapsed_w3c:function(e){var t=this.getSelection(e);return t.range.collapsed},collapsed_microsoft:function(e){var t=this.getSelection(e);return 0==t.range.compareEndPoints("StartToEnd",t.range)},remove_w3c:function(e){var t=this.getSelection(e);return t.range.deleteContents(),t.range.collapsed},remove_microsoft:function(e){var t=this.getSelection(e);return t.range.pasteHTML(""),t}}),proboards.groups={getSelected:function(e){return $("#"+e).val().split(",")},showControls:function(e){var t=parseInt($("#"+e+"-selection select").val()),i=t>2?"show":"hide",a=t>1?"show":"hide";$("#"+e+"-guest-inc")[i](),$("#"+e+"-rank")[i](),t<3&&$("#"+e+"-rank select").val("0"),$("#"+e+"-group-inc")[a]()},showSelected:function(id,callback){var selected=proboards.groups.getSelected(id);if(""!=selected[0])for(var list=$("#"+id+"-list").html('<ul class="trim-list"></ul>').children(),g=0;g<proboards.groups.available.length;++g){var index=$.inArray(proboards.groups.available[g].id,selected);if(index!=-1){var item=$("<li>"+proboards.groups.available[g].name+"</li>"),close=$('<span class="button-x">X</span>').data("index",index).click(function(){selected.splice($(this).data("index"),1),$("#"+id).val(selected.join(",")).trigger("change"),proboards.groups.showSelected(id,callback)});item.prepend(close),item.appendTo(list)}}else $("#"+id+"-list").html("");eval(callback)},showList:function(id,callback,validation){proboards.dialog("groupsDialog",{autoOpen:!1,title:"Select Who",width:400,height:300,buttons:[{text:"Select All",click:function(){$(this).find(":checkbox").attr("checked","checked")}},{text:"Select None",click:function(){$(this).find(":checkbox").removeAttr("checked")}},{text:"Done",click:function(){var checked=[],passed=!0;""!=validation&&(passed=eval(validation)),passed&&($(this).find(":checkbox").each(function(){void 0!=$(this).attr("checked")&&checked.push($(this).val())}),$("#"+id).val(checked.join(",")).trigger("change"),proboards.groups.showSelected(id,callback)),eval(callback),$(this).dialog("close")}}]});var parent=$("#"+id).parents(".group-unique"),exclude={};parent.length&&parent.find('input[type="hidden"]:not([id="'+id+'"])').each(function(){var e=proboards.groups.getSelected($(this).attr("id"));$.each(e,function(){exclude[this]=!0})});for(var selected=proboards.groups.getSelected(id),checkboxes="",g=0;g<proboards.groups.available.length;++g)void 0==exclude[proboards.groups.available[g].id]&&(checkboxes+='<input type="checkbox" id="group_'+proboards.groups.available[g].id+'" value="'+proboards.groups.available[g].id+'" '+($.inArray(proboards.groups.available[g].id,selected)!=-1?'checked="checked"':"")+"> ",checkboxes+='<label for="group_'+proboards.groups.available[g].id+'">'+proboards.groups.available[g].name+"</label><br />");$("#groupsDialog").html('<div id="group-list" class="checkbox-list"><div class="options">'+checkboxes+"</div></div>"),$("#groupsDialog").dialog("open")}},$.extend(proboards,{home:{markBoardsRead:function(){proboards.confirm("Are you sure you want to mark all boards as read?",function(){proboards.ajax({url:proboards.data("mark_boards_read_url"),success:function(){$('.item.board .icon img[alt="New Posts"]').each(function(){$(this).parent().html('<img title="No New Posts" alt="No New Posts" src="'+proboards.data("home_new_post_src")+'">')})}})},{title:"Mark All Boards Read"})}}}),$.extend(proboards,{hotkeys:{clickSelect:function(e){"s"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var t=e.charAt(0).toUpperCase()+e.slice(1);$(".list .item."+e).live("click",function(i){i.altKey&&($(this).find(".controls ."+e+"-options").hasClass("state-selected")?$(this).find('.options_menu > li[class$="-deselect'+t+'"]').click():$(this).find('.options_menu > li[class$="-select'+t+'"]').click())})},wysiwyg:function(){var e=$(".editor.visual-editor iframe").contents();$(e).add(document).bind("keydown",function(e){if(e.altKey&&e.which==Keys.c)return $('form .submit input[TYPE="SUBMIT"]').click(),!1});var t=$(".editor.bbcode-editor textarea");$(e).add(document).bind("keydown",function(i){if(i.altKey&&i.which==Keys.t)return $("#menu-item-visual").hasClass("ui-active")?($("#menu-item-bbcode a").click(),t.focus()):$("#menu-item-bbcode").hasClass("ui-active")&&($("#menu-item-visual a").click(),$(".editor.visual-editor iframe").focus(),e.focus()),!1})},quick_reply:function(){$(".quick-reply form textarea").bind("keydown",function(e){if(e.altKey&&e.which==Keys.c)return $('form input[TYPE="SUBMIT"]').click(),!1})},reply:function(){$(document).bind("keydown",function(e){e.altKey&&!e.ctrlKey&&e.which==Keys.r&&$(".reply-button").click()})},activate:function(e){switch(e){case Keys.d:var t=$("#navigation-tree").offset().top;if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(t)){window.scroll({top:0,behavior:"smooth"});var i=setInterval(function(){0==window.pageYOffset&&(clearInterval(i),$("#nav-tree-menu-0").data("hotkey-open",!0),$("#nav-tree-menu-0").menu("show"))},250)}return!1;case Keys.w:return $(".search-input.ui-autosearch").focus(),!1;case Keys.q:return $(".quick-reply .message textarea").focus(),!1}return!0}}}),$(document).bind("keydown",function(e){if(e.altKey&&e.ctrlKey&&e.which==Keys.r)proboards.reportAd();else if(e.altKey&&!e.ctrlKey)return proboards.hotkeys.activate(e.which)}),$(document).ready(function(){$.browser.msie&&$('a[accesskey="d"]').bind("focus",function(e){$(this).click()})});var listManagerSettings={settings:{threads:{route_name:"list_threads",controls:["selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!1,float_control_bar:!0},posts:{route_name:"list_posts",controls:["actions","selections"],search:!0,highlight:!1,link:!1,checkbox:!1,column:!1,float_control_bar:!0},conversations:{route_name:"list_conversations",controls:["folders","selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!1,float_control_bar:!0},messages:{route_name:"list_messages",controls:["actions"],search:!0,highlight:!1,link:!1,checkbox:!1,column:!1,float_control_bar:!0},members:{route_name:"list_members",controls:["views","selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!0,float_control_bar:!0,minChars:1,viewHashKey:"view"},users:{route_name:"list_users",controls:[],search:!0,highlight:!1,link:!1,checkbox:!1,column:!1,float_control_bar:!1,minChars:1,modal:!0},security_logs:{route_name:"security_log_list",controls:["logView"],search:!0,highlight:!0,link:!1,checkbox:!1,column:!0,float_control_bar:!0,minChars:1,viewHashKey:"logView"},reports:{route_name:"list_reports",controls:["selections","actions"],search:!0,highlight:!0,link:!0,checkbox:!0,column:!1,float_control_bar:!0}}},listManagerPrototype={labels:{},options:{ajax:!1,total:0,limit:10,page:0,data:{}},init:function(e,t,i){this.mobileScrollifyRegEx=/(?:message|post)-(\d+)/,this.scrollify(e),"object"!=typeof t&&(t={}),"object"!=typeof i&&(i={}),$.extend(this.options,t),this.type=e,this.item_type=this.type.substr(0,this.type.length-1),this.settings=$.extend({},proboards.listManager.settings[this.type],i),this.menu_position=this.options.data.participated?{my:"left top",at:"left bottom"}:{},this.selected_ids=[],this.selected_items={},this.total_tracker=proboards.data("all_messages_count"),$(".lm-message-count-"+this.options.id).show(),this.content=$(".lm-content-"+this.options.id),this.pagination=$(".lm-pagination-"+this.options.id),this.search=$(".lm-search-"+this.options.id),this.icons=$(".lm-icons-"+this.options.id),this.search.length||(this.search=$("<div />"),this.search.attr("id","lm-search-"+this.options.id),this.search.hide(),this.search.appendTo(document.body)),this.bind_highlight(),this.bind_links(),this.bind_checkboxes(),this.bind_control_bar_follow(),this.bind_columns(),this.item={},"messages"==this.type?this.item=proboards.data("page").conversation:"posts"===this.type&&(this.item=proboards.data("page").thread),this.last_filters=[],null!=proboards.data("user")&&proboards.data("user").is_logged_in||(proboards.listManager.settings.threads.controls=[],proboards.listManager.settings.posts.controls=[]),this.setup_controls(),this.setup_search(),"conversations"!=this.type&&"messages"!=this.type||(this.load_labels(),this.apply_label_map()),"posts"!=this.type&&"messages"!=this.type||proboards.hotkeys.clickSelect(this.type),proboards.embedded.processEmbedded(),proboards.listManagers[this.options.id]=this},get_selection:function(){var e,t=this.selected_ids,i=[],a=this.selected_ids.length;for(e=0;e<a;e++)i[e]=this.selected_items[this.selected_ids[e]];return{ids:t,length:a,items:i}},bind_links:function(){var e=this,t=function(){$(".conversation-participants",e.content).on("click",function(t){t.preventDefault(),t.stopPropagation(),proboards.loading(!0),proboards.ajax({url:proboards.route("list_participants"),data:{id:e.getItemId(this)},dataType:"html",success:function(e){proboards.dialog("conversation-participants",{width:535,title:"Participants",html:e})},complete:function(){proboards.loading(!1)}})}),$(".thread-participants",e.content).on("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.getItemId($(this).parents(".item"));return proboards.loading(!0),proboards.ajax({url:proboards.route("thread_participants",{thread_id:i}),dataType:"html",success:function(e){proboards.dialog("thread-participants",{width:535,title:"Participants",html:e})},complete:function(){proboards.loading(!1)}}),!1})},i=function(t){$(".latest",e.content).on("click",function(i){if(!$(i.target).is("a")){var a=e.getItemId($(this).parents(".item"));"thread"==t?window.location=proboards.route("thread_last_post",{thread_id:a}):"conversation"==t&&(window.location=proboards.route("conversation_last_post",{conversation_id:a}))}})};this.content.bind("change",t),t(),"threads"==this.type?(this.content.bind("change",i("thread")),i("thread")):"conversations"==this.type&&(this.content.bind("change",i("conversation")),i("conversation"))},bind_highlight:function(){this.settings.highlight&&(navigator.userAgent.match(/iPod|iPad|iPhone/i)||$(".item",this.content).live("mouseenter",function(){$(this).addClass("state-hover")}).live("mouseleave",function(){$(this).removeClass("state-hover")}))},bind_checkboxes:function(){if(this.settings.checkbox){var e=this;$(".list-item-checkbox",this.content).removeAttr("checked");var t=function(){var t=$(".list-item-checkbox",e.content);$(".clickable",e.content).clickable({event:"click"}),t.off("click.bind_checkboxes"),t.on("click.bind_checkboxes",function(t){var i=$(this),a=$(this).is(":checked"),n=[];if(t.shiftKey){var o=$(".list-item-checkbox",e.last_affected_item)[0];if(e.last_affected_item&&i[0]!==o)for(var r=!1,s=!1,l=$(".list-item-checkbox",e.content),d=0;d<l.length&&!r;)l[d]!==i[0]&&l[d]!==o||(s?r=!0:s=!0),s&&n.push($(l[d]).closest(".item")),++d;else n.push(i.parents(".item"))}else n.push(i.closest(".item"));e[a?"select_items":"unselect_items"](n),e.last_affected_item=i.closest(".item")})};this.content.bind("change",t),t()}},bind_control_bar_follow:function(){if(this.settings.float_control_bar){var e=this;$(window).data("already_scrolled",!0);var t=$(".scrollable-"+e.options.id),i=null,a=$(window).width();navigator.userAgent.match(/iPod|iPad|iPhone/i)||$(window).on("resize",function(e){clearTimeout(i);var n=$(this).width();a!=n&&(i=setTimeout(function(){t.each(function(){var e=$(this);if(e.data("placeholder")){var t=e.attr("style");e.removeAttr("style");var i=e.width(),o=e.offset();e.data("position",o),e.attr("style",t).css({width:i+"px",left:o.left+"px"}),a=n}})},10))}),$(window).on(navigator.userAgent.match(/iPod|iPad|iPhone/i)?"touchend":"scroll.controlBar",function(i){var a=this;t.each(function(){var t=$(this);if(t.is(":visible")){var i=!!t.data("placeholder"),n=i?t.data("position"):t.offset();if($(a).scrollTop()>=n.top){if(!i){var o=t.width(),r=t.clone().removeClass("scrollable").css("visibility","hidden");t.data("placeholder",r),t.after(r),t.data("position",n),t.css({width:o+"px",position:"fixed",left:n.left+"px",top:"0px","z-index":500})}var s=e.content.offset().top+e.content.height()-t.height();if($(a).scrollTop()>=s){if(t.css({position:"absolute"}),$("html").is(".ie7"))var l={top:t.offset().top-t.position().top,left:t.offset().left-t.position().left};else{t.css({top:0,left:0});var l={top:t.offset().top,left:t.offset().left}}t.css({top:s-l.top+"px",left:n.left-l.left+"px"})}else t.css({position:"fixed",top:"0px",left:n.left+"px"})}else if(i){var r=t.data("placeholder");t.removeAttr("style"),r.remove(),t.removeData("placeholder")}}})})}},bind_columns:function(){if(this.settings.column){var e=this,t=null;$.each($(".sortable-"+e.options.id),function(i,a){var n=$(this).attr("class").match(/sortable\-type\-(\w+)/);n&&(n=n[1],$(a).off("click"),$(a).on("click",function(i){null==t&&(t=$("input",e.search).data("autosearch"));var o=$(t.element);o.off("autosearchaftersearch.sort"),o.one("autosearchaftersearch.sort",function(){proboards.events.run("columnSort",a)}),"asc"==t.getData("dir")&&t.getData("sort")==n?t.setDataLite("dir","desc"):"rank"!=n&&"order"!=n&&"posts"!=n&&"last_online"!=n||t.getData("sort")==n?t.setDataLite("dir","asc"):t.setDataLite("dir","desc"),t.setData("sort",n)}))})}},select_items:function(e){var t,i=e.length;for(t=0;t<i;++t)this.select_item(e[t])},unselect_items:function(e){var t,i=e.length;for(t=0;t<i;++t)this.unselect_item(e[t])},select_item:function(e){$(e).addClass("state-selected"),$(".list-item-checkbox",e).attr("checked","checked");var t=this.getItemId(e);"undefined"==typeof this.selected_items[t]&&(this.selected_ids.push(t),this.selected_items[t]=e),this.last_affected_item=e},unselect_item:function(e){$(e).removeClass("state-selected"),$(".list-item-checkbox",e).removeAttr("checked");var t=this.selected_ids,i=this.selected_items;this.selected_ids=[],this.selected_items={};for(var a=0;a<t.length;a++)if(this.getItemId(e)!=t[a]){var n=t[a];this.selected_ids.push(n),this.selected_items[n]=i[n]}this.last_affected_item=e},setup_controls:function(){var controls=this.settings.controls,length=controls.length,i;for(i=0;i<length;++i)eval("this.create_"+controls[i]+"_controls()")},create_selections_controls:function(){var e=this;$(".lm-selection-"+this.options.id).selectMenu({status:"Select",staticStatus:!0,menuOptions:{click:function(t,a){var n=$(a.item).attr("class"),o="posts"==e.type?proboards.postManager:e;if("All"==n)o.select_items($(".item",e.content));else if("None"==n){
if("posts"===e.type)return void o.unselect_items($(".item",e.content));var r=[];for(i in e.selected_items)r.push(e.selected_items[i]);o.unselect_items(r)}else"Read"==n?(o.unselect_items($(".item",e.content)),o.select_items($(".item:not(.new)",e.content))):"New"==n&&(o.unselect_items($(".item",e.content)),o.select_items($(".item.new",e.content)))},position:e.menu_position}})},create_actions_controls:function(){var e=this;if(proboards.data("labels_menu")&&("threads"==e.type||"posts"==e.type)){var t=$(".lm-labels-"+this.options.id);t.html(),$(proboards.data("labels_menu")).children("li").appendTo(t),t.children("li.label").each(function(){var e=$(this),t=$(this).clone();e.addClass("label-add").find("span.action").html("Add "),t.addClass("label-remove").find("span.action").html("Remove "),t.insertAfter(e)}),"posts"==e.type&&(""!=$.trim($("#labels").html())?$("#labels").show():$("#labels").hide())}$(".lm-actions-"+this.options.id).selectMenu({status:"Actions",staticStatus:!0,beforeShow:function(){var t,i=0,a=0,n=0,o=0,r=0,s=0,l=0,d=0,c=0,u=0,p=0,h=0,f=0,m=0,g=0,v=0,b=0,_=!1,y=!1,A=e.get_selection().items,w=e.get_selection().length,x=!0,k=!1,C="conversations"==e.type,S="messages"==e.type,T="posts"==e.type,D="threads"==e.type,I="members"==e.type,E="reports"==e.type,P=proboards.data("board_id")>0,M=proboards.data("page")&&proboards.data("page").thread&&proboards.data("page").thread.id>0;for(t=0;t<w;++t){var O=e.getItemId(A[t]),L=proboards.item(e.item_type,O);null==L&&(L={}),L.is_new?++a:++i,$(A[t]).hasClass("archived")?++n:++o,"undefined"!=typeof proboards.data("following")&&null!=proboards.data("following")&&1==proboards.data("following")[O]&&++r,O==proboards.data("user").id&&(y=!0),$(A[t]).hasClass("can_remove")&&(_=!0),$(A[t]).hasClass("bookmarked")?++s:++l,$(A[t]).hasClass("falling")?++m:++g,$(A[t]).hasClass("announcement")?++d:++c,$(A[t]).hasClass("locked")&&("reports"!=e.type||$(A[t]).hasClass("has-thread"))?++u:$(A[t]).hasClass("locked")||"reports"==e.type&&!$(A[t]).hasClass("has-thread")||++p,$(A[t]).hasClass("sticky")?++h:++f,$(A[t]).hasClass("has-post")&&++v,$(A[t]).hasClass("has-thread")&&++b}C&&(x=!1),S&&(x=!1,k=!0,e.item.is_archived?n=1:o=1,e.item.is_new?a=1:i=1),T&&M&&(x=!1,k=!0,"undefined"!=typeof postMan?w=postMan.selected_posts.length:"undefined"!=typeof proboards.postManager&&(w=proboards.postManager.selected_posts.length),e.item.is_new?a=1:i=1,e.item.is_locked?u=1:p=1,e.item.is_announcement?d=1:c=1,e.item.is_sticky?h=1:f=1,e.item.is_falling?m=1:g=1,e.item.is_bookmarked?++s:++l),D&&P&&(x=!1),"posts"!=e.type||M||("undefined"!=typeof postMan?w=postMan.selected_posts.length:"undefined"!=typeof proboards.postManager&&(w=proboards.postManager.selected_posts.length)),$(this).menu("hideAllOptions");var N=$(".lm-labels-"+e.options.id),j=w&&D||T&&M;if((w||k)&&a>0&&($(this).menu("showOption","mark_future"),$(this).menu("showOption","mark_as_read"),$(this).menu("showOption","mark_as_read_day"),$(this).menu("showOption","mark_as_read_week"),$(this).menu("showOption","mark_as_read_month"),$(this).menu("showOption","mark_as_read_forever")),(w||k)&&i>0&&$(this).menu("showOption","mark_as_new"),e.options.data.search&&"posts"==e.type){var R=proboards.postManager.selected_posts,z=0,F=0;$.each(R,function(e,t){var i=proboards.item("post",t).thread_id,a=proboards.item("thread",i).is_locked;a?++z:++F}),z&&$(this).menu("showOption","unlock"),F&&$(this).menu("showOption","lock")}else(w&&"threads"==e.type||E||"posts"==e.type)&&(p>0&&("reports"==e.type&&w>1?$(this).menu("showOption","locks"):$(this).menu("showOption","lock"),$(this).menu("showOption","modFunctions")),u>0&&("reports"==e.type&&w>1?$(this).menu("showOption","unlocks"):$(this).menu("showOption","unlock"),$(this).menu("showOption","modFunctions")));if(("reports"!=e.type&&(w||k)||"reports"==e.type&&w&&b>0)&&("reports"==e.type&&w>1?$(this).menu("showOption","move_threads"):$(this).menu("showOption","move_thread"),$(this).menu("showOption","modFunctions")),("reports"!=e.type&&(w||k)||"reports"==e.type&&w&&b>0)&&("reports"==e.type&&w>1?$(this).menu("showOption","delete_threads"):$(this).menu("showOption","delete_thread"),$(this).menu("showOption","modFunctions")),w&&v>0&&("reports"==e.type&&w>1?($(this).menu("showOption","move_posts"),$(this).menu("showOption","delete_posts")):($(this).menu("showOption","move_post"),$(this).menu("showOption","delete_post")),$(this).menu("showOption","modFunctions")),(w||k)&&o>0&&$(this).menu("showOption","archive"),(w||k)&&n>0&&$(this).menu("showOption","unarchive"),1!=w||!I&&"reports"!=e.type||($(this).menu("showOption","warn_user"),$(this).menu("showOption","ban_user"),$(this).menu("showOption","modFunctions")),C||S){if($(this).menu("showOption","manageLabels"),w||S){var t,q={};if(C)for(t=0;t<w;++t)$(".labels:first .ui-label",A[t]).each(function(){var e=$(this).attr("class").replace("ui-label label-","");"number"!=typeof q[e]&&(q[e]=0),q[e]++});else $(".conversation-labels .ui-label").each(function(){var e=$(this).attr("class").replace("ui-label label-","");"number"!=typeof q[e]&&(q[e]=0),q[e]++});$(".ui-selectMenu-option",N).show();var H=[];$("li",N).each(function(){var e=$(this).attr("class").match(/label-(\d+)/);e&&$.inArray(e[1],H)==-1&&H.push(e[1])}),$(".label",N).hide(),$.each(H,function(){var e=this;q[e]&&$(".label-"+e+".remove-label",N).show(),(q[e]!=w&&C||!q[e]&&S)&&$(".label-"+e+".add-label",N).show()})}else C&&$(".label",N).hide();$(this).menu("showOption","labels")}if(C&&($(".lm-message-count-"+e.options.id).text(proboards.commify(e.total_tracker)),w&&_&&$(this).menu("showOption","leave_conversation"),0==w&&0!=e.total_tracker)){$(this).menu("showOption","all_messages"),$(this).menu("showOption","delete_all");var V=proboards.data("folder");"archive"!=V&&"outbox"!=V&&$(this).menu("showOption","archive_all")}if(S&&($(this).menu("showOption","forward"),$(this).menu("showOption","change_participants"),proboards.data("conversation_participants")&&proboards.data("conversation_participants").length>1&&$(this).menu("showOption","leave_conversation")),j){l>0&&null!==proboards.data("user")&&proboards.data("user").is_logged_in&&$(this).menu("showOption","bookmark"),s>0&&null!==proboards.data("user")&&proboards.data("user").is_logged_in&&$(this).menu("showOption","unbookmark"),c>0&&$(this).menu("showOption","announce"),d>0&&$(this).menu("showOption","unannounce"),f>0&&$(this).menu("showOption","sticky"),h>0&&$(this).menu("showOption","unsticky"),$(this).menu("showOption","bump"),g>0&&$(this).menu("showOption","enable_falling"),m>0&&$(this).menu("showOption","disable_falling"),$(this).menu("showOption","modFunctions");var W=$("li.label-add",N),H=[],U={},B=[],Y={},K={};if(W.each(function(){var t=e.getLabelId(this),i=e.getLabelBoardId(this);H.push(t),U[t]=0,void 0==Y[i]&&(Y[i]=[]),Y[i].push(t)}),H.length){if(D)$.each(A,function(t,i){var a=e.getLabelBoardId(i);void 0==K[a]&&(K[a]=0),++K[a],$.inArray(a,B)==-1&&B.push(a),$(i).find("span.labels:first .ui-label",N).each(function(){++U[e.getLabelId(this)]})});else if(T){var J=proboards.data("board_id");K[J]=1,B.push(J),$("span.labels:first .ui-label").each(function(){++U[e.getLabelId(this)]})}N.children("li").hide();var G=0;$.each(B,function(){var e=parseInt(this);"undefined"!=typeof Y[e]&&$.each(Y[e],function(){var t=this;++G,U[t]!=K[e]&&N.children("li.label-add.label-"+t).show(),0!=U[t]&&N.children("li.label-remove.label-"+t).show()})}),G&&$(this).menu("showOption","labels")}}D&&P&&($(this).menu("showOption","mark_board_read"),$(this).menu("showOption","board_notifications")),T&&M&&($(this).menu("showOption","view"),$(this).menu("showOption","view_prev"),$(this).menu("showOption","view_next"),$(this).menu("showOption","sharing"),$(this).menu("showOption","facebook-share"),$(this).menu("showOption","twitter-share"),$(this).menu("showOption","gplus-share"),$(this).menu("showOption","tumblr-share"),$(this).menu("showOption","linkedin-share"),$(this).menu("showOption","pinterest-share"),$(this).menu("showOption","reddit-share"),$(this).menu("showOption","myspace-share"),$(this).menu("showOption","email-share"),$(this).menu("showOption","move_post_all")),w&&"posts"==e.type&&$(this).menu("showOption","move_post_selected"),I&&w&&(r!=w&&(r!=w-1||!y)&&w<=proboards.data("maximum_follow_in_one_action")&&$(this).menu("showOption","follow"),r>0&&$(this).menu("showOption","unfollow"),(w<10||proboards.data("is_staff"))&&$(this).menu("showOption","send_message"),1==e.options.data.groupLeader&&$(this).menu("showOption","remove_from_group"),1==w&&($(this).menu("showOption","ipSearchThreads"),$(this).menu("showOption","ipSearchPosts"),$(this).menu("showOption","ipSearchMembers"),$(this).menu("showOption","searchIP"),$(this).menu().find(".searchIP > a").text("IP "+A[0].data("ip")))),E&&w&&$(this).menu("showOption","delete_report"),0==w&&x&&!k&&($(this).children("li.default-menu-option").show(),$(this).children("li").not(".default-menu-option").hide())},menuOptions:{click:function(t,i){var a=$(i.item).attr("class").replace(/ hide/,"");if("view_prev"==a)window.location=proboards.data("lm_thread_prev");else if("view_next"==a)window.location=proboards.data("lm_thread_next");else if("mark_future"==a.substr(0,11)||"mark_as_read"==a.substr(0,12)){var n,o,r=[],s=[];if("posts"==e.type?(n=[e.item.id],o="threads"):"messages"==e.type?(n=[e.item.id],o="conversations"):(n=e.get_selection().ids,r=e.get_selection().items,o=e.type),0==n.length)return;var l;"mark_as_read"==a.substr(0,12)&&(l=a.substr(13)),l||(l="now"),proboards.ajax({url:proboards.route("mark_"+o,{type:"read"}),data:{"ids[]":n,until:l},dataType:"json",success:function(t){if("posts"==e.type||"messages"==e.type?e.item.is_new=0:e.options.data.participated||e.clear_cache(),r.length)for(y=0;y<r.length;++y)proboards.item(o.substr(0,o.length-1),n[y],"is_new",0),$(r[y]).removeClass("new"),t.update_icon&&$(".icon img",r[y]).attr("src",t.update_icon)}})}else if("mark_as_new"==a){var n,o,r=[],s=[];if("posts"==e.type?(n=[e.item.id],o="threads"):"messages"==e.type?(n=[e.item.id],o="conversations"):(n=e.get_selection().ids,r=e.get_selection().items,o=e.type),0==n.length)return;proboards.ajax({url:proboards.route("mark_"+o,{type:"new"}),data:{"ids[]":n},dataType:"json",success:function(t){for("posts"==e.type||"messages"==e.type?e.item.is_new=1:e.options.data.participated||e.clear_cache(),y=0;y<r.length;++y)proboards.item(o.substr(0,o.length-1),n[y],"is_new",1),$(r[y]).hasClass("new")||$(r[y]).addClass("new"),t.update_icon&&$(".icon img",r[y]).attr("src",t.update_icon)},error:function(e){for(y=0;y<r.length;++y)$.inArray(n[y],e.ids)==-1&&(proboards.item(o.substr(0,o.length-1),n[y],"is_new",1),$(r[y]).hasClass("new")||$(r[y]).addClass("new"));proboards.error(e.error)}})}else if("mark_board_read"==a){var d=parseInt(proboards.data("board_id"));d<=0?proboards.error("Invalid board."):proboards.ajax({url:proboards.route("mark_boards",{type:"read"}),data:{board_id:d},success:function(){$(".item.thread.new").each(function(){var t=e.getItemId(this);proboards.item("thread",t).board_id==d&&$(this).removeClass("new")}),e.clear_cache()}})}else if("board_notifications"==a){var d=parseInt(proboards.data("board_id"));if(d<=0)proboards.error("Invalid board.");else{var c=function(){var e={};proboards.dialog_toggle_buttons("board-notifications",!0),$(".notification-option-wrapper","#board-notifications").each(function(){var t=$(this),i=t.data("type"),a=$('input[name="forum"]',t).prop("checked")?1:0,n=$('input[name="tapatalk"]',t).prop("checked")?1:0,o=$('select[name="freq"]',t).val();e[i]=[a,n,o]}),proboards.ajax({url:proboards.route("board_notifications_save"),data:{board_id:d,settings:e},success:function(){$("#board-notifications").dialog("close"),proboards.alert("Your notification settings for this board have been saved!",{title:"Board Notification Settings"})},complete:function(){proboards.dialog_toggle_buttons("board-notifications",!1)}})};proboards.loading(!0),proboards.ajax({url:proboards.route("board_notifications_dialog"),data:{board_id:d},success:function(e){proboards.dialog("board-notifications",{title:e.dialog_title,html:e.dialog_html,width:"auto",buttons:{Save:c,Cancel:function(){$(this).dialog("close")}}})},complete:function(){proboards.loading(!1)}})}}else if("bookmark"==a){var n,r,s=[];if("posts"==e.type)n=[proboards.data("thread_id")],$(".bookmark_icon",e.icons).show(),e.item.is_bookmarked=1;else for(n=e.get_selection().ids,r=e.get_selection().items,y=0;y<n.length;++y)$(r[y]).hasClass("bookmarked")||($(r[y]).addClass("bookmarked").find(".bookmark_icon").show(),s.push(r[y]));if(0==n.length)return;proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"mark","ids[]":n},success:function(t){"posts"==e.type?proboards.data("bookmarked",t.success):e.clear_cache()},error:function(t){if("threads"==e.type)for(y=0;y<s.length;++y)$(s[y]).removeClass("bookmarked");proboards.error(t.error)}})}else if("unbookmark"==a){var n,r,s=[];if("posts"==e.type)n=[proboards.data("thread_id")],$(".bookmark_icon",e.icons).hide(),e.item.is_bookmarked=0;else for(n=e.get_selection().ids,r=e.get_selection().items,y=0;y<n.length;++y)$(r[y]).hasClass("bookmarked")&&($(r[y]).removeClass("bookmarked").find(".bookmark_icon").hide(),s.push(r[y]));if(0==n.length)return;proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"unmark","ids[]":n},success:function(t){"posts"==e.type?proboards.data("bookmarked",!t.success):proboards.data("bookmarks")?(e.research(),e.selected_ids=[],e.selected_items={}):e.clear_cache()},error:function(t){if("threads"==e.type)for(y=0;y<s.length;++y)$(s[y]).addClass("bookmarked");proboards.error(t.error)}})}else if("enable_falling"==a){if("posts"==e.type)n=[proboards.data("thread_id")];else var n=e.get_selection().ids,r=e.get_selection().items;if(0==n.length)return;proboards.ajax({url:proboards.route("thread_falling"),data:{type:"enable_falling","ids[]":n},success:function(t){if("posts"==e.type)$(".falling_icon",e.icons).show(),e.item.is_falling=1;else{for(y=0;y<n.length;++y)$(r[y]).addClass("falling").find(".falling_icon").show();e.clear_cache()}}})}else if("disable_falling"==a){if("posts"==e.type)n=[proboards.data("thread_id")];else var n=e.get_selection().ids,r=e.get_selection().items;if(0==n.length)return;proboards.ajax({url:proboards.route("thread_falling"),data:{type:"disable_falling","ids[]":n},success:function(t){if("posts"==e.type)$(".falling_icon",e.icons).hide(),e.item.is_falling=0;else{for(y=0;y<n.length;++y)$(r[y]).removeClass("falling").find(".falling_icon").hide();e.clear_cache()}}})}else if("facebook-share"==a){var u=document.location.href;window.open("http://www.facebook.com/sharer/sharer.php?u="+escape(u))}else if("twitter-share"==a){var p=proboards.data("thread_subject")+" "+document.location.href;proboards.data("enterprise")||(p+="&hashtags=proboards"),window.open("https://twitter.com/intent/tweet?text="+encodeURI(p))}else if("gplus-share"==a){var u=document.location.href;window.open("https://plus.google.com/u/0/share?url="+escape(u))}else if("tumblr-share"==a){var u=document.location.href,h=proboards.data("thread_subject"),f=$("meta[property='og:description']").attr("content").trim(),m=proboards.data("enterprise")?"":"&tags=proboards";window.open("http://www.tumblr.com/share/link?url="+encodeURI(u)+"&name="+encodeURI(h)+"&description="+encodeURI(f)+encodeURI(m))}else if("linkedin-share"==a){var u=document.location.href,h=proboards.data("thread_subject");window.open("http://www.linkedin.com/shareArticle?url="+escape(u)+"&title="+escape(h))}else if("pinterest-share"==a){var u=document.location.href,h=proboards.data("thread_subject"),g=$('meta[property="og:image"]').attr("content")||"";window.open("https://pinterest.com/pin/create/bookmarklet/?media="+escape(g)+"&url="+escape(u)+"&description="+escape(h))}else if("reddit-share"==a){var u=document.location.href,h=proboards.data("thread_subject");window.open("http://reddit.com/submit?url="+escape(u)+"&title="+escape(h))}else if("myspace-share"==a){var u=document.location.href,h=proboards.data("thread_subject");window.open("http://www.myspace.com/Modules/PostTo/Pages/?t="+escape(h)+"&u="+escape(u))}else if("email-share"==a){var u=document.location.href,h=proboards.data("thread_subject"),v=$("meta[property='og:description']").attr("content").trim();v+="\n \n"+u,window.open("mailto:?subject="+escape(h)+"&body="+escape(v))}else if("announce"==a){var n,r;if("posts"==e.type?n=[proboards.data("thread_id")]:(n=e.get_selection().ids,r=e.get_selection().items),0==n.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"announce"}),data:{"ids[]":n},success:function(t){if("posts"==e.type)e.item.is_announcement=1;else{for(y=0;y<n.length;++y)$(r[y]).addClass("announcement");e.research()}}})}else if("unannounce"==a){var n,r;if("posts"==e.type?n=[proboards.data("thread_id")]:(n=e.get_selection().ids,r=e.get_selection().items),0==n.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"unannounce"}),data:{"ids[]":n},success:function(t){if("posts"==e.type)e.item.is_announcement=0;else{for(a=0;a<n.length;++a)$(r[a]).removeClass("announcement");var i=proboards.data("board_id");if(i)for(var a=0;a<n.length;a++){var o=proboards.item("thread",n[a]);o&&o.board_id!=i&&e.unselect_item($("#thread-"+o.id))}e.research()}}})}else if("sticky"==a){var n,r;if("posts"==e.type?n=[proboards.data("thread_id")]:(n=e.get_selection().ids,r=e.get_selection().items),0==n.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"sticky"}),data:{"ids[]":n},success:function(t){if("posts"==e.type)$(".sticky_icon",e.icons).show(),e.item.is_sticky=1;else{for(y=0;y<n.length;++y)$(r[y]).addClass("sticky");e.research()}}})}else if("unsticky"==a){var n,r;if("posts"==e.type?n=[proboards.data("thread_id")]:(n=e.get_selection().ids,r=e.get_selection().items),0==n.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"unsticky"}),data:{"ids[]":n},success:function(t){if("posts"==e.type)$(".sticky_icon",e.icons).hide(),e.item.is_sticky=0;else{for(y=0;y<n.length;++y)$(r[y]).removeClass("sticky");e.research()}}})}else if("lock"==a||"locks"==a){var n,r;if("posts"==e.type)e.options.data.search?(n=[],$.each(proboards.postManager.selected_posts,function(e,t){var i=proboards.item("post",t).thread_id;proboards.item("thread",i).is_locked||n.push(i)})):n=[proboards.data("thread_id")];else{var b=e.get_selection().ids,_=e.get_selection().items;n=[],r=[];for(var y=0,A=b.length;y<A;++y)$(_[y]).hasClass("locked")||(n.push(b[y]),r.push(_[y]))}if(0==n.length)return;n=$.unique_array(n),proboards.ajax({url:proboards.route("mark_threads",{type:"lock"}),data:"reports"==e.type?{"post_ids[]":n}:{"ids[]":n},dataType:"json",success:function(t){if("posts"==e.type)e.options.data.search?$.each(n,function(e,t){proboards.item("thread",t,"is_locked",1)}):($(".lock_icon",e.icons).show(),e.item.is_locked=1);else{for(y=0;y<n.length;++y){$(r[y]).addClass("locked").find(".lock_icon").show();var i=$(".icon img",r[y]);if(i.length){var a=i.attr("src"),o=i.attr("alt");a.indexOf("locked")==-1&&(a=a.replace("thread","thread-locked"),o=o.replace("Thread","Thread Locked"),i.attr("src",a).attr("alt",o).attr("title",o))}}e.clear_cache()}}})}else if("unlock"==a||"unlocks"==a){var n,r;if("posts"==e.type)e.options.data.search?(n=[],$.each(proboards.postManager.selected_posts,function(e,t){var i=proboards.item("post",t).thread_id;proboards.item("thread",i).is_locked&&n.push(i)})):n=[proboards.data("thread_id")];else{var b=e.get_selection().ids,_=e.get_selection().items;n=[],r=[];for(var y=0,A=b.length;y<A;++y)$(_[y]).hasClass("locked")&&(n.push(b[y]),r.push(_[y]))}if(0==n.length)return;proboards.ajax({url:proboards.route("mark_threads",{type:"unlock"}),data:"reports"==e.type?{"post_ids[]":n}:{"ids[]":n},success:function(t){if("posts"==e.type)e.options.data.search?$.each(n,function(e,t){proboards.item("thread",t,"is_locked",0)}):($(".lock_icon",e.icons).hide(),e.item.is_locked=0);else{for(y=0;y<n.length;++y){$(r[y]).removeClass("locked").find(".lock_icon").hide();var i=$(".icon img",r[y]);if(i.length){var a=i.attr("src"),o=i.attr("alt");a.indexOf("locked")!=-1&&(a=a.replace("thread-locked","thread"),o=o.replace("Thread Locked","Thread"),i.attr("src",a).attr("alt",o).attr("title",o))}}e.clear_cache()}}})}else if("archive_all"==a||"delete_all"==a){var w=a.substring(0,a.length-4),x="inbox",k="0",C=proboards.data("folder")||"inbox";proboards.data("lm_label_id")?k=proboards.data("lm_label_id"):x=C,proboards.confirm_dialog("conversations",w,[],function(t){e.research(),"inbox"==C&&(e.selected_ids=[],e.selected_items={})},{label_id:k,folder:x})}else if("archive"==a)if("conversations"==e.type||"reports"==e.type){var n=e.get_selection();if(0==n.length)return;proboards.ajax({url:proboards.route("mark_"+e.type,{type:"archive"}),data:{"ids[]":n.ids},success:function(t){e.research();var i=proboards.data("folder");"inbox"!=i&&"reports"!=e.type||(e.selected_ids=[],e.selected_items={})}})}else proboards.ajax({url:proboards.route("mark_conversations",{type:"archive"}),data:{"ids[]":[proboards.data("conversation_id")]},success:function(t){e.item.is_archived=1}});else if("unarchive"==a)if("conversations"==e.type||"reports"==e.type){var n=e.get_selection();if(0==n.length)return;proboards.ajax({url:proboards.route("mark_"+e.type,{type:"unarchive"}),data:{"ids[]":n.ids},success:function(t){e.research();var i=proboards.data("folder");"archive"!=i&&"reports"!=e.type||(e.selected_ids=[],e.selected_items={})}})}else proboards.ajax({url:proboards.route("mark_conversations",{type:"unarchive"}),data:{"ids[]":[proboards.data("conversation_id")]},success:function(t){e.item.is_archived=0}});else if("forward"==a)0==$("#forward-container").length&&($(document.body).append('<div id="forward-container"></div>'),proboards.dialog("forward-container",{autoOpen:!1,width:320,title:"Forward Conversation"})),proboards.ajax({url:proboards.route("forward_conversations"),data:{id:proboards.data("conversation_id"),type:"forward"},dataType:"html",success:function(e){$("#forward-container").html(e),$("#forward-container").dialog("open"),$(".user-search .user-search-input").blur()}});else if("change_participants"==a){0==$("#change-users-container").length&&($(document.body).append('<div id="change-users-container"></div>'),proboards.dialog("change-users-container",{autoOpen:!1,width:310,height:400,title:"Change Participants",buttons:{Save:function(){$("#change-users-container form").submit()}}}));for(var S=[],T=proboards.data("conversation_participants"),y=0;y<T.length;y++)T[y]!=proboards.data("conversation_leader")&&S.push(T[y]);proboards.ajax({url:proboards.route("change_users",{type:"change"}),data:{recipients:S.join(","),conversation_id:proboards.data("conversation_id"),page:"conv"},dataType:"html",success:function(e){$("#change-users-container").html(e),$("#change-users-container").dialog("open"),$(".user-search .user-search-input").blur()}})}else if("leave_conversation"==a){var n;if(n="messages"==e.type?[proboards.data("conversation_id")]:e.get_selection().ids,0==n.length)return;$(".search-input",e.search).addClass("ui-loading"),proboards.ajax({url:proboards.route("remove_conversations"),data:{"ids[]":n},success:function(t){"messages"==e.type?window.location=proboards.route("conversations",{folder:"inbox"}):e.research()}})}else if("move_thread"==a||"move_threads"==a){var n;if("posts"==e.type)n=[proboards.data("thread_id")];else if("reports"==e.type){n=[];for(var D=e.get_selection().ids,y=0;y<D.length;y++){var I=/(^| )thread-([0-9]+)($| )/,E=I.test($("#report-"+D[y]).attr("class"))?RegExp.$2:"";""!=E&&n.push(E)}}else n=e.get_selection().ids;var h="Move Thread"+(1!=n.length?"s":""),P={},M=function(){proboards.loading(!0),proboards.ajax({url:proboards.route("thread_move"),data:$("#move-threads-container form").serialize()+($('input[name="move_message"]').serialize()?"&"+$('input[name="move_message"]').serialize():"")+($('input[name="send_user_pm"]').serialize()?"&"+$('input[name="send_user_pm"]').serialize():""),dataType:"json",success:function(e){"undefined"!=typeof e.pm_dialog?($("#move-threads-container").dialog("option","title","Send PM"),$("#move-threads-container").dialog("option","height",340),$("#move-threads-container").dialog("option","buttons",{"Send PM":function(t){$(t.target).button({disabled:!0,label:"Sending"}),$("span",t.target).progress_text(),proboards.ajax({url:proboards.route("thread_move_pm"),data:$("#move-threads-container form").serialize(),dataType:"json",success:function(){O(e),$("#move-threads-container").dialog("option","title",h),$("#move-threads-container").dialog("option","height",420),$("#move-threads-container").dialog("option","buttons",P)}})}}),$("#move-threads-container").html(e.pm_dialog)):O(e)},complete:function(e){proboards.loading(!1)},error:function(e){if(e.enter_password){var t='<div class="error bold pad-bottom-double">'+e.error+'</div><p class="pad-bottom-double">This board is password protected. <br />Please enter the password:</p><div><input type="password" name="password" /></div>',i=$("#move-threads-container");i.find("form").append('<input type="hidden" name="board_password" />'),proboards.dialog("move_board_password",{title:"Enter Board Password",autoOpen:!0,width:"auto",modal:!0,html:t,buttons:{Move:function(e){$(this).dialog("close");var t=$(this).find('input[name="password"]').val();i.find('input[name="board_password"]').val(t),i.closest(".ui-dialog").find(".ui-dialog-buttonset button").trigger("click")}}})}else proboards.error(e.error)}})},O=function(t){if("posts"==e.type)if(t.accessible){var i=proboards.route("thread",{thread_id:proboards.data("thread_id")});i+=t.pretty_url?"/"+t.pretty_url:"",window.location=i}else window.location=t.board_from_url;else e.options.data.search?window.location=t.board_to_url:(e.research(),e.selected_ids=[],e.selected_items={},$("#move-threads-container").dialog("close"))};P[h]=M,$("#move-threads-container").length?($("#move-threads-container").dialog("option","title",h),$("#move-threads-container").dialog("option","buttons",P)):($(document.body).append('<div id="move-threads-container"></div>'),proboards.dialog("move-threads-container",{autoOpen:!1,width:620,height:420,title:h,buttons:P})),proboards.ajax({url:proboards.route("thread_move_dialog"),dataType:"html",data:{"thread_ids[]":n,type:e.type},success:function(e){$("#move-threads-container").html(e);var t=$("#move-threads-container").nextAll(".ui-dialog-buttonpane");t.children(".button-text").remove(),t.prepend($("#move-threads-container .button-text")),$("#move-threads-container").dialog("open")}})}else if("move_post_all"==a||"move_post_selected"==a||"move_post"==a||"move_posts"==a){var n;"move_post_all"==a?null==proboards.data("thread_id")?(a="move_all_search",1==proboards.data("recent_posts")&&"undefined"!=typeof proboards.data("recent_posts_user")&&(n=[parseInt(proboards.data("recent_posts_user"))])):n=[parseInt(proboards.data("thread_id"))]:n="reports"==e.type?e.get_selection().ids:proboards.postManager.selected_posts;var L=document.createElement("form");L.setAttribute("method","POST"),L.setAttribute("action",proboards.route("move_post"));var N=document.createElement("input");N.setAttribute("type","hidden"),N.setAttribute("name","selection"),N.setAttribute("value",n.join(",")),L.appendChild(N);var j=document.createElement("input");j.setAttribute("type","hidden"),j.setAttribute("name","type"),j.setAttribute("value",a),L.appendChild(j),document.body.appendChild(L),L.submit()}else if("delete_thread"==a||"delete_threads"==a){var n,o;if("messages"==e.type)n=[proboards.data("conversation_id")],o="conversations";else if("posts"==e.type)e.options.data.search?(o="posts",n=proboards.postManager.selected_posts):(o="threads",n=[proboards.data("thread_id")]);else if("reports"==e.type){n=[],o="threads";for(var D=e.get_selection().ids,y=0;y<D.length;y++){var I=/(^| )thread-([0-9]+)($| )/,E=I.test($("#report-"+D[y]).attr("class"))?RegExp.$2:"";""!=E&&n.push(E)}}else"members"==e.type?(n=e.get_selection().ids,o="users"):(n=e.get_selection().ids,o=e.type);if(0==n.length)return;"threads"==e.type||"posts"==e.type||"members"==e.type||"reports"==e.type?proboards.confirm_dialog(o,"delete",n,function(t){"undefined"==typeof t.redirect_url||e.options.data.search?"posts"==e.type&&"threads"==o?window.location=proboards.route("board",{board_id:proboards.data("board_id")}):("posts"==e.type&&proboards.postManager.unselect_all(),e.research(),e.selected_ids=[],e.selected_items={}):window.location=t.redirect_url}):proboards.confirm("messages"==e.type?"Are you sure you wish to delete this conversation?":"Are you sure you wish to delete "+n.length+" conversation"+(1!=n.length?"s":"")+"?",function(){proboards.ajax({url:proboards.route("delete_conversations"),data:{"ids[]":n},datatype:"json",success:function(t){1==t.results?"messages"==e.type?window.location=proboards.route("conversations",{folder:"inbox"}):"posts"==e.type?window.location=proboards.route("board",{board_id:proboards.data("board_id")}):(e.research(),e.selected_ids=[],e.selected_items={}):proboards.error("You do not have permission to delete this.")}})})}else if("bump"==a){var n;if(n="posts"==e.type?[proboards.data("thread_id")]:e.get_selection().ids,0==n.length)return;proboards.ajax({url:proboards.route("thread_bump"),data:{"ids[]":n},dataType:"json",success:function(t){"posts"!=e.type&&e.research()}})}else if("follow"==a){var n=e.get_selection();if(0==n.length)return;proboards.ajax({url:proboards.route("follow_member"),data:{"ids[]":n.ids},success:function(e){for(var t=0;t<e.ids.length;++t)proboards.dataHash.following[e.ids[t]]=1}})}else if("unfollow"==a){var n=e.get_selection();if(0==n.length)return;proboards.ajax({url:proboards.route("unfollow_member"),data:{"ids[]":n.ids},success:function(t){for(var i=0;i<n.ids.length;++i)proboards.dataHash.following[n.ids[i]]=0;"following"==e.options.data.hash.view?(e.selected_ids=[],e.selected_items={},e.research()):e.clear_cache()}})}else if("send_message"==a){var n=e.get_selection();if(0==n.length)return;for(var S="",y=0;y<n.length;y++)0!=y&&(S+=","),S+=n.ids[y];window.location=proboards.route("new_user_conversation",{recipients:S})}else if("delete_report"==a){var D=e.get_selection().ids,R=D.length;if(0==R)return;proboards.confirm("Are you sure you wish to delete "+R+" report"+(1!=R?"s":"")+"?",function(){proboards.loading(!0),proboards.ajax({url:proboards.route("delete_report"),data:{"ids[]":D},dataType:"json",success:function(){e.research(),e.selected_ids=[],e.selected_items={}},complete:function(){proboards.loading(!1)}})})}else if("delete_post"==a||"delete_posts"==a){var n=e.get_selection().ids,o="posts";if(0==n.length)return;proboards.confirm_dialog(o,"delete",n,function(t){e.research(),e.selected_ids=[],e.selected_items={}})}else if("warn_user"==a){var n=e.get_selection();if(1!=n.length)return;var I=/(^| )user-([0-9]+)($| )/,E=I.test($(n.items[0]).attr("class"))?RegExp.$2:"";""!=E&&(window.location=proboards.route("edit_user_admin",{user_id:E}))}else if("ban_user"==a){var n=e.get_selection();if(1!=n.length)return;var E="";if("reports"==e.type){var I=/(^| )user-([0-9]+)($| )/;E=I.test($(n.items[0]).attr("class"))?RegExp.$2:"",proboards.member.ban({id:E,checked:["ip","user_name","global_id"],from:{type:"reported_post",id:n.ids[0]},success:function(t){e.research(),e.selected_ids=[],e.selected_items={}}}),E=""}else if("members"!=e.type){var I=/(^| )user-([0-9]+)($| )/;E=I.test($(n.items[0]).attr("class"))?RegExp.$2:""}else E=n.ids[0];""!=E&&proboards.member.ban({id:E,checked:["ip","global_id","user_name"]})}else if("searchIP actionable ui-menu-has-sub-menu"==a)proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this member: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+e.get_selection().items[0].data("ip")+'" />'),$('input[name="easy_copy_ip"]').select();else if("ipSearchMembers"==a)window.location=proboards.route("members")+"?view=ip&type=user&id="+e.get_selection().ids[0]+"/";else if("ipSearchThreads"==a)window.location=proboards.route("threads_by_ip",{
type:"user",id:e.get_selection().ids[0]});else if("ipSearchPosts"==a)window.location=proboards.route("posts_by_ip",{type:"user",id:e.get_selection().ids[0]});else if(a.indexOf("label")==-1||a.indexOf("ui-menu-has-sub-menu")!=-1||"threads"!=e.type&&"posts"!=e.type)if(a.toLowerCase().indexOf("label")==-1||a.indexOf("ui-menu-has-sub-menu")!=-1||"conversations"!=e.type&&"messages"!=e.type){if("remove_from_group"==a){var n=e.get_selection();if(0==n.length)return;proboards.ajax({url:proboards.route("change_group_members",{type:"remove"}),data:{type:"remove","user_ids[]":e.selected_ids,group_id:e.options.data.hash.group},success:function(t){e.research(),e.selected_ids=[],e.selected_items={},t.status&&($(document.body).append('<div id="remove-member-status">'+t.status+"</div>"),proboards.dialog("remove-member-status",{autoOpen:!0,width:310,title:"Remove Group Members",close:function(){$("#remove-member-status").remove()}}))}})}}else{var a=$(i.item).attr("class");if("manageLabels"==a){var z=0;0==$("#manage-labels-container").length&&($(document.body).append('<div id="manage-labels-container"></div>'),proboards.dialog("manage-labels-container",{autoOpen:!1,width:640,title:"Manage Labels",open:function(){0===$("#labels-wrapper .label-row").length&&$("#labels-wrapper").html('<div id="no-labels-msg">You have no labels.  Click Create New Label to create a new label.</div>'),e.selected_ids.length||$(".apply-col",this).hide(),$("#labels-wrapper .label-row").each(function(){var e=$(".name_input",this),t=$(".color_input",this),i=e.attr("name").substr(5);update_labels_preview_text(i,e.val()),update_labels_preview_hex(i,t.val())})},buttons:[{text:"Create New Label",click:function(){var t=proboards.data("manage_form_id");$("#no-labels-msg").remove().length>0&&($("#labels-wrapper").append('<div><span class="apply-col">Apply</span><span class="label-col">Label Name</span></div>'),e.selected_ids.length||$(".apply-col",this).hide());var i=e.selected_ids.length?'<span class="apply-col"><input id="'+t+"_apply_new"+z+'_input" class="apply_input" type="checkbox" checked="checked" name="apply_new'+z+'" /></span>':"",a='<div class="label-row new">'+i+'<input id="'+t+"_name_new"+z+'_input" class="name_input" type="text" name="name_new'+z+'" size="16" maxlength="32" /><span class="color-wrapper"><input id="'+t+"_color_new"+z+'_input" class="color_input" type="text" name="color_new'+z+'" value="1979e6" /></span><span id="manage-label-new'+z+'-preview" class="ui-label"></span><a id="label_new'+z+'_delete" class="label-delete-button" href="javascript:void(0);"><span>x</span></a></div>';$("#labels-wrapper").append(a),$("#labels-wrapper .name_input").last().focus(),z++}},{text:"Save Changes",click:function(){for(var t=proboards.data("manage_form_id"),i={},a=$("#labels-wrapper .label-row:not(.new)"),n=0;n<a.length;++n){var o=a[n],r=$(".name_input",o),s=$(".color_input",o),l=$(".apply_input:checked",o),d=r.attr("name").substr(5);i[d]={},i[d].name=r.val(),i[d].color=s.val(),l.length&&(i[d].apply=1)}for(var c={},u=$("#labels-wrapper .label-row.new"),n=0;n<u.length;++n){var o=u[n],r=$(".name_input",o),s=$(".color_input",o),l=$(".apply_input:checked",o),d=r.attr("name").substr(5);c[d]={},c[d].name=r.val(),c[d].color=s.val(),l.length&&(c[d].apply=1)}proboards.ajax({url:proboards.route("modify_conversation_labels"),data:{labels:JSON.stringify(i),new_labels:JSON.stringify(c),conv_ids:e.selected_ids},success:function(t){if(e.edit_labels(t),"undefined"!=typeof t.add_labels)for(var i=0;i<t.add_labels.length;i++){var a=t.add_labels[i],n=e.get_label_html(a);e.add_labels(a),e.add_labels_nav_item({liClass:"nav-tree-label-"+a.id,href:proboards.route("conversations_by_label",{label_id:a.id}),content:n})}"undefined"!=typeof t.no_labels&&$(".nav-tree-labels").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),e.selected_ids.length&&e.apply_label_map(t.apply_labels),$(this).dialog("close"),"messages"!=e.type&&e.clear_cache()},error:function(e){0===$(".ui-form-error").length&&$(document.body).append('<div class="ui-form-error"></div>').bind("mousedown",function(){$(".ui-form-error").hide()}),$.inputError($("#"+t+"_name_"+e.failure_id+"_input"),e.error)}})}}]}),$(".color_input").livequery(function(){var e=$(this).val()||"1979e6",t=$(this).attr("name").substr("color_".length);update_labels_preview_hex(t,e),$(this).colorPickMe({update:function(e){update_labels_preview_hex(t,e,1)}})}),$(".color_input").live("keyup",function(){var e=$(this).val(),t=$(this).attr("name").substr(6);update_labels_preview_hex(t,e)}),$(".name_input").live("keyup",function(){var e=$(this).attr("name").substr(5);update_labels_preview_text(e,this.value)}),$(".label-delete-button").live("click",function(e){return e.preventDefault(),$(this).parents(".label-row").remove(),0==$("#manage-labels-container .label-row").length&&$("#manage-labels-container #labels-wrapper").html('<div id="no-labels-msg">You have removed all labels, are you sure you want to do this?  Click Save Changes to confirm.</div>'),!1})),proboards.ajax({url:proboards.route("manage_conversation_labels"),dataType:"html",success:function(e){$("#manage-labels-container").html(e),$("#manage-labels-container").dialog("open")}})}else{if("messages"!=e.type)var F=e.get_selection().ids;else var F=[proboards.data("conversation_id")];var k=a.split(" ")[0].substring(6);type=a.indexOf("add-label")!=-1?"add":"remove",proboards.ajax({url:proboards.route("apply_conversation_label"),data:{label_id:k,"ids[]":F,type:type},success:function(t){for(var i=t.ids.length,a=0;a<i;++a)e.apply_label(t.type,t.ids[a],t.label);"messages"!=e.type&&e.clear_cache()}})}}else{var n=e.get_selection(),k=e.getLabelId(i.item),q=e.getLabelBoardId(i.item),H=e.getLabelAction(i.item);"posts"==e.type&&($(document.body).addClass("thread-board-"+proboards.data("board_id")),n={items:[document.body],ids:[proboards.data("thread_id")],length:1});var F=[],V=[];if("add"==H)for(var y in n.items){var W=$(n.items[y]).find(".ui-label.label-"+k);W.length||e.getLabelBoardId(n.items[y])!=q||(F.push(n.ids[y]),V.push(n.items[y]))}else if("remove"==H)for(var y in n.items){var W=$(n.items[y]).find(".ui-label.label-"+k);W.length&&e.getLabelBoardId(n.items[y])==q&&(F.push(n.ids[y]),V.push(n.items[y]))}proboards.ajax({url:proboards.route("apply_thread_label"),data:{action:H,label_id:k,"ids[]":F,type:e.type},success:function(t){if("add"==H)for(y in V){var i=$(V[y]);if(!i.find(".ui-label.label-"+k).length){var a=i.find("span.labels");a.length?a.prepend(t.label_html):i.find("span.no-labels").removeClass("no-labels").addClass("labels").prepend(t.label_html)}}else if("remove"==H)for(y in V)$(V[y]).find(".ui-label.label-"+k).remove();"posts"==e.type&&(""!=$.trim($("span.labels").html())?$("span.labels").show():$("span.labels").hide()),e.clear_cache()}})}return t.preventDefault(),!1},position:e.menu_position}});this.labelsSelectMenu=$(".lm-labels-"+e.options.id)},create_folders_controls:function(){var e,t=this,i=proboards.data("folder");if(null!=i){if(e=i.match(/label\-(\d+)/)){var a,n=proboards.data("labels"),o=n.length,r=!1;for(a=0;a<o&&!r;++a)n[a].id==e[1]&&(i=this.get_label_html(n[a]),r=!0)}else i=i.charAt(0).toUpperCase()+i.substr(1);var s=$(".lm-folders-"+t.options.id).selectMenu({status:i,staticStatus:!0,beforeShow:function(){$(this).menu("hideOption",proboards.data("folder"))},menuOptions:{click:function(e,t){e.preventDefault();var i=$(t.item).attr("class");return i.match(/label\-(\d+)/)?document.location=proboards.route("conversations_by_label",{label_id:RegExp.$1}):document.location=proboards.route("conversations",{folder:i}),!1}}});this.folderSelectMenu=s}},getItemId:function(e){var t=$(e).closest(".item").attr("id");return"undefined"!=typeof t?t.match(/[a-z]+-(\d+)/)[1]:0},getLabelId:function(e){return $(e).attr("class").match(/label-(\d+)/)[1]},getLabelBoardId:function(e){return $(e).is(".item.thread")?proboards.item("thread",this.getItemId(e)).board_id:$(e).attr("class").match(/board-(\d+)/)[1]},getLabelAction:function(e){return $(e).attr("class").match(/label-(add|remove)+/)[1]},create_views_controls:function(){var e=this,t="View By Board";proboards.data("board_id")&&(t="Board: "+proboards.escape_html(proboards.item("board",proboards.data("board_id")).name.substr(0,15))),e.options.viewsSelector=".lm-views-"+e.options.id,e.options.viewsNameMap={all:"View All",birthdays:"View Today's Birthdays",followers:"View Followers",following:"View Following",friends:"View Friends",group:"View Group",online:"View Online Now",staff:"View Staff",today:"View Online Today",board:t},e.options.viewsDefault="View All";var i=e.options.viewsDefault,a=proboards.data("view"),n=proboards.consolidateParams(["search","hash"]);if(n.view){"birthdays_other_day"!==n.view||e.options.viewsNameMap.hasOwnProperty("birthdays_other_day")||(e.options.viewsNameMap[n.view]=a);var o=e.options.viewsNameMap[n.view];o&&(a=o)}null!=a&&""!=a&&(i=a);$(e.options.viewsSelector).selectMenu({status:i,staticStatus:!1,menuOptions:{click:function(t,i){var a=$(i.item).attr("class"),n=$("input",e.search).data("autosearch");if("viewAll"==a){var o=/view\/([a-zA-Z_]+)(\/|$)/,r=o.test(window.location.pathname)&&"all"!=RegExp.$1?"all":"";n.setDataLite("page",1),n.setData("view",r)}else"viewStaff"==a?(n.setDataLite("page",1),n.setDataLite("sort","name"),n.setDataLite("dir","asc"),n.setData("view","staff")):"viewFollowing"==a?(n.setDataLite("page",1),n.setDataLite("user",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","following")):"viewFollowers"==a?(n.setDataLite("page",1),n.setDataLite("user",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","followers")):"viewFriends"==a?(n.setDataLite("page",1),n.setDataLite("user",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","friends")):"viewOnlineToday"==a?(n.clearCache(),n.setDataLite("page",1),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","today")):"viewOnlineNow"==a?(n.clearCache(),n.setDataLite("page",1),n.setDataLite("board",""),n.setDataLite("sort","last_online"),n.setDataLite("dir","desc"),n.setData("view","online")):"viewBirthdays"==a?(n.setDataLite("page",1),n.setDataLite("sort","name"),n.setDataLite("dir","asc"),n.setData("view","birthdays")):"viewBoard"==a&&proboards.board.select(function(t,i){e.options.viewsNameMap.board="Board: "+proboards.escape_html(i.substr(0,15)),n.setDataLite("page",1),n.setData("view","board"),n.setData("board",t)},{accessible:!0,prepend:'<div class="info">Select a board below to see which members can access it:</div><br />'})}}})},create_logView_controls:function(){var e=this;e.options.logViewSelector="#log-view-select",e.options.logViewNameMap={all:"All Logs",admin:"Admin Logs",admin_ad_free:"Ad-Free",admin_ban_user:"Bans",admin_censored_words:"Censored Words",admin_change_forum_url:"Change Forum URL",admin_custom_domains:"Custom Domains",admin_custom_fields:"Custom Fields",admin_file_storage:"File Storage",admin_forum_avatars:"Forum Avatars",admin_headers_footers:"Headers &amp; Footers",admin_news_feed:"News Feed",admin_ranks:"Ranks",admin_reserved_names:"Reserved Names",admin_shoutbox:"Shoutbox",admin_forum_cleanup:"Forum Cleanup",admin_navigation_menu:"Navigation Menu",admin_forum_settings:"Forum Settings",admin_restrict_registration:"Restrict Registration",admin_restrict_registration_message:"Restrict Registration Message",admin_disable_registration:"Disable Registration",group:"Group Logs",group_create:"Creates",group_delete:"Deletes",group_edit:"Edits",group_leaders:"Leader Changes",group_members:"Member Changes",group_pending_approve:"Member Approvals",group_pending_deny:"Member Denials",post:"Post Logs",post_delete:"Deletes",post_edit:"Edits",post_edit:"Moves",thread:"Thread Logs",thread_annoucement:"Announcements",thread_bump:"Bumps",thread_delete:"Deletes",thread_event:"Events",thread_lock:"Locks",thread_move:"Moves",thread_poll:"Polls",thread_sticky:"Stickies",thread_falling:"Falling",user:"Member Logs",user_new:"New",user_delete:"Delete",user_profile_edit:"Edits",user_approve:"Approvals",user_reject:"Rejections",pm:"Conversation Logs",pm_delete:"Deletes",board_create:"Creates",board_delete:"Deletes",board_edit:"Edits",board_move:"Moves",board_duplicate:"Moves",category:"Category Logs",category_create:"Creates",category_delete:"Deletes",category_edit:"Edits",category_move:"Moves",category_duplicate:"Moves",plugin:"Plugin Logs",plugin_create:"Creates",plugin_edit:"Edits",plugin_settings:"Modifies Settings",plugin_delete:"Deletes",plugin_disable:"Enables/Disables",plugin_import:"Imports",plugin_install:"Installs",plugin_export:"Exports",plugin_permissions:"Edits Permissions",plugin_key_create:"Creates Key",plugin_key_delete:"Deletes Key",plugin_key_clear:"Clears Key Data",reported_post_create:"Creates",reported_post_delete:"Deletes",reported_post_archive:"Archives",reported_post_unarchive:"Unarchives",theme_style_reset:"Style Resets",theme_create:"Creates",theme_default:"Defaults",theme_style_edits:"Style Edits",theme_easy_layout_editor:"Colors &amp; Theme Creator Layout Edits",theme_settings:"Edits",theme_enable:"Enables",theme_export:"Exports",theme_import:"Imports",theme_install:"Installs",theme_disable:"Disables",theme_delete:"Deletes",theme_edit_groups_ranks:"Group and Rank Edits",theme_edit_groups_ranks_reset:"Group and Rank Resets",theme_edit_images:"Image Edits",theme_edit_images_reset:"Image Resets",theme_template_edit:"Template Edits",theme_template_reset:"Template Resets",theme_visual_editor_reset:"Visual Editor Resets",custom_page:"Custom Page Logs",custom_page_add:"Adds",custom_page_delete:"Deletes",custom_page_edit_html:"HTML Changes",custom_page_edit_permissions:"Permission Changes",custom_page_edit_settings:"Setting Changes",custom_page_edit_widgets:"Widget Changes"},e.options.logViewDefault="All Logs";var t=e.options.logViewDefault,i=proboards.consolidateParams(["search","hash"]);if(i.logView){var a=e.options.logViewNameMap[i.logView];a&&(t=a)}$(e.options.logViewSelector).selectMenu({status:t,staticStatus:!1,menuOptions:{click:function(t,i){var a=$(i.item).attr("class");a.indexOf("ui-menu-has-sub-menu")!=-1&&(a=a.replace(/\s?ui-menu-has-sub-menu\s?/,"")),"all"==a&&(a=""),$("input",e.search).autosearch("setDataLite","page",1),$("input",e.search).autosearch("setData","logView",a)}}})},update_controls:function(){for(var e=this,t=this.settings.controls,i=t.length,a=0;a<i;a++){var n=this.settings.viewHashKey,o=e.options[t[a]+"NameMap"],r=e.options[t[a]+"Selector"];if("undefined"!=typeof o&&"undefined"!=typeof r&&"undefined"!=typeof n){var s=e.options[t[a]+"Default"],l=$.pushStateSupport()?null:["hash"],d=proboards.consolidateParams(l);d[n]&&(s=o[d[n]]),$(r).selectMenu("updateStatus",s)}}},load_labels:function(){var e=proboards.data("labels");if(null!=e&&"undefined"!=typeof e)for(var t=0;t<e.length;t++)this.add_labels(e[t])},apply_label_map:function(e){var t=e||proboards.data("label_map");if(null!=t)for(var i in t)for(var a=t[i].length-1;a>=0;a--){var n=t[i][a];this.apply_label("add",i,this.labels["label-"+n])}},add_labels:function(e){var t=this;if(this.labels["label-"+e.id]={id:e.id,name:e.name,color:e.color},this.add_labels_submenu_item(e),"messages"!=this.type&&this.folderSelectMenu&&$(this.folderSelectMenu.selectMenu("getMenu")).append('<li class="folder-label-'+e.id+' folder-label"><a href="#"><span class="icon"></span><span class="action-text"></span>'+this.get_label_html(e)+"</a></li>"),$("#add-label-container").dialog("close"),e.apply_this_label){var i=proboards.data("labels");if($.isArray(i)||(i=[]),i.push({id:e.id,name:e.name,color:e.color}),proboards.data("labels",i),"messages"!=t.type)var a=this.get_selection().ids;else var a=[proboards.data("conversation_id")];proboards.ajax({url:proboards.route("apply_conversation_label"),data:{label_id:e.id,"ids[]":a,type:"add"},success:function(e){for(var i=e.ids.length,a=0;a<i;++a)t.apply_label(e.type,e.ids[a],e.label)}})}},apply_label:function(e,t,i){if("undefined"!=typeof i)if("messages"!=this.type){var a="#conversation-"+t;if("add"==e&&$(".labels .label-"+i.id,a).length>0)return;if("add"==e){var n=$('<a href="'+proboards.route("conversations_by_label",{label_id:i.id})+'">'+this.get_label_html(i)+"</a>");$(".main .labels",a).prepend(n)}else proboards.data("folder").substr(6)==i.id?this.research():$(".labels .label-"+i.id,a).remove()}else if("add"==e){var n=$('<a href="'+proboards.route("conversations_by_label",{label_id:i.id})+'">'+this.get_label_html(i)+"</a>");$(".conversation-labels").prepend(n)}else $(".conversation-labels .label-"+i.id).remove()},get_label_html:function(e){return'<div class="ui-label label-'+e.id+'" style="color: #'+proboards.escape_html(e.color)+';">'+e.name+"</div>"},edit_labels:function(e){$("#manage-labels-container").dialog("close");var t=[];this.labels={};for(var i in e.labels)t.push({color:e.labels[i].color,name:e.labels[i].name,id:i}),this.labels["label-"+i]={color:e.labels[i].color,name:e.labels[i].name,id:i};proboards.data("labels",t);for(var i in e.labels)$(".ui-label.label-"+i).empty().append(e.labels[i].name).css("border-color","#"+e.labels[i].color).css("color","#"+e.labels[i].color);for(var a=0;a<e.delete_labels.length;a++)$("#label-"+e.delete_labels[a]).remove(),$(".nav-tree-label-"+e.delete_labels[a]).remove(),$(".folder-label-"+e.delete_labels[a]).remove(),$(".ui-label.label-"+e.delete_labels[a]).remove(),$(".labels li.label-"+e.delete_labels[a]).remove()},add_labels_submenu_item:function(e){$(this.labelsSelectMenu.selectMenu("getMenu")).append('<li class="label-'+e.id+' label"><a href="#"><span class="icon"></span><span class="action-text"></span>'+this.get_label_html(e)+"</a></li>"),"conversations"!=this.type&&"messages"!=this.type||$(".label.label-"+e.id,this.labelsSelectMenu.selectMenu("getMenu")).each(function(){$(".action-text",this).show();var e=$(this).clone();e.insertAfter($(this)),$(this).addClass("add-label"),$(".action-text",this).html("Add "),e.addClass("remove-label"),$(".action-text",e).html("Remove ")})},add_labels_nav_item:function(e){0===$(".nav-tree-labels ul li").length&&$(".nav-tree-labels").parentsUntil(".nav-tree").menu("showOption",["nav-tree-labels"]);var t=this.gen_nav_item(e);$(".nav-tree-labels ul").append(t)},gen_nav_item:function(e){var t='<li class="'+e.liClass+'"><a class="span" href="'+e.href+'"><span class="new_span">New</span></a><a href="'+e.href+'">'+e.content+'</a><span class="arrow right"><span></span></span></li>';return t},setup_search:function(){function e(e){if("undefined"==typeof t.filters||!t.filters.filterlist("searching")||!t.refreshedOnce||e){t.refreshedOnce=!0;for(var i=[],a=0,n=t.filters.filterlist().data("filterlist"),o=$(".list .filter",t.filters).addClass("RFD-unmatched"),r=$.pushStateSupport()&&location.search?["search"]:["hash"],s=proboards.consolidateParams(r),l=o.length,d=s["filters[]"]||[],c=0,u=d.length;c<u;c++){for(var p=d[c],h=!1,f=0;f<l;f++){var m=o.eq(f);m.hasClass("RFD-unmatched")&&$(".filter-input",m).val()==p&&(m.removeClass("RFD-unmatched"),++a,h=!0)}h||i.push(p)}o=$(".list .filter.RFD-unmatched",t.filters),l=o.length;for(var c=0;c<l;++c){var g=o[c],v=$(".filter-input",g);""==v.val()?v.removeClass("RFD-unmatched"):n.removeFilter(g,!0)}u=i.length;for(var c=0;c<u;++c){var b=i[c].split(":"),_="addFilter";if(t.settings.filters_only&&(_="addSimpleFilter"),filter=n[_](b[0],b[1],b[2]),filter!==!1&&(++a,"created_by"==b[0])){var c,y=$("."+$(".user-search",filter).attr("id")+"-selectlist"),A=b[2].split(","),w=A.length;proboards.ajax({url:proboards.route("user_search"),data:{"ids[]":A},success:function(e,t,i){for(y.selectlist("refresh",e.results),c=0;c<w;++c)y.selectlist("select",A[c],!0);y.selectlist("refresh")}})}}$(".search-filters-button",t.search).toggleClass("state-active",a>0)}}if(this.settings.search){var t=this,i=7;this.pagination.html("").pagination({maxSlots:i,change:function(e,i){var a=$("input",t.search).data("autosearch");if(a.options.hash){var n=$(a.element);n.off("autosearchaftersearch.paging"),n.one("autosearchaftersearch.paging",function(){proboards.events.run("pageChange",e.target)})}a.setData("page",i.page,{refreshAds:!t.settings.modal,scrollToTop:!t.settings.modal,ignorePending:!0})},total:this.options.total,limit:this.options.limit,page:this.options.page}),$("#"+this.type+"-list-search-dialog").remove();var a='<strong>Your Search</strong><div class="ui-search"><input class="search-input filters-input" maxlength="'+proboards.data("search-query-max")+'" type="text" placeholder="Search..." role="search" alt="Search" /></div>',n="Search Options";this.settings.filters_only&&(a='<div id="'+this.type+'-list-search-dialog">'+this.settings.f_description+'<div class="ui-search"><input class="search-input filters-input" type="hidden" /></div></div>',n=this.settings.f_title),this.searchDialog=proboards.dialog(this.type+"-list-search-dialog",{html:a,autoOpen:!1,title:n,width:"50%",buttons:{Done:function(){$(this).dialog("close")}}});var o=$(".search-input",this.searchDialog);o.prop("autofocus",!0);var r=this.searchDialog.parents(".ui-dialog");r.css({position:"fixed"});var s="";proboards.data("search_filter_img_src")&&(s='<img src="'+proboards.data("search_filter_img_src")+'" />');var l=$('<span class="search-filters-button"><span class="icon">'+s+"</span></span>").appendTo(t.search).click(function(){t.searchDialog.dialog("open")});this.settings.filters_only&&$(l).addClass("standalone");var d=[];if((proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type&&"conversations"!=this.type&&"messages"!=this.type)&&"security_logs"!=this.type||d.push({display:"Created by",name:"created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,a){$(i).val("created_by:eq:"+a.ids.join(",")),$(t.filters).filterlist("refresh")}})}}),!proboards.data("search_system")||"conversations"!=this.type&&"messages"!=this.type||(d.push({display:"Message Created By",name:"message_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,a){$(i).val("message_created_by:eq:"+a.ids.join(",")),$(t.filters).filterlist("refresh")}})}}),d.push({display:"Conversation Started By",name:"conversation_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,a){$(i).val("conversation_created_by:eq:"+a.ids.join(",")),$(t.filters).filterlist("refresh")}})}})),!proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type||(d.push({display:"Thread Created By",name:"thread_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,a){$(i).val("thread_created_by:eq:"+a.ids.join(",")),$(t.filters).filterlist("refresh")}})}}),d.push({display:"Post Created By",name:"post_created_by",value_input_type:"custom",callback:function(e,i){proboards.search.create_user_search({container:$(".condition-input",e),input:i,change:function(e,a){$(i).val("post_created_by:eq:"+a.ids.join(",")),$(t.filters).filterlist("refresh")}})}})),"security_logs"==this.type&&proboards.data("search_ip")&&d.push({display:"IP address",name:"ip",value_input_type:"ip",value_input_size:15,add_class:"ip"}),"threads"==this.type){var c=[["","Select","color: gray;"]];$.isArray(proboards.data("labels_viewable"))&&$.each(proboards.data("labels_viewable")||[],function(){c.push([this.id,this.name,"color: #"+this.color])}),1!=c.length&&d.push({display:"Label",name:"label_id",value_input_type:"select",value_input_options:c}),d.push({display:"Locked",name:proboards.data("search_system")?"thread_locked":"locked",value_input_type:"select",value_input_options:[["","Select"],[1,"Yes"],[0,"No"]]}),d.push({display:"Is Event",name:proboards.data("search_system")?"thread_event":"event",value_input_type:"select",value_input_options:[["","Select"],[1,"Yes"],[0,"No"]]}),d.push({display:"Has Poll",name:proboards.data("search_system")?"thread_poll":"poll",value_input_type:"select",value_input_options:[["","Select"],[1,"Yes"],[0,"No"]]})}proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type&&"conversations"!=this.type&&"messages"!=this.type||d.push({display:"posts"==this.type||"messages"==this.type?"Creation Date":"Start Date",name:"created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}),!proboards.data("search_system")||"conversations"!=this.type&&"messages"!=this.type||(d.push({display:"Conversation Start Date",name:"conversation_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}),d.push({display:"Message Creation Date",name:"message_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10})),!proboards.data("search_system")||"threads"!=this.type&&"posts"!=this.type||(d.push({display:"Post Creation Date",name:"post_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}),d.push({display:"Thread Creation Date",name:"thread_created_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10})),"threads"!=this.type&&"conversations"!=this.type||d.push({display:"Reply Count",name:proboards.data("search_system")&&"threads"==this.type?"thread_replies":"conversation_replies",condition_input_options:[["lt","<"],["lte","<="],["eq","="],["gte",">="],["gt",">"]],value_input_type:"text",value_input_size:4}),"members"==this.type&&(d.push({display:"Post Count",name:"posts",condition_input_options:[["lt","<"],["lte","<="],["eq","="],["gte",">="],["gt",">"]],value_input_type:"text",value_input_size:4}),d.push({display:"Registration Date",name:"registered_on",condition_input_options:[["before","before"],["on","on"],["after","after"]],value_input_type:"date",value_input_size:10}));var u=proboards.data("locale_settings")||{},p=u.input_date_placeholder,h=u.input_date_regex?function(e){return $.check_date_format(e,u)}:void 0;this.filters=$("<div></div>").appendTo(this.searchDialog).filterlist({filters:d,change:function(e,i){$(".search-filters-button",t.search).toggleClass("state-active",0!=i.values.length),$("input",t.search).autosearch("setDataLite","page",1),$("input",t.search).autosearch("setData","filters",i.values)},filters_only:this.settings.filters_only,datePlaceholder:p,dateValidation:h});var f='<input class="search-input" type="text" width="90px" maxlength="'+proboards.data("search-query-max")+'" placeholder="Search..." role="search" accesskey="w" />';this.settings.filters_only&&(f='<input class="search-input" type="hidden" />'),t.search.prepend(f);var m="users"!=this.type&&!this.settings.participants&&this.options.hash!==!1;$(".search-input",t.search).autosearch({url:proboards.route(this.settings.route_name),data:this.options.data,cache:!0,pageCache:proboards.data("page_cache"),hash:m,delay:500,minChars:this.settings.minChars||proboards.data("search-query-min"),defaultResponse:{total:this.options.total,limit:this.options.limit,page:this.options.page},beforeSearch:function(e,i){$("li",t.pagination).addClass("state-disabled"),$("li a",t.pagination).bind("click.search",function(){return!1})},afterSearch:function(i,a){var n=$(this).data("autosearch");$("li a",t.pagination).off("click.search"),t.update_controls();var o="",r=null;"members"==t.type&&"undefined"!=typeof t.options.data.hash&&(o=t.options.data.hash.view||"","group"==o&&(r=t.options.data.hash.group));var s=t.options.data.hash=proboards.consolidateParams();("group"==s.view&&("group"!=o||r!=s.group)||"group"!=s.view&&"group"==o)&&t.selected_ids.length>0&&(t.selected_ids=[],t.selected_items={},t.research()),"undefined"!=typeof a.response&&(t.options.data.groupLeader="group"==s.view?a.request.groupLeader||0:null);var l=n.poppingState;if(!$.pushStateSupport()){var d=location.hash.match(/filters\[\]=[^&]+/g)||[];if(d.length!=t.last_filters.length)l=!0;else if(d.length>0){d.sort();for(var c=0;c<d.length;c++)if(d[c]!=t.last_filters[c]){l=!0;break}}t.last_filters=d}e(l),proboards.embedded.processEmbedded(),n.options.hash&&proboards.events.run("afterSearch")},search:function(e,i){var a=$(this).data("autosearch");a.options.hash&&i.refreshAds&&proboards.refresh_ads(!1,i.response.content_score),t.total_tracker=i.response.total,$(".lm-message-count-"+t.options.id).text(proboards.commify(t.total_tracker)),t.pagination.pagination("refresh",i.response),o.val($(".search-input",t.search).val());var n=!1,r=null;if($("#top-ad-banner").length)r=$("#top-ad-banner").offset().top;else{var s=$(t.content).parents(".container,.lm-container").find(".control-bar");s.length&&(r=s.last().offset().top)}if(i.scrollToTop&&$(window).scrollTop()>r&&(n=!0),t.content.html(i.response.results),i.response.page&&m){var l=a.data.page||a.baseData.page;if(i.response.page!=l){var d=$.extend({},a.data,{page:i.response.page}),c=a._getDataStr(d);$.pushStateSupport()?window.history.replaceState({},null,location.pathname+"?"+c):window.location.hash=c}}if(t.settings.checkbox)for(var u in t.selected_ids){var p=$("#"+t.item_type+"-"+t.selected_ids[u]);$(".list-item-checkbox",p).attr("checked","checked"),p.addClass("state-selected"),p.length>0&&(t.selected_items[t.selected_ids[u]]=p)}if("posts"==t.type&&proboards.postManager.runAll(i.cached),"messages"==t.type&&proboards.messageManager.runAll(i.cached),"conversations"==t.type){var h=i.response.label_map||proboards.data("label_map");proboards.data("label_map",$.extend(!0,{},h)),t.apply_label_map()}n&&/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(r)&&window.scroll({top:r,behavior:"smooth"}),"undefined"!=typeof vglnk&&"function"==typeof vglnk.link&&$("a",t.content).each(function(){vglnk.link(this)}),t.content.trigger("pagination_returned"),t.content.trigger("change")}}),t.options.data.hash=proboards.consolidateParams();var g=$(".search-input",t.search).data("autosearch"),v=proboards.data("lm_page")||1;if(g.lastResponse.results=$(proboards.data("page_cache")).html(),g.lastResponse.page=v,g.lastResponse.limit=this.options.limit,g.lastResponse.total=this.options.total,g.lastResponse.content_score=proboards.data("content_score"),$.pushStateSupport()&&g.options.hash){$.extend(g.baseData,proboards.data("route").params),g.baseData.page||(g.baseData.page=1);var b=proboards.consolidateParams(["search"]),_=b.page||g.baseData.page;if(_!=v){b.page=v;var y="?"+g._getDataStr(b);history.replaceState({},null,y)}g.data=b,g.lastRequestDataStr=g._getDataStr(g._getRequestData());var A=proboards.consolidateParams(["hash"]),w=[],x=[];t.mobileScrollifyRegEx.test(window.location.hash)&&(A.scrollTo=RegExp.$1);for(var k in A)A.hasOwnProperty(k)&&(w.push(k),x.push(A[k]));if(w.length)for(var C=0,S=w.length;C<S;C++)C==w.length-1?g.setData(k,A[k],{replaceState:!0}):g.setDataLite(k,A[k]);else"object"==typeof b["filters[]"]&&e();if(A.scrollTo){var T="scrollTo="+encodeURIComponent(A.scrollTo),y=window.location.search;y.length>1?y+="&":y="?",y+=T,history.replaceState({},null,y)}g.initialUrl=location.href}else if(g.options.hash){var D=["q","filters[]","view","logView"],I=$.extend({},proboards.consolidateParams(["search","route"]));g.baseData.page||(g.baseData.page=1);for(var E={},C=0,S=D.length;C<S;C++){var P=D[C];void 0!=typeof I[P]&&(E[P]=I[P],delete I[P])}var A=proboards.consolidateParams(["hash"]);t.mobileScrollifyRegEx.test(window.location.hash)&&(A.scrollTo=RegExp.$1),$.extend(A,E);var M=g._getDataStr(A);A.scrollTo&&(M&&(M+="&"),M+="scrollTo="+encodeURIComponent(A.scrollTo));var O=window.location.hash;"#"==O.charAt(0)&&(O=O.substr(1)),M!=O&&(window.location.hash=M),A.q&&g.element.val(A.q),"object"==typeof A["filters[]"]&&e(),
$.extend(g.baseData,I),g.data=E,g.lastRequestDataStr=g._getDataStr(g._getRequestData())}var L=!1;o.val($(".search-input",t.search).val()).bind("keydown keyup change",function(){$(".search-input",t.search).val()!=this.value&&$(".search-input",t.search).val(this.value).trigger("keydown").trigger("keyup")}).bind("blur",function(){return L?void(L=!1):(L=!0,void $(".search-input",t.search).trigger("blur"))}),$(".search-input",t.search).bind("keydown keyup change",function(){o.val()!=this.value&&o.val(this.value).trigger("keydown")}).bind("blur",function(){return L?void(L=!1):(L=!0,void o.trigger("blur"))})}},clear_cache:function(){$(".search-input",this.search).autosearch("clearCache")},research:function(){var e=$(".search-input",this.search).data("autosearch");e.clearCache(),e.search(void 0,!0)},scrollify:function(e){var t=null,i=null,a=null,n=e.substr(0,e.length-1),o=location.hash+location.search,r=proboards.data("lm_id"),s=0,l=null,d=100,c=25,u=0;listManagerSettings.settings[e].float_control_bar&&(s=$(".scrollable-"+r).height());var p=function(e){var t=$(document).height()-$(window).height(),i=parseInt(window.pageYOffset,10);document.body.clientHeight<u&&(u=i);var a=$("#"+e),n=a.offset(),o=n?Math.min(parseInt(n.top-s,10),t):0,r=i===u,d=o!=i;if(o&&r&&d){var p=0===u?"smooth":"instant";u=o;var h=o-i;window.scrollBy({top:h,left:0,behavior:p}),c=25}r&&c--<=0&&clearInterval(l)};if(t=/scrollTo\=(\d+)/,t.test(o)&&(i=RegExp.$1),!i&&this.mobileScrollifyRegEx.test(o)&&(i=RegExp.$1),i&&n&&(a=$("#"+n+"-"+i),a.length)){!a.prev().length&&$("#top-ad-banner").length&&(a=$("#top-ad-banner"),s=0);var h=a.offset(),i=a.attr("id");null!=h&&p(i),l=window.setInterval(function(){p(i)},d),$.scrollTo.stopOnUserInput(function(){clearInterval(l)})}}},listManager=function(e,t,i){this.init(e,t,i)};$.extend(listManager.prototype,listManagerPrototype),$(document).ready(function(){proboards.listManager=listManagerSettings}),$.extend(proboards,{member:{ban:function(e){proboards.loading(!0);var t=$.extend({id:0,from:{type:"",id:0},checked:[],success:function(){}},e);$("#ban-member-container").length?$("#ban-member-container").dialog("option","title","Ban "+("post"==t.from.type&&$("#item-"+t.from.id+" .mini-profile").hasClass("guest-mini-profile")?"Guest User":"Member")):($(document.body).append('<div id="ban-member-container"></div>'),proboards.dialog("ban-member-container",{autoOpen:!1,width:620,title:"Ban "+("post"==t.from.type&&$("#item-"+t.from.id+" .mini-profile").hasClass("guest-mini-profile")?"Guest User":"Member"),buttons:[{text:"Ban","class":"ban-member-button",click:function(e){$(this).children("form").trigger("submit")}},{text:"Close Window","class":"close-window-button",click:function(e){$(this).dialog("close")}}]}));var i={from_id:t.from.id,from_type:t.from.type};t.post_id&&(i.post_id=t.post_id),proboards.ajax({url:proboards.route("ban_user",{user_id:t.id}),data:i,dataType:"html",success:function(e){$.datepicker.setDefaults({dateFormat:"yy-mm-dd"}),$("#ban-member-container").html(e),$(".ban-member-button").show(),$(".close-window-button").hide(),$("#ban-member-container").dialog("open"),$.each(t.checked,function(){$('#ban-member-container input[name="'+this+'"]').attr("checked","checked")});var i=function(){var e=$('input[name="expire_time"]',$("#ban-member-container form"));""!=$.trim($(this).val())?e.show():(e.val(""),e.hide())},a=$('input[name="expire_date"]',$("#ban-member-container form"));a.bind("change",i),i.call(a);var n=function(){var e=$("form",$("#ban-member-container")).data("form");return e?void(e.options.submit=function(){return proboards.ajax({url:$(this).attr("action"),data:$(this).serialize(),dataType:"json",success:function(e){e.guest_banned?$("#ban-member-container").text("Guest banned."):$("#ban-member-container").text("Member banned."),$(".ban-member-button").hide(),$(".close-window-button").show(),t.success(e)}}),!1}):setTimeout(n,500)};n(),proboards.dialogEnter($("#ban-member-container"))},complete:function(){proboards.loading(!1)}})},select_dialog:function(e){var t=$.extend({title:"User Selection",selected:[],max:0,onComplete:function(){}},e),i=t.max,a=$.unique_id("user-search"),n=$("<div></div>").attr("id",a),o=$('<input type="hidden" />');proboards.dialog("user-search-dialog",{html:n,title:t.title,buttons:{Done:function(){var e=[];$(".user-search-selection > li",this).each(function(){e.push({id:$(this).idFromClass("item"),name:$(".name",this).text(),username:$(".small",this).text().replace(/^\((.+)\)$/,"$1"),group:$(".group-overflow",this).text()})}),$(this).dialog("close"),t.onComplete(e)}},width:505,height:320});var r=function(e){proboards.search.create_user_search({container:n,input:o,results:e,change:function(e,t){},formId:"",limit:i?i:void 0,checkedHash:{},isPendingList:0,currentUser:0,showExisting:1,showAdded:1,searchBox:1,autofocus:t.autofocus,focusDone:i?function(e){$(".ui-dialog").find("button.ui-button").focus()}:void 0})};t.selected.length?(n.html("Loading").progress_text(),proboards.ajax({url:proboards.route("admin_user_searchbox_results"),data:{ids:t.selected},success:function(e){n.html(""),r(e.results)}})):r([])}}}),$.extend(proboards,{messageManager:{init:function(e){"object"!=typeof e&&(e={}),this.options=e,this.selected_messages=[],this.runAll(0)},runAll:function(e){$(".message-options-checkbox input.ui-manager-checkbox").removeAttr("checked"),this.add_options_menus(e),this.bind_quote_buttons(),this.bind_reply_buttons()},add_options_menus:function(e){var t=this;if($(".message-options").show().css("display","inline-block"),$(".options_menu").each(function(){var i=/(^| )message-([0-9]+)($| )/,n=i.test($(this).attr("class"))?RegExp.$2:"",o=/(^| )user-([0-9]+)($| )/,r=o.test($(this).attr("class"))?RegExp.$2:"";e&&$("#message-"+n+"-options").empty();$(this).selectMenu({container:"#message-"+n+"-options",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){$(this).next().addClass("open-menu"),$(".message-"+n+"-checkbox input.ui-manager-checkbox").attr("checked")?($(this).menu("hideOption",n+"-selectMessage"),$(this).menu("showOption",n+"-deselectMessage")):($(this).menu("showOption",n+"-selectMessage"),$(this).menu("hideOption",n+"-deselectMessage"))},onClose:function(){$("#message-"+n+"-options").removeClass("open-menu")},menuOptions:{click:function(e,i){var o=$(i.item).attr("class");if(o==n+"-selectMessage")t.selected_messages.push(n),$(".message-"+n+"-checkbox input.ui-manager-checkbox").attr("checked",!0),$("#message-"+n+"-options").addClass("state-selected");else if(o==n+"-deselectMessage"){var s=[];for(var l in t.selected_messages)t.selected_messages[l]!=n&&s.push(t.selected_messages[l]);t.selected_messages=s,$(".message-"+n+"-checkbox input.ui-manager-checkbox").attr("checked",!1),$("#message-"+n+"-options").removeClass("state-selected")}else o==n+"-giveGift"||o==n+"-sendMessage"?window.location=$(a,this).attr("href"):"badge_action"==o?proboards.badge.action.dialog($(i.item).data("badge-id"),$(i.item).data("user-id")):o==n+"-warn"||o==n+"-disable"?window.location=proboards.route("edit_user_admin",{user_id:r}):"searchIP actionable ui-menu-has-sub-menu"==o?(proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this message: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+$(i.item).data("ip")+'" />'),$('input[name="easy_copy_ip"]').select()):o==n+"-ipBan"?proboards.member.ban({id:r,checked:["ip"],from:{type:"message",id:n},success:function(){$("."+o).hide()}}):o==n+"-ipSearchMembers"?window.location=proboards.route("members")+"?view=ip&type=message&id="+n:o==n+"-ipSearchThreads"?window.location=proboards.route("threads_by_ip",{type:"message",id:n}):o==n+"-ipSearchPosts"?window.location=proboards.route("posts_by_ip",{type:"message",id:n}):o==n+"-ipSearchLogs"?window.location=proboards.route("security_logs_by_ip",{type:"message",id:n}):o==n+"-toTop"&&window.scroll({top:0,behavior:"smooth"})}}})}),e)for(var i in t.selected_messages)$(".message-"+t.selected_messages[i]+"-checkbox input.ui-manager-checkbox").attr("checked",!0),$("#message-"+t.selected_messages[i]+"-options").addClass("state-selected")},bind_quote_buttons:function(){var e=this;$(".quote-button").each(function(){var t=$(this).closest(".message").attr("id"),i=t?t.match(/\d+/)[0]:null;$(this).unbind("click"),$(this).bind("click",function(){var t=$(this).attr("href"),a=e.summary_setup(t);if(0!=proboards.messageManager.selected_messages.length){var n="";for(var o in proboards.messageManager.selected_messages)proboards.messageManager.selected_messages[o]!=i&&(n+=proboards.messageManager.selected_messages[o],n+=",");n+=i,a.setAttribute("action",proboards.route("quote_messages",{message_ids:n,conversation_id:proboards.data("conversation_id")}))}return a.submit(),!1})})},bind_reply_buttons:function(){var e=this,t=proboards.route("new_message",{conversation_id:proboards.data("conversation_id")});$(".reply-button").each(function(){$(this).click(function(){var i=e.summary_setup(t);if(proboards.messageManager.selected_messages.length>0){var a=proboards.messageManager.selected_messages.join(",");i.setAttribute("action",proboards.route("quote_messages",{message_ids:a,conversation_id:proboards.data("conversation_id")}))}return i.submit(),!1})})}}}),$.extend(proboards.messageManager,proboards.shared.manager),$.extend(proboards,{messagePageManager:{init:function(e){this.inited=!0,"object"!=typeof e&&(e={}),this.options=e,this.fields={},this.applied_effects={},this.applied_effects.group=$("#"+this.options.form_id+"_send_to_input").val(),this.applied_effects.separate=0,this.lower_limit=proboards.data("lower_limit"),this.higher_limit=proboards.data("higher_limit");var t="#"+this.options.form_id;this.fields.$labels=$(t+"_labels_input"),this.labels={},this.applied_effects.labels=0,this.create_options_menu(),1==$("#"+this.options.form_id+"_separate_input").val()&&(this.applied_effects.separate=1),this.hide_appropriate(this.applied_effects.group)},create_options_menu:function(){var e=this,t=$(".messaging-options-list");$(".message-options").show(),$(".ind_recipients_div").after('<div class="all_recipients_div hide"><br /><b>All members of this forum.</b><br /><br /></div>'),$("li.label",t).each(function(){var e=$(this),t=e.clone();e.addClass("label-add").find("span.action").html("Add "),t.addClass("label-remove").find("span.action").html("Remove "),t.insertAfter(e)});t.addClass("options_menu").selectMenu({container:"#messaging-options-container",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){$("#messaging-options-container").addClass("open-menu"),$("li.label",t).each(function(){var t=$(this),i=t.hasClass("label-add"),a=t.data("id");e.labels[a]?i?t.hide():t.show():i?t.show():t.hide()})},onClose:function(){$("#messaging-options-container").removeClass("open-menu")},menuOptions:{click:function(i,a){var n=$(a.item),o=n.attr("class");if(o.indexOf("label")!=-1&&o.indexOf("ui-menu-has-sub-menu")==-1){var r=n.data("id"),s=n.hasClass("label-add")?"add":"remove";e.labels[r]="add"==s,"add"==s?e.applied_effects.labels++:e.applied_effects.labels--;var l=[];for(var d in e.labels)e.labels.hasOwnProperty(d)&&e.labels[d]&&l.push(d);e.fields.$labels.val(l.join(",")),e.update_magic_sentence()}else if("grp_separate"==o)e.applied_effects.separate=1,e.hide_appropriate(2);else if("grp_together"==o){var c=e.check_num_recipients(1,0);0!=c?e.out_of_range_error("You do not have permission to start a conversation with more than "+c+" members."):(e.applied_effects.separate=0,e.hide_appropriate(2))}else if("ind_separate"==o){var c=e.check_num_recipients(0,1);0!=c?e.out_of_range_error("You do not have permission to send more than "+c+" messages at once."):(e.applied_effects.separate=1,e.hide_appropriate(1))}else if("ind_together"==o){var c=e.check_num_recipients(0,0);0!=c?e.out_of_range_error("You do not have permission to start a conversation with more than "+c+" members."):(e.applied_effects.separate=0,e.hide_appropriate(1))}else if("to_all"==o)e.applied_effects.separate=1,e.hide_appropriate(3);else if("postAs"==o.substr(0,6)){var d=o.substr(7);e.applied_effects.postingAs=0!=d?n.text():"",$("#"+e.options.form_id+"_post_as_input").val(d),0!=d?(e.labels={},e.applied_effects.labels=0,e.fields.$labels.val(""),t.menu("hideOption","labels")):t.menu("showOption","labels"),e.update_magic_sentence()}}}})},hide_appropriate:function(e){var t=this;1==e?($(".ind_recipients_div").show(),$(".grp_recipients_div").hide(),$(".all_recipients_div").hide()):2==e?($(".ind_recipients_div").hide(),$(".grp_recipients_div").show(),$(".all_recipients_div").hide()):3==e&&($(".ind_recipients_div").hide(),$(".grp_recipients_div").hide(),$(".all_recipients_div").show()),0==t.applied_effects.separate?$("#"+t.options.form_id+"_separate_input").val(""):$("#"+t.options.form_id+"_separate_input").val(1),t.applied_effects.group=e-1,$("#"+t.options.form_id+"_send_to_input").val(e),t.update_magic_sentence()},update_magic_sentence:function(){if(this.inited){var e=this,t="This message will ",i=e.get_num_recipients(),a=e.check_num_recipients(this.applied_effects.group,this.applied_effects.separate,i);if(0!=a&&0==this.applied_effects.group)return this.applied_effects.separate?e.out_of_range_error("You do not have permission to send more than "+a+" messages at once."):e.out_of_range_error("You do not have permission to start a conversation with more than "+a+" members."),!1;if(this.applied_effects.separate?($(".recipients h4").html("Recipients (Separate):"),t+="be sent to "+i+" recipient"+(1==i?"":"s")+(i<2?"":" separately")):($(".recipients h4").html("Recipients (Together):"),t+="start a single conversation with "+i+" recipient"+(1==i?"":"s")),2==this.applied_effects.group?t="This message will be sent to every member of your forum":"undefined"!=typeof this.applied_effects.postingAs&&""!=this.applied_effects.postingAs&&(t+=" and will be sent by the user "+this.applied_effects.postingAs),t+=".",this.applied_effects.labels){var n=this.applied_effects.labels>1?" labels ":" label ";t+=" This conversation will appear in your folders with "+this.applied_effects.labels+n+"applied."}$("#magic-sentence").html(t)}},out_of_range_error:function(e){0==$("#max-selectable-container").length?($(document.body).append('<div id="max-selectable-container">'+e+"</div>"),proboards.dialog("max-selectable-container",{autoOpen:!0,width:310,title:"Too Many Members"})):$("#max-selectable-container").text(e).dialog("open")},check_group_input:function(){var e=this,t=[],i=0;$("#groupsDialog").find(":checkbox").each(function(){void 0!=$(this).attr("checked")&&t.push($(this).val())});for(var a=0;a<t.length;a++)for(var n=0;n<proboards.groups.available.length;n++)t[a]==proboards.groups.available[n].id&&(i=parseInt(i)+parseInt(proboards.groups.available[n].members));var o=i,r=e.check_num_recipients(1,e.applied_effects.separate,o);return 0!=r&&(e.out_of_range_error("You do not have permission to start a conversation with more than "+r+" members at once. We have switched your setting to send separate conversations to each member instead."),e.applied_effects.separate=1,$("#"+e.options.form_id+"_separate_input").val(1),e.update_magic_sentence()),!0},check_num_recipients:function(e,t,i){var a=this;return"undefined"==typeof i&&(i=a.get_num_recipients(e)),i>a.lower_limit&&0==e&&!proboards.data("can_mass_pm")?a.lower_limit:i>a.higher_limit&&!t||i>a.higher_limit&&!proboards.data("can_mass_pm")?a.higher_limit:0},get_num_recipients:function(e){var t=this,i=0;if("undefined"==typeof e&&(e=t.applied_effects.group),1==e)for(var a=proboards.groups.getSelected(proboards.data("form_id")),n=0;n<a.length;n++)for(var o=0;o<proboards.groups.available.length;o++)a[n]==proboards.groups.available[o].id&&(i=parseInt(i)+parseInt(proboards.groups.available[o].members));else i="undefined"==typeof proboards.search.user_search?""==$("#"+t.options.form_id+"_recipients_input").val()?0:$("#"+t.options.form_id+"_recipients_input").val().split(",").length:proboards.search.user_search[proboards.search.user_search_index].selectlist("getNumSelected");return i}}}),$.extend(proboards,{permissions:{selection:function(e){var t=$.extend({name:"permissions",values:{},action:"perform this action",include_owner:!1},e);"undefined"!=typeof t.everyone_text&&""!==t.everyone_text||(t.everyone_text="Who can "+t.action+"..."),"undefined"!=typeof t.self_text&&""!==t.self_text||(t.self_text=t.include_owner),t.everyone_text=proboards.escape_html(t.everyone_text),t.self_text=proboards.escape_html(t.self_text),t.everyone_text=t.everyone_text.replace(/\[b\]/g,"<b>").replace(/\[\/b\]/g,"</b>");for(var i=($.unique_id(),$('<table class="permissions fieldset group-unique"><tr class="level-select"><td class="label">'+t.everyone_text+'</td><td class="field"><select name="'+t.name+'_level"><option value="0" selected="selected">Everyone</option><option value="1">Members &amp; Staff</option><option value="2">Staff</option><option value="3">Custom</option></select></td></tr>'+(t.include_owner?'<tr class="include-owner-select"><td class="label">'+t.self_text+'</td><td class="field"><input name="'+t.name+'_include_owner" type="checkbox" value="1" /></td></tr>':"")+'<tr class="rank-select"><td class="label">Only members with the minimum rank:</td><td class="field"><select name="'+t.name+'_include_rank"><option value="0" selected="selected">- Optional -</option></select></td></tr><tr class="include-groups"><td class="label">And members in the groups:</td><td class="field"><input type="hidden" name="'+t.name+'_include_groups"></span><span class="trimmable-list"></span><a href="#">Add Group</a></td></tr><tr class="exclude-groups"><td class="label">Except members in the groups:</td><td class="field"><input type="hidden" name="'+t.name+'_exclude_groups"></span><span class="trimmable-list"></span><a href="#">Add Group</a></td></tr></table>')),a=proboards.data("rank_list"),n=$('select[name="'+t.name+'_include_rank"]',i),o=0;o<a.length;++o)n.append($("<option></option>").val(a[o].value).html(a[o].label));$('select[name="'+t.name+'_level"]',i).val(t.values.level),$('select[name="'+t.name+'_include_rank"]',i).val(t.values.include_rank),$('input[name="'+t.name+'_include_groups"]',i).val(t.values.include_groups),$('input[name="'+t.name+'_exclude_groups"]',i).val(t.values.exclude_groups),t.include_owner&&t.values.include_owner&&$('input[name="'+t.name+'_include_owner"]',i).attr("checked","checked"),$(".level-select select",i).change(function(){var e=parseInt($(".level-select select",i).val()),t=e>1?"show":"hide",a=e>2?"show":"hide";$(".rank-select",i)[a](),e<3&&$(".rank-select select").val("0"),$(".include-groups",i)[t](),$(".include-owner-select",i)[t]()}).change();var r=function(){var e=$(this).parent().find(".trimmable-list"),t=$(this).parent().find("input");proboards.trimmable_list({options:proboards.data("group_list"),selected:t.arrayValue(),container:e,labelTextType:"html",onChange:function(e){t.arrayValue(e)}})};return $(".include-groups .field > a, .exclude-groups .field > a",i).click(function(e){e.preventDefault();var t=$(this).parent().find("input"),i=this;proboards.select_dialog({title:"Select Groups",options:proboards.data("group_list"),selected:t.arrayValue(),labelTextType:"html",onComplete:function(e){t.arrayValue(e),r.apply(i)}})}).each(r),i}}}),proboards.plugin={_plugins:{},_keys:{},key_type:{USER:1,SUPER_USER:2,THREAD:3,POST:4,CONVERSATION:5,MESSAGE:6,SUPER_FORUM:7},status:{ERROR_REQUEST_TIMEOUT:1,ERROR_INVALID_RESPONSE:2,ERROR_KEY_LENGTH:16,ERROR_KEY_PERMISSION:32,ERROR_KEY_INVALID_DATA:64},get:function(e){return"undefined"==typeof proboards.plugin._plugins[e]?null:proboards.plugin._plugins[e]},key:function(e){return"undefined"==typeof proboards.plugin._keys[e]?null:proboards.plugin._keys[e]},_add_data:function(e){if("object"==typeof e)for(_key in e)if(e.hasOwnProperty(_key)){var t=e[_key];proboards.plugin.keys.init([_key,t.type]);var i=[],a=[];if(t.values)for(var n=0;n<t.values.length;++n)i.push([_key,t.values[n][0],JSON.parse(t.values[n][1])]);if(t.permissions)for(var n=0;n<t.permissions.length;++n)a.push([_key,t.permissions[n]]);proboards.plugin.keys.init_values.apply(this,i),proboards.plugin.keys.init_permissions.apply(this,a)}},keys:{data:{},permissions:{},queue:{},queue_callbacks:{},ajax_wait:100,ajax_timeout:null,ajax:function(){clearTimeout(proboards.plugin.keys.ajax_timeout);var e=$.extend({},proboards.plugin.keys.queue_callbacks);proboards.ajax({url:proboards.route("plugin_key_set"),data:{data:proboards.plugin.keys.queue},success:function(t){for(var i in t.status)for(var a in t.status[i]){var n=t.status[i][a];proboards.plugin._keys[i].type==proboards.plugin.key_type.SUPER_FORUM?"object"==typeof e&&"object"==typeof e[i]?(n.success&&"function"==typeof e[i].success&&e[i].success(n),n.error&&"function"==typeof e[i].error&&e[i].error(n),"function"==typeof e[i].complete&&e[i].complete(n)):n.error&&proboards.error(n.message+"<br /><br /><i>Error Code: "+n.code+"</i><br /><i>Key: "+i+"</i><br /><i>Object Id: "+a+"</i>"):"object"==typeof e&&"object"==typeof e[i]&&"object"==typeof e[i][a]?(n.success&&"function"==typeof e[i][a].success&&e[i][a].success(n),n.error&&"function"==typeof e[i][a].error&&e[i][a].error(n),"function"==typeof e[i][a].complete&&e[i][a].complete(n)):n.error&&proboards.error(n.message+"<br /><br /><i>Error Code: "+n.code+"</i><br /><i>Key: "+i+"</i><br /><i>Object Id: "+a+"</i>")}}}),proboards.plugin.keys.queue={},proboards.plugin.keys.queue_callbacks={}},page_object_id:function(e){var t=0,i=proboards.data("page")||{};return e==proboards.plugin.key_type.USER||e==proboards.plugin.key_type.SUPER_USER?t=proboards.data("user").id:e==proboards.plugin.key_type.THREAD&&"undefined"!=typeof i.thread?t=i.thread.id:e==proboards.plugin.key_type.POST&&"undefined"!=typeof i.thread?t=listManager.prototype.getItemId($(".item.post:first")):e==proboards.plugin.key_type.CONVERSATION&&"undefined"!=typeof i.conversation?t=i.conversation.id:e==proboards.plugin.key_type.MESSAGE&&"undefined"!=typeof i.conversation&&(t=listManager.prototype.getItemId($(".item.message:first"))),t},init:function(){for(var e=0;e<arguments.length;++e){var t=arguments[e][0],i=arguments[e][1];proboards.plugin._keys[t]=function(e,t){return{type:t,get:function(t){var i=this.type===proboards.plugin.key_type.SUPER_FORUM;if("undefined"!=typeof t||i||(t=proboards.plugin.keys.page_object_id(this.type)),this.can_read(t)===!1){var a="ProBoards plugin error: You do not have permission to read from this key. ",n=proboards.plugin.status.ERROR_KEY_PERMISSION;return void console.error(a+"(Error Code: "+n+"; Key: "+e+")")}return i?proboards.plugin.keys.data[e]:proboards.plugin.keys.data[e][t]},set:function(t,i,a){console.warn("Warning: Use of the 'proboards.plugin.key().set()' method is deprecated. Please update the plugin to use the 'pb.plugin.key().set()' method in order to avoid any conflicts. More info can be found at http://www.proboards.com/developer/js.");var n=arguments.length,o={set:1},r=void 0,s=void 0,l=function(e){var t={complete:!0,error:!0,success:!0};if(!$.isPlainObject(e))return!1;for(var i in e)if(e.hasOwnProperty(i)&&(!t[i]||"function"!=typeof e[i]))return!1;return!0};switch(n){case 1:s=t;break;case 2:$.isNumeric(t)?l(i)?(s=t,$.extend(o,i)):(r=t,s=i):(s=t,l(i)&&$.extend(o,i));break;case 3:r=t,s=i,l(a)&&$.extend(o,a);break;default:return proboards.error("Invalid number of arguments passed to method set().")}return"undefined"!=typeof r&&(o.object_id=r),o.value=s,proboards.plugin.key(e).set_new(o)},set_new:function(i){t!=proboards.plugin.key_type.SUPER_FORUM&&"undefined"==typeof i.object_id&&(i.object_id=proboards.plugin.keys.page_object_id(t));var a=function(e,t){var i="object"==typeof e?JSON.stringify(e).length:e.length;return!(i>t)},n=function(t){"function"==typeof i.error?i.error(t):proboards.error(t.message+"<br /><br /><i>Error Code: "+t.code+"</i><br /><i>Key: "+e+"</i><br /><i>Object Id: "+i.object_id+"</i>"),"function"==typeof i.complete&&i.complete(t)},o=void 0,r={},s=/^-?(\d+)$/,l=/boolean|number|string/,d=proboards.plugin.keys.data[e][i.object_id],c=proboards.plugin.keys.permissions[e][i.object_id],u=proboards.data("plugin_max_key_length"),p={message:"Plugin key length exceeded.<br>(Limit: "+u+" bytes)",code:proboards.plugin.status.ERROR_KEY_LENGTH},h={message:"You must supply a value to this function.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA},f={message:"You do not have permission to write to this key.",code:proboards.plugin.status.ERROR_KEY_PERMISSION};if(t==proboards.plugin.key_type.SUPER_FORUM&&(d=proboards.plugin.keys.data[e],c=proboards.plugin.keys.permissions[e],u=proboards.data("plugin_max_super_forum_key_length"),p={message:"Plugin key length exceeded.<br>(Limit: "+u+" bytes)<br><br>Super Forum Key: "+e,code:proboards.plugin.status.ERROR_KEY_LENGTH}),"undefined"!=typeof c&&!c[1])return n(f);if("undefined"!=typeof i.append){if(!l.test(typeof d)&&"undefined"!=typeof d||!l.test(typeof i.value))return n({message:"You can only use append with strings or numbers.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"==typeof i.value)return n(h);"undefined"!=typeof d&&(d=d.toString().concat(i.value)),r={append:1}}else if("undefined"!=typeof i.prepend){if(!l.test(typeof d)&&"undefined"!=typeof d||!l.test(typeof i.value))return n({message:"You can only use append with strings or numbers.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"==typeof i.value)return n(h);"undefined"!=typeof d&&(d=i.value.toString().concat(d)),r={prepend:1}}else if("undefined"!=typeof i.increment){if(!s.test(d)&&"undefined"!=typeof d)return n({message:"You can only increment a number.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});"undefined"!=typeof d&&(d="undefined"!=typeof i.value?(parseInt(d)+parseInt(i.value)).toString():(parseInt(d)+1).toString()),r={increment:1}}else if("undefined"!=typeof i.decrement){if(!s.test(d)&&"undefined"!=typeof d)return n({message:"You can only decrement a number.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});"undefined"!=typeof d&&(d="undefined"!=typeof i.value?(parseInt(d)-parseInt(i.value)).toString():(parseInt(d)-1).toString()),r={decrement:1}}else if("undefined"!=typeof i.push){if(!$.isArray(d)&&"undefined"!=typeof d)return n({message:"You can only push onto an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"!=typeof i.value){if("undefined"!=typeof d){var m=d.slice();if(m.push(i.value),!a(m,u))return n(p);d=m}else d=i.value;r={push:1}}else{if("undefined"==typeof i.values)return n(h);if(!$.isArray(i.values))return n({message:"You must supply an array to the values option.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"!=typeof d){var m=d.slice();if($.each(i.values,function(e,t){m.push(t)}),!a(m,u))return n(p);d=m}r={push:1,values:JSON.stringify(i.values)}}}else if("undefined"!=typeof i.pop){if(!$.isArray(d)&&"undefined"!=typeof d)return n({message:"You can only pop off of an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"==typeof d||d.length>0)if(s.test(i.num_items)){var g=[];if("undefined"!=typeof d)for(var v=0;v<i.num_items&&0!=d.length;v++)g.push(d.pop());o=g,r={pop:1,num_items:i.num_items}}else o="undefined"!=typeof d?d.pop():[],r={pop:1};else o=null,r={pop:1}}else if("undefined"!=typeof i.shift){if(!$.isArray(d)&&"undefined"!=typeof d)return n({message:"You can only shift off of an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"==typeof d||d.length>0)if(s.test(i.num_items)){var g=[];if("undefined"!=typeof d)for(var v=0;v<i.num_items&&0!=d.length;v++)g.push(d.shift());o=g,r={shift:1,num_items:i.num_items}}else o="undefined"!=typeof d?d.shift():[],r={shift:1};else o=null,r={shift:1}}else if("undefined"!=typeof i.unshift){if(!$.isArray(d)&&"undefined"!=typeof d)return n({message:"You can only unshift onto an array.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"!=typeof i.value){if("undefined"!=typeof d){var m=d.slice();if(m.unshift(i.value),!a(m,u))return n(p);d=m}r={unshift:1}}else{if("undefined"==typeof i.values)return n(h);if(!$.isArray(i.values))return n({message:"You must supply an array to the values option.",code:proboards.plugin.status.ERROR_KEY_INVALID_DATA});if("undefined"!=typeof d){var m=d.slice();if($.each(i.values,function(e,t){m.unshift(t)}),!a(m,u))return n(p);d=m}r={unshift:1,values:JSON.stringify(i.values)}}}else{if("undefined"==typeof i.value)return n(h);d=i.value}return"undefined"==typeof d||a(d,u)?(r=$.extend({value:JSON.stringify(i.value)},r),t==proboards.plugin.key_type.SUPER_FORUM?proboards.plugin.keys.data[e]=d:("undefined"!=typeof d&&(proboards.plugin.keys.data[e][i.object_id]=d),r=$.extend({object_id:i.object_id},r)),"undefined"==typeof proboards.plugin.keys.queue[e]&&(proboards.plugin.keys.queue[e]=[]),proboards.plugin.keys.queue[e].push(r),clearTimeout(proboards.plugin.keys.ajax_timeout),proboards.plugin.keys.ajax_timeout=setTimeout(proboards.plugin.keys.ajax,proboards.plugin.keys.ajax_wait),$(["complete","success","error"]).each(function(a,n){"function"==typeof i[n]&&("object"!=typeof proboards.plugin.keys.queue_callbacks[e]&&(proboards.plugin.keys.queue_callbacks[e]={}),t==proboards.plugin.key_type.SUPER_FORUM?proboards.plugin.keys.queue_callbacks[e][n]=i[n]:("object"!=typeof proboards.plugin.keys.queue_callbacks[e][i.object_id]&&(proboards.plugin.keys.queue_callbacks[e][i.object_id]={}),proboards.plugin.keys.queue_callbacks[e][i.object_id][n]=i[n]))}),"undefined"==typeof o||o):n(p)},set_on:function(i,a,n){if("undefined"==typeof n&&(t==proboards.plugin.key_type.SUPER_FORUM?(n=a,a=0):(n=a,a=void 0)),n.length>proboards.data("plugin_max_key_length"))return!1;var o=function(){var t=$(".form_"+i);if(!t.length)return!1;var o=$('input[name="_plugin_keys"]',t),r={};return o.length?r=JSON.parse(o.val()):o=$('<input type="hidden" name="_plugin_keys" />').appendTo(t),"undefined"==typeof r[e]&&(r[e]=[]),r[e].push({object_id:a,value:JSON.stringify(n)}),o.val(JSON.stringify(r)),!0};return $.isReady?o():($(document).ready(o),!0)},can_write:function(i){if(t==proboards.plugin.key_type.SUPER_FORUM){if("undefined"==typeof proboards.plugin.keys.permissions[e])return;return!!proboards.plugin.keys.permissions[e][1]}if("undefined"==typeof i&&(i=proboards.data("user").id),"undefined"!=typeof proboards.plugin.keys.permissions[e]&&"undefined"!=typeof proboards.plugin.keys.permissions[e][i])return!!proboards.plugin.keys.permissions[e][i][1]},can_read:function(i){if(t==proboards.plugin.key_type.SUPER_FORUM){if("undefined"==typeof proboards.plugin.keys.permissions[e])return;return!!proboards.plugin.keys.permissions[e][0]}if("undefined"==typeof i&&(i=proboards.data("user").id),"undefined"!=typeof proboards.plugin.keys.permissions[e]&&"undefined"!=typeof proboards.plugin.keys.permissions[e][i])return!!proboards.plugin.keys.permissions[e][i][0]}}}(t,i),"undefined"==typeof proboards.plugin.keys.permissions[t]&&(proboards.plugin.keys.permissions[t]={}),"undefined"==typeof proboards.plugin.keys.data[t]&&(proboards.plugin.keys.data[t]={})}},init_values:function(){for(var e=0;e<arguments.length;++e){var t=arguments[e][0],i=arguments[e][1],a=arguments[e][2];"undefined"==typeof proboards.plugin.keys.data[t]&&proboards.plugin.keys.init([t,0]),"undefined"==typeof a?proboards.plugin.keys.data[t]=i:proboards.plugin.keys.data[t][i]=a}},init_permissions:function(){for(var e=0;e<arguments.length;++e){var t=arguments[e][0],i=arguments[e][1];"undefined"==typeof proboards.plugin.keys.data[t]&&proboards.plugin.keys.init([t,0]);for(id in i)i.hasOwnProperty(id)&&(proboards.plugin.keys.permissions[t][id]=i[id])}}},settings:{fields:{"structure-title":{render:function(e){return $('<div class="headings" />').append($("<h4 />").text(e.text));
},value:function(e){return""}},"structure-boldtext":{render:function(e){return $("<span></span>").text(e.text)},value:function(e){return""}},"structure-plaintext":{render:function(e){return $("<pre></pre>").text(e.text)},value:function(e){return""}},field:{render:function(e,t){var i=null,a=null,n=$('<span><div class="warning-message hide"></div></span>'),o=$('<input type="text" />').val(t);return"number"===e.validation?(i=function(e){return!!e.match(/^\-{0,1}[0-9]*\.{0,1}[0-9]*$/)},a="be a valid number"):"alphanumeric"===e.validation?(i=function(e){return!!e.match(/^[a-z0-9]*$/i)},a="consist of letters and numbers only"):"email"===e.validation?(i=function(e){return!(""!==e&&!e.match(/^[A-Za-z0-9\_\-\.\+]+\@[A-Za-z0-9\-\_]+\.[A-Za-z0-9\-\.]+$/))},a="be a valid email address"):"url"===e.validation&&(i=function(e){return!(""!==e&&!e.match(/^https?\:\/\/(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?[\w\~\!\@\#\$\%\^\&\*\(\)\-\+\=\/\:\;\?\.\,]*$/i))},a="be a valid URL"),null!==i&&o.bind("change blur",function(e){var t=$(this).parent().find(".warning-message");i($(this).val())?t.hide():(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.text("Value must "+a+"."),t.show(),$(this).focus())}),n.append(o),n},value:function(e){return $("input",e).val()}},textarea:{render:function(e,t){return $("<textarea></textarea>").val(t)},value:function(e){return $("textarea",e).val()}},codebox:{render:function(e,t){var i=$("<textarea></textarea>").val(t);return setTimeout(function(){proboards.code_editor({textarea:i,mode:e.mode,height:300,onChange:function(){$(i).trigger("change"),i.data("editor").getValue().length<=1&&i.data("editor").save()}})},1),$('<div class="container" />').append(i)},value:function(e){return $(".CodeMirror",e).data("editor").getValue()}},color:{render:function(e,t){var i=$('<span><input type="text" /></span>');return $("input",i).val(t).colorPickMe({update:function(){$(this).trigger("keyup"),proboards.unsaved_changes=1}}),i},value:function(e){return $("input",e).val()}},selection:{render:function(e,t){var i=$("<span></span>"),a="undefined"!=typeof t,n={};if($.isArray(t))for(var o=0;o<t.length;++o)n[t[o]]=!0;else a&&(n[t]=!0);switch(e.displaytype){case"select":var r=$("<select></select>");if(1==e.multipleanswers)r.attr("multiple","multiple").addClass("multiple");else if(!a){var s=function(){$("option:first",this).remove(),$(this).unbind("change",s)};r.append($('<option value="">- Make Selection -</option>')).change(s)}for(var l=0;l<e.options.length;++l){var d=$("<option></option>");d.text(e.options[l].option),d.val(e.options[l].value),n[e.options[l].value]&&d.attr("selected","selected"),r.append(d)}i.append(r),1==e.multipleanswers&&i.append('<br /><span class="disclaimer">Click &amp; drag or Ctrl+Click to select.</span>');break;case"check":var c=$("<ul></ul>"),u=function(){};if(1!=e.multipleanswers){var p=null;u=function(){$(this).is(":checked")?($(p).removeAttr("checked"),p=this):p=null}}for(var l=0;l<e.options.length;++l){var h=$.unique_id("check"),f=$("<li></li>"),m=$("<label></label>").attr("for",h).text(e.options[l].option),g=$('<input type="checkbox" />').attr("id",h).val(e.options[l].value).change(u);n[e.options[l].value]&&g.attr("checked","checked").change(),f.append(g).append(m),c.append(f)}i.append(c);break;case"radio":for(var c=$("<ul></ul>"),v=$.unique_id("radiogroup"),l=0;l<e.options.length;++l){var h=$.unique_id("radio"),f=$("<li></li>"),m=$("<label></label>").attr("for",h).text(e.options[l].option),b=$('<input type="radio" />').attr("name",v).attr("id",h).val(e.options[l].value);n[e.options[l].value]&&b.attr("checked","checked"),f.append(b).append(m),c.append(f)}i.append(c)}return i},value:function(e,t){var i="";switch(t.displaytype){case"select":i=$("select",e).val();break;case"check":1==t.multipleanswers?(i=[],$("input:checked",e).each(function(){i.push($(this).val())})):i=$("input:checked",e).val();break;case"radio":i=1==t.multipleanswers?[$("input:checked",e).val()]:$("input:checked",e).val()}return i}},sortable:{render:function(e,t){var i=$("<span></span>"),a=$("<ul />");$.isArray(t)||(t=[]),$.isArray(e.items)||(e.items=[]);for(var n={},o=[],r={},s=0;s<t.length;++s)n[t[s].value]=!0,o.push(t[s]);for(var l=0;l<e.items.length;++l){var d=e.items[l];r[d.value]=d,n[d.value]||(o.push({value:d.value,checked:0}),n[d.value]=!0)}if(1==e.checkboxes&&""!=e.checkbox_label){var c=$('<span class="info" />').text(e.checkbox_label);i.append(c)}for(var u=0;u<o.length;++u){var p=r[o[u].value];if("undefined"!=typeof p){var h=$("<li />"),f=$.unique_id("check");if(1==e.checkboxes){var m=$('<input type="checkbox" value="1" />').attr("id",f);1==o[u].checked&&m.attr("checked","checked"),h.append(m)}h.append($("<label />").text(p.label).attr("for",f)),h.append($('<div class="plugin-drag drag-handle" title="click and drag to reorder" />')),h.data("value",p.value),a.append(h)}}return a.sortable({items:"> li",handle:".drag-handle",placeholder:"placeholder",axis:"y",start:function(e,t){$("> li.placeholder",a).height(t.item.outerHeight()+"px")},stop:function(e,t){a.setEven(),$(this).trigger("change")}}),a.setEven(),i.append(a),i},value:function(e,t){var i=[];return $("ul.ui-sortable > li",e).each(function(){i.push({value:$(this).data("value"),checked:$("input:checked",this).length?1:0})}),i}},search:{render:function(e,t){var i,a=$.unique_id(e.id),n=$("<div></div>"),o=$("<ul></ul>"),r=$('<input type="hidden" />').attr("id",a).val(t),s=$('<a href="#" class="change"></a>').click(function(e){e.preventDefault()}),l=parseInt(e.multipleanswers),d=function(e,t){proboards.trimmable_list({container:o,options:e,selected:t,onChange:function(e){c(e),o.setEven()}}),o.setEven(),l||$("ul.trim-list",o).children().removeClass("even")},c=function(e){r.arrayValue(e).change()};switch(e.searchtype){case"categories":void 0==i&&(i="category");case"groups":void 0==i&&(i="group");case"pages":void 0==i&&(i="page");case"themes":void 0==i&&(i="theme");case"boards":void 0==i&&(i="board"),s.text("Add "+proboards.capitalize(i)).click(function(){proboards.select_dialog({title:""!=e.label?e.label:proboards.capitalize(i)+" Selection",options:proboards.data(i+"_list"),selected:r.val().split(","),max:1==e.multipleanswers?0:1,onComplete:function(e){c(e),d(proboards.data(i+"_list"),e)}})}),d(proboards.data(i+"_list"),t);break;case"members":i="members";var u=[],p=l?"Add Members":"Add Member";if(s.text(p).click(function(){proboards.member.select_dialog({selected:""!=r.val()?r.val().split(","):[],max:l?0:1,autofocus:1,onComplete:function(e){u=[];for(var t=[],i=0;i<e.length;++i)u.push({value:""+e[i].id,label:e[i].name}),t.push(""+e[i].id);c(t),d(u,t)}})}),d(u,t),void 0!=t&&""!=t){s.hide(),o.append("<li>Loading...</li>");var h=$.isArray(t)?t:[t];c(h),proboards.ajax({url:proboards.data("user_data_url"),data:{ids:h},success:function(e){u=[];for(var t=0;t<e.users.length;++t){var i=e.users[t],a=""+i.id;u.push({value:a,label:$("<span></span>").html(i.name).text()})}s.show(),o.html(""),d(u,h)}})}}return n.append(r).append(o).append(s)},value:function(e,t,i,a){var n=$("input",e).val();return n=""!=n?n.split(","):[],i.defaults?"members"==t.searchtype&&$.inArrayLoose("1",n)!=-1?(n.length>1&&a.unsaveable.push(t.label||t.id),["1"]):(n.length&&a.unsaveable.push(t.label||t.id),[]):n}},images:{render:function(e,t){for(var i=proboards.data("image_modules"),a=$.unique_id(e.id),n=[],o={},r=0;r<e.images.length;++r)o[e.images[r].name]=e.images[r].value;for(var r=0;r<i.length;++r)void 0!=o[i[r].name]&&n.push({label:"<span>"+proboards.escape_html(o[i[r].name])+'</span><img src="'+proboards.escape_html(i[r].src)+'" />',value:i[r].id});if($.isArray(t)&&t.length){for(var i=proboards.data("image_modules"),s={},r=0;r<i.length;++r)s[i[r].name]=i[r].id;for(var l=0;l<t.length;++l)t[l]=s[t[l]]}var d=$("<div></div>"),c=$("<ul></ul>"),u=$('<input type="hidden" />').attr("id",a).val(t),p=$('<a href="#" class="change"></a>').click(function(e){e.preventDefault()}),h=function(e,t){proboards.trimmable_list({container:c,options:e,selected:t,labelTextType:"html",onChange:function(e){f(e),c.setEven()}}),c.setEven()},f=function(e){u.val(e.join(",")).change()};return p.text("Add Images").click(function(){proboards.select_dialog({title:"Image Selection",id:"image-select-dialog",options:n,selected:u.val().split(","),max:1==e.multipleanswers?0:1,labelTextType:"html",onComplete:function(e){f(e),h(n,e)}})}),h(n,t),d.append(u).append(c).append(p)},value:function(e){var t=$("input",e).val();if(""==t)return[];for(var i=proboards.data("image_modules"),a={},n=0;n<i.length;++n)a[i[n].id]=i[n].name;for(var o=t.split(","),r=0;r<o.length;++r)o[r]=a[o[r]];return o}},autoform:{render:function(e,t){for(var i={},a="",n=0;n<e.fields.length;++n)i[e.fields[n].type]=!0;for(var o in i)a+=" has-"+o;var r=$("<div></div>"),s=$('<ul class="autoform '+proboards.escape_html(e.format)+proboards.escape_html(a)+'"></ul>'),l="input,select,textarea,.ui-sortable",d="change keyup",c=500,u=function(){"vertical"==e.format?($("> li > ul > li",s).removeClass("even"),$("> li > ul",s).each(function(){$("> li:even",this).addClass("even")})):($("> li",s).removeClass("even"),$("> li:even",s).addClass("even"))},p=function(e){var t=!1;return $(l,e).each(function(){var e=$(this).val();"undefined"!=typeof e&&""!==e&&null!==e&&(t=!0)}),t},h=function(){var e=$(this).closest(".autoform-block");if($(this).is(".ui-sortable")||p(e)){e.removeClass("new");var t=$(l,e);t.unbind(d,h),t.bind(d,f),m("new"),u()}},f=function(){var e=$(this).closest(".autoform-block");$(this).is(".ui-sortable")||p(e)||e.find(".delete-button .delete").trigger("click",[!0])},m=function(t,i){"undefined"==typeof i&&(i={});var a=$('<li class="autoform-block '+t+'"></li>'),n=$('<ul class="plugin-ui"></ul>');"vertical"==e.format&&n.append('<li class="headings"></li>');for(var o=0;o<e.fields.length;++o){var r=null,p=null,m=e.fields[o],g=$("<li></li>").attr("class","autoform-"+m.type+" plugin-settings-"+m.type);if("undefined"!=typeof m.description&&""!=m.description&&(p=$('<img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png">').attr("title",proboards.escape_html(m.description)).tipTip()),"undefined"!=typeof m.label&&""!=m.label&&(r=$("<label></label>").text(m.label)),r&&g.append(r),"headings"!=t){var v=proboards.plugin.settings.fields[m.type].render(m,i[m.id]);g.append(v)}p&&g.append(p),n.append(g)}n.append('<li class="drag-button"><div class="plugin-drag drag-handle" title="click and drag to reorder"></div></li>');var b=$('<div class="delete"><span></span></div>');if(n.append($('<li class="delete-button"></li>').append(b)),b.click(function(t,i){var n=function(){t.preventDefault(),a.fadeOut(c,function(){a.remove(),u()})};e.promptOnDelete&&!i?proboards.confirm("Are you sure you wish to remove this entry?",n):n()}),"new"==t){var _=$(l,n);_.bind(d,h),a.fadeIn(c)}else if("headings"!=t){var _=$(l,n);_.bind(d,f)}a.append(n),"horizontal"==e.format&&a.append('<div class="clear"></div>'),s.append(a)};if("horizontal"==e.format&&(m("headings"),u()),$.isArray(t))for(var g=0;g<t.length;++g)m("prepopulated",t[g]);return m("new"),u(),r.append(s),r.append('<div class="clear"></div>'),s.sortable({items:"> li:not(.new,.headings)",handle:".drag-handle",axis:"horizontal"==e.format?"y":void 0,stop:function(e,t){u(),r.trigger("change")}}),r},value:function(e,t,i,a){var n=[];return $("ul.autoform > li:not(.new,.headings)",e).each(function(){for(var e={},o=$("> ul > li:not(.headings)",this),r=0;r<t.fields.length;++r){var s=t.fields[r];void 0!=s.id&&""!=s.id&&(e[s.id]=proboards.plugin.settings.fields[s.type].value(o.eq(r),s,i,a))}n.push(e)}),n}},permissions:{render:function(e,t){"undefined"==typeof t&&(t=proboards.data("default-plugin-key-write-permissions"));var i,a,n=e.access;t.read&&(i=t.read),t.write&&(a=t.write),t.level&&(i=a=t);var o=$("<div></div>");if("both"==n&&o.append('<div class="space-bot"><strong>Read permissions:</strong></div>'),"read"==n||"both"==n){var r=proboards.permissions.selection({values:i,include_owner:"Users can read their own content:",action:"read everything",everyone_text:e.everyone,self_text:e.self});$(".level-select select",r).change(),r.addClass("read-permissions"),o.append(r)}if("both"==n&&o.append('<div class="space-top space-bot"><strong>Write permissions:</strong></div>'),"write"==n||"both"==n){var s=proboards.permissions.selection({values:a,include_owner:"Users can write to their own content:",action:"write to everything",everyone_text:e.everyone,self_text:e.self});$(".level-select select",s).change(),s.addClass("write-permissions"),o.append(s)}return o},value:function(e,t,i,a){function n(e){var n={};return $("select",e).each(function(){var e=r($(this).attr("name"));i.defaults&&"include_rank"==e?parseInt($(this).val())&&(s=!0):n[e]=$(this).val()}),$('input[type="hidden"]',e).each(function(){var e=r($(this).attr("name"));!i.defaults||"include_groups"!=e&&"exclude_groups"!=e?n[e]=$(this).arrayValue():""!=$(this).val()&&(s=!0)}),$('input[type="checkbox"]',e).each(function(){n[r($(this).attr("name"))]=$(this).attr("checked")?1:0}),s&&a.unsaveable.push(t.label||t.name),n}var o={},r=function(e){return e.match(/_(.+?)$/)[1]},s=!1,l=$(".read-permissions",e),d=$(".write-permissions",e);return l.length&&(o.read=n(l)),d.length&&(o.write=n(d)),o}}},render:function(e){var t=$.extend({settings:[],data:{},preview:!1,container:null,tabContainer:null},e);null==t.container&&(t.container=$("<div></div>")),null==t.tabContainer&&(t.tabContainer=$("<div></div>")),"object"==typeof t.data&&null!==t.data||(t.data={}),"object"==typeof t.settings&&null!==t.settings||(t.settings={}),"undefined"==typeof t.settings.pages&&(t.settings.pages=[]),t.tabContainer.html("");for(var i=$('<ul class="ui-helper-clearfix tabs"></ul>'),a=0;a<t.settings.pages.length;++a){var n=t.settings.pages[a],o=$("<li></li>"),r=$("<a></a>").attr("href","#settings-ui-page-"+a).text(n.name).data("tab-num",a);o.append(r),i.append(o)}t.tabContainer.append(i),t.container.html("");for(var a=0;a<t.settings.pages.length;++a){for(var n=t.settings.pages[a],s=$('<ul class="settings-ui-page plugin-ui" id="settings-ui-page-'+a+'"></ul>'),l=0;l<n.fields.length;++l){var d=n.fields[l],c=$("<li></li>").addClass("plugin-settings-"+d.type);"undefined"!=typeof d.format&&c.addClass(d.format),d.required&&(c.addClass("required"),c.append(proboards.help_icon("The author has indicated that this setting might be required for the plugin to function properly.").addClass("required-help"))),"undefined"!=typeof d.id&&""!=d.id&&c.attr("id","plugin-settings-"+d.id);var u=null,p=null;"undefined"!=typeof d.description&&""!=d.description&&(u=$('<img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png">').attr("title",proboards.escape_html(d.description)).tipTip()),"undefined"!=typeof d.label&&""!=d.label&&(p=$("<label></label>").text(d.label));var h=proboards.plugin.settings.fields[d.type].render(d,t.data[d.id]);p&&c.append(p),c.append(h),u&&c.append(u),s.append(c)}var f=1;$("> li",s).each(function(){$(this).hasClass("plugin-settings-structure-title")?f=0:$(this).hasClass("plugin-settings-autoform")&&(f=1),$(this).hasClass("plugin-settings-structure-boldtext")||$(this).hasClass("plugin-settings-structure-plaintext")?f||$(this).addClass("even"):(f=1-f,f&&$(this).addClass("even"))}),t.container.append(s)}var r=$("<a></a>").attr("href","#settings-ui-page-about").text("About");i.prepend($("<li></li>").append(r));for(var s=$('<div class="settings-ui-page" id="settings-ui-page-about"><span class="plugin-name">'+proboards.escape_html(proboards.data("plugin").name)+'</span><span class="plugin-version">Version '+proboards.escape_html(proboards.data("plugin").version)+" "+proboards.escape_html(proboards.data("plugin").stage)+'</span><p class="plugin-description mono">'+proboards.nl2br(proboards.nbsp(proboards.escape_html(proboards.data("plugin").description)))+"</p></div>"),m=proboards.data("components"),g=[],v=0;v<m.length;++v)"board"!=m[v].type&&"category"!=m[v].type||g.push(m[v]);if(g.length){s.append('<div class="headings item"><h4>Plugin Components</div><p class="plugin-components-about">The following are components for your plugin.  You may select boards or categories to apply these components to.</p>');var b=proboards.data("component_map");"object"==typeof b&&null!==b||(b={}),componentContainer=$('<ul class="components" />');for(var v=0;v<g.length;++v){var _=g[v],y=b[_.id],A=$('<li class="component"><h5>'+proboards.escape_html(_.name)+"</h5><p>"+proboards.nl2br(proboards.escape_html(_.description))+'</p><div class="selection"><label>Select a '+proboards.escape_html(_.type)+"</label></div></li>");$(".selection",A).append(proboards.plugin.settings.fields.search.render({id:"component-"+v,multipleanswers:1,searchtype:"board"==_.type?"boards":"categories"},$.isArray(y)?y:[])),componentContainer.append(A)}componentContainer.setEven(),s.append(componentContainer)}return t.container.append(s),$.tabinate({tabs:i,content:t.container,useHash:t.useTabHash,callback:proboards.plugin.settings.resizeAutoforms}),$(document).ready(proboards.plugin.settings.resizeAutoforms),{settings:t.container,tabs:t.tabContainer}},"export":function(e){var t=$.extend({settings:[],data:{},defaults:!1,container:null},e),i={},a={};null==t.container&&(t.container=$("<div></div>"));for(var n={unsaveable:[]},o=0;o<t.settings.pages.length;++o)for(var r=t.settings.pages[o],s=($("#settings-ui-page-"+o,t.container),0);s<r.fields.length;++s){var l=r.fields[s];if(void 0!=l.id&&""!=l.id){var d=$("#plugin-settings-"+l.id),c=proboards.plugin.settings.fields[l.type].value(d,l,t,n);i[l.id]=c}}var u=0;return $("#settings-ui-page-about .component").each(function(){var e=proboards.data("components")[u++].id,t=$("input",this).val();t=""!=t?t.split(","):[],a[e]=t}),{settings_data:i,component_map:a,message:n}},requirement_warning:function(e){if(null===e&&(e={}),parseInt(e.disabled)){if(e.missing_fields){var t=1!=e.missing_fields;$("#plugin-requirement-warning").html("This plugin may not be enabled until the required field"+(t?"s":"")+" "+e.missing_field_names+" "+(t?"are":"is")+" filled out and saved.")}else $("#plugin-requirement-warning").html('This plugin is currently disabled.  <a href="#" id="plugin-enable">click here</a> to enable it.'),$("#plugin-enable").click(function(e){e.preventDefault(),proboards.ajax({url:proboards.data("plugins_disable_url"),data:{disable:0,plugin_id:proboards.data("plugin_id")},success:function(){$("#plugin-requirement-warning").slideUp()}})});$("#plugin-requirement-warning").show()}else $("#plugin-requirement-warning").hide()},size_warning:function(e){e=parseInt(e||0);var t=parseInt(proboards.data("plugin_size_max"));e>t?($("#plugin-size-warning").html("This plugin exceeds the maximum export size ("+$.byteSize(proboards.data("plugin_size_max"))+") by "+$.byteSize(e-t)+".  Images or components must be removed before the plugin can be exported."),$("#plugin-size-warning").show(),$("#export-container input").prop("disabled",!0)):($("#plugin-size-warning").hide(),$("#export-container input").prop("disabled",!1))},resizeAutoforms:function(){$(".autoform.horizontal").each(function(){var e=15;$("> li > ul:first > li",this).each(function(){e+=$(this).outerWidth(!0)}),$(this).width(e)})}}};var postManager={init:function(e){"object"!=typeof e&&(e={}),this.options=e,this.selected_posts=[],this.runAll(0),this.content=$(".lm-content-"+this.options.id);return this},cache:{posts:{},threads:{}},runAll:function(e){$(".post-options-checkbox input.ui-manager-checkbox").removeAttr("checked"),this.add_options_menus(e),this.bind_like_buttons(),this.bind_quote_buttons(),this.bind_edit_buttons(),this.bind_block_buttons(),this.bind_reply_buttons(),this.bind_video_overlays()},get_selection:function(){var e,t=this.selected_posts,i=[],a=this.selected_posts.length;for(e=0;e<a;e++)i[e]=$("#post-"+t[e]);return{ids:t,length:a,items:i}},select_items:function(e){var t=this;e.each(function(){var e=parseInt($(this).attr("id").match(/\d+/)[0]);$.inArray(e,t.selected_posts)==-1&&(t.selected_posts.push(e),$(".post-"+e+"-checkbox input.ui-manager-checkbox").attr("checked",!0),$("#post-"+e+"-options").addClass("state-selected"))})},unselect_items:function(e){var t=this;e.each(function(){var e=parseInt($(this).attr("id").match(/\d+/)[0]),i=$.inArray(e,t.selected_posts);i!=-1&&(t.selected_posts.splice(i,1),$(".post-"+e+"-checkbox input.ui-manager-checkbox").attr("checked",!1),$("#post-"+e+"-options").removeClass("state-selected"))})},unselect_all:function(){this.unselect_items($(".item",this.content))},select_all:function(){this.select_items($(".item",this.content))},add_options_menus:function(e){var t=this;$(".post-options").show().css("display","inline-block"),$(".options_menu").each(function(){var i=/(^| )post-([0-9]+)($| )/,a=i.test($(this).attr("class"))?RegExp.$2:"",n=/(^| )user-([0-9]+)($| )/,o=n.test($(this).attr("class"))?RegExp.$2:"";e&&$("#post-"+a+"-options").empty();$(this).selectMenu({container:"#post-"+a+"-options",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){$(this).next().addClass("open-menu"),$(".post-"+a+"-checkbox input.ui-manager-checkbox").attr("checked")?($(this).menu("hideOption",a+"-selectPost"),$(this).menu("showOption",a+"-deselectPost")):($(this).menu("showOption",a+"-selectPost"),$(this).menu("hideOption",a+"-deselectPost")),proboards.data("ips")||proboards.data("ips",[]);var e;for(e in proboards.data("ips"))$(".ip-"+e).removeClass("banable"),$(".ip-"+e).addClass("banned");proboards.data("is_search_results")&&($(this).menu("hideOption",a+"-moveAllAbove"),$(this).menu("hideOption",a+"-moveAllBelow"))},onClose:function(){$("#post-"+a+"-options").removeClass("open-menu")},menuOptions:{click:function(e,i){var n=$(i.item).attr("class");if(n==a+"-selectPost")t.select_items($("#post-"+a));else if(n==a+"-deselectPost")t.unselect_items($("#post-"+a));else if(n==a+"-giveGift"||n==a+"-sendMessage")window.location=$(e.target).attr("href");else if("badge_action"==n)proboards.badge.action.dialog($(i.item).data("badge-id"),$(i.item).data("user-id"));else if(n==a+"-deletePost"){for(var r=[],s=0;s<t.selected_posts.length;s++)t.selected_posts[s]==a||0!=$("#post-"+t.selected_posts[s]).length&&!$("#post-"+t.selected_posts[s]).hasClass("deletable")||r.push(t.selected_posts[s]);r.push(a),proboards.confirm_dialog("posts","delete",r,function(e){"undefined"!=typeof e.redirect_url?window.location=e.redirect_url:(t.unselect_all(),listMan.research(),listMan.selected_ids=[],listMan.selected_items={})})}else if(n==a+"-moveOnlyThis"||n==a+"-moveAllAbove"||n==a+"-moveAllBelow"||n==a+"-moveAllSelected"){var r=[];n==a+"-moveAllSelected"?(r=t.selected_posts,$.inArray(parseInt(a),t.selected_posts)==-1&&r.push(a)):n==a+"-moveAllAbove"?r.push(a):n==a+"-moveAllBelow"?r.push(a):r.push(a);var l=document.createElement("form");l.setAttribute("method","POST"),l.setAttribute("action",proboards.route("move_post"));var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name","selection"),d.setAttribute("value",r.join(",")),l.appendChild(d);var c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","type"),c.setAttribute("value",n.split("-")[1]),l.appendChild(c),document.body.appendChild(l),l.submit()}else if(n==a+"-reportPost")0==$("#report-post-container").length?($(document.body).append('<div id="report-post-container"></div>'),proboards.dialog("report-post-container",{autoOpen:!1,width:620,height:"auto",title:"Report Post",buttons:[{text:"Report Post","class":"report-post-button",click:function(e){return proboards.loading(!0),proboards.ajax({url:proboards.route("create_report",{post_id:a}),data:{reason:$("#report-post-container textarea").val()},dataType:"json",success:function(e){$("#report-post-container").html(e.message),$(".report-post-button").hide(),$(".close-window-button").show()},complete:function(){proboards.loading(!1)}}),!1}},{text:"Close Window","class":"close-window-button hide",click:function(e){return $("#report-post-container").dialog("close"),!1}}]})):$("#report-post-container").dialog("option","buttons",[{text:"Report Post","class":"report-post-button",click:function(e){return proboards.loading(!0),proboards.ajax({url:proboards.route("create_report",{post_id:a}),data:{reason:$("#report-post-container textarea").val()},dataType:"json",success:function(e){$("#report-post-container").html(e.message),$(".report-post-button").hide(),$(".close-window-button").show()},complete:function(){proboards.loading(!1)}}),!1}},{text:"Close Window","class":"close-window-button hide",click:function(e){return $("#report-post-container").dialog("close"),!1}}]),proboards.ajax({url:proboards.route("report_post",{post_id:a}),dataType:"html",success:function(e){$("#report-post-container").html(e),$("#report-post-container").dialog("open"),$("#report-post-container textarea").focus(),$("#report-post-container textarea").bind("click keyup paste",function(){var e=$("#report-post-container textarea").val(),t=e.length;t>=256&&($("#report-post-container textarea").val(e.substr(0,256)),t=256)})}});else if(n==a+"-warn"||n==a+"-disable")window.location=proboards.route("edit_user_admin",{user_id:o});else if("searchIP actionable ui-menu-has-sub-menu"==n)proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this post: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+$(i.item).data("ip")+'" />'),$('input[name="easy_copy_ip"]').select();else if(n==a+"-ipBan")proboards.member.ban({id:o,checked:["ip"],from:{type:"post",id:a},success:function(){$("."+n).hide()}});else if(n==a+"-deletePostsByIp"){$("#confirm-container").length||$(document.body).append('<div id="confirm-container"></div>');proboards.dialog("confirm-container",{autoOpen:!1,width:620,title:"Delete Posts by IP"}),proboards.ajax({url:proboards.route("posts_delete_by_ip_dialog"),dataType:"html",data:{post_id:a},success:function(e){$("#confirm-container").html(e),$("#confirm-container form").bind("validated",function(e){return e.preventDefault(),proboards.ajax({url:$("#confirm-container form").attr("action"),data:$("#confirm-container form").serialize(),dataType:"json",success:function(e){""==e.redirect_url?(listMan.research(),$("#confirm-container").dialog("close")):window.location=e.redirect_url},error:function(e){listMan.research(),proboards.error(e.error),$("#confirm-container").dialog("close")}}),!1}),$("#confirm-container").dialog("open")}})}else if(n==a+"-ipSearchMembers")window.location=proboards.route("members")+"?view=ip&type=post&id="+a;else if(n==a+"-ipSearchThreads")window.location=proboards.route("threads_by_ip",{type:"post",id:a});else if(n==a+"-ipSearchPosts")window.location=proboards.route("posts_by_ip",{type:"post",id:a});else if(n==a+"-ipSearchLogs")window.location=proboards.route("security_logs_by_ip",{type:"post",id:a});else if(n==a+"-postLink"){0==$("#copy-link-container").length&&($(document.body).append('<div id="copy-link-container"></div>'),proboards.dialog("copy-link-container",{autoOpen:!1,width:375,height:150,title:"Link to Post",open:function(){$("#thread-post-link",this).focus().select()}}));var u=document.location.protocol+"//"+document.location.host;$("#copy-link-container").html('<form><div>Link to this post in this thread:</div><div><input size="60" type="text" name="thread_post_link" id="thread-post-link" value="'+u+proboards.route("view_post_in_thread",{post_id:a})+'" /></div><div>Link to only this post:</div><div><input size="60" type="text" name="post_link" id="post-link" value="'+u+proboards.route("permalink",{post_id:a})+'" /></div></form>'),$("#copy-link-container").dialog("open")}else n==a+"-toTop"&&window.scroll({top:0,behavior:"smooth"});return e.preventDefault(),!1}}})});for(var i=t.selected_posts.length;i--;){var a=t.selected_posts[i];$(".post-"+a+"-checkbox input.ui-manager-checkbox").prop("checked",!0),$("#post-"+a+"-options").addClass("state-selected")}},display_like:function(e){var t=$("#post-"+e),i=(parseInt($(".likes-total",t).text()),$(".likes-button",t));proboards.item("post",e)&&proboards.item("post",e).liked?i.show().addClass("liked"):i.show().removeClass("liked")},bind_like_buttons:function(){var e=this;$(".likes-button").each(function(){var t=$(this).data("id")?$(this).data("id"):listManager.prototype.getItemId(this);$(this).unbind("click"),$(this).bind("click",function(){return proboards.ajax({url:proboards.route("post_like"),data:{post_id:t},dataType:"json",success:function(i){$("#post-"+t+" .likes").html(i.likes_html),proboards.item("post",t).liked=i.liked,e.display_like(t),$(".ui-search .search-input").autosearch("clearCache")}}),!1})}),$(".likes").on("click",".view-likes",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".post").attr("id").match(/\d+/)[0],i=$("#"+t+"-tooltip");0==i.length&&(i=$('<div id="'+t+'-tooltip"></div>'),$(document.body).append(i),i.dialog({autoOpen:!1,width:460,maxHeight:600,title:"Members Who Like This",close:function(){$(".control-bar",i).remove()}})),proboards.ajax({url:proboards.route("likes_of_post"),data:{post_id:t},dataType:"html",success:function(e){i.html(e),i.dialog("open"),i.height()>553&&(i.dialog("option","height",600),i.dialog("close"),i.dialog("open"))}})})},bind_quote_buttons:function(){var e=this;$(".quote-button").each(function(){if(!$(this).hasClass("guest-prompt")){var t=$(this).closest(".post").attr("id").match(/\d+/)[0],i="";"undefined"!=typeof proboards.data("thread_id")?i=proboards.data("thread_id"):proboards.item("post",t).thread_id;var a=proboards.data("page_url")||"";$(this).bind("click",function(n){var o=$(this).attr("href")+a,r=e.summary_setup(o);if(0!=e.selected_posts.length){for(var s="",l=0;l<e.selected_posts.length;l++)e.selected_posts[l]!=t&&(s+=e.selected_posts[l],s+=",");s+=t,r.setAttribute("action",proboards.route("quote_posts",{post_ids:s,thread_id:i}))}return $(r).targetBlank(n),r.submit(),!1})}})},bind_block_buttons:function(){$(".display-blocked-post.button").each(function(){var e=$(this).closest(".post.item");$(this).unbind("click"),$(this).bind("click",function(t){return t.preventDefault(),e.removeClass("blocked"),$(".blocked",e).hide(),$(".unblocked",e).show(),!1})})},bind_edit_buttons:function(){var e=this;$(".edit-button").each(function(){$(this).click(function(t){var i=$(this).attr("href"),a=e.summary_setup(i);return $(a).targetBlank(t),a.submit(),!1})})},bind_reply_buttons:function(){var e=this;$(".reply-button").each(function(){$(this).click(function(t){if(!$(this).hasClass("guest-prompt")){var i=proboards.route("new_post",{thread_id:proboards.data("thread_id")}),a=e.summary_setup(i);if(e.selected_posts.length>0){var n=e.selected_posts.join(",");a.setAttribute("action",proboards.route("quote_posts",{post_ids:n,thread_id:proboards.data("thread_id")}))}return $(a).targetBlank(t),a.submit(),!1}})})},bind_video_overlays:function(){$(".video-embed-container").each(function(e){var t=$(this).find("video"),i=$(this).find(".embed-video-overlay"),a=$(this).find(".embed-video-overlay-play");Modernizr.video?(a.css("top",i.height()/2-a.height()/2),i.add(t).on("click",function(){var e=t.get(0);e.paused?(e.play(),e.paused||i.hide()):(e.pause(),e.paused&&i.show())})):i.hide()})}};$.extend(proboards,{postManager:postManager}),$.extend(proboards.postManager,proboards.shared.manager),$.extend(proboards,{postPageManager:{init:function(e){var t=this;"object"!=typeof e&&(e={}),this.options=e,this.fields={},this.applied_effects={};var i="#"+this.options.form_id;if(this.fields.$bookmark=$(i+"_bookmark_input"),this.fields.$labels=$(i+"_labels_input"),this.fields.$announcement=$(i+"_announcement_input"),this.fields.$sticky=$(i+"_sticky_input"),this.fields.$lock=$(i+"_lock_input"),this.fields.$falling=$(i+"_falling_input"),
this.fields.$announcement_expires=$(i+"_announcement_expires_input"),this.fields.$announcement_expires_date=$(i+"_announcement_expires_date_input"),this.fields.$announcement_expires_time=$(i+"_announcement_expires_time_input"),this.fields.$post_as=$(i+"_post_as_input"),1==this.fields.$bookmark.val()&&(this.applied_effects.bookmark=1),1==this.fields.$announcement.val()&&(this.applied_effects.announcement=1),1==this.fields.$sticky.val()&&(this.applied_effects.sticky=1),1==this.fields.$lock.val()&&(this.applied_effects.lock=1),1==this.fields.$falling.val()&&(this.applied_effects.falling=1),""!=this.fields.$announcement_expires.val()&&""!=this.fields.$announcement_expires_date.val()&&""!=this.fields.$announcement_expires_time.val()&&(this.applied_effects.announcement_expires=this.fields.$announcement_expires_date.val()+" at "+this.fields.$announcement_expires_time.val()),this.fields.$announcement_expires_date.on("localeconvert",function(){t.applied_effects.announcement_expires=t.fields.$announcement_expires_date.val()+" at "+t.fields.$announcement_expires_time.val(),t.update_magic_sentence()}),this.labels={},this.applied_effects.labels=0,this.fields.$labels.length&&""!=this.fields.$labels.val()){var a=this.fields.$labels.val().split(",");this.applied_effects.labels=a.length;for(var n=0;n<a.length;n++)this.labels[a[n]]=!0}this.create_options_menu(),this.bind_date_stuff(),this.bind_poll_stuff(),this.bind_attachment_stuff(),proboards.postManager.bind_video_overlays(),this.update_magic_sentence(),proboards.embedded.processEmbedded()},create_options_menu:function(){var e=this,t=$(".posting-options-list");$(".post-options").css("display","inline-block"),$("li.label",t).each(function(){var e=$(this),t=e.clone();e.addClass("label-add").find("span.action").html("Add "),t.addClass("label-remove").find("span.action").html("Remove "),t.insertAfter(e)});$(".posting-options-list").selectMenu({container:"#posting-options-container",status:'<img src="'+proboards.data("options_img_src")+'" alt="'+proboards.data("options_img_alt")+'" title="'+proboards.data("options_img_title")+'" />',staticStatus:!0,beforeShow:function(){$("#posting-options-container").addClass("open-menu"),$("li.label",t).each(function(){var t=$(this),i=t.hasClass("label-add"),a=t.data("id");e.labels[a]?i?t.hide():t.show():i?t.show():t.hide()}),1==e.applied_effects.bookmark?($(this).menu("showOption","unbookmark"),$(this).menu("hideOption","bookmark")):($(this).menu("showOption","bookmark"),$(this).menu("hideOption","unbookmark")),1==e.applied_effects.lock?($(this).menu("showOption","unlock"),$(this).menu("hideOption","lock")):($(this).menu("showOption","lock"),$(this).menu("hideOption","unlock")),1==e.applied_effects.sticky?($(this).menu("showOption","unsticky"),$(this).menu("hideOption","sticky")):($(this).menu("showOption","sticky"),$(this).menu("hideOption","unsticky")),1==e.applied_effects.announcement?($(this).menu("showOption","unannounce"),$(this).menu("hideOption","announce")):($(this).menu("showOption","announce"),$(this).menu("hideOption","unannounce")),1==e.applied_effects.falling?($(this).menu("showOption","disable_falling"),$(this).menu("hideOption","enable_falling")):($(this).menu("showOption","enable_falling"),$(this).menu("hideOption","disable_falling"))},onClose:function(){$("#posting-options-container").removeClass("open-menu")},menuOptions:{click:function(t,i){var a=$(i.item),n=a.attr("class");if("bookmark"==n)e.applied_effects.bookmark=1,e.fields.$bookmark.val(1);else if("unbookmark"==n)e.applied_effects.bookmark=0,e.fields.$bookmark.val("");else if(n.indexOf("label")!=-1&&n.indexOf("ui-menu-has-sub-menu")==-1){var o=a.data("id"),r=a.hasClass("label-add")?"add":"remove";e.labels[o]="add"==r,"add"==r?e.applied_effects.labels++:e.applied_effects.labels--;var s=[];for(var l in e.labels)e.labels.hasOwnProperty(l)&&e.labels[l]&&s.push(l);e.fields.$labels.val(s.join(","))}else if("announce"==n)$("#announcement-options").hasClass("ui-dialog")||(proboards.dialog("announcement-options",{title:"Announcement Options",autoOpen:!1,width:255,height:240,buttons:[{text:"Make Announcement",click:function(){var t=$('input[name="temp_announcement_expires"]',this),i=$('input[name="temp_announcement_expires_time"]',this);if($("#announcement_show_date_and_time").attr("checked"))if($.check_date_format(t.val(),proboards.data("locale_settings")))if($.check_time_format(i.val())){var a=new Date,n=t.datepicker("getDate").setSeconds(i.timepicker("getTime"));n<a?proboards.alert("Announcements cannot expire in the past."):(e.fields.$announcement.val(1),e.applied_effects.announcement=1,e.fields.$announcement_expires.val(1),e.fields.$announcement_expires_date.val(t.val()),e.fields.$announcement_expires_time.val(i.val()),e.applied_effects.announcement_expires=t.val().toString()+" at "+i.val().toString(),$(this).dialog("close"))}else $.inputError(i,"You must enter a valid time.");else $.inputError(t,"You must enter a valid date.");else e.fields.$announcement.val(1),e.applied_effects.announcement=1,e.fields.$announcement_expires.val(""),e.fields.$announcement_expires_date.val(""),e.fields.$announcement_expires_time.val(""),e.applied_effects.announcement_expires=0,$(this).dialog("close")}}],close:function(){e.update_magic_sentence(),$.clearInputError()}}),proboards.dialogEnter($("#announcement-options"))),$("#announcement-options").dialog("open"),$('#announcement-options input[name="temp_announcement_expires"]').datepicker("option","minDate",new Date);else if("unannounce"==n)e.fields.$announcement.val(""),e.applied_effects.announcement=0,e.fields.$announcement_expires.val(""),e.fields.$announcement_expires_date.val(""),e.fields.$announcement_expires_time.val(""),e.applied_effects.announcement_expires=0,$("#announcement-options").dialog("close");else if("sticky"==n)e.applied_effects.sticky=1,e.fields.$sticky.val(1);else if("unsticky"==n)e.applied_effects.sticky=0,e.fields.$sticky.val("");else if("enable_falling"==n)e.applied_effects.falling=1,e.fields.$falling.val(1);else if("disable_falling"==n)e.applied_effects.falling=0,e.fields.$falling.val("");else if("lock"==n)e.applied_effects.lock=1,e.fields.$lock.val(1);else if("unlock"==n)e.applied_effects.lock=0,e.fields.$lock.val("");else if("postAs"==n.substr(0,6)){var l=n.substr(7);e.applied_effects.postingAs=0!=l?a.text():"",e.fields.$post_as.val(l)}e.update_magic_sentence()}}})},update_magic_sentence:function(){var e="",t=[],i=0;if("post"==this.options.type)e="The thread in which you are posting will be ";else{if("thread"!=this.options.type)return;e="This thread will be "}for(var a in this.applied_effects)this.applied_effects[a]&&"attachment"!=a&&"pollQuestion"!=a&&"announcement_expires"!=a&&i++;if(i>1){if(this.applied_effects.bookmark&&t.push("bookmarked"),this.applied_effects.labels){var n=this.applied_effects.labels>1?" labels":" label";t.push("labeled with "+this.applied_effects.labels+n)}if(this.applied_effects.announcement&&t.push("announced"+(this.applied_effects.announcement_expires?" (expires on "+this.applied_effects.announcement_expires+")":"")),this.applied_effects.sticky&&t.push("stickied"),this.applied_effects.lock&&t.push("locked"),this.applied_effects.falling&&t.push("falling"),this.applied_effects.poll){var o="displayed with a poll";"undefined"!=typeof this.applied_effects.pollQuestion&&""!=this.applied_effects.pollQuestion&&(o+=' asking "'+this.applied_effects.pollQuestion+'"'),t.push(o)}this.applied_effects.event&&t.push("added to the calendar"),"undefined"!=typeof this.applied_effects.postingAs&&""!=this.applied_effects.postingAs&&t.push("posted under the user "+this.applied_effects.postingAs);for(var r in t)r==i-1&&(e+="and "),e+=t[r],e+=r==i-1?".":i>2?", ":" "}else if(i>0)if(this.applied_effects.bookmark)e+="bookmarked.";else if(this.applied_effects.labels){var n=this.applied_effects.labels>1?" labels.":" label.";e+="labeled with "+this.applied_effects.labels+n}else this.applied_effects.announcement?e+="announced"+(this.applied_effects.announcement_expires?" (expires on "+this.applied_effects.announcement_expires+")":"")+".":this.applied_effects.sticky?e+="stickied.":this.applied_effects.lock?e+="locked.":this.applied_effects.falling?e+="falling.":this.applied_effects.poll?(e+="displayed with a poll",e+="undefined"!=typeof this.applied_effects.pollQuestion&&""!=this.applied_effects.pollQuestion?' asking "'+this.applied_effects.pollQuestion+'"':"."):this.applied_effects.event?e+="added to the calendar.":"undefined"!=typeof this.applied_effects.postingAs&&""!=this.applied_effects.postingAs&&(e+="posted under the user "+this.applied_effects.postingAs+".");else"post"==this.options.type?e="The thread in which you are posting has no effects applied to it.":"thread"==this.options.type&&(e="This thread has no effects applied to it.");this.applied_effects.attachment>0&&(e+=" &nbsp;This post will be displayed with attachments."),$("#magic-sentence").html(e)},bind_date_stuff:function(){var e=this;if("thread"==this.options.type){var t=$('<div id="event-dialog" class="event"></div>');$("#"+e.options.form_id).append(t),t.html(proboards.data("event_dialog_html")),t.dialog({autoOpen:!1,width:500,height:"auto",open:function(){proboards.data("start_date",$("#"+e.options.form_id+"_start_date_input").val()),proboards.data("start_time",$("#"+e.options.form_id+"_start_time_input").val()),proboards.data("end_date",$("#"+e.options.form_id+"_end_date_input").val()),proboards.data("end_time",$("#"+e.options.form_id+"_end_time_input").val()),proboards.data("all_day_event",$("#"+e.options.form_id+"_all_day_event_input").prop("checked")?1:0)},close:function(){var t=$("#"+e.options.form_id+"_start_time_input"),i=$("#"+e.options.form_id+"_end_time_input"),a=$("#"+e.options.form_id+"_all_day_event_input");if(proboards.data("start_date")&&($("#"+e.options.form_id+"_start_date_input").val(proboards.data("start_date")),t.val(proboards.data("start_time")),$("#"+e.options.form_id+"_end_date_input").val(proboards.data("end_date")),i.val(proboards.data("end_time")),a.prop("checked",proboards.data("all_day_event")).trigger("change")),a.prop("checked")){var n=24==proboards.data("locale_settings").input_time_format?"00:00":"12:00 AM";t.val(n),i.val(n)}e.update_magic_sentence(),$.clearInputError()}}),$("#"+e.options.form_id).append(t.parent()),$("#"+e.options.form_id+"_all_day_event_input").bind("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))}).trigger("change");var i=$("#event-button"),a=proboards.data("locale_settings").input_date_placeholder;"undefined"!=typeof $("#"+e.options.form_id+"_start_date_input").val()&&""!=$("#"+e.options.form_id+"_start_date_input").val()&&$("#"+e.options.form_id+"_start_date_input").val()!=a?(e.applied_effects.event=1,e.update_magic_sentence(),i.html("Edit Event"),i.bind("click",function(t){t.preventDefault(),e.editEvent()})):(i.bind("click",function(t){t.preventDefault(),e.addEvent()}),e._bind_auto_populate()),$("input, select",t).on("keydown",function(t){return t.which!=Keys.enter||(e.saveEvent(),!1)})}},addEvent:function(){var e=this,t=$("#event-dialog"),i=!1;$("html").is(".ie8")&&(i=!0),t.dialog("option","title","Add Event"),t.dialog("option","buttons",[{text:"Add Event",click:function(){e.saveEvent()}}]),i?t.dialog("open"):(t.dialog("widget").css("visibility","hidden"),t.dialog("open"),t.dialog("widget").css("visibility","visible"))},editEvent:function(){var e=this,t=$("#event-dialog"),i=!1;$("html").is(".ie8")&&(i=!0),t.dialog("option","title","Edit Event"),t.dialog("option","buttons",[{text:"Save Event",click:function(){e.saveEvent()}},{text:"Remove Event",click:function(){e.removeEvent()}}]),i?t.dialog("open"):(t.dialog("widget").css("visibility","hidden"),t.dialog("open"),t.dialog("widget").css("visibility","visible"))},saveEvent:function(){for(var e=this,t=$("#event-dialog"),i=$("#event-button"),a=$("#"+e.options.form_id).data().form,n=a.options.validations,o=!0,r=0;r<n.length;r++)if(!a.validate(n[r],"has_event")){o=!1;break}if(o){$("#"+e.options.form_id+"_has_event_input").val(1),e.applied_effects.event=1;for(var s=["start_date","start_time","end_date","end_time","all_day_event"],r=0;r<s.length;r++)proboards.data(s[r],null);t.dialog("close"),i.html($("#event-button").html().replace(/Add/,"Edit")),i.unbind("click"),i.bind("click",function(t){t.preventDefault(),e.editEvent()})}},removeEvent:function(){var e=this,t=$("#event-dialog"),i=$("#event-button");$("#"+e.options.form_id+"_has_event_input").val(""),e.applied_effects.event=0,t.dialog("close"),i.html(i.html().replace(/Edit/,"Add")),i.unbind("click").bind("click",function(t){t.preventDefault(),e.addEvent()}),e._bind_auto_populate()},_bind_auto_populate:function(){var e=$('input[name="start_date"]'),t=$('input[name="end_date"]').data("edited",!1),i=$('input[name="end_time"]');e.add(t).add(i).off(".autopopulate"),e.on("change.autopopulate",function(){t.data("edited")||t.val($(this).val())}),t.add(i).on("change.autopopulate",function(){t.data("edited",!0)})},bind_poll_stuff:function(){var e=this;if("thread"==this.options.type){var t=$('<div id="poll-dialog" class="poll"></div>');$("#"+e.options.form_id).append(t),t.html(proboards.data("poll_dialog_html"));var i=$("#poll-button");t.dialog({autoOpen:!1,width:460,height:"auto",close:function(){if(proboards.data("poll_question")){$("#"+e.options.form_id+"_poll_question_input").val(proboards.data("poll_question")),$("#"+e.options.form_id+"_poll_max_answers_input").val(proboards.data("poll_max_answers")),$("#"+e.options.form_id+"_poll_expires_on_date_input").val(proboards.data("poll_expires_on")),$("#"+e.options.form_id+"_poll_expires_on_time_input").val(proboards.data("poll_expires_on_time")),$("#"+e.options.form_id+"_poll_view_votes_input").val(proboards.data("poll_view_votes"));var t=proboards.data("poll_answers"),i=0;$('input[name="poll_answers[]"]').each(function(){t[i]?$(this).val(t[i].value):$(this).remove(),i++})}e.update_magic_sentence(),$.clearInputError()}}),$("#"+e.options.form_id).append(t.parent()),proboards.data("current_poll_question")?(e.applied_effects.poll=1,e.applied_effects.pollQuestion=proboards.data("current_poll_question"),e.update_magic_sentence(),i.html("Remove Poll"),i.bind("click",function(t){t.preventDefault(),e.removeOldPoll()})):i.bind("click",function(t){t.preventDefault(),e.addPoll()}),$("input, select",t).on("keydown",function(t){return t.which!=Keys.enter||(e.savePoll(),!1)})}},addPoll:function(){var e=this,t=$("#poll-dialog");t.dialog("option","title","Add Poll"),t.dialog("option","buttons",[{text:"Add Poll",click:function(){e.savePoll()}}]),t.dialog("open"),$("#"+e.options.form_id+"_poll_expires_on_date_input").datepicker("option","minDate",new Date)},editPoll:function(){var e=this,t=$("#poll-dialog");t.dialog("option","title","Edit Poll"),t.dialog("option","buttons",[{text:"Save Poll",click:function(){e.savePoll()}},{text:"Remove Poll",click:function(){e.removePoll()}}]),t.dialog("open")},savePoll:function(){for(var e=this,t=$("#poll-dialog"),i=$("#poll-button"),a=$("#"+e.options.form_id).data().form,n=a.options.validations,o=!0,r=0;r<n.length;r++)if(!a.validate(n[r],"has_poll")){o=!1;break}var s=$("#"+e.options.form_id+"_poll_expires_on_date_input").datepicker("getDate");if(1==o&&s){var l=new Date,d=$("#"+e.options.form_id+"_poll_expires_on_time_input").timepicker("getTime"),c=$("#"+e.options.form_id+"_poll_expires_on_date_input").datepicker("getDate").getTime()/1e3+d,u=Math.floor(l.getTime()/1e3);c<u&&(o=!1,proboards.alert("Polls cannot expire in the past."))}o&&(proboards.data("poll_question",$("#"+e.options.form_id+"_poll_question_input").val()),proboards.data("poll_answers",$('input[name="poll_answers[]"]').serializeArray()),proboards.data("poll_max_answers",$("#"+e.options.form_id+"_poll_max_answers_input").val()),proboards.data("poll_expires_on",$("#"+e.options.form_id+"_poll_expires_on_date_input").val()),proboards.data("poll_expires_on_time",$("#"+e.options.form_id+"_poll_expires_on_time_input").val()),proboards.data("poll_view_votes",$("#"+e.options.form_id+"_poll_view_votes_input").val()),$("#"+e.options.form_id+"_has_poll_input").val(1),e.applied_effects.poll=1,e.applied_effects.pollQuestion=proboards.escape_html($("#"+e.options.form_id+"_poll_question_input").val()),t.dialog("close"),i.html(i.html().replace(/Add/,"Edit")),i.unbind("click"),i.bind("click",function(t){t.preventDefault(),e.editPoll()}))},removePoll:function(){var e=this,t=$("#poll-dialog"),i=$("#poll-button");t.html(proboards.data("poll_dialog_html")),$("#"+e.options.form_id+"_has_poll_input").val(""),e.applied_effects.poll=0,proboards.data("poll_question",null),t.dialog("close"),i.html(i.html().replace(/Edit/,"Add")),i.unbind("click"),i.bind("click",function(t){t.preventDefault(),e.addPoll()}),$("input, select",t).on("keydown",function(t){return t.which!=Keys.enter||(e.savePoll(),!1)})},removeOldPoll:function(){var e=this,t=$("#poll-button");proboards.confirm("Are you sure you want to remove this poll?",function(){$("#"+e.options.form_id+"_replace_poll_input").val(1),e.applied_effects.poll=0,e.update_magic_sentence(),t.html("Add Poll"),t.unbind("click"),t.bind("click",function(t){t.preventDefault(),e.addPoll()})})},bind_attachment_stuff:function(){var e=this,t=$("#show-attachment"),i=$("#attachment-button");t.dialog({autoOpen:!1,width:700,height:"auto",open:function(){$(this).dialog("option","title",i.html())},close:function(){$(".template-download").length>0?(i.html(i.html().replace(/Add/,"Edit").replace(/Attachment$/,"Attachments")),e.applied_effects.attachment=1):(i.html(i.html().replace(/Edit/,"Add").replace(/Attachments/,"Attachment")),e.applied_effects.attachment=0),e.update_magic_sentence()},buttons:[{text:"Done",click:function(){$(this).dialog("close")}}]}),$("#"+e.options.form_id).append(t.parent()),pbFileUpload.init({selWysiwygInput:"#"+e.options.form_id+"_message_input",onDragEnter:function(){$("#attachment-button").trigger("click")}},{maxNumberOfFiles:proboards.data("max_attachments_per_post"),maxFileSize:1024*proboards.data("max_attachment_size")*1024,updateLimits:function(){var e=$(this).data("fileupload"),t=e.options.getNumberOfFiles(),i=e.options.maxNumberOfFiles;$("#limits").html(t+"/"+i+" files"),t>=i?$(".fileinput-button").on("click.max",function(e){return proboards.error("You have reached the attachment limit for this post."),!1}):$(".fileinput-button").off("click.max")}});var a=$("#"+e.options.form_id),n=!0,o=[];a.on("submit",function(){n=!1}),$("#fileupload").on("fileuploaddone",function(e,t){o.push(t.result[0].id),window.onbeforeunload=function(){if(n)return proboards.ajax({url:proboards.route("cleanup_attachment"),data:{ids:o},async:!1}),"If you leave the page now, your attachment(s) will be discarded."}}),$(".template-download").length>0&&(i.html("Edit Attachments"),e.applied_effects.attachment=1,e.update_magic_sentence()),i.bind("click",function(e){e.preventDefault(),t.dialog("open")})}}}),$.extend(proboards,{search:{options:{searchComplete:0,searching:0,limit:0},create_user_search:function(e){var t=this;"undefined"==typeof e.searchBox&&(e.searchBox=1),"undefined"==typeof this.user_search_index?this.user_search_index=0:++this.user_search_index;var i="user-search-"+this.user_search_index,a="";if(e.searchBox){var n=proboards.data("default_avatar");n||(n=proboards.image_path()+"/defaultavatar.png");var o=['name="user_search_box_input"'];o.push('class="'+i+'-input user-search-input search-input"'),o.push('maxlength="'+proboards.data("search-query-max")+'"'),o.push('placeholder="Enter a username"'),e.autofocus&&o.push("autofocus"),null!=e.tabindex&&o.push('tabindex="'+parseInt(e.tabindex)+'"'),a='<div class="'+i+'-box user-search-box micro-profile"><div class="avatar"><div class="avatar-wrapper avatar_size_small avatar-1"><img src="'+n+'" alt="Default Avatar" /></div></div><div class="info"><input '+o.join(" ")+'/><span class="search-filters-button"><span class="icon"></span></span></div></div>'}e.container.append('<div id="'+i+'" class="user-search"><ul class="'+i+'-selection user-search-selection ui-helper-clearfix"></ul>'+a+"</div>");var r=$("#"+i),s=$("."+i+"-box"),l=$("."+i+"-selection"),d="";""!==e.displayboxId&&(d='id="'+e.displayboxId+'" ');var c=$("<div "+d+'class="'+i+'-displaybox user-search-displaybox ui-corner-bottom container"><div class="ui-helper-clearfix center control-bar"><ul class="'+i+'-pagination user-search-pagination"></ul></div><div class="'+i+'-pagination-note user-search-pagination-note"><span class="note small">Note: there is a maximum of 200 pages of results.</span></div><div class="'+i+'-filterlist user-search-filterlist"></div><ul class="'+i+'-selectlist user-search-selectlist"></ul></div>').appendTo(document.body),u=$("."+i+"-pagination"),p=$("."+i+"-pagination-note"),h=$("."+i+"-input"),f=$("."+i+"-selectlist");$("."+i+"-filterlist");"undefined"==typeof this.user_search&&(this.user_search=[]),this.user_search[this.user_search_index]=f,c.displaybox({friendlies:[h,l,"#ui-datepicker-div"],position:{my:"left top",at:"left bottom",of:s,collision:"flipfit"}});var m=!1;u.pagination({maxSlots:5,change:function(e,t){m=!0,h.autosearch("setData","page",t.page)}}),f.selectlist({selectedItemFormat:"{item.partial}",listedItemFormat:"{item.partial}",blockListFormat:'<div class="block_list_options">{item.block_list_options}</div>',blockListOptionFormat:'<span class="block-list-{item.option_id}"><input id="{item.form_id}_block-list-{item.item_id}_input_{item.option_id}" type="checkbox"{item.option_checked} name="block-list-{item.item_id}_{item.option_id}" value="1" /><label for="{item.form_id}_block-list-{item.item_id}_input_{item.option_id}">{item.option_label}</label><br /></span>',blockListOptions:["Hide this member's posts.","Do not let this member start new conversations with me.","Do not let this member follow me or my activities.","Block notifications from this member."],pendingListItemFormat:'<div class="pending_list_options"><input type="button" class="accept" id="{item.item_id}" value="Accept" /><input type="button" class="reject" id="{item.item_id}" value="Reject" /></div>',maxSelectable:proboards.data("selectableLimit")?proboards.data("selectableLimit"):0,maxSelectableApplies:!!proboards.data("selectableLimits"),selection:l,select:function(i,a){e.limit&&a.ids.length>=e.limit&&s.hide();var n=$.merge([],a.ids);e.currentUser&&n.push(e.currentUser),h.autosearch("setDataLite","excluded_ids[]",n),"function"==typeof e.focusDone&&e.limit&&e.focusDone.call(this,null),"function"!=typeof e.change||t.nochange||e.change.call(this,null,{type:"select",ids:a.ids,itemData:a.itemData}),"function"!=typeof e.newChange||f.selectlist("option","loadingExisting")||e.newChange.call(this,null,{type:"select",ids:a.ids,itemData:a.itemData}),c.hide(),$(this).selectlist("refresh",[]),u.pagination("refresh",{total:0}),h.autosearch("setDataLite","q","").val(""),c.is(":visible")&&h.focus(),e.searchComplete=0,$(".user-search").force_ie7_rerender()},deselect:function(t,i){e.limit&&i.ids.length<e.limit&&s.show();var a=i.ids;e.currentUser&&a.push(e.currentUser),h.autosearch("setDataLite","excluded_ids[]",a),"function"==typeof e.change&&e.change.call(this,null,{type:"deselect",ids:i.ids}),"function"==typeof e.newChange&&e.newChange.call(this,null,{type:"select",ids:i.ids})},getData:function(e,t){var i=$("li:first-child .small",f).html(),a=[];if(null!=i){a.username=i.slice(1,-1);var n=$("li:first-child",f),o=$(n).attr("class").match(/item\-(\d+)/);a.id=o[1]}return a},onCreateItem:function(e){var t=e.find("span.name"),i=e.find("span.name a");i.length&&(t.attr("title",i.attr("title")),t.attr("style",i.attr("style")),t.html(i.html()))},formId:e.formId,checkedHash:e.checkedHash,isPendingList:e.isPendingList,showAdded:0!=e.showAdded,disabledMessage:e.massEmail?"This member cannot be sent emails or has opted out of forum emails.":""});var g=!1,v=(e.currentUser?[e.currentUser]:new Array,{user_search_box:1});e.showDeletedUsers||("undefined"==typeof v.filters&&(v.filters=[]),v.filters.push("deleted:only:0")),1==proboards.data("staff_recipients_only")&&(v.staff_recipients_only=1),e.massEmail&&(v.mass_email=1),e.formId&&(v.block_list=1),h.autosearch({url:proboards.route("user_search"),data:v,ajax:!0,cache:!0,hash:!1,delay:500,minChars:1,up:function(e,t){f.selectlist("previous")},down:function(e,t){f.selectlist("next")},pageUp:function(e,t){u.pagination("gotoPreviousPage")},pageDown:function(e,t){u.pagination("gotoNextPage")},enter:function(t,i){e.searchComplete&&(f.selectlist("select"),h.focus())},search:function(t,i){if(i.response.total>=1e3?p.show():p.hide(),f.selectlist("refresh",i.response.results),u.pagination("refresh",i.response),""==h.val())c.displaybox("hide"),e.searching=0,e.searchComplete=0;else if(h[0]===document.activeElement||g)c.is(":visible")||g||(e.searching=1,c.displaybox("show"));else{e.searching=1;var a=!1;$(".close",l).bind("click",function(e){var t=$(this).data("events").click;t.length<=1&&(a=!0),$(this).unbind(e)});var n=m;setTimeout(function(){var e=f.selectlist("getData");"undefined"==typeof e.username||"undefined"==typeof e.id||a||n||e.username!=h.val()&&e.username.charAt(0).toUpperCase()+e.username.slice(1)!=h.val()||f.selectlist("select",e.id)},200)}g=!1,m=!1},afterSearch:function(t,i){e.searching&&(e.searchComplete=1)},tab:function(t,i){c.is(":visible")&&(c.displaybox("hide"),e.searchComplete=0)},escape:function(t,i){c.is(":visible")&&(c.hide(),e.searchComplete=0)}}),e.allowManualInput&&h.autosearch("option","error",function(){if(!h.data("searchError")){var t="Could not connect to the search server.";t+=" "+(1==e.limit?"You may enter a username instead.":"You may enter a comma separated list of usernames instead."),e.eventError?$(document).trigger("proboardsError",[{error:t}]):proboards.error(t),h.autosearch("destroy"),h.unbind(".usersearch"),h.data("searchError",!0)}}),e.currentUser&&h.autosearch("setDataLite","excluded_ids[]",[e.currentUser]),t.nochange=1;var b=f.data("selectlist");b.apply_selected(e.results,e.showExisting),t.nochange=0,h.bind("focus.usersearch",function(e){""!=h.val()&&h.is(".state-editing:not(.placeholder)")&&!c.is(":visible")&&c.displaybox("show")}).bind("blur.usersearch",function(t){l.bind("click",function(t){var i=$(this).data("events").click;i.length<=1&&(c.displaybox("hide"),e.searchComplete=0),l.unbind(t)});var i=!1;$(".close",l).bind("click",function(e){var t=l.data("events").click;t.length<=1&&(i=!0,g=!0),$(".close",l).unbind(e)}),u.bind("click",function(e){m=!0,u.unbind(e)}),setTimeout(function(){var e=f.selectlist("getData");"undefined"==typeof e.username||"undefined"==typeof e.id||i||m||e.username.toLowerCase()!=h.val().toLowerCase()||f.selectlist("select",e.id)},200)}),$(".search-filters-button",r).click(function(){$(".search-filters-dialog-"+i).dialog("open")}),$('<div class="search-filters-dialog-'+i+'"></div>').appendTo(document.body).filterlist({filters:[{display:"Post Count",name:"posts",condition_input_options:[["less than","<"],["less than or equal to","<="],["equal to","="],["greater than or equal to",">="],["greater than",">"]],value_input_type:"text",value_input_size:4}],change:function(e,t){0==t.values.length?$(".search-filters-button",r).removeClass("state-active"):$(".search-filters-button",r).addClass("state-active"),h.autosearch("setData","filters",t.values)}}).dialog({autoOpen:!1,title:"User Search Filters",width:"50%"})}}});var SHOUTBOX_SCROLL_NORMAL=0,SHOUTBOX_SCROLL_OVERRIDE=1,SHOUTBOX_SCROLL_CONTEXTUAL=2;if($.extend(proboards,{shoutbox:{init:function(e){this.timeout,this.refreshFrequency=0,this.manualRefreshTimer=0,this.height_adjustment=0,this.lastUpdateTime=e.lastUpdateTime,this.currentTime=(new Date).getTime(),this.newestAt=parseInt(e.newestAt),"undefined"==typeof this.newestAt&&(this.newestAt=0),this.serverDate=new Date(proboards.data("serverDate")),this.local_time=Date.parse((new Date).toUTCString()),this.server_time=Date.parse(this.serverDate.toUTCString()),this.diff=this.local_time-this.server_time,this.smiles=e.smileyList,this.open_tags={b:0,i:0,u:0,s:0,url:0},this.canPost=$('.shoutbox [name="message"]').length&&$(".shoutbox form").length,this.setup_shoutbox()},setup_shoutbox:function(){var e=this,t=$(".shoutbox form");this.canPost&&($(".shoutbox_post_button").click(function(e){e.preventDefault(),t.submit()}),t.bind("keypress submit",function(t){if("submit"==t.type||"13"==t.which)return e.add_shoutbox(this),!1}),$(".shoutbox_bold").click(function(){e.add_tags(this,"b")}),$(".shoutbox_italic").click(function(){e.add_tags(this,"i")}),$(".shoutbox_underline").click(function(){e.add_tags(this,"u")}),$(".shoutbox_strike").click(function(){e.add_tags(this,"s")}),$(".shoutbox_url").click(function(){e.add_tags(this,"url")}),jQuery.isEmptyObject(this.smiles)?$(".shoutbox_smiley").remove():e.get_smiles()),$(".shoutbox_cancel_button").hide().click(function(t){t.preventDefault(),e.cancel_shout()}),$(".shoutbox").on("click keyup paste",'textarea[name="message"]',function(){var e=$(this).val(),t=e.length;t>=256&&($(this).val(e.substr(0,256)),t=256);var i=$(this).parents(".shoutbox").find(".shoutbox_amount");i.length&&i.html(t)}),$(".shoutbox").on("click keyup paste",'input[name="guest_name"]',function(){var e=$(this).val();e.length>=30&&$(this).val(e.substr(0,30))}),$(".shoutbox_messages").length&&(this.keep_scrolled(this.newestAt,SHOUTBOX_SCROLL_OVERRIDE),$(".shoutbox_refresh_button").on("click",function(t){t.preventDefault();var i=$(".shoutbox_refresh_button");if($(this).is(".active"))e.reload_timer(0),i.removeClass("active"),i.attr("title","Click to Update"),clearTimeout(e.timeout);else{var a=(new Date).getTime();a>e.manualRefreshTimer+1e4?(e.manualRefreshTimer=a,e.update_shoutbox(1,SHOUTBOX_SCROLL_OVERRIDE)):e.timeout=setTimeout(function(){e.update_shoutbox(1,1)},1e4-(a-e.manualRefreshTimer)),i.addClass("active"),i.attr("title","Auto-Updating")}}),this.set_post_events())},set_post_events:function(e){var t=this;e||(e=$(".shoutbox-post")),e.on("mouseover",function(){$(".shoutbox_edit_button, .shoutbox_ban_button",this).removeClass("hidden")}).bind("mouseout",function(){$(".shoutbox_edit_button, .shoutbox_ban_button",this).addClass("hidden")}),e.on("click",".shoutbox_ban_button",function(e){e.preventDefault();var t=$(this),i=t.attr("id").split("-"),a=i[1],n=i[3];proboards.member.ban({id:n,from:{type:"shout",id:a},checked:["ip"]})}),e.on("click",".shoutbox_delete_button",function(e){e.preventDefault(),$(this).parents(".shoutbox-post").remove(),t.delete_shoutbox(this)}),e.on("click",".shoutbox_edit_button",function(e){e.preventDefault(),t.edit_shoutbox(this)}),e.on("click",".user-link",function(e){if(e.altKey){var t=$(".shoutbox form textarea");return t.val()==t.attr("placeholder")?t.val($(this).attr("title")):t.replaceSelection($(this).attr("title")),t.focus(),!1}})},add_tags:function(e,t,i){var a=this,i=i||0,n="",o=$(e).parents(".shoutbox").find('[name="message"]')[0];$(o).focus();var r="["+t+"]",s="[/"+t+"]",l=t,d=a.get_input_selection(o);n=o.value.substr(d.start,d.end-d.start),i?"Enter your reply here..."==o.value.substr(0,24)?o.value=l:o.value=o.value.substr(0,d.start)+l+o.value.substr(d.end,o.value.length):""==n?"Enter your reply here..."==o.value.substr(0,24)?o.value=r+s:o.value=o.value.substr(0,d.start)+r+s+o.value.substr(d.end,o.value.length):o.value=o.value.substr(0,d.start)+r+n+s+o.value.substr(d.end,o.value.length),o.focus()},get_input_selection:function(e){var t,i,a,n,o,r=0,s=0;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(r=e.selectionStart,s=e.selectionEnd):(i=document.selection.createRange(),i&&i.parentElement()==e&&(n=e.value.length,t=e.value.replace(/\r\n/g,"\n"),a=e.createTextRange(),a.moveToBookmark(i.getBookmark()),o=e.createTextRange(),o.collapse(!1),a.compareEndPoints("StartToEnd",o)>-1?r=s=n:(r=-a.moveStart("character",-n),r+=t.slice(0,r).split("\n").length-1,a.compareEndPoints("EndToEnd",o)>-1?s=n:(s=-a.moveEnd("character",-n),s+=t.slice(0,s).split("\n").length-1)))),{start:r,end:s}},get_smiles:function(){var e=this;$(".shoutbox").each(function(){
for(var t=$(".shoutbox_smiley",this),i="",a=[],n=1;n<e.smiles.length;n+=2)a.push(e.smiles[n]);proboards.preload(a);for(var n=0;n<e.smiles.length;n++){var o=e.smiles[n],r=e.smiles[++n];i+='<li class=" '+o+'"><a><img src="'+r+'" alt="'+o+'" title="'+o+'" /></a></li>'}$(this).append('<div class="controls"><ul class="smiley-menu"></ul></div>'),$(".smiley-menu",this).append(i).menu({button:t,position:{my:"left top",at:"left bottom",of:t,collision:"flipfit"},showOn:"click",clickHide:!0,click:function(t,i){var a=$(i.item).attr("class");e.add_tags(this,a,1)}})})},put_smiley:function(){},add_shoutbox:function(e){var t=this,i=$(e).parents(".shoutbox");if(0!=$('[name="message"]',i).val().length){if($(".shoutbox_messages .state-selected",i).length){var a=$('[name="message"]',i).val();$('[name="message"]',i).val(""),proboards.ajax({url:proboards.data("shoutbox_edit_url"),data:{id:$(e)[0].className,message:a},dataType:"json",success:function(e){$(".shoutbox_edit_button",i).parents(".shoutbox-post").removeClass("state-selected"),$('input[name="guest_name"]',i).attr("value","Send"),$("form",i).removeClass(),$(".shoutbox_amount",i).html("0"),$(".shoutbox_cancel_button",i).hide(),$(".shoutbox_error",i).html(""),t.update_shoutbox(0,0)}})}else{var a=$('[name="message"]',i).val();$('[name="message"]',i).val(""),$(".shoutbox_error",i).html(""),proboards.ajax({url:proboards.data("shoutbox_add_url"),data:{message:a,guest_name:$('input[name="guest_name"]',i).val()},dataType:"json",success:function(e){$(".shoutbox_amount",i).html("0"),t.update_shoutbox(1,1)},error:function(e){$(".shoutbox_amount",i).html(a.length),$('[name="message"]',i).val(a),proboards.error(e.error),t.update_shoutbox(1,1)}})}return!1}$(".shoutbox_error",i).html("You must enter text")},edit_shoutbox:function(e){var t=$(e).parents(".shoutbox-post").attr("class").match(/shoutbox-post-(\d+)/)[1],i=$(e).parents(".shoutbox");$(".shoutbox_edit_button",i).parents(".shoutbox-post").removeClass("state-selected"),$("form",i).removeClass(),$(e).parents(".shoutbox-post").addClass("state-selected"),$(".shoutbox_cancel_button",i).show(),$('[name="message"]',i).unbind(),$('[name="message"]',i).removeClass("gray"),proboards.ajax({url:proboards.data("shoutbox_message_url"),data:{id:t},dataType:"json",success:function(e){$('[name="message"]',i).val(e.message);var t=$('[name="message"]',i).val();$(".shoutbox_amount",i).html(t.length)}}),$("form",i).addClass(t)},cancel_shout:function(){var e=$(".shoutbox");$(".shoutbox_edit_button",e).parents(".shoutbox-post").removeClass("state-selected"),$('[name="message"]',e).val(""),$(".shoutbox_amount",e).html("0"),$("form",e).removeClass(),$(".shoutbox_cancel_button",e).hide()},delete_shoutbox:function(e){var t=this;proboards.ajax({url:proboards.data("shoutbox_remove_url"),data:{id:$(e).parents(".shoutbox-post").attr("class").match(/shoutbox-post-(\d+)/)[1]},dataType:"json",success:function(e){t.update_shoutbox(0,0)}})},update_shoutbox:function(e,t){var i=this,a=0;e&&$(".shoutbox_messages .shoutbox-post").length&&(a=$(".shoutbox_messages .shoutbox-post:"+(i.newestAt?"first":"last")+"-child").attr("class").match(/shoutbox-post-(\d+)/)[1]),proboards.ajax({url:proboards.data("shoutbox_update_url"),cache:!1,type:"GET",data:{latest_id:a},dataType:"json",ignorePending:!0,success:function(e){var t=$(".shoutbox_messages");if(t.length){var a=$.trim(e.shoutbox_post);if(a)if(i.mark_scrolled(),"incremental"==e.type){var n=0;$("> .shoutbox-post",t).each(function(){n+=$(this).outerHeight(!0)});for(var o=0;o<e.new_ids.length;o++)$(".shoutbox-post-"+e.new_ids[o],t).remove();var r=$(a);t[i.newestAt?"prepend":"append"](r);var s=0;$("> .shoutbox-post",t).each(function(){s+=$(this).outerHeight(!0)}),i.height_adjustment=s-n,i.set_post_events(r)}else t.html(a),i.set_post_events();this.lastUpdateTime=1e3*e.last_updated,i.reload_timer(this.lastUpdateTime),i.keep_scrolled(i.newestAt,SHOUTBOX_SCROLL_CONTEXTUAL),$(".shoutbox").each(function(){var e=this;if(void 0!=$("form",e).attr("class")){var t=$("form",e).attr("class");$(".shoutbox-post-"+t,e).addClass("state-selected"),$("form",e).addClass(t)}})}}})},reload_timer:function(e){var t=this;this.currentTime=(new Date).getTime();var i=this.currentTime-(e+this.diff);i<=3e5?(i<=0?this.refreshFrequency=1e3:i<=1e3?this.refreshFrequency=2e3:i<=3e3?this.refreshFrequency=3e3:i<=6e3?this.refreshFrequency=4e3:i<=1e4?this.refreshFrequency=5e3:i<=15e3?this.refreshFrequency=6e3:i<=21e3?this.refreshFrequency=7e3:i<=28e3?this.refreshFrequency=8e3:i<=36e3?this.refreshFrequency=9e3:i<=45e3?this.refreshFrequency=1e4:i<=55e3?this.refreshFrequency=11e3:i<=66e3?this.refreshFrequency=12e3:i<=78e3?this.refreshFrequency=13e3:i<=91e3?this.refreshFrequency=14e3:i<=105e3?this.refreshFrequency=15e3:i<=12e4?this.refreshFrequency=16e3:i<=136e3?this.refreshFrequency=17e3:i<=153e3?this.refreshFrequency=18e3:i<=171e3?this.refreshFrequency=19e3:i<=19e4?this.refreshFrequency=2e4:i<=21e4?this.refreshFrequency=21e3:i<=231e3?this.refreshFrequency=22e3:i<=253e3?this.refreshFrequency=23e3:i<=276e3?this.refreshFrequency=24e3:this.refreshFrequency=25e3,clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.update_shoutbox(1,0)},this.refreshFrequency),$(".shoutbox_refresh_button").hasClass("active")||($(".shoutbox_refresh_button").addClass("active"),$(".shoutbox_refresh_button").attr("title","Auto-Updating"))):(clearTimeout(this.timeout),$(".shoutbox_refresh_button").removeClass("active"),$(".shoutbox_refresh_button").attr("title","Click to Update"))},mark_scrolled:function(){$(".shoutbox_messages").each(function(){var e=$(this),t=this.offsetHeight+this.scrollTop>=this.scrollHeight,i=0==e.scrollTop(),a=!1;i&&(a="top"),t&&(a="bottom"),e.data("override",a)})},keep_scrolled:function(e,t){var i=this;$(".shoutbox_messages").each(function(){var a=$(this),n=this.offsetHeight+this.scrollTop>=this.scrollHeight,o=0==a.scrollTop(),r=e?"top":"bottom";t==SHOUTBOX_SCROLL_OVERRIDE||t==SHOUTBOX_SCROLL_CONTEXTUAL&&a.data("override")===r?"bottom"==r?(a.scrollTop(this.scrollHeight),a.animate({scrollTop:this.scrollHeight})):a.scrollTop(0):n?"bottom"==r&&(a.scrollTop(this.scrollHeight),a.animate({scrollTop:this.scrollHeight})):o?"top"==r&&a.scrollTop(0):"top"==r&&(a.scrollTop(a.scrollTop()+i.height_adjustment),i.height_adjustment=0)})}}}),"undefined"==typeof Keys)var Keys={tab:9,enter:13};proboards.tabHandler=function(e){this.init(e)},$.extend(proboards.tabHandler.prototype,{init:function(e){this.options=$.extend({container:"div.item",tabs:[]},e);var t=this;t.parent=null,t.tab=null;var i=!1;$(document).keypress(function(e){i&&e.preventDefault()}),$(document).keyup(function(e){i&&(i=!1)}),$(document).keydown(function(e){if(e.which==Keys.tab||e.which==Keys.enter){var a=e.shiftKey,n=$(e.target),o=n.parents(t.options.container);if(n.length){if(o.length){if(!t.parent)return;t.parent=o}var r=t._getTabIndex(n);if(r==-1)return void(t.currentRow=0);t.tab=r;var s=t.options.tabs[r];e.preventDefault(),i=!0,t._tabOut(s,n,a);a?t.prev():t.next()}}});for(var a=[],n=0;n<t.options.tabs.length;++n)a.push(t._getSelector(t.options.tabs[n]));var a=a.join(",");$(a).live("click",function(e){var i=$(e.target),a=i.parents(t.options.container);if(i.length){a.length&&(t.parent=a);var n=t._getTabIndex(i);if(n!=-1){t.tab=n;var o=t.options.tabs[n];t._tabIn(o,i),e.preventDefault(),e.stopPropagation()}}})},next:function(e){"undefined"==typeof e&&(e=1);for(var t=this.tab,i=0;i<e;++i)t+1==this.options.tabs.length?(t=0,this.parent=this.parent.next()):++t;var a=this.options.tabs[t],n=this._getElement(a);return n.focus().select(),this._tabIn(a,n),this.tab=t,{tab:a,element:n}},prev:function(e){"undefined"==typeof e&&(e=1);for(var t=this.tab,i=0;i<e;++i)if(t<=0){if(t=this.options.tabs.length-1,"undefined"==typeof this.parent.prev().attr("id"))return{tab:!1,element:!1};this.parent=this.parent.prev()}else--t;var a=this.options.tabs[t],n=this._getElement(a);return n.focus().select(),this._tabIn(a,n,!0),this.tab=t,{tab:a,element:n}},_getTabData:function(e){return this.options.tabs[this._getTabIndex(e)]},_getElement:function(e){var t=$(this._getSelector(e),this.parent);return t.length||(t=$(this._getSelector(e))),t},_tabOut:function(e,t,i){var a=i?"tabOutReverse":"tabOut";"undefined"!=typeof e.tabOutAll&&e.tabOutAll.call(this,t),"undefined"!=typeof e[a]&&e[a].call(this,t)},_tabIn:function(e,t,i){var a=i?"tabInReverse":"tabIn";"undefined"!=typeof e.tabInAll&&e.tabInAll.call(this,t),"undefined"!=typeof e[a]&&e[a].call(this,t)},_getTabIndex:function(e){for(var t=0;t<this.options.tabs.length;++t){var i=this._getSelector(this.options.tabs[t]);if(e.is(i))return t}return-1},_getSelector:function(e){var t=[];return"undefined"!=typeof e.id&&t.push("#"+e.id),"undefined"!=typeof e["class"]&&t.push("."+e["class"]),"undefined"!=typeof e.name&&t.push('[name="'+e.name+'"]'),t.join(",")}}),proboards.thread={select:function(e,t,i){var a=$.extend({},i),n=Math.floor(1e6*Math.random()),o=proboards.dialog("thread_listing",{title:"Select Thread",html:'<div id="list_manager"><div class="container threads">\t<div class="control-bar ui-helper-clearfix"></div>\t<div class="content cap-bottom">\t\t<table class="list">\t\t\t<thead>\t\t\t\t<tr class="head">\t\t\t\t\t<th class="radio_button"></th>\t\t\t\t\t<th class="icon"></th>\t\t\t\t\t<th class="not_main">Subject</th>\t\t\t\t\t<th class="created-by">Created By</th>\t\t\t\t\t<th class="replies">Replies</th>\t\t\t\t\t<th class="views">Views</th>\t\t\t\t\t<th class="latest last">Last Post</th>\t\t\t\t</tr>\t\t\t</thead>\t\t\t<tbody class="lm-content-'+n+'"></tbody>\t\t</table>\t</div></div></div>',width:800,height:400,buttons:{Select:function(){var e=$('input[name="thread_id"]:checked',this).val();void 0!=e&&($(this).dialog("close"),t(e,$("#remember-thread").prop("checked")))}}});proboards.ajax({url:proboards.route("admin_thread_list"),data:{board_id:e,list_manager_id:n},dataType:"json",success:function(e){$(".lm-content-"+n,o).html(e.results),$(".control-bar",o).html('<div class="ui-search hide lm-search-'+n+'"></div>'+e.pagination),proboards.data("page_cache",".lm-content-"+n),new listManager("threads",{total:e.thread_count,limit:e.limit,page:e.page,pageCache:".lm-content-"+n,data:{board_id:e.board_id},id:n,hash:!1},{route_name:"admin_thread_list",float_control_bar:!1}),void 0!==a.remember&&o.nextAll(".ui-dialog-buttonpane").prepend('<span class="button-text"><input id="remember-thread" type="checkbox" '+(a.remember?"checked ":"")+'/><label for="remember-thread">&nbsp;Remember my choice</label></span>')}})}},$.extend(proboards,{time:{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],createDate:function(e,t,i){var a=0,n=0,o=0,r=0,s=0,l="",d=proboards.data("locale_settings"),c=d.input_date_format,u=new RegExp(d.input_date_regex),p=e.match(u);if(p){var h=c.replace(/[^dmY]/g,"").split("");for(p.shift();p.length;){var f=parseInt(p.shift(),10),m=h.shift();switch(m){case"d":o=f;break;case"m":n=f-1;break;case"Y":a=f}}if(!(!a||n<0||n>11||!o||o>31)&&/(?:^((?:0?[1-9])|(?:1[0-2])):([0-5][0-9])\s?([ap]m)$)|(?:^((?:[01]?[0-9])|(?:20|21|22|23)):([0-5][0-9])$)/i.test(t))return""==RegExp.$3?(r=parseInt(RegExp.$4,10),s=parseInt(RegExp.$5,10)):(r=parseInt(RegExp.$1,10),s=parseInt(RegExp.$2,10),l=RegExp.$3),"pm"==l.toLowerCase()&&12!=r?r+=12:"am"==l.toLowerCase()&&12==r&&(r=0),null!=i&&1==i.utc?new Date(Date.UTC(a,n,o,r,s)):new Date(a,n,o,r,s)}},dateToUTCTimestamp:function(e){var t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return t/1e3},dateToUTCString:function(e){for(var t=e.getUTCFullYear(),i=e.getUTCMonth()+1,a=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),r=[i,a,n,o],s=0;s<r.length;s++)1==r[s].toString().length&&(r[s]="0"+r[s]);return t+"-"+r[0]+"-"+r[1]+" "+r[2]+":"+r[3]+":00"},dateToString:function(e,t){t||(t={});var i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),o=e.getHours(),r=e.getMinutes(),s="",l="";t.military||(s=o<12?" AM":" PM",0==o?o=12:o>12&&(o-=12));for(var d=[a,n,o,r],c=0;c<d.length;c++)1==d[c].toString().length&&(d[c]="0"+d[c]);return l=t.dateFormat||"%Y-%m-%d",l=l.replace("%Y",i).replace("%m",d[0]).replace("%d",d[1]),{date:l,time:d[2]+":"+d[3]+s,time_no_pad:o+":"+d[3]+s}},genFormInput:function(e,t,i){0==$('input[name="'+t+'"]').length?$(e).append('<input type="hidden" name="'+t+'" value="'+i+'" />'):$('input[name="'+t+'"]').val(i)},convertToUTCBeforeSubmit:function(e){var t=this,i=$(e.dateSelector),a=$(e.timeSelector),n=!e.mobile&&i.is(".date");if(i.val()){if(n){var o=i.datepicker("getDate");o&&a.length&&o.setSeconds(a.timepicker("getTime"))}else var o=t.createDate(i.val(),a.val());if(o){var r=o.getTime()/1e3;t.genFormInput(e.formSelector,e.formInputName,r)}}},insertTimeIntoInputs:function(e){var t=this,i=$(e.dateSelector),a=$(e.timeSelector),n=!e.mobile&&i.is(".date");if(n&&!i.data("datepicker"))return setTimeout(function(){t.insertTimeIntoInputs(e)},250);if(i.val()&&a.val()){var o=proboards.data("locale_settings"),r=24==o.input_time_format;if(e=$.extend({mobile:!1,utc:!0},e),n)var s=t._createDateFromInputs({datepickerElem:i,timepickerElem:a,utc:e.utc});else var s=t.createDate(i.val(),a.val(),{utc:e.utc});if(s){var l=t.dateToString(s,{dateFormat:o.input_date_format,military:r});i.val(l.date);var d=r?l.time:l.time_no_pad;a.val(d),i.trigger("localeconvert")}}},daysInMonth:function(e,t){t=$.extend({utc:!1},t);var i=t.utc?e.getUTCFullYear():e.getFullYear(),a=t.utc?e.getUTCMonth():e.getMonth(),n=new Date(i,a+1,0);return t.utc?n.getUTCDate():n.getDate()},getMonthName:function(e,t){t=$.extend({utc:!1},t);var i=t.utc?e.getUTCMonth():e.getMonth();return this.monthNames[i]},_createDateFromInputs:function(e){e=$.extend({datepickerElem:null,timepickerElem:null,isUTC:!0},e);var t=$(e.datepickerElem),i=$(e.timepickerElem),a=t.datepicker("getDate");return i.length&&a.setSeconds(i.timepicker("getTime")),e.isUTC&&(a=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()))),a}}});var pb={data:function(e,t){return proboards.data(e,t)},item:function(e,t,i,a){return proboards.item(e,t,i,a)},size:function(e){return proboards.size(e)},loading:function(e,t){return proboards.loading(e,t)},help_icon:function(e){return proboards.help_icon(e)},unsaved_changes:function(){return proboards.unsaved_changes>0},active_ajax_calls:function(){return proboards.active_ajax_calls},cookie:function(e){return{get:function(){return proboards.cookie(e)},set:function(t,i){return proboards.cookie(e,t,i)}}},window:{dialog:function(e,t){return proboards.dialog(e,t)},confirm:function(e,t,i){return i=$.extend({},i),proboards.confirm(e,t,i)},alert:function(e,t,i){return proboards.alert(e,t,i)},select_dialog:function(e){return proboards.select_dialog(e)},image_preview:function(e){return proboards.image_preview(e)},error:function(e){return proboards.error(e)}},image:{is_valid_url:function(e){return proboards.is_valid_image_url(e)},preload:function(e){return proboards.preload(e)}},number:{commify:function(e){return proboards.commify(e)},add_commified_numbers:function(e){return proboards.add_commified_numbers(e)}},text:{escape_html:function(e){return proboards.escape_html(e)},nl2br:function(e){return proboards.nl2br(e)},nbsp:function(e){return proboards.nbsp(e)},mono:function(e){return proboards.mono(e)},capitalize:function(e){return proboards.capitalize(e)},validate_unicode:function(e){return proboards.validateUnicode(e)}},board:{select:function(e,t){return e=$.extend({},e),proboards.board.select(t,e)}},thread:{select:function(e,t,i){return proboards.thread.select(e,t,i)}},member:{select:function(e,t){return proboards.member.select_dialog($.extend({},e,{onComplete:t}))}},date:{create_date:function(e,t,i){return proboards.time.createDate(e,t,i)},date_to_UTC_timestamp:function(e){return proboards.time.dateToUTCTimestamp(e)},date_to_UTC_string:function(e){return proboards.time.dateToUTCString(e)},date_to_string:function(e,t){return proboards.time.dateToString(e,t)}},form:{confirm_ignore_changes:function(e){return proboards.form.confirm_ignore_changes(e)},consolidate_params:function(e){return proboards.consolidateParams(e)},gen_option_range:function(e,t,i,a){return("undefined"==typeof i||i<1)&&(i=1),proboards.form.genOptionRange(e,t,i,a)},gen_verify_box:function(e,t,i,a,n,o,r,s){return proboards.form.gen_verify_box(e,t,i,a,n,o,r,s)}},events:{on:function(e,t){return proboards.on(e,t)},one:function(e,t){return proboards.one(e,t)}},list_manager:function(e){return{get_selection:function(){return proboards.listManagers[e].get_selection()},select_item:function(t){return proboards.listManagers[e].select_item(t)},unselect_item:function(t){return proboards.listManagers[e].unselect_item(t)},select_items:function(t){return proboards.listManagers[e].select_items(t)},unselect_items:function(t){return proboards.listManagers[e].unselect_items(t)}}},plugin:{key_types:function(){return proboards.plugin.key_type},status_codes:function(){return proboards.plugin.status},get:function(e){return proboards.plugin.get(e)},key:function(e){return{type:function(){return proboards.plugin.key(e).type},get:function(t){return proboards.plugin.key(e).get(t)},set:function(t){return t=$.extend({},t,{set:1}),proboards.plugin.key(e).set_new(t)},set_on:function(t,i,a){return proboards.plugin.key(e).set_on(t,i,a)},append:function(t){return t=$.extend({},t,{append:1}),proboards.plugin.key(e).set_new(t)},prepend:function(t){return t=$.extend({},t,{prepend:1}),proboards.plugin.key(e).set_new(t)},increment:function(t){return t=$.extend({},t,{increment:1}),proboards.plugin.key(e).set_new(t)},decrement:function(t){return t=$.extend({},t,{decrement:1}),proboards.plugin.key(e).set_new(t)},push:function(t){return t=$.extend({},t,{push:1}),proboards.plugin.key(e).set_new(t)},pop:function(t){return t=$.extend({},t,{pop:1}),proboards.plugin.key(e).set_new(t)},shift:function(t){return t=$.extend({},t,{shift:1}),proboards.plugin.key(e).set_new(t)},unshift:function(t){return t=$.extend({},t,{unshift:1}),proboards.plugin.key(e).set_new(t)},can_read:function(t){return proboards.plugin.key(e).can_read(t)},can_write:function(t){return proboards.plugin.key(e).can_write(t)}}}}};!function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var n=i(1),o=a(n),r=i(75),s=a(r);$(function(){(0,o["default"])({isGuest:!proboards.data("user").is_logged_in}),(0,s["default"])()})},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){function t(){for(var e=97,t=26,i=15,a="";i--;)a+=String.fromCharCode(Math.floor(Math.random()*t)+e);return a}function i(){n()&&(a(),u["default"].init(),"undefined"==typeof blockAdBlock?p():blockAdBlock.on(!0,p))}function a(){var e=new Image;e.src=l.desktopPopupImage}function n(){return window.runAntiAdBlock&&!o()}function o(){var e=r["default"].get(J);if(!e)return!1;var t=new Date(e),i=isNaN(t.getTime());if(i)return!1;var a=new Date,n=a>t;if(n)return!1;var o=t<c();return o}function c(){var e=new Date,t=new Date;return t.setHours(e.getHours()+K),t}function p(){$(window).on("scroll.AntiAdBlock",function(e){if(null===Z)Z=window.scrollY;else{var t=Math.abs(window.scrollY-Z)>=Q;t&&($(window).off(".AntiAdBlock"),f())}})}function f(){X?m():q()}function m(){g();var e=v();e.appendTo(document.body),N(),j(),F()}function g(){var e=$("<style>").html("\n            #"+G+"-overlay {\n                animation: show-popup 0.5s forwards;\n                background: rgba(0, 0, 0, 0.7);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                position: fixed;\n                top: 0;\n                left: 0;\n                height: 100%;\n                width: 100%;\n                overflow: auto;\n                z-index: 9999;\n            }\n            @keyframes show-popup {\n                0% {\n                    opacity: 0;\n                }\n\n                100% {\n                    opacity: 1;\n                }\n            }\n\n            #"+G+"-overlay * {\n                box-sizing: border-box;\n            }\n\n            #"+G+"-popup-wrapper {\n                display: flex;\n                margin: 2rem;\n            }\n\n            ."+G+"-popup {\n                position: relative;\n                background: #efefef;\n                color: #52504f;\n            }\n\n            ."+G+"-popup-side {\n                display: none;\n            }\n\n            ."+G+"-popup-side img {\n                height: 100%;\n            }\n\n            @media screen and (min-width: 1200px) {\n                ."+G+"-popup-side {\n                    background: url("+l.desktopPopupImage+") no-repeat;\n                    background-size: cover;\n                    display: block;\n                    min-height: 546px;\n                    width: 465px;\n                }\n\n                ."+G+"-popup {\n                    width: 500px;\n                    z-index: 1;\n                }\n            }\n\n            @media screen and (max-width: 1199px) {\n                ."+G+"-lg-only {\n                    display: none;\n                }\n            }\n\n            ."+G+"-popup-content {\n                display: flex;\n                text-align: center;\n                flex-direction: column;\n                height: 100%;\n                padding: 2rem;\n            }\n\n            ."+G+"-popup-title {\n                font-size: 2rem;\n                margin: 1rem 0;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n\n            ."+G+"-popup-title--small {\n                font-size: 1.25rem;\n                margin: 0 0 1rem 0;\n            }\n\n            ."+G+"-header-icon {\n                display: inline-block;\n                background: url("+l.proboardsLogo+");\n                background-size: cover;\n                flex: 0 0 auto;\n                height: 30px;\n                width: 30px;\n                margin-right: 1rem;\n                border-radius: 50%;\n                border: 1px solid #ffffff;\n            }\n\n            ."+G+"-popup-main-content {\n                flex: 1 1 auto;\n            }\n\n            ."+G+"-popup-main-content--front {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n            }\n\n            ."+G+"-popup-text {\n                margin-bottom: 1rem;\n                line-height: 1.5;\n            }\n\n            ."+G+"-popup-help img {\n                max-width: 100%;\n            }\n\n            ."+G+"-button,\n            ."+G+"-button:hover,\n            ."+G+"-button:focus {\n                display: inline-block;\n                background: #ff9d47;\n                color: #fff;\n                padding: 0.5rem 2rem;\n                margin-bottom: 1rem;\n                font-size: 1rem;\n            }\n\n            ."+G+"-button--blue,\n            ."+G+"-button--blue:hover,\n            ."+G+"-button--blue:focus {\n                background: #004fa0;\n            }\n\n            ."+G+"-no-scroll {\n                overflow: hidden;\n                position: fixed;\n                width: 100%;\n            }\n\n            ."+G+"-icon-wrap {\n                display: inline-block;\n                text-align: center;\n                padding: 1rem;\n            }\n\n            @media screen and (max-width: 768px) {\n                ."+G+"-icon-wrap {\n                    width: 50%;\n                }\n            }\n\n            ."+G+"-icon-wrap:hover {\n                background-color: #ccc;\n                cursor: pointer;\n            }\n\n            ."+G+"-icon {\n                margin: 0 auto;\n                width: 64px;\n                height: 64px;\n                background-size: 100%;\n                margin-bottom: 0.5rem;\n            }\n\n            ."+G+"-back {\n                    position: absolute;\n                    top: 10px;\n                    left: 10px;\n                    font-weight: bold;\n                    font-size: 18px;\n                    cursor: pointer;\n            }\n\n            ."+G+"-back-text {\n                font-size: 0.8rem;\n            }\n\n            ."+G+"-subscribe {\n                display: flex;\n                margin-top: 30px;\n                justify-content: center;\n                align-items: center;\n            }\n\n            ."+G+"-proboards-plus {\n                display: inline-block;\n                background-size: 100%;\n                background-image: url("+l.pbPlusImage+");\n                background-position: center center;\n                flex: 0 0 32px;\n                height: 32px;\n                background-repeat: no-repeat;\n            }\n\n            ."+G+"-proboards-plus-text {\n                display: inline-block;\n                padding-left: 0.5rem;\n            }\n\n            ."+G+"-disclaimer {\n                font-size: 0.5rem;\n            }\n\n            ."+G+"-pbplus-animation {\n                width: 100%;\n                max-width: 300px;\n                align-self: center;\n            }\n\n            @media screen and (max-height: 610px) {\n                #"+G+"-overlay {\n                    align-items: flex-start;\n                }\n            }\n\n            @media screen and (max-width: 450px) {\n                #"+G+"-overlay {\n                    justify-content: flex-start;\n                }\n\n                #"+G+"-popup-wrapper {\n                    flex: 1 1 auto;\n                    margin: 1rem;\n                }\n\n                ."+G+"-popup {\n                    flex: 1 1 auto;\n                }\n\n                ."+G+"-popup-content {\n                    padding: 2rem 1rem;\n                }\n\n                ."+G+"-popup-title {\n                    font-size: 1.6rem;\n                }\n\n                ."+G+"-popup-text {\n                    font-size: 0.8rem;\n                }\n\n                ."+G+"-button {\n                    font-size: 1rem;\n                }\n\n                ."+G+"-proboards-plus-text {\n                    font-size: 0.75rem;\n                }\n            }\n        ");e.appendTo(document.body)}function v(){var e=$("<div>").attr("id",G+"-overlay"),t=$(b());te=$("<div class='"+G+"-popup'>"),X||(t.find("."+G+"-popup-main-content").append(_()),te.append(A())),te.append(t).append(k());var i=x(),a=$("<div>").attr("id",G+"-popup-wrapper").append(i).append(te),n=te.find("."+G+"-button-disable");return n.on(s.clickTouchEvents,function(){M(),u["default"].send({action:"CTA",label:"Disable"})}),e.append(a)}function b(){return"\n            <div class='"+G+"-popup-content "+G+"-main'>\n                <div class='"+G+"-popup-main-content "+G+"-popup-main-content--front'>\n                    <h1 class='"+G+"-popup-title'>\n                        <span class='"+G+"-header-icon' title='A message from ProBoards'></span>\n                        Can we talk?\n                    </h1>\n                    <p class='"+G+"-popup-text'>\n                        We work hard to provide\n                        <span style='white-space: nowrap'>the best communities.</span>\n                        <br>\n                        Please support us!\n                    </p>\n                    <div>\n                        <a href='#' class='"+G+"-button "+G+"-button-disable'>\n                            Disable Ad Blocker\n                        </a>\n                    </div>\n                </div>\n                <div class=\""+G+"-popup-text\">\n                    <a href='#' class='"+G+"-close-popup'>Sorry, I'll do it next time</a>\n                </div>\n            </div>\n        "}function _(){var e=$("\n            <p class='"+G+"-popup-text'>\n                or\n            </p>\n            <div>\n                <a href='#' class='"+G+"-button "+G+"-button--blue'>\n                    Get ProBoards+\n                </a>\n            </div>\n            <p class='"+G+"-popup-text'>\n                ProBoards+ members get no ads!\n            </p>\n        ");return e.find("."+G+"-button--blue").on(s.clickTouchEvents,function(){y(),u["default"].send({action:"CTA",label:"Get PB+"})}),e}function y(){O(),L("pbplus")}function A(){var e=E(),t=$("\n            <div class='"+G+"-popup-content "+G+"-pbplus'>\n                <h1 class='"+G+"-popup-title'>\n                    Get ProBoards+\n                </h1>\n                <img src='"+l.pbPlusAnimation+"'\n                    alt='ProBoards+ is personal Ad Free!' class='"+G+"-pbplus-animation'>\n                <br>\n                <p class='"+G+"-popup-text'>\n                    Enjoy any ProBoards forum with unlimited personal ad free!\n                </p>\n                <div>\n                    <a href='"+e+"' class='"+G+"-button "+G+"-button--blue'\n                        alt='Subscribe to ProBoards+' target='_blank'>\n                        Subscribe now!\n                    </a>\n                </div>\n            </div>\n        ");t.find("."+G+"-button").on(s.clickTouchEvents,function(e){u["default"].send({action:"Subscribe",label:"Subscribe"})});var i=D(w);return t.append(i).hide(),t}function w(){u["default"].send({action:"Back",label:"Back to Start"}),O(),L("main")}function x(){return $("<div class='"+G+"-popup-side'></div>")}function k(){var e=$("\n            <div class='"+G+"-popup-content "+G+"-choices'>\n            </div>\n        "),t=$("<div class='"+G+"-popup-main-content'></div>"),i=(0,l.getBrowserOrMobileOS)(),a=(0,l.getAdBlockers)();a.length>0?(e.append("\n                <h2 class='"+G+"-popup-title--small'>\n                    Choose your Ad Blocker\n                </h2>\n            "),a.forEach(function(e){var a=d["default"][e].logoImage,n=$("\n                    <div class='"+G+"-icon-wrap' data-blocker='"+e+"'>\n                        <div class='"+G+"-icon "+G+"-icon--"+e+"'\n                            style='background-image: url("+a+")'></div>\n                        "+d["default"][e].name+"\n                    </div>");t.append(n),n.on(s.clickTouchEvents,function(){C({adBlocker:e,browserOrMobileOS:i}),u["default"].send({action:"AdBlocker",label:e+" - "+i})})})):(t.append('<div class="'+G+'-popup-text"></div>').append((0,l.getDisableAdBlockHelpHTML)({id:G,adBlocker:"unknown"})).append(T()),u["default"].send({action:"Help",label:"Unknown AdBlocker"}));var n=a.length>0?$("\n            <div class='"+G+"-disclaimer'>\n                All logos are trademarks of their respective owners.\n            </div>\n        "):$(""),o=D(w);return e.append(t).append(n).append(o).append(P()).hide(),e}function C(e){var t=e.adBlocker,i=e.browserOrMobileOS;O(),0===te.find("."+G+"-"+t).length&&S({adBlocker:t,browserOrMobileOS:i}),L(t)}function S(e){var t=e.adBlocker,i=e.browserOrMobileOS,a=(0,l.getDisableAdBlockHelpHTML)({id:G,adBlocker:t,browserOrMobileOS:i}),n=$("\n            <div class='"+G+"-popup-content "+G+"-"+t+"'>\n                <h2 class='"+G+"-popup-title--small'>Instructions</h2>\n                "+a+"\n            </div>"),o=T(),r=D(I);n.append(o).append(r).append(P()).appendTo(te)}function T(){var e=$("<div><a href='#' class='"+G+"-button'>I've done it!</a></div>");return e.on(s.clickTouchEvents,function(e){e.preventDefault(),R(),u["default"].send({action:"Close popup",label:"Done"})}),e}function D(e){var t=$("<div class='"+G+"-back' title='Back'>&lsaquo; "+("<span class='"+G+"-back-text'>Back</span></div>"));return t.on(s.clickTouchEvents,function(){e&&"function"==typeof e&&e()}),t}function I(){u["default"].send({
action:"Back",label:"Blocker selection"}),O(),L("choices")}function E(){var e=void 0,t=void 0;return"undefined"!=typeof proboards&&proboards.data?(e=proboards.data("forum_url"),t=proboards.data("user").id):(e=h["default"].get("forum_url"),t=h["default"].get("user").id),"https://www.proboards.com/store/add_cart/proboards_plus/1/"+e+"/"+t}function P(){if(!X){var e=(E(),$("\n                    <a class='"+G+"-subscribe' href='#'>\n                        <div class='"+G+"-proboards-plus'></div>\n                        <div class='"+G+"-proboards-plus-text'>\n                            Get unlimited personal ad-free!\n                        </div>\n                    </a>\n                "));return e.on(s.clickTouchEvents,function(e){e.preventDefault(),y(),u["default"].send({action:"BTF Link",label:"Get PB+"})}),e}}function M(){O(),L("choices")}function O(){te.find("."+G+"-popup-content").hide()}function L(e){te.find("."+G+"-"+e).css({display:"flex"})}function N(){ee=window.scrollY,$(document.body).addClass(G+"-no-scroll").css("top","-"+ee+"px")}function j(){$("."+G+"-close-popup").on("click",function(e){e.preventDefault(),R(),u["default"].send({action:"Close popup",label:"Next time"})})}function R(){$("#"+G+"-overlay").remove(),z()}function z(){$(document.body).removeClass(G+"-no-scroll").removeAttr("style"),window.scrollTo(0,ee)}function F(){var e=c();r["default"].set(J,e.toUTCString(),{path:"/"})}function q(){H();var e=V();e.appendTo(document.body),U(e.height()),B(e)}function H(){var e=$("<style>").html("\n            #"+G+"-banner {\n                animation: show-banner 0.5s forwards;\n                background: #083e5d;\n                color: #fff;\n                display: flex;\n                position: fixed;\n                bottom: 0;\n                left: 0;\n                width: 100%;\n                z-index: 9999;\n                box-shadow: 0px -2px 5px 0px rgba(136,136,136,1);\n                cursor: pointer;\n            }\n\n            @keyframes show-banner {\n                0% {\n                    bottom: -25%;\n                }\n\n                100% {\n                    bottom: 0;\n                }\n            }\n\n            ."+G+"-banner-content-wrapper {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                margin: 0 auto;\n                padding: 0.5rem 1rem;\n            }\n\n            ."+G+"-banner-icon {\n                background: url("+l.proboardsLogo+");\n                background-size: cover;\n                flex: 0 0 auto;\n                height: 60px;\n                width: 60px;\n                margin-right: 1rem;\n                border-radius: 50%;\n                border: 1px solid #ffffff;\n            }\n\n            ."+G+"-banner-content {\n                flex: 1 1 auto;\n            }\n\n            ."+G+"-banner-text {\n                margin: 0.5rem 0;\n            }\n\n            ."+G+"-banner-chevron {\n                display: block;\n                background: url("+l.upChevron+");\n                width: 23px;\n                height: 14px;\n                margin-left: 25px;\n                background-position: center center;\n                background-repeat: no-repeat;\n            }\n\n            @media screen and (max-width: 1199px) {\n                ."+G+"-lg-only {\n                    display: none;\n                }\n            }\n            @media screen and (max-width: 600px) {\n                ."+G+"-sm-only {\n                    display: none;\n                }\n            }\n        ");e.appendTo(document.body)}function V(){return $("<div>").attr("id",G+"-banner").append(W())}function W(){return"\n            <div class='"+G+"-banner-content-wrapper'>\n                <div class='"+G+"-banner-icon' title='Can we talk?'></div>\n                <div class='"+G+"-banner-content'>\n                    <div class='"+G+"-banner-text'>\n                        <strong>Can we talk?</strong>\n                    </div>\n                    <div class='"+G+"-banner-text "+G+"-sm-only'>\n                        We work hard to provide the best communities\n                    </div>\n\n                </div>\n                <div>\n                    <span class='"+G+"-banner-chevron'></span>\n                </div>\n            </div>\n        "}function U(e){$("body").css({"margin-bottom":e+"px"})}function B(e){e.on("click",function(t){e.remove(),m(),u["default"].send({action:"Banner click",label:"Banner"})})}var Y=e.isGuest,K=1,J="aab",G=t(),X=Y,Q=500,Z=null,ee=0,te=null;i()}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var o=i(2),r=a(o);i(70);var s=i(71),l=i(72),d=a(l),c=i(73),u=a(c),p=i(74),h=a(p)},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){for(var t=document.cookie.split("; "),i=0;i<t.length;++i){var a=t[i].split("=");if(a[0]===e)return decodeURIComponent(a[1])}}function o(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,p["default"])({},i);a.expires&&(a.expires=r(a.expires));var n=encodeURIComponent(e)+"="+encodeURIComponent(t);return[["expires",a.expires],["path",a.path],["domain",a.domain]].map(function(e){var t=(0,c["default"])(e,2),i=t[0],a=t[1];n+=a?"; "+i+"="+a:""}),n+=a.secure?"; secure":"",document.cookie=n}function r(e){var t=e,i=e;if("never"===i){var a=18250;i=a}if((0,l["default"])(i)){var n=new Date;n.setDate(n.getDate()+i),t=n.toUTCString()}return t}Object.defineProperty(t,"__esModule",{value:!0});var s=i(3),l=a(s),d=i(22),c=a(d),u=i(64),p=a(u);t.get=n,t.set=o,t._calculateExpires=r,t["default"]={get:n,set:o}},function(e,t,i){e.exports={"default":i(4),__esModule:!0}},function(e,t,i){i(5),e.exports=i(8).Number.isInteger},function(e,t,i){var a=i(6);a(a.S,"Number",{isInteger:i(21)})},function(e,t,i){var a=i(7),n=i(8),o=i(9),r=i(11),s="prototype",l=function(e,t,i){var d,c,u,p=e&l.F,h=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,v=e&l.W,b=h?n:n[t]||(n[t]={}),_=b[s],y=h?a:f?a[t]:(a[t]||{})[s];h&&(i=t);for(d in i)c=!p&&y&&void 0!==y[d],c&&d in b||(u=c?y[d]:i[d],b[d]=h&&"function"!=typeof y[d]?i[d]:g&&c?o(u,a):v&&y[d]==u?function(e){var t=function(t,i,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,a)}return e.apply(this,arguments)};return t[s]=e[s],t}(u):m&&"function"==typeof u?o(Function.call,u):u,m&&((b.virtual||(b.virtual={}))[d]=u,e&l.R&&_&&!_[d]&&r(_,d,u)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t){var i=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(e,t,i){var a=i(10);e.exports=function(e,t,i){if(a(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,a){return e.call(t,i,a)};case 3:return function(i,a,n){return e.call(t,i,a,n)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){var a=i(12),n=i(20);e.exports=i(16)?function(e,t,i){return a.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var a=i(13),n=i(15),o=i(19),r=Object.defineProperty;t.f=i(16)?Object.defineProperty:function(e,t,i){if(a(e),t=o(t,!0),a(i),n)try{return r(e,t,i)}catch(s){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var a=i(14);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){e.exports=!i(16)&&!i(17)(function(){return 7!=Object.defineProperty(i(18)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){e.exports=!i(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,i){var a=i(14),n=i(7).document,o=a(n)&&a(n.createElement);e.exports=function(e){return o?n.createElement(e):{}}},function(e,t,i){var a=i(14);e.exports=function(e,t){if(!a(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!a(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!a(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!a(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var a=i(14),n=Math.floor;e.exports=function(e){return!a(e)&&isFinite(e)&&n(e)===e}},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=i(23),o=a(n),r=i(60),s=a(r);t["default"]=function(){function e(e,t){var i=[],a=!0,n=!1,o=void 0;try{for(var r,l=(0,s["default"])(e);!(a=(r=l.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(d){n=!0,o=d}finally{try{!a&&l["return"]&&l["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if((0,o["default"])(Object(t)))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,i){e.exports={"default":i(24),__esModule:!0}},function(e,t,i){i(25),i(56),e.exports=i(58)},function(e,t,i){i(26);for(var a=i(7),n=i(11),o=i(29),r=i(53)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var d=s[l],c=a[d],u=c&&c.prototype;u&&!u[r]&&n(u,r,d),o[d]=o.Array}},function(e,t,i){"use strict";var a=i(27),n=i(28),o=i(29),r=i(30);e.exports=i(34)(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,n(1)):"keys"==t?n(0,i):"values"==t?n(0,e[i]):n(0,[i,e[i]])},"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports={}},function(e,t,i){var a=i(31),n=i(33);e.exports=function(e){return a(n(e))}},function(e,t,i){var a=i(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){"use strict";var a=i(35),n=i(6),o=i(36),r=i(11),s=i(37),l=i(29),d=i(38),c=i(52),u=i(54),p=i(53)("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",m="keys",g="values",v=function(){return this};e.exports=function(e,t,i,b,_,y,A){d(i,t,b);var w,x,k,$=function(e){if(!h&&e in D)return D[e];switch(e){case m:return function(){return new i(this,e)};case g:return function(){return new i(this,e)}}return function(){return new i(this,e)}},C=t+" Iterator",S=_==g,T=!1,D=e.prototype,I=D[p]||D[f]||_&&D[_],E=I||$(_),P=_?S?$("entries"):E:void 0,M="Array"==t?D.entries||I:I;if(M&&(k=u(M.call(new e)),k!==Object.prototype&&k.next&&(c(k,C,!0),a||s(k,p)||r(k,p,v))),S&&I&&I.name!==g&&(T=!0,E=function(){return I.call(this)}),a&&!A||!h&&!T&&D[p]||r(D,p,E),l[t]=E,l[C]=v,_)if(w={values:S?E:$(g),keys:y?E:$(m),entries:P},A)for(x in w)x in D||o(D,x,w[x]);else n(n.P+n.F*(h||T),t,w);return w}},function(e,t){e.exports=!0},function(e,t,i){e.exports=i(11)},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){"use strict";var a=i(39),n=i(20),o=i(52),r={};i(11)(r,i(53)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=a(r,{next:n(1,i)}),o(e,t+" Iterator")}},function(e,t,i){var a=i(13),n=i(40),o=i(50),r=i(47)("IE_PROTO"),s=function(){},l="prototype",d=function(){var e,t=i(18)("iframe"),a=o.length,n="<",r=">";for(t.style.display="none",i(51).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(n+"script"+r+"document.F=Object"+n+"/script"+r),e.close(),d=e.F;a--;)delete d[l][o[a]];return d()};e.exports=Object.create||function(e,t){var i;return null!==e?(s[l]=a(e),i=new s,s[l]=null,i[r]=e):i=d(),void 0===t?i:n(i,t)}},function(e,t,i){var a=i(12),n=i(13),o=i(41);e.exports=i(16)?Object.defineProperties:function(e,t){n(e);for(var i,r=o(t),s=r.length,l=0;s>l;)a.f(e,i=r[l++],t[i]);return e}},function(e,t,i){var a=i(42),n=i(50);e.exports=Object.keys||function(e){return a(e,n)}},function(e,t,i){var a=i(37),n=i(30),o=i(43)(!1),r=i(47)("IE_PROTO");e.exports=function(e,t){var i,s=n(e),l=0,d=[];for(i in s)i!=r&&a(s,i)&&d.push(i);for(;t.length>l;)a(s,i=t[l++])&&(~o(d,i)||d.push(i));return d}},function(e,t,i){var a=i(30),n=i(44),o=i(46);e.exports=function(e){return function(t,i,r){var s,l=a(t),d=n(l.length),c=o(r,d);if(e&&i!=i){for(;d>c;)if(s=l[c++],s!=s)return!0}else for(;d>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}}},function(e,t,i){var a=i(45),n=Math.min;e.exports=function(e){return e>0?n(a(e),9007199254740991):0}},function(e,t){var i=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:i)(e)}},function(e,t,i){var a=i(45),n=Math.max,o=Math.min;e.exports=function(e,t){return e=a(e),e<0?n(e+t,0):o(e,t)}},function(e,t,i){var a=i(48)("keys"),n=i(49);e.exports=function(e){return a[e]||(a[e]=n(e))}},function(e,t,i){var a=i(7),n="__core-js_shared__",o=a[n]||(a[n]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var i=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+a).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var a=i(7).document;e.exports=a&&a.documentElement},function(e,t,i){var a=i(12).f,n=i(37),o=i(53)("toStringTag");e.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,o)&&a(e,o,{configurable:!0,value:t})}},function(e,t,i){var a=i(48)("wks"),n=i(49),o=i(7).Symbol,r="function"==typeof o,s=e.exports=function(e){return a[e]||(a[e]=r&&o[e]||(r?o:n)("Symbol."+e))};s.store=a},function(e,t,i){var a=i(37),n=i(55),o=i(47)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),a(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,i){var a=i(33);e.exports=function(e){return Object(a(e))}},function(e,t,i){"use strict";var a=i(57)(!0);i(34)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=a(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){var a=i(45),n=i(33);e.exports=function(e){return function(t,i){var o,r,s=String(n(t)),l=a(i),d=s.length;return l<0||l>=d?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===d||(r=s.charCodeAt(l+1))<56320||r>57343?e?s.charAt(l):o:e?s.slice(l,l+2):(o-55296<<10)+(r-56320)+65536)}}},function(e,t,i){var a=i(59),n=i(53)("iterator"),o=i(29);e.exports=i(8).isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||o.hasOwnProperty(a(t))}},function(e,t,i){var a=i(32),n=i(53)("toStringTag"),o="Arguments"==a(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(i){}};e.exports=function(e){var t,i,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=r(t=Object(e),n))?i:o?a(t):"Object"==(s=a(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,i){e.exports={"default":i(61),__esModule:!0}},function(e,t,i){i(25),i(56),e.exports=i(62)},function(e,t,i){var a=i(13),n=i(63);e.exports=i(8).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},function(e,t,i){var a=i(59),n=i(53)("iterator"),o=i(29);e.exports=i(8).getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||o[a(e)]}},function(e,t,i){e.exports={"default":i(65),__esModule:!0}},function(e,t,i){i(66),e.exports=i(8).Object.assign},function(e,t,i){var a=i(6);a(a.S+a.F,"Object",{assign:i(67)})},function(e,t,i){"use strict";var a=i(41),n=i(68),o=i(69),r=i(55),s=i(31),l=Object.assign;e.exports=!l||i(17)(function(){var e={},t={},i=Symbol(),a="abcdefghijklmnopqrst";return e[i]=7,a.split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=a})?function(e,t){for(var i=r(e),l=arguments.length,d=1,c=n.f,u=o.f;l>d;)for(var p,h=s(arguments[d++]),f=c?a(h).concat(c(h)):a(h),m=f.length,g=0;m>g;)u.call(h,p=f[g++])&&(i[p]=h[p]);return i}:l},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){!function(e){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var i=this,a=function(){setTimeout(function(){i._options.checkOnLoad===!0&&(i._options.debug===!0&&i._log("onload->eventCallback","A check loading is launched"),null===i._var.bait&&i._creatBait(),setTimeout(function(){i.check()},1))},1)};void 0!==e.addEventListener?e.addEventListener("load",a,!1):e.attachEvent("onload",a)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){console.log("[BlockAdBlock]["+e+"] "+t)},t.prototype.setOption=function(e,t){if(void 0!==t){var i=e;e={},e[i]=t}for(var a in e)this._options[a]=e[a],this._options.debug===!0&&this._log("setOption",'The option "'+a+'" he was assigned to "'+e[a]+'"');return this},t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,this._options.debug===!0&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,this._options.debug===!0&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(void 0===e&&(e=!0),this._options.debug===!0&&this._log("check","An audit was requested "+(e===!0?"with a":"without")+" loop"),this._var.checking===!0)return this._options.debug===!0&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,e===!0&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),this._options.debug===!0&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){var i=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(i=!0),void 0!==e.getComputedStyle){var a=e.getComputedStyle(this._var.bait,null);!a||"none"!=a.getPropertyValue("display")&&"hidden"!=a.getPropertyValue("visibility")||(i=!0)}this._options.debug===!0&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(i===!0?"positive":"negative")),t===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),i===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),t===!0&&(this._var.checking=!1)):null!==this._var.loop&&t!==!1||(this._destroyBait(),this.emitEvent(!1),t===!0&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,this._options.debug===!0&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){this._options.debug===!0&&this._log("emitEvent","An event with a "+(e===!0?"positive":"negative")+" detection was called");var t=this._var.event[e===!0?"detected":"notDetected"];for(var i in t)this._options.debug===!0&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+t.length),t.hasOwnProperty(i)&&t[i]();return this._options.resetOnEnd===!0&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],this._options.debug===!0&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[e===!0?"detected":"notDetected"].push(t),this._options.debug===!0&&this._log("on",'A type of event "'+(e===!0?"detected":"notDetected")+'" was added'),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.BlockAdBlock=t,void 0===e.blockAdBlock&&(e.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window)},function(e,t){"use strict";function i(){return"click"}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={events:{afterSearch:[],afterSearchOne:[],columnSort:[],columnSortOne:[],moreActivity:[],moreActivityOne:[],moreNotification:[],moreNotificationOne:[],pageChange:[],pageChangeOne:[],runBindForEvent:function(e,t){}},actionOnEvent:function(e,t){},singleActionOnEvent:function(e,t){}};t.clickTouchEvents=i()},function(e,t){"use strict";function i(e){var t=e.id,i=e.adBlocker,a=e.browserOrMobileOS,n=null;n=r[i]&&r[i].instructions&&r[i].instructions[a]?r[i].instructions[a]:r.unknown;var o=n.text?n.text.join("<br>")+"<br>":"",s=n.image?"<img src='"+n.image+"' alt='Unblock "+r[i].name+"'>":"";return'\n        <div class="'+t+"-popup-help  "+t+'-popup-text">\n            '+o+"\n            "+s+"\n        </div>\n    "}function a(){var e=n();return s[e]?s[e]:[]}function n(){var e=o();return e?e:window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"opera":"undefined"!=typeof InstallTrigger?"firefox":/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification)?"safari":document.documentMode?"ie":window.StyleMedia?"edge":window.chrome&&window.chrome.webstore?"chrome":"unknown"}function o(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"windowsPhone":/android/i.test(e)?"android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"ios":""}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisableAdBlockHelpHTML=i,t.getAdBlockers=a,t.getBrowserOrMobileOS=n;var r={adblock:{name:"AdBlock",logoImage:"data:image/png;base64,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",
instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/ab.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/ab.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/ab.gif"}}},adblockplus:{name:"AdBlock Plus",logoImage:"data:image/png;base64,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",instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/abp.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/abp.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/abp.gif"},ie:{image:"//storage.proboards.com/forum/images/blockers/ie/abp.gif"}}},ublock:{name:"uBlock Origin",logoImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAABGlBMVEUAAAD////////////////p0tKKFRWAAADq1NTs2NjcubmBAwP+/Pzt29vu3Nzx4uL27Oz79vb79/f16uqBAgLv3t6HDw+XLy/jxsaoUVHbt7e6dHTIkZHQoaG0aGjy5eWfPz+VKiqLFhbAgID37u6GDQ2/fn6fPj7+/f2qVVX06en8+fm2bGyAAQHMmJjixMSpU1OUKCjz5uaSJCT9+vrfv7/QoKDFiorEiYnJkpLOnZ3YsLDHj4+JEhK2bW3VqqqFCwvevLyCBATDh4edOzvmzc3Hjo6nT0/cuLj06OjatbXBgoKmTEyIEBCMGBisWVnLl5fgwcHy5OT//v7ly8vUqamyZGShQkKNGxuECAiLFxeQICCTJiaPHh7O7ACbAAAABXRSTlMAW/z/APGd+dQAAAI6SURBVHgBtM5LboNAAMBQwwDTpJ/7H7crWCHFQrIv4IdoWcej1mX7HNvHrn8ioPl7Aea/H/NBx24EyH8moPs7AeFfCSj/RkD6FwLSvxCQ/oWA9C8EpH8hIP0LAelfCPD/RoD/NwL8vxHg/40A/28E+H8jwP8bAf7fCPD/RoD/NwL8vxHg/40A/28E+H8jwP8bAf7fCPD/RoD/NwL8vxEg/qkA8U8F+P/8ep29503v19W3FzDGkP/5M85+501/48oB5n/79rHTMBREYXgxIleIRQKYHmoScDBgei+BEHrv9f1fAyGEBiSy8A34F9KcF5hvP+dkROQd4CiA+78AAxjAAAYwgAEMYAADGMAABjBAlgbkGECrfKaNAbTrhQABdOiFTgTQpBe6EEC3XuhBAL16oQ8B5PVCPwIY0AuDCGBINMMEYEQ0BQLgsnqiWCIAedGMEoAx0YRlABCMiyaamEwd4Kbka+LpklPczGwKgLl5+ZZoYXGpsLyyuhY3RyIpANy61E8qgI0iDHCbNMBt0YBKDAFUsP3rgEwywU41bBygTyuft+FuTeonrO3tJ3gc+j0ug/JBKD/k8Oj45DTZ49L7dXt2fnF5dS0fiXI3t9W7+weP121jz+vHp+eX10ylxf91zL/v+QIDX+HgSyx8jYcvMqFVLr7Mxtf5+EIjX+nkS618rZcvNvPVbr7cztf7+YEDP/HgRy78zIcfOvFTL37sxs/9+MEjP/nkR6/87JcfPvPTb378rvnT+f8bakiNSoNR9SIAAAAASUVORK5CYII=",instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/ublock.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/ublock.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/ublock.gif"}}},ghostery:{name:"Ghostery",logoImage:"data:image/jpeg;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//9k=",
instructions:{chrome:{image:"//storage.proboards.com/forum/images/blockers/chrome/ghostery.gif"},firefox:{image:"//storage.proboards.com/forum/images/blockers/firefox/ghostery.gif"},edge:{image:"//storage.proboards.com/forum/images/blockers/edge/ghostery.gif"}}},unknown:{text:["Please support us by whitelisting us in your ad blocker"]}};t["default"]=r;var s=t.browserOrMobileOSToAdBlockMap={chrome:["adblock","adblockplus","ublock","ghostery"],firefox:["adblock","adblockplus","ublock","ghostery"],edge:["adblock","adblockplus","ublock","ghostery"],ie:["adblockplus"],windowsPhone:[],android:[],ios:[],unknown:[]};t.pbPlusAnimation="//storage.proboards.com/forum/images/blockers/pbplus.gif",t.proboardsLogo="data:image/png;base64,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",
t.desktopPopupImage="//storage.proboards.com/forum/images/blockers/modal-img--desktop.png",t.pbPlusImage="data:image/png;base64,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",t.upChevron="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAOCAYAAADE84fzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkFFRkEzNzFBNzE1ODExRTc4QjEwQ0FENUEyOEY4MzczIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkFFRkEzNzFCNzE1ODExRTc4QjEwQ0FENUEyOEY4MzczIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QUVGQTM3MTg3MTU4MTFFNzhCMTBDQUQ1QTI4RjgzNzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUVGQTM3MTk3MTU4MTFFNzhCMTBDQUQ1QTI4RjgzNzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5gSkTvAAAAfUlEQVR42pyRUQ2AQAxDDwdIQAIScMI5O5wgAQlIQMLYEhYIIaRtk+Z+eu99rDOzAqZ6p+vFEnCg1e4s4J/CgimBAoYFKhgSsOCdETDg2dt7N1TAgHMDC1gwJVDAsEAFQ4IYNBH8Jzi8Qw6aCP4SBHh8H7SJ4KdgTXD0FGAARPfuUTtrQWoAAAAASUVORK5CYII="},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="popup",a={init:function(){ga("create","UA-3734504-7","auto",i)},send:function(e){var t=e.action,a=e.label,n=a?a:"",o=t;"undefined"!=typeof proboards&&proboards.analytics&&proboards.analytics.google.send({trackerName:i,eventLabel:n,eventAction:o,eventCategory:"DisableAdBlock",hitType:"event"})}};t["default"]=a},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){return"undefined"==typeof p[e]?null:p[e]}function o(e,t){var i=e;Array.isArray(i)||(i=[[i,t]]),i.forEach(function(e){var t=e[0],i=e[1];s(t)?l(t,i):p[t]=i})}function r(){return console.warn("This function is included for plugin developers to use to be able to easily see what data is currently available.  It is not intended for production use in a plugin."),p}function s(e){return f.test(e)}function l(e,t){var i=n(e);d(i)?(0,u["default"])(i,t):p[e]=t}function d(e){return e===Object(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=i(64),u=a(c),p={},h={get:n,set:o,previewData:r};t["default"]=h;var f=/proboards\.(conversation|message|post|report|thread|user)/},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(){function e(){t()}function t(){$(".js-report-ad").on(h.clickTouchEvents,function(e){e.preventDefault(),i(),P(),M()})}function i(){if(!N){var e=a();e.append(n()),z=e.hide().appendTo(document.body),u(),_(),y(),A(),E(),N=!0}}function a(){return $("<div>").attr("id","report-ad-overlay")}function n(){var e='<div class="report-ad-popup js-report-ad-popup"><h2 class="report-ad-title">Report Ad</h2><form id="report-ad-form" class="js-report-ad-form">'+('<div class="report-ad-field">'+o()+"</div>")+'<div class="report-ad-preview js-report-ad-preview"></div>'+('<div class="report-ad-field">'+s()+"</div>")+(""+d())+'<div class="report-ad-field"><label><span class="report-ad-label-text">What is wrong with the ad?</span><textarea name="reason" class="report-ad-textarea"></textarea></label></div><div><button class="js-report-ad-cancel">Cancel</button><input type="submit" value="Submit"></div></form><div>';return e}function o(){var e=p["default"].adOptions.display,t=p["default"].adOptions.values,i="",a=0;return e.forEach(function(e){var n=t[a++],o=""===n||!!window[n];o&&(i+='<option value="'+n+'">'+e+"</option>")}),'<select class="js-report-ad-select-ad" required>'+i+"</select>"}function s(){var e=p["default"].categoryOptions.display,t=p["default"].categoryOptions.values,i="",a=0;return e.forEach(function(e){var n=t[a++];i+='<option value="'+n+'">'+e+"</option>"}),'<select name="category" required>'+i+"</select>"}function d(){var e=!!window.pbrp.m;if(!e)return"";var t='<div class="report-ad-field"><fieldset><label><span class="report-ad-label-text">Are you on a cellular network?</span></label><label class="report-ad-label-text"><input type="radio" name="is_mobile_data" value="0" required>No</label><label class="report-ad-label-text"><input type="radio" name="is_mobile_data" value="1" required>Yes</label></fieldset></div>';return t}function u(){var e=$(".js-report-ad-select-ad");e.on("change",function(){var t=e.val();b(t),F=t})}function b(e){var t=$(".js-report-ad-preview");if(R(),""===e)return void t.removeAttr("style");var i=window[e].iframe,a=$(i),n=i.getAttribute("style")||"";R=function(){i.setAttribute("style",n)};var o=a.height(),r=a.width();t.css({height:o+"px",width:r+"px"});var s=t.offset(),l=s.top,d=s.left;a.css({position:"fixed",top:l+"px",left:d+"px",zIndex:1e4})}function _(){$(".js-report-ad-cancel").on(h.clickTouchEvents,O)}function y(){$(".js-report-ad-form").on("submit",function(e){e.preventDefault();var t=window[F].iframe;t.contentWindow.postMessage({type:"takeScreenshot"},"*")})}function A(){window.addEventListener("message",function(e){"screenshotDone"===e.data.type&&w({screenshot:e.data.image}).then(function(e){O(),I(),alert(e)})["catch"](alert)},!1)}function w(e){var t=e.screenshot;return x().then(function(e){return T(e,t)}).then(function(e){return e.close()}).then(function(e){return c["default"].resolve("Your ad report has been submitted. Thank you!")})["catch"](function(e){return console.error(e),c["default"].reject("We are unable to send the ad report.  Please contact our support team for assistance.")})}function x(){if(!WebSocket)return c["default"].reject(m);var e=p["default"].adReportServerSetings.host,t=p["default"].adReportServerSetings.port,i=new WebSocket("ws://"+e+":"+t);return k(i)}function k(e){for(var t=c["default"].reject(e),i=0;i<g;i++)t=t["catch"](function(e){return c["default"].resolve(e)}).then(C)["catch"](S);return t}function C(e){return e.readyState===e.OPEN?c["default"].resolve(e):c["default"].reject(e)}function S(e){return new c["default"](function(t,i){setTimeout(i.bind(null,e),v)})}function T(e,t){var i={action:"sendAdReport",data:(0,l["default"])({screenshot:t},D())};return e.send((0,r["default"])(i)),c["default"].resolve(e)}function D(){var e=$(".js-report-ad-popup"),t=e.find('[name="category"]').val(),i=e.find('[name="reason"]').val(),a=e.find('[name="is_mobile_data"]:checked'),n=a.length?e.find('[name="is_mobile_data"]:checked').val():f,o=window[F].lastRenderedBid||"";o=(0,r["default"])(o);var s=window.navigator.userAgent;return{category:t,reason:i,isMobileData:n,bid:o,userAgent:s}}function I(){$(".js-report-ad-form").get(0).reset()}function E(){var e=$("<style>").html(p["default"].styles);$(document.body).append(e)}function P(){j=window.scrollY,$(document.body).addClass("report-ad-no-scroll").css("top","-"+j+"px")}function M(){z.show(),$(".js-report-ad-select-ad").trigger("change")}function O(e){e&&e.preventDefault(),R(),L(),z.hide()}function L(){$(document.body).removeClass("report-ad-no-scroll").removeAttr("style"),window.scrollTo(0,j)}var N=!1,j=0,R=function(){},z=null,F="";return e(),{}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(76),r=a(o),s=i(64),l=a(s),d=i(78),c=a(d);t["default"]=n;var u=i(98),p=a(u),h=i(71),f=0,m="We are unable to send the ad report.  Please contact our support team for assistance.",g=8,v=250},function(e,t,i){e.exports={"default":i(77),__esModule:!0}},function(e,t,i){var a=i(8),n=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},function(e,t,i){e.exports={"default":i(79),__esModule:!0}},function(e,t,i){i(80),i(56),i(25),i(81),i(96),i(97),e.exports=i(8).Promise},function(e,t){},function(e,t,i){"use strict";var a,n,o,r,s=i(35),l=i(7),d=i(9),c=i(59),u=i(6),p=i(14),h=i(10),f=i(82),m=i(83),g=i(86),v=i(87).set,b=i(89)(),_=i(90),y=i(91),A=i(92),w="Promise",x=l.TypeError,k=l.process,$=l[w],C="process"==c(k),S=function(){},T=n=_.f,D=!!function(){try{var e=$.resolve(1),t=(e.constructor={})[i(53)("species")]=function(e){e(S,S)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(S)instanceof t}catch(a){}}(),I=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},E=function(e,t){if(!e._n){e._n=!0;var i=e._c;b(function(){for(var a=e._v,n=1==e._s,o=0,r=function(t){var i,o,r=n?t.ok:t.fail,s=t.resolve,l=t.reject,d=t.domain;try{r?(n||(2==e._h&&O(e),e._h=1),r===!0?i=a:(d&&d.enter(),i=r(a),d&&d.exit()),i===t.promise?l(x("Promise-chain cycle")):(o=I(i))?o.call(i,s,l):s(i)):l(a)}catch(c){l(c)}};i.length>o;)r(i[o++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){v.call(l,function(){var t,i,a,n=e._v,o=M(e);if(o&&(t=y(function(){C?k.emit("unhandledRejection",n,e):(i=l.onunhandledrejection)?i({promise:e,reason:n}):(a=l.console)&&a.error&&a.error("Unhandled promise rejection",n)}),e._h=C||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},M=function(e){if(1==e._h)return!1;for(var t,i=e._a||e._c,a=0;i.length>a;)if(t=i[a++],t.fail||!M(t.promise))return!1;return!0},O=function(e){v.call(l,function(){var t;C?k.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},N=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw x("Promise can't be resolved itself");(t=I(e))?b(function(){var a={_w:i,_d:!1};try{t.call(e,d(N,a,1),d(L,a,1))}catch(n){L.call(a,n)}}):(i._v=e,i._s=1,E(i,!1))}catch(a){L.call({_w:i,_d:!1},a)}}};D||($=function(e){f(this,$,w,"_h"),h(e),a.call(this);try{e(d(N,this,1),d(L,this,1))}catch(t){L.call(this,t)}},a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},a.prototype=i(93)($.prototype,{then:function(e,t){var i=T(g(this,$));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=C?k.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&E(this,!1),i.promise},"catch":function(e){return this.then(void 0,e)}}),o=function(){var e=new a;this.promise=e,this.resolve=d(N,e,1),this.reject=d(L,e,1)},_.f=T=function(e){return e===$||e===r?new o(e):n(e)}),u(u.G+u.W+u.F*!D,{Promise:$}),i(52)($,w),i(94)(w),r=i(8)[w],u(u.S+u.F*!D,w,{reject:function(e){var t=T(this),i=t.reject;return i(e),t.promise}}),u(u.S+u.F*(s||!D),w,{resolve:function(e){return A(s&&this===r?$:this,e)}}),u(u.S+u.F*!(D&&i(95)(function(e){$.all(e)["catch"](S)})),w,{all:function(e){var t=this,i=T(t),a=i.resolve,n=i.reject,o=y(function(){var i=[],o=0,r=1;m(e,!1,function(e){var s=o++,l=!1;i.push(void 0),r++,t.resolve(e).then(function(e){l||(l=!0,i[s]=e,--r||a(i))},n)}),--r||a(i)});return o.e&&n(o.v),i.promise},race:function(e){var t=this,i=T(t),a=i.reject,n=y(function(){m(e,!1,function(e){t.resolve(e).then(i.resolve,a)})});return n.e&&a(n.v),i.promise}})},function(e,t){e.exports=function(e,t,i,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,i){var a=i(9),n=i(84),o=i(85),r=i(13),s=i(44),l=i(63),d={},c={},t=e.exports=function(e,t,i,u,p){var h,f,m,g,v=p?function(){return e}:l(e),b=a(i,u,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(h=s(e.length);h>_;_++)if(g=t?b(r(f=e[_])[0],f[1]):b(e[_]),g===d||g===c)return g}else for(m=v.call(e);!(f=m.next()).done;)if(g=n(m,b,f.value,t),g===d||g===c)return g};t.BREAK=d,t.RETURN=c},function(e,t,i){var a=i(13);e.exports=function(e,t,i,n){try{return n?t(a(i)[0],i[1]):t(i)}catch(o){var r=e["return"];throw void 0!==r&&a(r.call(e)),o}}},function(e,t,i){var a=i(29),n=i(53)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[n]===e)}},function(e,t,i){var a=i(13),n=i(10),o=i(53)("species");e.exports=function(e,t){var i,r=a(e).constructor;return void 0===r||void 0==(i=a(r)[o])?t:n(i)}},function(e,t,i){var a,n,o,r=i(9),s=i(88),l=i(51),d=i(18),c=i(7),u=c.process,p=c.setImmediate,h=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,g=0,v={},b="onreadystatechange",_=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},y=function(e){_.call(e.data)};p&&h||(p=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},a(g),g},h=function(e){delete v[e]},"process"==i(32)(u)?a=function(e){u.nextTick(r(_,e,1))}:m&&m.now?a=function(e){m.now(r(_,e,1))}:f?(n=new f,o=n.port2,n.port1.onmessage=y,a=r(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(a=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):a=b in d("script")?function(e){l.appendChild(d("script"))[b]=function(){l.removeChild(this),_.call(e)}}:function(e){setTimeout(r(_,e,1),0)}),e.exports={set:p,clear:h}},function(e,t){e.exports=function(e,t,i){var a=void 0===i;switch(t.length){case 0:return a?e():e.call(i);case 1:return a?e(t[0]):e.call(i,t[0]);case 2:return a?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){var a=i(7),n=i(87).set,o=a.MutationObserver||a.WebKitMutationObserver,r=a.process,s=a.Promise,l="process"==i(32)(r);e.exports=function(){var e,t,i,d=function(){var a,n;for(l&&(a=r.domain)&&a.exit();e;){n=e.fn,e=e.next;try{n()}catch(o){throw e?i():t=void 0,o}}t=void 0,a&&a.enter()};if(l)i=function(){r.nextTick(d)};else if(o){var c=!0,u=document.createTextNode("");new o(d).observe(u,{characterData:!0}),i=function(){u.data=c=!c}}else if(s&&s.resolve){var p=s.resolve();i=function(){p.then(d)}}else i=function(){n.call(a,d)};return function(a){var n={fn:a,next:void 0};t&&(t.next=n),e||(e=n,i()),t=n}}},function(e,t,i){"use strict";function a(e){var t,i;this.promise=new e(function(e,a){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=a}),this.resolve=n(t),this.reject=n(i)}var n=i(10);e.exports.f=function(e){return new a(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,i){var a=i(13),n=i(14),o=i(90);e.exports=function(e,t){if(a(e),n(t)&&t.constructor===e)return t;var i=o.f(e),r=i.resolve;return r(t),i.promise}},function(e,t,i){var a=i(11);e.exports=function(e,t,i){for(var n in t)i&&e[n]?e[n]=t[n]:a(e,n,t[n]);return e}},function(e,t,i){"use strict";var a=i(7),n=i(8),o=i(12),r=i(16),s=i(53)("species");e.exports=function(e){var t="function"==typeof n[e]?n[e]:a[e];r&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,i){var a=i(53)("iterator"),n=!1;try{var o=[7][a]();o["return"]=function(){n=!0},Array.from(o,function(){throw 2})}catch(r){}e.exports=function(e,t){if(!t&&!n)return!1;var i=!1;try{var o=[7],r=o[a]();r.next=function(){return{done:i=!0}},o[a]=function(){return r},e(o)}catch(s){}return i}},function(e,t,i){"use strict";var a=i(6),n=i(8),o=i(7),r=i(86),s=i(92);a(a.P+a.R,"Promise",{"finally":function(e){var t=r(this,n.Promise||o.Promise),i="function"==typeof e;return this.then(i?function(i){return s(t,e()).then(function(){return i})}:e,i?function(i){return s(t,e()).then(function(){throw i})}:e)}})},function(e,t,i){"use strict";var a=i(6),n=i(90),o=i(91);a(a.S,"Promise",{"try":function(e){var t=n.f(this),i=o(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},function(e,t,i){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={display:["Select Ad","top ad","bottom ad 1","bottom ad 2"],values:["","topAd","bottomLeftAd","bottomRightAd"]},a={display:["Select Category","adult content","annoying","audio","malicious","redirect","other"],values:["","adult_content","annoying","audio","malicious","redirect","other"]},n="\n    #report-ad-overlay {\n        animation: show-popup 0.5s forwards;\n        background: rgba(0, 0, 0, 0.7);\n        display: flex;\n        justify-content: center;\n        align-items: flex-start;\n        position: fixed;\n        top: 0;\n        left: 0;\n        height: 100%;\n        width: 100%;\n        z-index: 9999;\n    }\n    @keyframes show-popup {\n        0% {\n            opacity: 0;\n        }\n\n        100% {\n            opacity: 1;\n        }\n    }\n\n    .report-ad-popup {\n        background: white;\n        border-radius: 3px;\n        box-shadow: 0 0 15px;\n        display: flex;\n        flex-direction: column;\n        flex: 1 1 auto;\n        max-width: 800px;\n        padding: 1rem;\n        margin: 20px;\n    }\n\n    .report-ad-title {\n        color: #333;\n        font-size: 24px;\n        font-weight: bold;\n        margin-bottom: 20px;\n    }\n\n    .report-ad-preview {\n        margin-bottom: 15px;\n    }\n\n    .report-ad-field {\n        margin-bottom: 15px;\n    }\n\n    .report-ad-label-text {\n        display: block;\n        margin-bottom: 5px;\n    }\n\n    .report-ad-textarea {\n        box-sizing: border-box;\n        height: 100px;\n        width: 100%;\n    }\n\n    .report-ad-no-scroll {\n        overflow: hidden;\n        position: fixed;\n        width: 100%;\n    }\n",o="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.js",r="development"===e.env.NODE_ENV?1:0,s=r?{host:"172.18.0.1",port:5004}:{host:"prebid.proboards.com",port:5004},l={adOptions:i,categoryOptions:a,styles:n,html2canvasSrc:o,adReportServerSetings:s};t["default"]=l}).call(t,i(99))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function n(e){if(c===setTimeout)return setTimeout(e,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(u===clearTimeout)return clearTimeout(e);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function r(){m&&h&&(m=!1,h.length?f=h.concat(f):g=-1,f.length&&s())}function s(){if(!m){var e=n(r);m=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,m=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var c,u,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(e){c=i}try{u="function"==typeof clearTimeout?clearTimeout:a}catch(e){u=a}}();var h,f=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];f.push(new l(e,t)),1!==f.length||m||n(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=d,p.addListener=d,p.once=d,p.off=d,p.removeListener=d,p.removeAllListeners=d,p.emit=d,p.prependListener=d,p.prependOnceListener=d,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}}]);var standard_bookmarks=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),offset:proboards.data("lm_offset"),id:proboards.data("lm_id"),page:proboards.data("lm_page"),data:{user_id:proboards.data("lm_user_id")}})})},standard_confirm=function(){$(document).ready(function(){proboards.data("num_items")<1&&$("#action-button").button("disable").addClass("ui-state-disabled")})},standard_home=function(){$(document).ready(function(){function e(e){clearTimeout(g),m=r.hasClass("flip")?d:c;var a=p[t(e)].text;if(m.html(a),m.attr("style",""),m.height()<v){var n=v-m.height();m.attr("style","padding-top: "+n/2+"px;")}r.toggleClass("flip"),i(a)}function t(e){return"forward"==e?u==p.length-1?u=0:u++:0==u?u=p.length-1:u--,u}function i(t){f&&(h=a(t)),g=setTimeout(function(){e("forward")},h)}function a(e){return 1500+50*e.length}var n=$("#news .arrow"),o=$("#news .title"),r=$("#news .items"),s=$("#news .left"),l=$("#news .right"),d=$("#news .front"),c=$("#news .back"),u=0,p=pb.data("news_items"),h=pb.data("news_speed"),f=1==proboards.data("news_relative")?1:0,m="",g="",v=0;if("flip"==pb.data("news_animation")){var b=$("#news .item"),_=b.length;if(b.each(function(){v=$(this).outerHeight()>v?$(this).outerHeight():v}),$.set_heights(v,n,o),$("#news .hidden").hide(),d.height()<v){var y=v-d.height();d.attr("style","padding-top: "+y/2+"px;")}_>1?(l.on("click",function(){e("forward")}),s.on("click",function(){e("backward")}),r.on("mouseenter",function(){clearTimeout(g)}),r.on("mouseleave",function(){i(d.text())}),i(d.text())):$.one_entry(o,n)}else{proboards.data("news_speed")&&$("#news").slidable({autoChange:proboards.data("news_speed"),items:".items",relative:1==proboards.data("news_relative")
});var b=$("#news .itemSlide"),A=$("#news .items.panel > div"),_=b.length;v=A.outerHeight(),$.set_heights(v,n,o),b.each(function(){if($(this).outerHeight()<v){var e=v-$(this).outerHeight();$(this).css({height:v+"px","padding-top":e/2+"px"})}}),1==_&&$.one_entry(o,n)}$(".guests-online-link").on("click",function(e){e.preventDefault(),proboards.guestsOnlineDialog()})}),$.one_entry=function(e,t){t.remove(),e.css({"border-color":e.parents("#news").css("border-color"),width:"40px"})},$.set_heights=function(e,t,i){t.attr("style","height: "+e+"px; cursor: pointer;"),$("#news, #news .items.panel").attr("style","height: "+e+"px;"),i.attr("style","line-height: "+e+"px !important; height: "+e+"px")}},standard_members=function(){$(document).ready(function(){listMan=new listManager("members",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},listMan,standard_message=function(){$(document).ready(function(){proboards.data("conversation_id")&&$(".change-parts").bind("click",function(){0==$("#change-users-container").length&&($(document.body).append('<div id="change-users-container"></div>'),proboards.dialog("change-users-container",{autoOpen:!1,width:310,height:400,title:"Change Participants",buttons:{Save:function(){$("#change-users-container form").submit()}}})),proboards.ajax({url:proboards.route("change_users",{type:"change"}),data:{recipients:proboards.data("participants"),conversation_id:proboards.data("conversation_id"),page:"mess"},dataType:"html",success:function(e){$("#change-users-container").html(e),$("#change-users-container").dialog("open"),$(".user-search .user-search-input").blur()}})}),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove(),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.hotkeys.wysiwyg(),proboards.embedded.processEmbedded()})},standard_poll=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_poll_id"),type:"vote",user_search_box:!0},id:proboards.data("lm_id")})})};if($(document).ready(function(){"use strict";$.extend(proboards,{googleAnalytics:{settings:{tracking_id:"",delay:500,trackerName:"custom",events:{threadCreate:{enable:!0,eventCategory:"thread",eventAction:"create",eventLabel:"New Thread",eventValue:1},postCreate:{enable:!0,eventCategory:"post",eventAction:"create",eventLabel:"New Post",eventValue:1},userRegister:{enable:!0,eventCategory:"user",eventAction:"register",eventLabel:"New User",eventValue:1}}},init:function(){$.extend(this.settings,proboards.data("google_analytics_settings"));var e=this,t=this.settings,i=t.events;t.tracking_id&&(setTimeout(function(){e.processQueue()},t.delay),i.threadCreate.enable&&$(".form_thread_new").submit(function(){if(proboards.form.isValidForm()){var t=$.extend({hitType:"event"},i.threadCreate);e.queueEvent(t)}}),i.postCreate.enable&&$(".form_post_new, .form_post_quick_reply").submit(function(){if(proboards.form.isValidForm()){var t=$.extend({hitType:"event"},i.postCreate);e.queueEvent(t)}}),i.userRegister.enable&&$(".form_registration_register").submit(function(){if(proboards.form.isValidForm()){var t=$.extend({hitType:"event"},i.userRegister);e.queueEvent(t)}}))},passCaptcha:function(){if(!proboards.data("captcha_init")||!proboards.data("is_current_user_guest"))return!0;var e=proboards.data("captcha_init").captcha_errors;return!e},validSource:function(){if(!sessionStorage||!sessionStorage.getItem("referrer"))return!1;var e=sessionStorage.getItem("referrer"),t=/\x2F((register)(\x2Fsubmit)*|((thread|post)\x2F(create|new)\x2F\d+)|(thread\x2F\d+?.*)|(post\x2F\d+?\x2Fquote\x2F\d+?.*))$/;return t.test(e)},queueEvent:function(e){delete e.enable;try{e&&sessionStorage.setItem("event",JSON.stringify(e))}catch(t){}},sendEvent:function(e){ga(this.settings.trackerName+".send",e)},processQueue:function(){if(sessionStorage&&sessionStorage.getItem("event")){var e=JSON.parse(sessionStorage.getItem("event"));try{e&&this.passCaptcha()&&(this.validSource()&&this.sendEvent(e),sessionStorage.removeItem("event"))}catch(t){}}}}})}),$.extend(proboards,{routeMap:{home:"/",forum:"/forum",help:"/help",help_page:"/help/:type",login:"/login/:key/:user_id",login_post:"/login/:key/:user_id/1",logout:"/logout",switch_user:"/switch/user/:user_id",set_version:"/set_version",test:"/test",test_select:"/test/select",dev_css:"/dev/css",dev_css_component:"/dev/css/:component",dev_css_subcomponent:"/dev/css/:component/:subcomponent",dev_css_help:"/dev/css/help",dev_form_ajax:"/dev/form/ajax",calendar:"/calendar",calendar_event_dialog:"/calendar/event/dialog",calendar_month:"/calendar/:month/:year",calendar_day:"/calendar/:month/:day/:year",calendar_list_default:"/calendar/list",calendar_list:"/calendar/list/:month/:year",calendar_load_more_events:"/calendar/load_more_events",members:"/members",list_members:"/members/list",follow_member:"/members/follow",unfollow_member:"/members/unfollow",guests:"/members/guests",board_guests:"/members/guests/:board_id",search:"/search",search_results:"/search/results",user_search:"/search/user",get_selected_users:"/search/get_selected_users",get_full_structure:"/search/get_full_structure",get_user_groups:"/search/user_groups",get_selected_user_groups:"/search/get_selected_user_groups",shoutbox_add:"/shoutbox/add",shoutbox_remove:"/shoutbox/remove",shoutbox_edit:"/shoutbox/edit",shoutbox_update:"/shoutbox/update",shoutbox_message:"/shoutbox/get",show_group_leaders:"/user/group_leaders",change_group_members:"/user/group_members/:type",change_group_leaders:"/user/group_leaders/:type",join_group:"/user/join_group",leave_group:"/user/leave_group",user:"/user/:user_id",current_user:"/user",current_user_about:"/user/about",current_user_activity:"/user/activity",current_user_friends:"/user/friends",username:"/username/:username",show_user_activity:"/user/:user_id/activity",show_user_following:"/user/:user_id/following",show_user_groups:"/user/:user_id/groups",show_user_friends:"/user/:user_id/friends",show_user_notifications:"/user/:user_id/notifications",show_user_gift:"/user/:user_id/gift",edit_unified:"/user/:user_id/edit",edit_unified_admin:"/user/:user_id/edit/admin",update_unified:"/user/:user_id/edit/update",update_user_personal:"/user/:user_id/personal/update",update_profile_header:"/user/:user_id/personal/update_header",update_user_about:"/user/:user_id/personal/update_about",update_user_social:"/user/:user_id/social/update",update_user_privacy:"/user/:user_id/privacy/update",update_user_settings:"/user/:user_id/settings/update",update_user_admin:"/user/:user_id/admin/update",edit_user_avatar:"/user/:user_id/avatar",edit_user_badges:"/user/:user_id/badges",edit_user_social:"/user/:user_id/social",edit_user_personal:"/user/:user_id/personal",edit_user_notifications:"/user/:user_id/edit_notifications",edit_user_privacy:"/user/:user_id/privacy",edit_user_settings:"/user/:user_id/settings",edit_user_admin:"/user/:user_id/admin",edit_current_user_personal:"/user/edit/personal",edit_current_user_social:"/user/edit/social",edit_current_user_privacy:"/user/edit/privacy",edit_current_user_settings:"/user/edit/settings",edit_current_user_notifications:"/user/edit/notifications",edit_current_user_badges:"/user/edit/badges",edit_current_user_admin:"/user/edit/admin",edit_current_user_avatar:"/user/edit/avatar",update_user_notifications:"/user/:user_id/edit_notifications/update",update_user_notifications_forum:"/user/:user_id/edit_notifications/update/forum",update_user_notifications_board:"/user/:user_id/edit_notifications/update/board/:board_id/:type",update_user_notifications_add_board:"/user/:user_id/edit_notifications/add_board",update_user_notifications_remove_board:"/user/:user_id/edit_notifications/remove_board",update_user_badges:"/user/:user_id/badges/update",user_confirm:"/users/dialog/:action",delete_user:"/users/delete",ban_user:"/user/:user_id/ban",block_user_dialog:"/user/block/dialog",block_user:"/user/block",block_user_ajax:"/user/block/ajax",follow_user:"/user/follow",update_status:"/status/update",show_more_activities:"/activities/more",show_more_following:"/following/more",show_more_notifications:"/notifications/more",delete_activities:"/user/activities/delete",list_users:"/users/list",signature_preview:"/user/signature_preview",update_user_timezone:"/user/timezone/update",invite_dialog:"/user/invite/dialog",invite:"/user/invite",pbn_bar_hide:"/user/pbn_bar_hide",notification_center:"/user/notification_center",message_center:"/user/message_center",update_user_avatar:"/user/:user_id/avatar/update",save_avatar:"/user/:user_id/avatar/save",upload_avatar:"/user/:user_id/avatar/upload",avatar_link:"/user/avatar_link",forum_avatar:"/user/forum_avatars",remove_uploaded_avatar:"/user/remove_avatar",upload_cover:"/user/cover/upload",remove_uploaded_cover:"/user/cover/remove",bookmarks:"/bookmarks",link_to_oldest_new_bookmark:"/bookmarks/recent",optout:"/optout",optout_submit:"/optout/submit",board:"/board/:board_id",moderators:"/board/moderators",mark_boards:"/boards/mark/:type",board_notifications_dialog:"/board/notifications",board_notifications_save:"/board/notifications/save",thread:"/thread/:thread_id",list_threads:"/thread/list",new_thread:"/thread/new/:board_id",create_thread:"/thread/create/:board_id",edit_thread:"/thread/edit/:thread_id",update_thread:"/thread/update/:thread_id",previous_thread:"/thread/previous/:thread_id",next_thread:"/thread/next/:thread_id",delete_thread:"/threads/delete",thread_confirm:"/threads/dialog/:action",mark_threads:"/threads/mark/:type",recent_threads:"/threads/recent",participated_threads:"/threads/participated",recent_threads_created:"/user/:user_id/recent_threads",bookmark_threads:"/threads/bookmark",next_recent_post:"/threads/recent/:thread_id",thread_bump:"/threads/bump",thread_falling:"/threads/falling",thread_move_dialog:"/threads/move/dialog",thread_move:"/threads/move",thread_move_pm:"/threads/move/send_pm",thread_participants_list:"/thread/participants",thread_participants:"/thread/participants/:thread_id",threads_by_ip:"/threads/ip/:type/:id",thread_last_post:"/thread/last/:thread_id",apply_thread_label:"/threads/label/apply",permalink:"/post/:post_id",list_posts:"/post/list",new_post:"/post/new/:thread_id",create_post:"/post/create/:thread_id",edit_post:"/post/:post_id/edit",update_post:"/post/:post_id/update",recent_posts:"/user/:user_id/recent",all_recent_posts:"/posts/recent",post_like:"/post/like",likes_of_post:"/post/likes",quote_posts:"/post/:post_ids/quote/:thread_id",view_post_in_thread:"/post/:post_id/thread",delete_post:"/post/delete",post_confirm:"/posts/dialog/:action",posts_by_ip:"/posts/ip/:type/:id",posts_delete_by_ip:"/posts/ip/delete",posts_delete_by_ip_dialog:"/posts/ip/dialog",get_quoted_post:"/post/quote/:thread_id/:post_id",get_post_json_data:"/post/:post_id/json",report_post:"/report_post/:post_id",create_report:"/report_post/:post_id/create",vote_poll:"/poll/vote",open_or_close_poll:"/poll/open_close",voters:"/poll/voters",conversations_inbox:"/conversations",conversations_send_to_recipients:"/conversations/send/recipients/:recipient_ids",conversations:"/conversations/:folder",conversations_by_label:"/conversations/label/:label_id",list_conversations:"/conversation/list",conversation:"/conversation/:conversation_id",new_conversation:"/conversation/new",new_user_conversation:"/conversation/new/:recipients",create_conversation:"/conversation/create",link_to_oldest_new_message:"/conversation/recent",next_recent_message:"/conversation/recent/:conversation_id",mark_conversations:"/conversations/mark/:type",delete_conversations:"/conversations/delete",remove_conversations:"/conversations/remove",archive_all_conversations:"/conversations/archive_all",delete_all_conversations:"/conversations/delete_all",change_users:"/conversation/users/:type",list_participants:"/conversation/participants",forward_conversations:"/conversation/forward",conversation_confirm:"/conversations/dialog/:action",conversation_last_post:"/conversation/last/:conversation_id",list_labels:"/conversation/label_list",apply_conversation_label:"/conversation/label/apply",manage_conversation_labels:"/conversation/labels/manage",modify_conversation_labels:"/conversation/labels/modify",list_messages:"/message/list",new_message:"/message/new/:conversation_id",create_message:"/message/create/:conversation_id",quote_messages:"/message/:message_ids/quote/:conversation_id",view_message_in_conversation:"/message/:message_id/in/:conversation_id",get_quoted_message:"/message/quote/:conversation_id/:message_id",filter_html2bbcode:"/filter/html2bbcode",filter_bbcode2html:"/filter/bbcode2html",filter_html2bbcode2html:"/filter/html2bbcode2html",rss_public:"/rss/public",boardreader:"/boardreader/:start_id/:count",attachment:"/attachment/upload",download_attachment:"/attachment/download/:id",cleanup_attachment:"/attachment/cleanup",plugin_key_set:"/plugin/key/set",tapatalk:"/tapatalk",page:"/page/:page_id",maintenance:"/maintenance",disable_maintenance:"/maintenance/disable",badge_summary:"/badge/summary/:user_id/:badge_id",badge_edit:"/badge/edit",badge_stack_edit:"/badge/stack/edit/:badge_id",badge_action_prepare:"/badge/action/prepare/:badge_id",badge_action:"/badge/action/:badge_id",gift_dialog:"/badge/gift/dialog",gift_send:"/badge/gift/send",pb_staff_page_plugin_list:"/plugin/pb_staff_plugins",unsubscribe:"/unsubscribe/user/:user_id/key/:key",unsubscribe_save:"/unsubscribe/save",admin:"/admin",admin_settings:"/admin/settings",admin_themes:"/admin/themes",admin_structure:"/admin/structure",admin_plugins:"/admin/plugins",admin_members:"/admin/members",admin_security:"/admin/security",admin_upgrades:"/admin/upgrades",admin_marketing:"/admin/marketing",admin_board_list:"/admin/board_list",admin_thread_list:"/admin/thread_list",admin_conversation_list:"/admin/conversation_list",admin_user_searchbox_results:"/admin/user_searchbox_results",admin_user_data:"/admin/user_data",admin_image_name:"/admin/image/name",admin_image_link:"/admin/image/link",admin_image_upload:"/admin/image/upload",admin_image_reset:"/admin/image/reset",forum_settings:"/admin/settings/forum",forum_settings_login_reg:"/admin/settings/forum/login_registration",forum_settings_email_invite_key:"/admin/settings/forum/email_invite_key",forum_settings_calendar:"/admin/settings/forum/calendar",forum_settings_directory:"/admin/settings/forum/directory",forum_settings_directory_save:"/admin/settings/forum/directory/save",forum_settings_directory_delete:"/admin/settings/forum/directory/delete",forum_settings_save:"/admin/settings/forum/save",forum_settings_category:"/admin/settings/forum/category",forum_settings_category_save:"/admin/settings/forum/category/save",forum_settings_social_media:"/admin/settings/forum/social_media",forum_settings_navigation:"/admin/settings/navigation",forum_settings_navigation_save:"/admin/settings/navigation/save",forum_settings_navigation_reset:"/admin/settings/navigation/reset",news:"/admin/settings/forum/news",update_news:"/admin/settings/forum/news/update",update_news_order:"/admin/settings/forum/news/update_order",create_news:"/admin/settings/forum/news/create",delete_news:"/admin/settings/forum/news/delete",update_settings:"/admin/settings/forum/news/update_settings",shoutbox:"/admin/settings/forum/shoutbox",admin_shoutbox_update:"/admin/settings/forum/shoutbox/update",admin_shoutbox_clear:"/admin/settings/forum/shoutbox/clear",censors:"/admin/settings/censors",update_censors:"/admin/settings/censors/update",create_censors:"/admin/settings/censors/create",delete_censors:"/admin/settings/censors/delete",delete_forum:"/admin/settings/delete_forum",delete_forum_validate:"/admin/settings/delete_forum/validate",delete_forum_submit:"/admin/settings/delete_forum/delete",reserved_names:"/admin/settings/reserved_names",update_reserved_names:"/admin/settings/reserved_names/update",create_reserved_names:"/admin/settings/reserved_names/create",delete_reserved_names:"/admin/settings/reserved_names/delete",file_storage_attachments:"/admin/settings/attachments",file_storage_attachments_save:"/admin/settings/attachments/save",delete_attachments:"/admin/settings/attachments/delete",admin_download_attachment:"/admin/settings/attachment/:id",file_storage_overview:"/admin/file_storage/overview",file_storage_cancel_dialog:"/admin/file_storage/cancel_dialog",attachments_cancel_plan:"/admin/file_storage/cancel_plan",admin_theme_manager:"/admin/themes/manager",admin_theme_settings:"/admin/themes/settings",admin_theme_settings_id:"/admin/themes/:theme_id/settings",admin_theme_settings_save:"/admin/themes/:theme_id/settings/save",admin_theme_flags_save:"/admin/themes/:theme_id/flags/save",admin_theme_groups_save:"/admin/themes/:theme_id/groups/save",admin_theme_ranks_save:"/admin/themes/:theme_id/ranks/save",admin_theme_reset_groups:"/admin/themes/:theme_id/settings/reset_groups",admin_theme_reset_ranks:"/admin/themes/:theme_id/settings/reset_ranks",admin_theme_delete:"/admin/themes/:theme_id/delete",admin_theme_export:"/admin/themes/:theme_id/export",admin_theme_export_success:"/admin/themes/:theme_id/export/:item_id",admin_theme_get_thumbs:"/admin/themes/:theme_id/thumbs",admin_theme_new:"/admin/themes/new",admin_theme_create:"/admin/themes/create",admin_theme_import:"/admin/themes/import",admin_theme_install:"/admin/themes/install/:global_id",admin_theme_rate_dialog:"/admin/themes/:theme_id/rate_dialog",admin_theme_rate:"/admin/themes/:theme_id/rate",admin_theme_image_transfer:"/admin/themes/:theme_id/images/transfer/:operation",admin_theme_wizard:"/admin/themes/:theme_id/wizard",easy_themes_default:"/admin/themes/easy",easy_themes_scheme:"/admin/themes/:theme_id/easy",easy_themes_default_layout:"/admin/themes/easy/layout",easy_themes_layout:"/admin/themes/:theme_id/easy/layout",easy_themes_layout_preview:"/admin/themes/easy/layout/preview",easy_themes_layout_save:"/admin/themes/:theme_id/easy/layout/save",css_editor_default:"/admin/themes/css",css_editor:"/admin/themes/:theme_id/css",css_editor_save:"/admin/themes/:theme_id/css/save",css_editor_reset:"/admin/themes/:theme_id/css/reset",css_editor_reset_structure:"/admin/themes/:theme_id/structure/reset",css_editor_visual_default:"/admin/themes/visual",css_editor_visual:"/admin/themes/:theme_id/visual",advanced_themes_default:"/admin/themes/advanced",advanced_themes:"/admin/themes/:theme_id/advanced",edit_template:"/admin/themes/:theme_id/template/:template_id",save_template:"/admin/themes/:theme_id/save",reset_template:"/admin/themes/:theme_id/reset/:template_id",reset_all_templates:"/admin/themes/:theme_id/reset_all",transfer_template:"/admin/themes/:theme_id/transfer/:operation",category_board:"/admin/structure/category_board",category_board_board_dialog:"/admin/structure/category_board/board_dialog",category_board_cat_dialog:"/admin/structure/category_board/cat_dialog",category_board_update_board:"/admin/structure/category_board/update_board",category_board_update_category:"/admin/structure/category_board/update_cat",category_board_reorder:"/admin/structure/category_board/reorder",category_board_duplicate:"/admin/structure/category_board/duplicate",category_board_delete:"/admin/structure/category_board/delete",category_board_delete_prompt:"/admin/structure/category_board/delete_prompt",category_board_permissions:"/admin/structure/category_board/permissions",headers_footers:"/admin/structure/headers",view_headers:"/admin/structure/headers/old/:type/:id",edit_headers:"/admin/structure/headers/:type/:id",update_headers:"/admin/structure/headers/update",headers_priority:"/admin/structure/headers/priority",update_headers_priority:"/admin/structure/headers/priority/set",custom_pages:"/admin/structure/custom_pages",custom_pages_permissions_set:"/admin/structure/custom_pages/permissions/save",custom_pages_create:"/admin/structure/custom_pages/create",custom_pages_order:"/admin/structure/custom_pages/order",custom_pages_delete:"/admin/structure/custom_pages/delete",custom_page_setup:"/admin/structure/custom_pages/edit/:page_id/setup",custom_page_edit_visual:"/admin/structure/custom_pages/edit/:page_id/visual",custom_page_edit_html:"/admin/structure/custom_pages/edit/:page_id/html",custom_page_edit_html_save:"/admin/structure/custom_pages/edit/:page_id/html/save",custom_page_edit_settings:"/admin/structure/custom_pages/edit/:page_id/settings",custom_page_settings_save:"/admin/structure/custom_pages/edit/:page_id/settings/save",custom_page_setup_save:"/admin/structure/custom_pages/edit/:page_id/setup/save",custom_page_widget_add:"/admin/structure/custom_pages/edit/:page_id/widget/add",custom_page_widget_edit:"/admin/structure/custom_pages/edit/:page_id/widget/edit",custom_page_widget_delete:"/admin/structure/custom_pages/edit/:page_id/widget/delete",custom_page_widget_order:"/admin/structure/custom_pages/edit/:page_id/widget/order",custom_page_zone_settings_save:"/admin/structure/custom_pages/edit/:page_id/zone_settings/save",custom_page_widget_html_box:"/admin/structure/custom_pages/edit/:page_id/html_box_data",plugins_manage:"/admin/plugins/manage",plugins_import:"/admin/plugins/import",plugins_order:"/admin/plugins/order",plugins_delete:"/admin/plugins/delete",plugins_settings:"/admin/plugins/settings/:plugin_id",plugins_settings_save:"/admin/plugins/settings/:plugin_id/save",plugins_create:"/admin/plugins/create",plugins_key_delete:"/admin/plugins/key/delete",plugins_key_clear:"/admin/plugins/key/clear",plugins_create_dialog:"/admin/plugins/create_dialog",plugins_permissions_set:"/admin/plugins/permissions/set",plugins_disable:"/admin/plugins/disable",plugins_transfer:"/admin/plugins/settings/:plugin_id/transfer",plugins_transfer_save:"/admin/plugins/settings/:plugin_id/transfer/save",plugin_editor:"/admin/plugins/edit/:plugin_id",plugin_editor_save:"/admin/plugins/edit/:plugin_id/save",plugin_editor_development_log_save:"/admin/plugins/edit/:plugin_id/development_log/save",plugin_editor_key_create:"/admin/plugins/edit/:plugin_id/key/create",plugin_editor_key_update:"/admin/plugins/edit/:plugin_id/key/update",plugin_editor_key_delete:"/admin/plugins/edit/:plugin_id/key/delete",plugin_editor_image_upload:"/admin/plugins/edit/:plugin_id/image/upload",plugin_editor_image_name:"/admin/plugins/edit/:plugin_id/image/name",plugin_editor_image_link:"/admin/plugins/edit/:plugin_id/image/link",plugin_editor_image_reset:"/admin/plugins/edit/:plugin_id/image/reset",plugin_editor_image_reset_all:"/admin/plugins/edit/:plugin_id/image/reset/all",plugin_editor_component_save:"/admin/plugins/edit/:plugin_id/component/save",plugin_editor_settings_save:"/admin/plugins/edit/:plugin_id/settings/save",plugin_editor_get_thumbs:"/admin/plugins/edit/:plugin_id/thumbs",plugin_editor_export:"/admin/plugins/edit/:plugin_id/export",plugin_editor_export_success:"/admin/plugins/edit/:plugin_id/export/:item_id",plugins_install:"/admin/plugins/install/:global_id",plugins_rate_dialog:"/admin/plugins/:plugin_id/rate_dialog",plugins_rate:"/admin/plugins/:plugin_id/rate",plugins_install_cancel:"/admin/plugins/:plugin_id/cancel_install",groups:"/admin/members/groups",update_groups:"/admin/members/groups/update",create_groups:"/admin/members/groups/create",delete_groups:"/admin/members/groups/delete",manage_powers:"/admin/members/groups/:id/powers",update_powers:"/admin/members/groups/:id/update_powers",update_order_groups:"/admin/members/groups/update/order",manage_group:"/admin/members/groups/:group_id/manage",show_bans:"/admin/members/groups/:group_id/manage/show_bans",ban_from_group:"/admin/members/groups/:group_id/manage/ban",unban_from_group:"/admin/members/groups/:group_id/manage/unban",pending_group:"/admin/members/groups/:group_id/pending",pending_approve:"/admin/members/groups/:group_id/pending/approve",pending_reject:"/admin/members/groups/:group_id/pending/reject",ranks:"/admin/members/ranks",update_ranks:"/admin/members/ranks/update",create_ranks:"/admin/members/ranks/create",delete_ranks:"/admin/members/ranks/delete",custom_fields:"/admin/members/fields",create_field:"/admin/members/fields/create",update_field:"/admin/members/fields/update",update_fields_order:"/admin/members/fields/update_order",delete_field:"/admin/members/fields/delete",custom_field_dialog:"/admin/members/fields/dialog",custom_field_opts:"/admin/members/fields/options",forum_avatars:"/admin/members/avatars",add_forum_avatar:"/admin/members/avatars/add",delete_forum_avatar:"/admin/members/avatars/delete",order_forum_avatars:"/admin/members/avatars/order",update_default_avatar:"/admin/members/avatars/update_default",email_members:"/admin/members/email",email_send:"/admin/members/email/send",email_success:"/admin/members/email/success",pending_requests:"/admin/members/pending",update_reg_settings:"/admin/members/pending/update",accept_request:"/admin/members/pending/accept",decline_request:"/admin/members/pending/reject",security_log:"/admin/security/log",security_log_type:"/admin/security/log/:view",security_logs_by_ip:"/admin/security/log/ip/:type/:id",security_log_list:"/admin/security/log/list",member_ban:"/admin/security/ban_members",create_member_ban:"/admin/security/ban_members/create",update_member_ban:"/admin/security/ban_members/update",delete_member_ban:"/admin/security/ban_members/delete",admin_forum_cleanup:"/admin/security/forum_cleanup",admin_forum_cleanup_search:"/admin/security/forum_cleanup/search",admin_forum_cleanup_delete:"/admin/security/forum_cleanup/delete",reported_posts:"/admin/security/reported_posts",report_archive:"/admin/security/report_archive",list_reports:"/admin/security/reported_posts/list",reported_post:"/admin/security/reported_post/:post_id",edit_report_discussion:"/admin/security/reported_post/discussion/edit",update_report_discussion:"/admin/security/reported_post/discussion/update",delete_report_discussion:"/admin/security/reported_post/discussion/delete",submit_report_discussion:"/admin/security/reported_post/submit",resolve_report:"/admin/security/reported_post/resolve",delete_report:"/admin/security/reported_posts/delete",more_reasons:"/admin/security/reported_post/reasons",more_discussions:"/admin/security/reported_post/discussions",mark_reports:"/reports/mark/:type",move_post:"/admin/move_posts",move_reported_post:"/admin/move_reported_post",move_post_process:"/admin/move_posts_process",move_post_list:"/admin/move_posts/list",change_forum_url:"/admin/upgrades/change_forum_url",check_forum_url_availability:"/admin/upgrades/change_forum_url/check_forum_url_availability",custom_domains:"/admin/upgrades/domains",custom_domain_check:"/admin/upgrades/domain/check",custom_domain_default_save:"/admin/upgrades/domain/save",ad_free:"/admin/upgrades/ad_free",ad_free_save:"/admin/upgrades/ad_free/save",ad_free_cancel:"/admin/upgrades/ad_free/cancel",ad_free_settings:"/admin/upgrades/ad_free/settings",ad_free_settings_save:"/admin/upgrades/ad_free/settings/save",ad_free_history:"/admin/upgrades/ad_free/history",admin_promote:"/admin/marketing/promote",admin_marketing_analytics:"/admin/marketing/analytics",admin_marketing_analytics_update:"/admin/marketing/analytics/update",admin_marketing_google_analytics:"/admin/marketing/analytics/google",admin_marketing_google_analytics_update:"/admin/marketing/analytics/google/update",admin_marketing_google_analytics_reset:"/admin/marketing/analytics/google/reset",admin_marketing_viglink:"/admin/marketing/viglink",admin_marketing_viglink_update:"/admin/marketing/viglink/update",ads_txt:"/ads.txt",admin_ads_txt_edit:"/admin/marketing/ads_txt",admin_ads_txt_save:"/admin/marketing/ads_txt/save",v6_pages:"/adminv6/forum/pages",v6_pages_create:"/adminv6/forum/pages/create",v6_pages_delete:"/adminv6/forum/pages/delete",v6_pages_manage:"/adminv6/forum/pages/manage/:page_id",v6_pages_save:"/adminv6/forum/pages/save",v6_boards:"/adminv6/forum/boards",v6_boards_category_new_or_update:"/adminv6/forum/boards/category/new-or-update",v6_boards_categories_update:"/adminv6/forum/boards/categories/update",v6_boards_boards_update:"/adminv6/forum/boards/boards/update",v6_boards_reorder:"/adminv6/forum/boards/reorder",v6_boards_get_board:"/adminv6/forum/boards/:board_id",v6_boards_new_or_update_board:"/adminv6/forum/boards/new-or-update",v6_themes_manage:"/adminv6/forum/themes/manage",v6_easy_theme_editor:"/adminv6/forum/themes/easy/:theme_id",v6_settings_login:"/adminv6/settings/login",v6_settings_registration:"/adminv6/settings/registration",v6_attachments_manage:"/adminv6/power-ups/attachments/manage",v6_attachments_delete:"/adminv6/power-ups/attachments/delete",v6_attachments_get_page:"/adminv6/power-ups/attachments/get_page",v6_media_library:"/adminv6/forum/media-library",v6_media_library_view:"/adminv6/forum/media-library/view",v6_fdn_sso:"/adminv6/fdn/sso",v6_fdn_insite:"/adminv6/fdn/insite",e_register:"/register",e_register_check_username:"/register/username",e_register_invite:"/register/:invite_key",e_register_submit:"/register/submit",e_activate:"/activate",e_activate_submit:"/activate/submit",e_request_msg_submit:"/pending/message/submit",e_resend_activation:"/activate/email/:user_id",e_change_email:"/activate/change_email/:user_id",e_change_email_submit:"/activate/change_email",e_login:"/login",e_login_submit:"/login/submit",e_forgot_pw:"/forgot",e_forgot_pw_submit:"/forgot/submit",e_reset_pw:"/reset/:key/user/:user_id",e_reset_pw_submit:"/reset/:key/user/:user_id/submit",e_sso:"/sso/:sha1/:time/:data",reset_pass:"/reset/:key",activate:"/activation",activate_forum:"/activation/:forum",store_type:"/store/:type",store_type_category:"/store/:type/:category",store_add_item:"/store/add_item",store_edit_item:"/store/edit_item",store_remove_item:"/store/remove_item",store_checkout:"/store/checkout/:type",store_purchase:"/store/purchase",store_add_cart:"/store/add_cart/:item_type/:item_id/:forum_url/:user_id",store_create_cart:"/store/create_cart/:type/:forum_url/:user_id",store_card_remove:"/store/card/remove",library:"/library/:type",library_forum:"/library/:type/:forum_id",library_item:"/library/:type/item/:item_id",library_item_forum:"/library/:type/item/:item_id/:forum_url",account_settings:"/account/settings",plans:"/plans",features:"/features",contact:"/contact"}}),"undefined"==typeof proboards)var proboards={};proboards.image_module={get_id:function(e){return $(e).attr("id").match(/^image\-module\-(.+)$/)[1]},get_data:function(e){var t=proboards.image_module.get_id(e),i=$(".name .text",e).text(),a=$(".edit-link input",e).val();return{id:t,name:i,url:a}},create:function(e,t,i){var a=$(e).clone();"undefined"==typeof i&&(i="Image"),a.attr("id","image-module-"+t),a.removeClass("new"),a.find(".name .text").text(i),a.find(".edit-name input").val(i),a.find(".default.button").text("Delete"),a.find('input[type="file"]').attr("name","image_upload["+t+"]").removeAttr("multiple"),a.find(".image").show(),a.hide(),$(e).before(a),a.show("slide"),proboards.image_module.attach.apply(a);var n=$(e).parent(),o=n.attr("class").match(/category-max-(\d+)/);return o&&n.find(".image-module:not(.new)").length>=o[1]&&n.find(".image-module.new:visible").hide("slide"),a},apply_defaults:function(e,t){for(id in e){var i=$("#image-module-"+id);if(e[id].deleted){var a=i.parent();if(i.hide("slide",void 0,void 0,function(){$(this).remove()}),a.length&&a.attr("class")){var n=a.attr("class").match(/category-max-(\d+)/);n&&a.find(".image-module:not(.new)").length-1<n[1]&&a.find(".image-module.new:hidden").show("slide")}i.addClass("deleted"),i.trigger("module.delete",{type:"default",ajaxData:t})}else{var o=""!=e[id].url?'<img src="'+e[id].url+'">':"";$(".image span",i).html(o),$(".name .text",i).text(e[id].name),i.removeClass("overridden"),i.removeClass("overridden-name"),i.removeClass("overridden-link"),$(".edit-link input, .edit-name input",i).val(""),
i.trigger("module.update",{type:"default",ajaxData:t})}}},attach:function(){var module=this;$(".link.button",module).click(function(e){e.preventDefault(),$(".buttons,.note.replace,.note.add",module).hide(),$(".edit-link,.note.link",module).show(),$(".edit-link input",module).focus()}),$(".edit-link form",module).submit(function(e){e.preventDefault();var t=$(".edit-link input",module).val();proboards.ajax({url:proboards.data("image-module-link-url"),data:{id:proboards.image_module.get_id(module),url:t,theme_id:proboards.data("theme_id")},success:function(e){if($(module).hasClass("new"))var i=proboards.image_module.create(module,e.id,e.name);var a=i||module,n=$(".image span",a).html(""),o=$("<img>").appendTo(n);o.attr("src",proboards.image_module.image_pending()),o.attr("src",e.url),$(a).addClass("overridden"),$(a).addClass("overridden-link"),$(".edit-link input",module).val(e.url),$(a).trigger("module.update",{type:"link",url:t,ajaxData:e})}}),$(".buttons,.note.replace",module).show(),$(".edit-link,.note.link",module).hide()}),$(".edit-link .back",module).click(function(e){e.preventDefault(),$(".buttons",module).show(),$(".edit-link,.note.link",module).hide(),$(module).hasClass("new")?$(".note.add",module).show():$(".note.replace",module).show()}),$(".name .edit",module).click(function(e){e.preventDefault();var t=$(".edit-name input",module).val();$(module).data("previous_name",t),$(".buttons,.note.replace,div.name,.edit-link,.note.link",module).hide(),$(".edit-name,.note.rename",module).show(),$(".edit-name input",module).focus()}),$(".edit-name form",module).submit(function(e){e.preventDefault();var t=$(".edit-name input",module).val(),i=$(module).data("previous_name");proboards.ajax({url:proboards.data("image-module-name-url"),data:{id:proboards.image_module.get_id(module),name:t,theme_id:proboards.data("theme_id")},error:function(e){$(".name .text",module).text(i),$(".edit-name input",module).val(i),proboards.error(e.error)},success:function(e){$(module).trigger("module.update",{type:"name",name:t,previous_name:i,ajaxData:e})}}),$(".name .text",module).text(t),$(module).addClass("overridden"),$(module).addClass("overridden-name"),$(".buttons,.note.replace,div.name",module).show(),$(".edit-name,.note.rename",module).hide()}),$(".edit-name .back",module).click(function(e){e.preventDefault();var t=$(module).data("previous_name");$(".edit-name input",module).val(t),$(".buttons,.note.replace,div.name",module).show(),$(".edit-name,.note.rename",module).hide()}),$(".default.button",module).click(function(e){e.preventDefault();var t="Delete"==$(this).text()?"Are you sure you wish to delete this image?":"Are you sure you wish to reset this image to default?";proboards.confirm(t,function(){var e=proboards.image_module.get_id(module);$(".image img",module).attr("src",proboards.image_module.image_pending());var t={};t.ids=e,"undefined"!=typeof proboards.data("theme_id")&&(t.theme_id=proboards.data("theme_id")),proboards.ajax({url:proboards.data("image-module-reset-url"),data:t,success:function(e){proboards.image_module.apply_defaults(e.images,e)}})})});var id=proboards.image_module.get_id(module),url=null==proboards.data("theme_id")?proboards.data("image-module-upload-url"):proboards.data("image-module-upload-url")+"/id/"+id+"/theme_id/"+proboards.data("theme_id"),errorFunction=function(e,t){$(module).hasClass("new")&&($(module).data("sending",($(module).data("sending")||0)-1),0==$(module).data("sending")&&$(".image",module).hide());var i=$(".image img",module);i.data("prev-src")?i.attr("src",i.data("prev-src")):i.remove()};$(".upload.button input",module).each(function(){var re=new RegExp(eval(proboards.data("image_regex"))),extensions=$(this).data("valid-extensions");extensions&&(re=new RegExp(".("+extensions+")$","i"));var maxFileSize=$(this).data("max-size-bytes")||proboards.data("image_size_limit");$(this).fileupload({acceptFileTypes:re,maxNumberOfFiles:1,maxFileSize:maxFileSize,add:function(e,t){$(module).hasClass("new")&&($(module).data("sending")||$(".image",module).show(),$(module).data("sending",($(module).data("sending")||0)+1));var i=$(".image img",module);if(0==i.length){var a=$(".image span",module);i=$("<img>").appendTo(a)}i.data("prev-src",i.attr("src")),i.attr("src",proboards.image_module.image_pending()),t.submit()},success:function(e){var t;$(module).hasClass("new")&&(t=proboards.image_module.create(module,e.id,e.name),$(module).data("sending",($(module).data("sending")||0)-1),0==$(module).data("sending")&&$(".image",module).hide());var i=t||module,a=$(".image span",i).html(""),n=$("<img>").appendTo(a);n.attr("src",e.url),$(".edit-link input",i).val(e.url),$(i).addClass("overridden"),$(i).addClass("overridden-link"),$(i).trigger("module.update",{url:e.url,ajaxData:e})},done:function(e,t){t&&t.result&&t.result.error&&(errorFunction.call(this,e,t),proboards.error(t.result.error))},fail:function(e,t){errorFunction.call(this,e,t);var i="Upload failed.",a=t&&$.isArray(t.files)&&t.files.length?t.files[0].error:"";if("maxFileSize"==a)i="The file exceeds the maximum size of "+$.byteSize(t.maxFileSize)+".";else if("minFileSize"==a)i="File is too small.";else if("acceptFileTypes"==a)i="Filetype not allowed.";else if("maxNumberOfFiles"==a)i="Max number of files exceeded.";else if(t&&t.result&&"string"==typeof t.result.responseText){var n=$.parseJSON(t.result.responseText);n&&n.error&&(i=n.error)}proboards.error(i)},sequentialUploads:!0,url:url,dropZone:$(module),dataType:"json"})}),$(".image a",module).click(function(e){e.preventDefault(),$(module).hasClass("overridden-link")&&proboards.image_preview($(".image img",module).attr("src"))})},image_pending:function(){return proboards.image_path()+"/loader/circle-16x16.gif"}};var scrollable_follow=function(){var e=$(".scrollable");$(window).bind("resize",function(t){var i=!1;e.each(function(){var e=void 0!=$(this).data("parent");if(e){i=!0;var t=$(this).data("placeholder");$(this).data("position",t.offset())}}),i&&$(window).trigger("scroll")}),$(window).bind("scroll",function(t){var i=this;e.each(function(){if($(this).is(":visible")&&!$(window).data("already_scrolled")){var e=void 0!=$(this).data("parent"),t=e?$(this).data("position"):$(this).offset();if($(i).scrollTop()>=t.top){if(!e){var a=$(this).clone().removeClass("scrollable").css("visibility","hidden");$(this).data("placeholder",a),$(this).data("parent",$(this).parents(".scrollable-container")),$(this).after(a);var n=$(this).width();$(this).data("position",$(this).offset()),$(this).css({width:n+"px",position:"fixed",left:t.left+"px",top:"0px","z-index":500}),$(this).data("placeholder",a)}var o=$(this).data("parent").offset().top+$(this).data("parent").height()-$(this).height();if($(i).scrollTop()>=o){if($(this).css({position:"absolute"}),$.browser.msie&&7==parseInt($.browser.version))var r={top:$(this).offset().top-$(this).position().top,left:$(this).offset().left-$(this).position().left};else{$(this).css({top:0,left:0});var r={top:$(this).offset().top,left:$(this).offset().left}}$(this).css({top:o-r.top+"px",left:t.left-r.left+"px"})}else $(this).css({position:"fixed",top:"0px",left:t.left+"px"})}else if(e){var a=$(this).data("placeholder");$(this).attr("style",""),a.before(this),a.remove(),$(this).data("placeholder",null),$(this).data("parent",null)}}})})};$(document).ready(function(){$(".scrollable").length&&scrollable_follow();var e=$(".image-module");if(e.length){var t=document.createElement("img");t.src=proboards.image_module.image_pending(),e.each(proboards.image_module.attach)}proboards.preload(proboards.data("admin_menu_gradients")),$("#color_picker_div").colorPicker({autoUpdate:!1})});var admin_home=function(){$(document).ready(function(){$("#admin-map-switcher .map_button").on("click",function(){$("#admin-map-switcher .map_button").removeClass("active"),$(this).addClass("active"),$(".map_section").hide(),$("#admin-map-"+$(this).data("section")).show()})})},admin_move_posts=function(){function e(){proboards.ajax({url:proboards.route("move_post_list"),data:{board_id:$('input[name="board_id"]:checked').val(),list_manager_id:proboards.data("lm_id")},dataType:"json",success:function(e){$(".lm-content-"+proboards.data("lm_id")).html(e.results),$("#list_manager .control-bar").html('<div class="ui-search lm-search-'+proboards.data("lm_id")+'"></div>'+e.pagination),proboards.data("page_cache",".lm-content-"+proboards.data("lm_id")),new listManager("threads",{total:e.thread_count,limit:e.limit,page:e.page,pageCache:".lm-content-"+proboards.data("lm_id"),data:{board_id:e.board_id},id:proboards.data("lm_id")},{route_name:"move_post_list",float_control_bar:!1}),n=1},error:function(e){$("#list_manager_container").hide(),proboards.alert(e.error),n=0}})}function t(){if($('input[name="send_pm"]').attr("checked")&&0==$('textarea[name="message"]').val().length)return void $('input[name="submit_move"]').attr("disabled","disabled");if("new"==i){if("undefined"!=typeof $('input[name="board_id"]:checked').val()&&""!=$('input[name="subject"]').val())return void $('input[name="submit_move"]').removeAttr("disabled")}else if("merge"==i&&"undefined"!=typeof $('input[name="board_id"]:checked').val()&&"undefined"!=typeof a&&""!=a)return void $('input[name="submit_move"]').removeAttr("disabled");$('input[name="submit_move"]').attr("disabled","disabled")}var i,a,n=0;$(document).ready(function(){$("input:checked").removeAttr("checked"),$('input[name="submit_move"]').attr("disabled","disabled"),$('input[name="merging"]').change(function(){i=$(this).val(),"new"==i?($("#new_subject").show(),$("#list_manager_container").hide()):($('input[name="board_id"]:checked').length>0&&(e(),$("#list_manager_container").show()),$("#new_subject").hide(),n&&$("#list_manager_container").show()),t()}),$(".manager").bind("pagination_returned",function(){$('input[value="'+a+'"]').attr("checked","checked")}),$('input[name="board_id"]').change(function(){$("#list_manager").show(),"merge"==$('input[name="merging"]:checked').val()&&(e(),$("#list_manager_container").show()),a="",t()}),$('input[name="subject"]').bind("keyup.subject",function(){t()}),$('input[name="thread_id"]').live("change",function(){a=$('input[name="thread_id"]:checked').val(),$('input[name="submit_move"]').removeAttr("disabled")}),$('input[name="send_pm"]').change(function(){$("#send_pm_message").toggle(),t()}),$('textarea[name="message"]').change(function(){t()}),$("#move_posts form").submit(function(e){return e.preventDefault(),e.stopPropagation(),!1}),$('input[name="submit_move"]').on("click",function(){$("#move_posts form").submit()})}),$.extend(admin_move_posts,{submit_move:function(e){var t=$("#move_posts form");t.css("visibility","hidden"),$("#move_posts").prepend('<div class="working_overlay">'+proboards.processing_icon()+"&nbsp;&nbsp;Working</div>");var i=t.serialize();i.indexOf("thread_id")==-1&&(i+="&thread_id="+a),proboards.ajax({url:proboards.route("move_post_process"),data:i,dataType:"json",success:function(e){window.location=e.redirect_url},error:function(e){proboards.alert(e.error),t.css("visibility","visible"),$(".working_overlay").remove()}})}})},admin_plugins=function(){function e(){var e=0;$(".list .row-number").each(function(){$(this).html(++e),$(this).next().find(".key-input").attr("tabindex",$(this).html())})}$(document).ready(function(){$.tabinate({tabs:$(".ui-tabMenu .tabs"),content:$(".containers"),useHash:!0}),fileStorage.pluginStoreLink()}),$(document).ready(function(){var e=function(){$("#plugins-manage .content.sortable > div:not(.ui-sortable-helper)").removeClass("even").filter(":odd").addClass("even")};$("#plugins-manage .headings .sortable").sortableList({container:$("#plugins-manage .content"),onComplete:e}),$("#plugins-manage .content.sortable").sortable({items:".item",handle:".drag-handle",placeholder:"placeholder",create:function(e,t){},update:function(e,t){var i={ids:[],order:[]},a=0,a=0;$("#plugins-manage .item").each(function(){var e="position-"+a;$(this).hasClass(e)||(i.ids.push($(this).attr("id").match(/\d+/)[0]),i.order.push(a),$(this).removeClass($(this).attr("class").match(/position-\d+/)[0]),$(this).addClass(e)),++a}),proboards.ajax({url:proboards.data("plugins_order_url"),data:i,success:function(){var e=$(".status",t.item);e.html("Saved!").addClass("saved").hide().fadeIn(),setTimeout(function(){e.fadeOut(400,function(){$(this).html("").removeClass("saved")})},2e3)}})},change:function(t,i){e()},stop:function(e,t){$("#plugins-manage .content.sortable").setEven()}});var a=0;$("#plugins-manage .item").each(function(){$(this).addClass("position-"+a++)}),$(".plugin-delete span").click(function(){var e=$(this).parent().siblings(".plugin-name").html(),a=$(this).parents(".item"),n=a.attr("id").match(/\d+/)[0],o=function(e){proboards.ajax({url:proboards.data("plugins_delete_url"),data:{ids:[n],delete_keys:e},success:function(o){if(o.refresh_page&&(proboards.loading(!0),location.reload(!0)),a.remove(),$("#plugins-manage .content.sortable").setEven(),$("#plugin-build-"+n).remove(),$("#plugins-build > .content").setEven(),e)$("#plugins-keys .list > .item").each(function(){var e=$(this);n==$(".used-by",e).data("plugin-id")&&(t(e),e.remove())});else{var r=function(e){for(var t=proboards.data("keyData"),i=0,a=t.length;i<a;i++)if(t[i].key==e)return $("#"+t[i].id)};$.each(o.keys.removed,function(){var e=r(this);t(e),e.remove()}),$.each(o.keys.unused,function(){var e=r(this);$(".delete",e).removeClass("disabled").unbind("click",i),$(".used-by",e).html("")})}}})};proboards.dialog("confirmation",{title:"Confirm",html:"Are you sure you want to delete the plugin "+e+"?<br /><br /> This will remove the plugin from your forum completely, including from the Build section.",width:370,height:200,buttons:{"Delete Plugin":function(){$(this).dialog("close"),o(0)},"Delete Plugin & Data":function(){$(this).dialog("close"),o(1)},Cancel:function(){$(this).dialog("close")}}})});var n=(proboards.data("theme_selection").length,function(e){var t=$(e).closest(".item"),i=t.attr("id").match(/\d+/)[0],a=proboards.data("plugin_permissions")[i]||{},n=t.find(".plugin-permissions input").arrayValue().length,o=t.is(".disabled");o?n="-":0===n&&(n="All"),t.find(".plugin-permissions .themes-summary").text(n),t.find(".plugin-permissions .permissions-summary").attr("class","permissions-summary level-"+(a.level||0))});$("#plugins-manage .plugin-permissions button").bind("click",function(e){e.preventDefault();var t=$(this).closest(".item"),i=t.is(".disabled"),a=$(this).siblings("input"),o=proboards.data("theme_selection"),r=a.arrayValue(),s=t.attr("id").match(/\d+/)[0];if(!r.length)for(var l=0;l<o.length;++l)r.push(o[l].value);var d=this,c=proboards.select_dialog({title:"Permissions",options:o,selected:r,id:"plugin-permissions-dialog",width:455,onComplete:function(e){e.length||i||$(".plugin-enable",t).click(),e.length==o.length&&(e=[]),a.arrayValue(e).change();var r={},l={};$("input, select","#plugin-permissions-dialog .permissions").each(function(){l[$(this).attr("name")]=$(this).val(),r[$(this).attr("name").match(/^.+?_(.+)$/)[1]]=$(this).val()}),proboards.ajax({url:proboards.data("plugins_permissions_set_url"),data:{theme_ids:e.join(","),plugin_id:s,permissions:l}});var c=proboards.data("plugin_permissions");c[s]=r,proboards.data("plugin_permissions",c),n(d)}});c.prepend(c.parent().find("button:last").prev()),c.prepend(c.parent().find("button:last").prev()),c.prepend("<span>The plugin will only be applied to the following themes:</span>");var u=proboards.data("plugin_permissions")[s]||{};c.prepend(proboards.permissions.selection({action:"[b]view[/b] this plugin",values:u}))}).each(function(){n(this)}),$("#plugins-manage .item .plugin-enable").bind("click",function(e){e.preventDefault();var t=$(this).closest(".item");if(!t.hasClass("super_disabled")){var i=t.attr("id").match(/\d+/)[0],a=t.hasClass("disabled")?0:1;proboards.ajax({url:proboards.data("plugins_disable_url"),data:{disable:a,plugin_id:i},success:function(e){t.toggleClass("disabled"),$(".plugin-permissions button",t).each(function(){n(this)})}})}}),$("#import").click(function(){var e=proboards.dialog("import-dialog",{title:"Import Plugin",modal:!0,width:600});e.html();pbFileUpload.init({enableDragAndDrop:!1},{acceptFileTypes:/\.(pbp)$/i,url:proboards.data("plugins_import_url"),maxNumberOfFiles:1,maxFileSize:proboards.data("max_plugin_size")+proboards.data("max_plugin_size_buffer")}),$("#fileupload").on("fileuploaddone",function(t,i){var a=i.result[0].redirect;$(".fileupload-buttonbar",e).hide(),e.append("<br /><p>This plugin has been successfully installed, however you might still have a few steps remaining before your plugin will function properly.  Click Finish to proceed to this plugin's settings.</p><p><br /><strong>Don't forget to turn your plugin on when you're finished!</strong><br /><br />You can turn plugins on and off on the Manage page by clicking the checkboxes.  You can also set specific themes by clicking Edit there.</p><br />"),e.dialog("option","buttons",{Finished:function(){$(this).dialog("close")}}).dialog("option","close",function(){window.location=a})})}),$("#plugins-build .content .item:odd").addClass("even")});var t=function(e){$(".row-number",e).html(""),$(e).nextAll().each(function(){var e=$(".row-number",this),t=parseInt(e.html())-1;e.html(t),$(this).toggleClass("even"),$(".key-input",this).attr("tabindex",t)})},i=function(e){e.preventDefault(),e.stopImmediatePropagation(),proboards.error("There is currently a plugin associated with this key that must be removed before the key can be deleted.")},a=function(e){e.preventDefault(),e.stopPropagation();var t=$(this);if(t.is(".disabled"))proboards.error("This plugin key currently has no saved data associated with it.");else{var i=t.closest(".item").attr("id");proboards.confirm("Are you sure you wish to clear all data associated with this key?  This cannot be undone.",function(){proboards.ajax({url:proboards.data("plugins_key_clear_url"),data:{id:i}}),t.addClass("disabled")})}};$(document).ready(function(){var n=0;$("#plugins-keys .list").autoform({deleteURL:proboards.data("plugins_key_delete_url"),undelete:!1,fields:[],dataID:"id",itemData:proboards.data("keyData"),check:function(e,t){var i=$(".key-input",t.item).trimValue().val();return""==i?["key","You must enter a key name."]:i.match(/^[A-z0-9_]+$/)?!($(".key-input").filter(function(){if($(this).val()==i)return this}).length>1)||["key","The key "+i+" is already in use."]:["key","A key name may only consist of letters, numbers, or underscores."]},checkDelete:function(e,t){if(""==$(".key-input",t.item).trimValue().val())return!0},onCreateItem:function(e,t){var i='<div class="plugin-key key-container"></div>',n='<div class="row-number"></div>',o='<div class="plugin-type"></div>',r='<div class="used-by"></div>',s='<div class="clear-data"><a href="#" class="disabled">Clear</a></div>',l=$(t.item);l.prepend(s).prepend(r).prepend(o).prepend(i).prepend(n),l.find(".delete").html("Delete"),l.find(".clear-data a").bind("click",a)},onCreateExistingItem:function(e,t){var a=proboards.data("keyData")[n++];$(".plugin-key",t.item).html(a.key),$(".plugin-type",t.item).html(proboards.data("keyTypes")[a.type]),$(".used-by",t.item).html(a.used_by_plugin),a.used_by_plugin_id&&$(".used-by",t.item).data("plugin-id",a.used_by_plugin_id),(a.used_by_users||""!=a.used_by_plugin)&&$(".key-input",t.item).attr("disabled","disabled"),""!=a.used_by_plugin&&$(".delete",t.item).addClass("disabled").bind_first("click",i),null!=a.used_by_users&&$(".clear-data a",t.item).removeClass("disabled")},onDelete:function(e,i){t(i.item)}}),e(),$("#plugins-keys .list").setEven(),$("#create").click(function(){proboards.ajax({url:proboards.data("plugins_create_dialog_url"),success:function(e){proboards.dialog("plugin-create-dialog",{title:"Create New Plugin",html:e.html,width:330,buttons:{Create:function(){$("form",this).submit()},Cancel:function(){$(this).dialog("close")}}})}})})})},favstar_active_url=proboards.image_path()+"/admin/themes/etc/favstar-active.png",favstar_dim_url=proboards.image_path()+"/admin/themes/etc/favstar-dim.png",scheme_properties=["body_background_color","title_bar_background_color","title_text_color","title_buttons_background_color","buttons_background_color","container_background_color_1","container_background_color_2","container_highlight_color","container_outer_border_color","container_inner_border_color"],admin_themes=function(){$(document).ready(function(){var e=$.parseJSON(proboards.data("theme_color_scheme"));if(null!=e){var t=$(".admin-theme-color-bar");t.is("div")||(t=$("td",t)),t.append(proboards.color_scheme.build(e,0))}$("input","#theme-manager-buttons").bind("change",function(){proboards.unsaved_changes=1,$("#save-theme").addClass("highlight")}),$("#default-help").tipTip({}),$("#disabled-help").tipTip({}),$('select[name="theme"]').on("change",function(){var e=$(this).val(),t=window.location.pathname;t=t.replace(/(\/admin\/themes)(\/\d+)?/,"$1/"+e),window.location.pathname=t}),$('select[name="theme"]').val()==proboards.data("default_theme_id")&&disableDefaultTheme(),$('input[name="default"]').change(function(){$("#disabled-span").toggle(!$('input[name="default"]').prop("checked")),$(this).prop("checked")&&$('input[name="disabled"]').prop("checked",!1)})})},updateThemeDropdown=function(e){disableDefaultTheme(),$("#disabled-span").remove(),$('select[name="theme"] option[value="'+e+'"]').text($('select[name="theme"] option[value="'+e+'"]').text().replace(" (default)","")),$('select[name="theme"] option:selected').text($('select[name="theme"] option:selected').text()+" (default)")},disableDefaultTheme=function(){var e=$("#default-span"),t=$("<div />");t.css({position:"absolute",top:e.position().top,left:e.position().left,width:e.outerWidth(),height:e.outerHeight(),zIndex:1e4,backgroundColor:"#fff",opacity:0}),t.bind("click",function(){$("#default-help").tipTip("show")}),e.append(t),$('input[name="default"]').attr("checked","checked").attr("disabled","disabled")},mobile_board=function(){$(document).ready(function(){$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()})})},mobile_home=function(){$(document).ready(function(){$(".item.board").click(function(){document.location=$(this).find(".link a").attr("href")})})},mobile_members=function(){function e(){$('input[name="q"].placeholder-empty').val("");var e=$('.ui-search input[name="q"]').val();return window.location.search="?q="+e.replace(/\s/g,"+"),!1}$(document).ready(function(){var t=proboards.consolidateParams();t.view;$("#member-view-select").change(function(){window.location=proboards.route("members")+$(this).val()}),$(".ui-pagination a").click(function(e){e.preventDefault();var i=$(this).attr("href");if("undefined"!=typeof i){var a=i.split("?")[1],n=proboards.consolidateParams(a),o=$.extend(t,{page:n.page});o.page||delete o.page,window.location.search=proboards.genQueryString(o)}}),$(".sortable a").click(function(e){e.preventDefault(),t.sort=$(this).is(".name")?"name":"last_online",t.dir="asc"==t.dir?"desc":"asc",window.location.search=proboards.genQueryString(t)}),$("form.ui-search").submit(function(t){return t.preventDefault,e(),!1}),$(".search-filters-button span.icon").click(function(t){return t.preventDefault,e(),!1})})},mobile_calendar_base=function(){$(document).ready(function(){$('.month-selector option[value="'+proboards.data("calendar_month")+'"]').attr("selected","selected"),$('.year-selector option[value="'+proboards.data("calendar_month")+'"]').attr("selected","selected"),$('.calendar-jump input[type="button"]').click(function(){var e=$(".month-selector option:selected").val(),t=$(".year-selector  option:selected").val();window.location=proboards.data("calendar_list_url").replace(":month",e).replace(":year",t)})})},mobile_common_edit=function(){$(document).ready(function(){0!=$('.wysiwyg form input[name="bookmark"]').val()&&$('input[name="modifiers_bookmark"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="sticky"]').val()&&$('input[name="modifiers_sticky"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="lock"]').val()&&$('input[name="modifiers_lock"]').attr("checked","checked"),$("#modifiers input").bind("keyup keydown change",function(){"checkbox"==$(this).attr("type")?$(this).attr("checked")?$('.wysiwyg form input[name="'+$(this).val()+'"]').val(1):$('.wysiwyg form input[name="'+$(this).val()+'"]').val(0):$('.wysiwyg form input[name="'+$(this).attr("title")+'"]').val($(this).val())});var e=$('.wysiwyg form input[name="announcement"]'),t=$('input[name="modifiers_announcement"]'),i=$('.wysiwyg form input[name="announcement_expires"]'),a=$('input[name="modifiers_announcement_expires"]'),n=$('.wysiwyg form input[name="announcement_expires_date"]'),o=$('input[name="modifiers_announcement_expires_date"]'),r=$('.wysiwyg form input[name="announcement_expires_time"]'),s=$('input[name="modifiers_announcement_expires_time"]');t.on("change",function(){var i=t.prop("checked");$("#announcement-options").toggle(i),e.val(i?1:""),a.trigger("change")}),a.on("change",function(){isAnnounceExpires=a.prop("checked"),i.val(isAnnounceExpires?1:""),$("#announcement-date-and-time").toggle(isAnnounceExpires),o.add(s).trigger("change")}),o.add(s).on("change",function(){n.val(isAnnounceExpires?o.val():""),r.val(isAnnounceExpires?s.val():"")}),t.prop("checked",0!=e.val()),o.val(n.val()),s.val(r.val()),a.prop("checked",0!=i.val()),t.add(a).trigger("change"),n.on("localeconvert",function(){o.val(n.val()),s.val(r.val())})})},mobile_conversation_index=function(){$(document).ready(function(){var e=proboards.data("folder")||"inbox";e=e.replace("-","/"),$('.control-bar select option[value="'+e+'"]').prop("selected",!0),$(".control-bar select").on("change",function(){var e=$(this).val(),t=0==e.indexOf("label/")?"label":"folder";"label"==t?(labelId=e.substr("label/".length),window.location=proboards.route("conversations_by_label",{label_id:labelId})):window.location=proboards.route("conversations",{folder:e})}),$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()})})},mobile_conversation_new=function(){$(document).ready(function(){$('input[name="recipients"]').attr("value",proboards.data("recipients"))})},mobile_conversation_show=function(){$(document).ready(function(){$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()}),$(".control-bar select").change(function(){var e=$(this).val();"archive"==e?proboards.ajax({url:proboards.route("mark_conversations",{type:"archive"}),data:{ids:[proboards.data("conversation_id")]},success:function(e){location.reload(!0)}}):"unarchive"==e?proboards.ajax({url:proboards.route("mark_conversations",{type:"unarchive"}),data:{ids:[proboards.data("conversation_id")]},success:function(e){location.reload(!0)}}):"delete"==e?proboards.ajax({url:proboards.route("delete_conversations"),data:{ids:[proboards.data("conversation_id")]},success:function(e){window.location=proboards.route("conversations",{folder:"inbox"})}}):"leave"==e&&proboards.ajax({url:proboards.route("remove_conversations"),data:{ids:[proboards.data("conversation_id")]},success:function(e){window.location=proboards.route("conversations",{folder:"inbox"})}})}),proboards.embedded.processEmbedded()})},mobile_message_list=function(){$(document).ready(function(){$('.message-options-select-list option[value*="deselectMessage"]').attr("disabled","disabled");var e=[],t=/(^| )message-([0-9]+)($| )/,i=/(^| )user-([0-9]+)($| )/;$(".message-options-select-list").change(function(){var a=$(this),n=t.test(a.attr("class"))?RegExp.$2:"",o=(i.test(a.attr("class"))?RegExp.$2:"",a.val()),r=$("option:first",a);if(o==n+"-selectMessage")r.text("Selected"),e.push(n),$(".message-"+n+"-checkbox input.ui-manager-checkbox").attr("checked","checked"),$('option[value="'+n+'-selectMessage"]',a).attr("disabled","disabled"),$('option[value="'+n+'-deselectMessage"]',a).removeAttr("disabled");else if(o==n+"-deselectMessage"){r.text("Options");var s=[];for(var l in e)e[l]!=n&&s.push(e[l]);e=s,$(".message-"+n+"-checkbox input.ui-manager-checkbox").removeAttr("checked"),$('option[value="'+n+'-selectMessage"]',a).removeAttr("disabled"),$('option[value="'+n+'-deselectMessage"]',a).attr("disabled","disabled")}else o==n+"-toTop"&&window.scrollTo(0,0);r.attr("selected","selected")}),$(".quote-button").each(function(){var t=$(this).closest(".message").attr("id").substr(13);$(this).unbind("click"),$(this).bind("click",function(){if(0!=e.length){var i="";for(var a in e)e[a]!=t&&(i+=e[a],i+=",");return i+=t,window.location=proboards.route("quote_messages",{message_ids:i,conversation_id:proboards.data("page").conversation.id}),!1}return!0})}),$(".display-blocked-message.button").each(function(){var e=$(this).attr("id").substr(13);$(this).unbind("click"),$(this).bind("click",function(){$("#message-"+e).removeClass("blocked"),$("#message-"+e+" td.blocked").hide(),$("#message-"+e+" td.unblocked").show()})})})},mobile_post_base=function(){$(document).ready(function(){$('.post-options-select-list option[value="deselectPost"]').prop("disabled",!0),proboards.embedded.processEmbedded(),$(".likes-button").on("click",function(){var e=$(this).closest(".post"),t=e.attr("id").substr("post-".length);return proboards.ajax({url:proboards.route("post_like"),data:{post_id:t},dataType:"json",success:function(t){var i=$(".likes",e);i.html(t.likes_html)}}),$(this).toggleClass("liked"),!1});var e=[],t=proboards.data("post_count");$(".post-options-select-list").change(function(){var i=$(this),a=parseInt(i.data("post_id")),n=(parseInt(i.data("user_id")),i.val()),o=$("option:first",i);switch(n){case"selectPost":o.text("Selected"),e.push(a),$('option[value="selectPost"]',i).prop("disabled",!0),$('option[value="deselectPost"]',i).prop("disabled",!1);break;case"deselectPost":o.text("Options");var r=$.inArray(a,e);r!=-1&&e.splice(r,1),$('option[value="selectPost"]',i).prop("disabled",!1),$('option[value="deselectPost"]',i).prop("disabled",!0);break;case"reportPost":var s=prompt("Reason:","");null!=s&&s.length>=1?proboards.ajax({url:proboards.route("create_report",{post_id:a}),data:{post_id:a,reason:s},dataType:"json",success:function(e){alert(e.message)}}):null!=s&&alert("You must provide a reason.");break;case"deletePost":var l=prompt("Type 'delete' to delete the post.","");l&&"delete"==l.toLowerCase()&&proboards.ajax({url:proboards.route("delete_post"),data:{"ids[]":a},dataType:"json",success:function(e){t<2?window.location=e.redirect_url:location.reload(!0)}});break;case"editPost":window.location=proboards.route("edit_post",{post_id:a});break;case"toTop":window.scrollTo(0,0)}o.prop("selected",!0)}),$(".quote-button").off("click").on("click",function(){if(0!=e.length){var t=parseInt($(this).closest(".post").attr("id").substr("post-".length));return $.inArray(t,e)==-1&&e.push(t),window.location=proboards.route("quote_posts",{post_ids:e.join(","),thread_id:proboards.data("page").thread.id}),!1}return!0}),$(".display-blocked-post.button").each(function(){var e=$(this).parents(".blocked.post").attr("id").substr("post-".length);$(this).unbind("click"),$(this).bind("click",function(){return $("#post-"+e).removeClass("blocked"),$("#post-"+e+" .blocked").hide(),$("#post-"+e+" .unblocked").show(),!1})})})},mobile_post_new=function(){$(document).ready(function(){0!=$('.wysiwyg form input[name="bookmark"]').val()&&$('input[name="modifiers_bookmark"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="sticky"]').val()&&$('input[name="modifiers_sticky"]').attr("checked","checked"),0!=$('.wysiwyg form input[name="lock"]').val()&&$('input[name="modifiers_lock"]').attr("checked","checked"),$("#modifiers input").bind("keyup keydown change",function(){"checkbox"==$(this).attr("type")?$(this).attr("checked")?$('.wysiwyg form input[name="'+$(this).val()+'"]').val(1):$('.wysiwyg form input[name="'+$(this).val()+'"]').val(0):$('.wysiwyg form input[name="'+$(this).attr("title")+'"]').val($(this).val());
});var e=$('.wysiwyg form input[name="announcement"]'),t=$('input[name="modifiers_announcement"]'),i=$('.wysiwyg form input[name="announcement_expires"]'),a=$('input[name="modifiers_announcement_expires"]'),n=$('.wysiwyg form input[name="announcement_expires_date"]'),o=$('input[name="modifiers_announcement_expires_date"]'),r=$('.wysiwyg form input[name="announcement_expires_time"]'),s=$('input[name="modifiers_announcement_expires_time"]');t.on("change",function(){var i=t.prop("checked");$("#announcement-options").toggle(i),e.val(i?1:""),a.trigger("change")}),a.on("change",function(){isAnnounceExpires=a.prop("checked"),i.val(isAnnounceExpires?1:""),$("#announcement-date-and-time").toggle(isAnnounceExpires),o.add(s).trigger("change")}),o.add(s).on("change",function(){n.val(isAnnounceExpires?o.val():""),r.val(isAnnounceExpires?s.val():"")}),t.prop("checked",0!=e.val()),o.val(n.val()),s.val(r.val()),a.prop("checked",0!=i.val()),t.add(a).trigger("change"),n.on("localeconvert",function(){o.val(n.val()),s.val(r.val())})})},mobile_registration_register=function(){$(document).ready(function(){var e=$('input[name="username"]'),t="";e.on("keyup change",function(){var i=$("tr#username-available"),a=$("td#username-available-msg",i),n=e.val();t&&clearTimeout(t),n.length?t=setTimeout(function(){proboards.ajax({url:proboards.route("e_register_check_username"),ignorePending:!0,data:{username:n},dataType:"json",success:function(e){""!=e.available&&(a.html('<span class="success">'+e.available+"</span>"),i.show())},error:function(e){""!=e.error&&(a.html('<span class="error">'+e.error+"</span>"),i.show())},complete:function(){e.val().length||(i.hide(),a.html(""))}})},500):(i.hide(),a.html(""))})})},mobile_search_index=function(){$(document).ready(function(){$("#search_type").change(function(){var e=$(this).val();$(".input").hide(),1==e?$("#match_at_least_one_input").show():2==e?$("#match_exact_input").show():$("#match_all_input").show()})})},mobile_thread_edit=function(){$(document).ready(function(){var t=0;proboards.data("poll_id")&&($("#poll-button").text("Remove Poll"),t=1),1==$('input[name="has_event"]').attr("value")&&($("#event-button").text("Remove Event"),$(".add-event").show()),$("#poll-button").click(function(){1==t?confirm("Are you sure you want to remove this poll?")&&($("#poll-button").text("Add Poll"),$('input[name="replace_poll"]').attr("value",1),t=0):($(".add-poll").toggle(),"none"==$(".add-poll").css("display")?($('input[name="has_poll"]').attr("value",""),$("#poll-button").text("Add Poll")):($('input[name="has_poll"]').attr("value",1),$("#poll-button").text("Remove Poll")))}),$("#event-button").click(function(){$(".add-event").toggle(),"none"==$(".add-event").css("display")?($('input[name="has_event"]').attr("value",""),$("#event-button").text("Add Event"),e()):($('input[name="has_event"]').attr("value",1),$("#event-button").text("Remove Event"))}),$('input[name="all_day_event"]').on("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))}).trigger("change")});var e=function(){var e=$('input[name="start_date"]'),t=$('input[name="end_date"]').data("edited",!1),i=$('input[name="end_time"]');e.add(t).add(i).off(".autopopulate"),e.on("change.autopopulate",function(){t.data("edited")||t.val($(this).val())}),t.add(i).on("change.autopopulate",function(){t.data("edited",!0)})}},mobile_thread_new=function(){$(document).ready(function(){$("#poll-button").click(function(e){e.preventDefault();var t=$(this);$(".add-poll").toggle(),"none"==$(".add-poll").css("display")?(t.text("Add Poll"),$('input[name="has_poll"]').attr("value","")):(t.text("Remove Poll"),$('input[name="has_poll"]').attr("value",1))}),$("#event-button").click(function(t){t.preventDefault();var i=$(this);$(".add-event").toggle(),"none"==$(".add-event").css("display")?(i.text("Add Event"),$('input[name="has_event"]').attr("value","")):(i.text("Remove Event"),$('input[name="has_event"]').attr("value",1),e())}),$('input[name="all_day_event"]').on("change",function(){$(".event-hours").toggle(!$(this).prop("checked"))}).trigger("change"),$("#modifiers input").bind("keyup keydown change",function(){"checkbox"==$(this).attr("type")?$(this).attr("checked")?$('.wysiwyg form input[name="'+$(this).val()+'"]').val(1):$('.wysiwyg form input[name="'+$(this).val()+'"]').val(0):$('.wysiwyg form input[name="'+$(this).attr("title")+'"]').val($(this).val())});var t=$('.wysiwyg form input[name="announcement"]'),i=$('input[name="modifiers_announcement"]'),a=$('.wysiwyg form input[name="announcement_expires"]'),n=$('input[name="modifiers_announcement_expires"]'),o=$('.wysiwyg form input[name="announcement_expires_date"]'),r=$('input[name="modifiers_announcement_expires_date"]'),s=$('.wysiwyg form input[name="announcement_expires_time"]'),l=$('input[name="modifiers_announcement_expires_time"]');i.on("change",function(){var e=i.prop("checked");$("#announcement-options").toggle(e),t.val(e?1:""),n.trigger("change")}),n.on("change",function(){isAnnounceExpires=n.prop("checked"),a.val(isAnnounceExpires?1:""),$("#announcement-date-and-time").toggle(isAnnounceExpires),r.add(l).trigger("change")}),r.add(l).on("change",function(){o.val(isAnnounceExpires?r.val():""),s.val(isAnnounceExpires?l.val():"")})});var e=function(){var e=$('input[name="start_date"]'),t=$('input[name="end_date"]').data("edited",!1),i=$('input[name="end_time"]');e.add(t).add(i).off(".autopopulate"),e.on("change.autopopulate",function(){t.data("edited")||t.val($(this).val())}),t.add(i).on("change.autopopulate",function(){t.data("edited",!0)})}},mobile_thread_show=function(){$(document).ready(function(){1==proboards.data("bookmarked")?$('.control-bar select option[value="bookmark"]').attr("disabled",!0):$('.control-bar select option[value="unbookmark"]').attr("disabled",!0),$(".search-filters-button span.icon").click(function(e){$('input[name="q"].placeholder-empty').val(""),$("form.ui-search").submit()}),$(".control-bar select").change(function(){var e=$(this).val(),t=document.location.protocol+"//"+document.location.host+proboards.route("thread",{thread_id:proboards.data("thread_id")}),i=proboards.data("thread_subject");if("view_prev"==e)window.location=proboards.route("previous_thread",{thread_id:proboards.data("thread_id")});else if("view_next"==e)window.location=proboards.route("next_thread",{thread_id:proboards.data("thread_id")});else if("bookmark"==e)proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"mark",ids:[proboards.data("thread_id")]},success:function(e){location.reload(!0)}});else if("unbookmark"==e)proboards.ajax({url:proboards.route("bookmark_threads"),data:{type:"unmark",ids:[proboards.data("thread_id")]},success:function(e){location.reload(!0)}});else if("facebook"==e)window.location="http://www.facebook.com/sharer/sharer.php?u="+encodeURI(t),"location=0,menubar=0,scrollbars=0,status=0,toolbar=0,resizable=1";else if("twitter"==e){var a=proboards.data("enterprise")?"":"&hashtags=proboards";window.location="https://twitter.com/intent/tweet?text="+encodeURI(i+" "+t)+a}else if("googleplus"==e)window.location="https://plus.google.com/u/0/share?url="+encodeURI(t);else if("tumblr"==e){var n=$("meta[property='og:description']").attr("content").trim(),a=proboards.data("enterprise")?"":"&tags=proboards";window.location="http://www.tumblr.com/share/link?url="+encodeURI(t)+"&name="+encodeURI(i)+"&description="+encodeURI(n)+encodeURI(a)}else if("linkedin"==e)window.location="http://www.linkedin.com/shareArticle?url="+encodeURI(t)+"&title="+encodeURI(i);else if("pinterest"==e){var o=$('meta[property="og:image"]').attr("content")||"";window.location="https://pinterest.com/pin/create/bookmarklet/?media="+encodeURI(o)+"&url="+encodeURI(t)+"&description="+encodeURI(i)}else if("reddit"==e)window.location="http://reddit.com/submit?url="+encodeURI(t)+"&title="+encodeURI(i);else if("myspace"==e)window.location="http://www.myspace.com/Modules/PostTo/Pages/?t="+encodeURI(i)+"&u="+encodeURI(t)+"&c=&l=";else if("email"==e){var r=$("meta[property='og:description']").attr("content").trim();r+="\n \n"+t,window.location.href="mailto:?subject="+encodeURI(i)+"&body="+encodeURI(r)}});var e=proboards.data("poll_mobile");if(e){var t=e.votedFor,i=0,a=e.maxAnswers;e.canVote&&$("td.checkboxes").removeClass("hide");for(var n in t)$('.results .checkboxes input[value="'+t[n]+'"]').attr("checked","checked"),i++;i>=a&&$(".results .checkboxes input").each(function(){$(this).attr("checked")||$(this).attr("disabled",!0)}),$("#open_poll").click(function(){proboards.ajax({url:e.openOrCloseUrl,data:{type:"open",thread_id:e.thread_id},dataType:"json",success:function(e){location.reload(!0)}})}),$("#lock_poll").click(function(){var t=confirm("Are you sure you want to lock this poll?");t&&proboards.ajax({url:e.openOrCloseUrl,data:{type:"close",thread_id:e.thread_id},dataType:"json",success:function(e){location.reload(!0)}})}),$(".results .checkboxes input").click(function(){var t=$(this).attr("checked")?"cast":"retract";proboards.ajax({url:e.url,data:{type:t,answer_id:$(this).val(),thread_id:e.thread_id},dataType:"json",success:function(e){location.reload(!0)}})})}$("#content video, #content iframe, #content object").each(function(){$(this).css("height",.5625*parseInt($(this).css("width")))})})},mobile_unsubscribe_index=function(){$(document).ready(function(){$("#s-none").on("click",function(){$(".form_user_edit_notifications select").not(":disabled").val("n")})})},mobile_user_edit_admin=function(){$(document).ready(function(){$('input[name="account_disabled"]').on("change",function(){var e=$('input[name="account_disabled"]:checked');$("#account-disabled-until").toggle(1==e.val())}).trigger("change"),$('input[name="pms_disabled"]').change(function(){var e=$('input[name="pms_disabled"]:checked');$("#pms-disabled-until").toggle(1==e.val())}).trigger("change")})},mobile_user_edit_common=function(){$(document).ready(function(){function e(e){$(".profile-menu-bar .profile-menu-bar").val(e),$(".js-edit").hide(),$(".js-edit."+e+"-edit").show()}function t(e){for(var t=e.split(" ");t.length;){var i=t.pop().trim();if(0===i.indexOf("form_"))return i.substr("form_user_edit_".length)}}proboards.form.init(),$.fn.storeFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).data("stored",$(this).val())}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).data("stored","checked")})},$.fn.resetFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).val($(this).data("stored"))}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).prop("checked",!0)})},$.fn.trackFormChanges=function(){var e=$(this);return e.on("change","input, select, textarea",function(){$(this).parents(e).data("changed",!0)}),e},$.fn.setFormStatus=function(e,t){var i=$(this);if(i.data("status")!==e){var a=$('input[type="submit"]',i);return a.setButtonStatus(e,t),i.data("status",e),i}},$.fn.setButtonStatus=function(e,t){var i=$(this);if(i.data("status")!==e){switch(e){case"ready":var a=function(){return t?(i.prop("disabled",!1),i.prev().remove(),void i.unwrap()):void(i.data("wait")?setTimeout(a,500):i.parent("processing")&&(i.parent().css("width","-=40"),setTimeout(function(){i.prev().remove(),i.unwrap().prop("disabled",!1)},500)))};a();break;case"saving":var n='style="width: '+(i.width()+30)+'px;"';i.prop("disabled",!0).wrap('<div class="processing" '+n+"></div>");i.parent().prepend('<div class="processing-img"></div>').css("width","+=40");i.data("wait",!0);setTimeout(function(){i.data("wait",!1)},1e3)}return i.data("status",e),i}};var i=(proboards.data("editInitialShow"),proboards.data("editInitialTab")),a="";"edit_notifications"===i&&(i="notifications"),$(".profile-menu-bar .profile-menu-bar").val(i),$(".profile-menu-bar").on("submit",function(e){return!1}),$(".profile-menu-bar .profile-menu-bar").change(function(){var t=$(this).val();if(t!==a){a=t;var i=proboards.data("profileUserId");e(t),"notifications"===t?history.pushState({page:t},"Edit"+t,"/user/"+i+"/edit_notifications"):history.pushState({page:t},"Edit"+t,"/user/"+i+"/"+t)}}),window.onpopstate=function(){var t=history.state?history.state.page:null;return t?void e(t):($(".js-edit").hide(),void $(".js-edit.avatar-edit").show())};var n=function(e){return e.storeFormValues(),!1},o=function(){var e=$(this),i=$('input[type="submit"]',$(this)),a=e.serialize(),o=t(e.prop("class"));a+="&tabSection="+o,proboards.ajax({url:proboards.route("update_unified",{user_id:proboards.data("profileUserId")}),data:a,success:function(t){t.alert_message&&alert(t.alert_message),e.data("changed",!1),i.setStatus("saved",{position:"after",style:"display",styleOpt:"inline"});var a={background:"#90EE90",color:"#006400",padding:"5px",top:"3px",position:"relative"};$(".js-edit .status-box").css(a)},error:function(t){i.setStatus("error",{position:"after",style:"display",styleOpt:"inline",text:t.error});var a={background:"#EE9090",color:"#640000",padding:"5px",top:"3px",position:"relative"};$(".js-edit .status-box").css(a),proboards.form.handleFormError(e,t)},complete:function(){e.setFormStatus("ready"["true"]),n(e)}})},r=$(".edit-user form");r.data("generic_submit",o)})},mobile_user_edit_privacy=function(){$(document).ready(function(){$('input[name="change_birthday"]').attr("checked")||$("#change-birthday").hide(),$('input[name="change_birthday"]').bind("change",function(){var e=$(this);$("#change-birthday").toggle(e.prop("checked"))})})},mobile_user_show_activity=function(){$(document).ready(function(){var e=proboards.data("page").member.id,t=proboards.data("form_id"),i=proboards.data("last_activity_id"),a=null;$("#"+t).on("submit",function(t){var i=$('input[name="update"]',this),n=i.val();return a!=n&&proboards.ajax({url:proboards.route("update_status"),data:{status:n,user_id:e,html:1},success:function(e){$("#no-activity-row").remove(),"undefined"!=typeof e.html&&$(".activities-container").prepend(e.html),0!=e.deleted_id&&$(".activity-"+e.deleted_id).remove(),i.attr("value","")},complete:function(e){a=n}}),!1}),$(".show-more").on("click",function(t){proboards.active_ajax_calls||(proboards.ajax({url:proboards.route("show_more_activities"),data:{user_id:e,last_id:i},success:function(e){$(".activities-container").append(e.html),e.more?i=e.last_id:$(".show-more").unbind("click").remove()}}),t.preventDefault(),t.stopPropagation())})})},mobile_user_show_following=function(){$(document).ready(function(){var e=proboards.data("last_following_id");$(".show-more").on("click",function(t){var i=$(".activities-container");proboards.ajax({url:proboards.route("show_more_following"),data:{user_id:proboards.data("page").member.id,last_id:e},success:function(t){i.append(t.html),t.more?e=t.last_id:$(".show-more").unbind("click").remove()}}),t.preventDefault(),t.stopPropagation()})})},mobile_user_show_groups=function(){$(document).ready(function(){$(".join-group").bind("click",function(e){e.preventDefault();var t=this,i=$(t).parentsUntil(".groups",".group");proboards.ajax({url:proboards.route("join_group"),data:{group_id:i.attr("id").substr(6),user_id:proboards.data("page").member.id},dataType:"html",success:function(e){window.location.reload(!0)}})}),$(".leave-group").bind("click",function(e){e.preventDefault();var t=this,i=$(t).parentsUntil(".groups",".group"),a=confirm("Are you sure?");a&&proboards.ajax({url:proboards.route("leave_group"),data:{group_id:i.attr("id").substr(6),pending:$(this).text()},dataType:"html",success:function(e){window.location.reload(!0)}})})})},mobile_user_show_notifications=function(){$(document).ready(function(){var e=proboards.data("page").member.id,t=proboards.data("last_notification_id");$(".show-more").on("click",function(i){var a=$(".notifications-container");proboards.ajax({url:proboards.route("show_more_notifications"),data:{user_id:e,last_id:t},success:function(e){a.append(e.html),e.more?t=e.last_id:$(".show-more").unbind("click").remove()}}),i.preventDefault(),i.stopPropagation()})})},mobile_user_show_user_common=function(){$(document).ready(function(){$(".profile-menu-bar").change(function(){document.location=$("option:selected",this).val()}),$(".follow_button").on("click",function(e){e.preventDefault();var t=$(this);t.is(".ui-state-disabled")||(t.addClass("ui-state-disabled"),proboards.ajax({url:proboards.route("follow_user"),data:{user_id:proboards.data("page").member.id},success:function(e){t.text(e.new_button_text)},complete:function(){t.removeClass("ui-state-disabled")}}))})})},admin_marketing_ads_txt=function(){$(document).ready(function(){var e=$(".js-form-admin-marketing-ads-txt"),t=$(".js-ads-txt-content");t.on("change",function(){proboards.unsaved_changes=1}),e.on("submit",function(e){e.preventDefault(),proboards.saving(a,!0);var i=t.val(),a=$(".js-save-ads-txt");return proboards.ajax({url:proboards.route("admin_ads_txt_save"),data:{ads_txt:i},success:function(e){proboards.unsaved_changes=0},complete:function(e,t){proboards.saving(a,!1,t)}}),!1})})},admin_marketing_analytics=function(){var e;$(document).ready(function(){var t=$.extend({},proboards.data("locale_settings"));$("#start_date, #end_date").datepicker("option","maxDate","+1").bind("change",function(){var i=$("#start_date"),a=$("#end_date"),n=i.val(),o=a.val();if(!$.check_date_format(n,t)||!$.check_date_format(o,t))return proboards.alert("Invalid date range selected.");var r=i.datepicker("getDate").getTime(),s=a.datepicker("getDate").getTime();r>s&&(o=n,s=r,a.val(n));var l=(s-r)/1e3/60/60/24;l>90&&(s=new Date(r+7776e6),a.datepicker("setDate",s),proboards.alert("Analytics can only display up to 90 days at a time. <br /><br />The end date has been automatically adjusted."));var d=$("#chartdiv").overlay(),c=$("#analytics-table").overlay();proboards.ajax({url:proboards.route("admin_marketing_analytics_update"),data:{start_date:n,end_date:o},dataType:"json",success:function(t){$("#analytics-table > tbody").html(t.html),e.dataProvider=t.chartData,e.validateData()},error:function(e){proboards.alert(e.error)},complete:function(){d.remove(),c.remove()}})});var a=$("#analytics-placeholder").offset(),n=$(".drop-shadow").offset();$("#chartdiv").css({left:a.left-n.left,top:a.top-n.top});var o={pageviews:{color:"#00BBCC",title:"Pageviews"},forum_requests:{color:"#1B48AC",title:"Forum Requests"},posts:{color:"#DB0000",title:"Posts Made"},threads:{color:"#69BF00",title:"Threads Created"},users:{color:"#F5B800",title:"New Members"}},r=proboards.data("chartData");r&&r[0]&&"undefined"==typeof r[0].forum_requests&&delete o.forum_requests,AmCharts.ready(function(){e=new AmCharts.AmSerialChart,e.pathToImages=proboards.image_path()+"/amcharts/",e.dataProvider=r,e.categoryField="date",e.dataDateFormat=t.amcharts_date_format;var a=e.categoryAxis;a.parseDates=!0,a.minPeriod="DD",a.axisColor="#DADADA",a.dashLength=1;var n=new AmCharts.ValueAxis;n.axisColor="#DADADA",n.axisThickness=2,n.gridAlpha=0,n.minMaxMultiplier=1.08,n.minimum=0,e.addValueAxis(n);var s=new AmCharts.ValueAxis;s.position="right",s.axisColor=o.pageviews.color,s.axisThickness=2,s.gridAlpha=0,s.minMaxMultiplier=1.08,s.minimum=0,e.addValueAxis(s);for(var l in o)o[l].graph=new AmCharts.AmGraph,"pageviews"==l||"forum_requests"==l?o[l].graph.valueAxis=s:o[l].graph.valueAxis=n,o[l].graph.type="smoothedLine",o[l].graph.bullet="round",o[l].graph.bulletColor="#FFFFFF",o[l].graph.bulletBorderColor=o[l].color,o[l].graph.bulletBorderAlpha=1,o[l].graph.bulletBorderThickness=2,o[l].graph.bulletSize=7,o[l].graph.title=o[l].title,o[l].graph.valueField=l,o[l].graph.lineThickness=2,o[l].graph.lineColor=o[l].color,o[l].graph.balloonText="[[title]]: [[value]]",e.addGraph(o[l].graph);var d=new AmCharts.ChartCursor;d.cursorPosition="mouse",e.addChartCursor(d);var c=new AmCharts.AmLegend;c.marginLeft=110,c.useGraphSettings=!0,c.valueText="",e.addLegend(c),c.addListener("showItem",function(e){$('.analytics-checkbox[data-type="'+e.dataItem.valueField+'"]').prop("checked",!0)}),c.addListener("hideItem",function(e){$('.analytics-checkbox[data-type="'+e.dataItem.valueField+'"]').prop("checked",!1)}),e.write("chartdiv"),$(".analytics-checkbox").on("change",function(){var t=$(this).attr("data-type");for(i in e.graphs)if(e.graphs[i].valueField==t){$(this).prop("checked")?e.showGraph(e.graphs[i]):e.hideGraph(e.graphs[i]);break}})})})},admin_marketing_google_analytics=function(){$(document).ready(function(){var e=$("input, select","#event-settings"),t=$(".event").find(".option:first select"),i=$('select[name="enabled"]'),a=$('input[name="tracking_id"]'),n=proboards.route("admin_marketing_google_analytics_update"),o=proboards.route("admin_marketing_google_analytics_reset");i.add(a).each(function(){var e=$(this),t=$('<span class="status-box '+e.attr("name")+'-status"></span>'),t=t.appendTo(e.closest(".option"));e.autoSubmit({url:n,statusElement:t,beforeSendData:function(e){var t=$(this);/^\s*$/.test(a.val())&&"1"===i.val()&&t.is('[name="enabled"], [name="tracking_id"]')&&(t.is('[name="enabled"]')&&i.val(0),e.error="A Google Tracking ID is required.")},success:function(){i.trigger("rdy")}})}),e.each(function(){var e=$(this),t=$('<span class="status-box '+e.attr("name")+'-status"></span>'),t=t.appendTo(e.closest(".option"));e.autoSubmit({url:n,statusElement:t,beforeSendData:function(e){$.extend(e,{events:r(this)})}})}),t.on("change rdy",function(){var e=$(this),t=parseInt(e.val()),i=e.parents(".option").siblings(".tabbed.option"),a=$("input",i);a.prop("disabled",1!==t)}),i.on("rdy",function(){e.prop("disabled","1"!==$(this).val()),t.not(":disabled").trigger("rdy")}).trigger("rdy"),$("#reset-events").on("click",function(){proboards.confirm("Are you sure you want to restore the default values for the settings under Event Tracking?",function(){proboards.loading(!0),proboards.instapost(o)})});var r=function(e){var t=$(e),i=t.parents(".event").data("type"),a=t.parent().data("name"),n={};return n[i]={},n[i][a]=t.val(),n}})},admin_marketing_viglink=function(){$(document).ready(function(){$(".admin-content select, .admin-content input").autoSubmit({url:proboards.data("viglink_update_url"),statusElement:$(".admin-content .status-box")})})},admin_members_custom_fields=function(){$(document).ready(function(){$("#custom-fields .list").autoform({createURL:proboards.route("create_field"),updateURL:proboards.route("update_field"),deleteURL:proboards.route("delete_field"),fields:[["input",{name:"name",type:"text",size:32,required:1}],["select",{name:"type",heading:"Select Field Type",required:1},{0:"Text Field",1:"Text Area",2:"Drop Down Selection",3:"Radio Buttons",4:"Check Boxes"}],["input",{name:"options",type:"text"}],["select",{name:"location","default":2},{0:"Member Profiles Only",1:"Mini-Profiles Only",2:"Profiles &amp; Mini-Profiles"}],["select",{name:"edit"},{0:"Member and Staff With Power",1:"Staff With Power"}]],dataID:"id",itemData:proboards.data("itemData"),undelete:!1,check:function(e,t,i){return""!=$(".name-input",t.item).val()||["name","This field is required."]},onCreateItem:function(e,t){var i=$(".options-input",t.item),a=$(".type-container select",t.item);i.after('<span class="options_readable-input"><a href="#" class="view-edit">(View/Edit)</a></span>'),i.remove(),a.on("change",function(){var e=$(".view-edit",t.item);e.toggle(""!==a.val())}).change(),$(t.item).delegate(".options_readable-input a","click",function(i){i.preventDefault();var a=function(e,t){proboards.ajax({url:proboards.route("custom_field_dialog"),data:{id:$(t.item).attr("id")},dataType:"json",success:function(e){$("#change-options-container").html(e.html),e.opts?("undefined"!=typeof e.autoform_data&&$("#change-options-container .list").autoform({fields:[["input",{name:"text",type:"text",required:1,size:32}]],itemData:proboards.data(e.autoform_data),undelete:!1,doNotSave:!0,checkDelete:function(e,t){return""==$(".text-input",t.item).val()}}),$("#change-options-container").dialog("option","height","auto"),$("#change-options-container").dialog("option","buttons",{Save:function(){proboards.dialog_toggle_buttons("change-options-container"),proboards.ajax({url:proboards.data("custom_field_opts_url"),data:$("#change-options-container input").serialize(),dataType:"json",success:function(){$("#change-options-container").dialog("close"),$("#custom-fields .list").autoform("setItemState",t.item,"saved")}})}}),proboards.dialogEnter($("#change-options-container"))):$("#change-options-container").dialog("option","buttons",{Close:function(){$("#change-options-container").dialog("close")}}),$("#change-options-container").dialog("open"),$("#change-options-container input").focus()}})};return proboards.dialog("change-options-container",{width:483,title:"Custom Field Options",html:'<div style="padding: 20px; text-align: center;">'+proboards.get_image({src:"/loader/circle-16x16.gif"})+"</div>"}),$(this).parents(".state-editing").length&&""!=$(".name-container input",t.item).val()?$(t.item).data("onUpdate",a):$(this).parents(".ui-autoform-new-item").length?(proboards.alert("This custom field must have a name and type first."),$("#change-options-container").dialog("close")):a(e,t),!1})},onCreate:function(e,t){$(t.item).data("onUpdate")&&($(t.item).data("onUpdate")(e,t),$(t.item).data("onUpdate",null))},onUpdate:function(e,t){$(t.item).data("onUpdate")&&($(t.item).data("onUpdate")(e,t),$(t.item).data("onUpdate",null))},sortable:!0,sortableSelector:".list.sortable",updateOrderURL:proboards.route("update_fields_order")}),$('select[name="type"]').each(function(){$(this).data("selected_original",$(this).val())}),$('select[name="type"]').bind_first("change",{},function(e){var t=$(this).parents(".item").attr("id"),i=$(this).val(),a=proboards.data("fields_used");if(a[t]){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),$(this).val($(this).data("selected_original"));var n=this;proboards.confirm("Changing this value will clear all user-entered custom field values.",function(){delete a[t],$(n).val(i),$(n).change()})}return!1})})},admin_members_email=function(){$(document).ready(function(){var e=function(){var e=$('input[name="recipient_type"]:checked').val();"members"==e?($(".user-search-container").show(),$(".group-search-container").hide()):"groups"==e?($(".user-search-container").hide(),$(".group-search-container").show()):($(".user-search-container").hide(),$(".group-search-container").hide()),$(".cooldown").hide(),$("#cooldown-"+e).length>0?($("#cooldown-"+e).show(),$(".message-composer").hide(),$(".email-footer").hide()):($(".message-composer").show(),$(".email-footer").show())};$(".user-search-container").insertBefore('input[value="groups"]'),$(".group-search-container").insertBefore('input[value="staff"]'),$('input[name="recipient_type"]').change(e),$('input[name="recipient_type"]').change(),$("#select-members-help").insertAfter('input[value="members"] + label').tipTip(),$("#subject-help").tipTip(),$("input:first").change(),$('input[name="submit"]').on("click",function(e){validateEmailRecipients()||e.preventDefault()})})},validateEmailRecipients=function(){var e=$('input[name="recipient_type"]:checked').val();if("members"==e){if(!$('input[name="users"]').val()&&/^\s*$/.test($('input[name="user_search_box_input"]').val()))return $.inputError($(".user-search-container"),"You must choose at least one member."),!1}else if("groups"==e&&!$('input[name="groups"]').val())return $.inputError($(".group-search-container"),"You must choose at least one group."),!1;return!0},admin_members_forum_avatars=function(){$(document).ready(function(){forum_avatars.bind_link_image(),forum_avatars.init_upload(),forum_avatars.bind_delete(),forum_avatars.sortable_setup(),forum_avatars.default_avatar_setup()})},forum_avatars={bind_link_image:function(){var e=this,t=proboards.data("form_id");$("#"+t+"_link_button").click(function(i){var a={src:$("#"+t+"_src_input").val()};return!!e.check_image_link(a.src)&&(proboards.ajax({url:proboards.route("add_forum_avatar"),data:a,success:function(t){e.link_image_success("<strong>Saved!</strong>"),e.add_forum_avatar(a.src)},error:function(t){e.link_image_error(t.error)}}),i.stopPropagation(),!1)}),$("#"+t+"_src_input").bind("keydown",function(e){if(13==e.which)return $("#"+t+"_link_button").click(),!1})},add_forum_avatar:function(e){var t='<div class="avatar-wrapper full-size float-left"><div class="avatar-outer"><div class="avatar-inner full-size"><div class="default-overlay">Click to make this avatar the forum default</div><img src="'+e+'" class="max-size"><div class="delete-wrapper" title="Delete"><span class="delete"></span></div><div class="status small hide"></div></div></div></div>';$("#forum-avatars-wrapper").append(t),this.check_for_avatars()},init_upload:function(){var self=this;pbFileUpload.init({},{acceptFileTypes:new RegExp(eval(proboards.data("image_regex"))),url:proboards.route("add_forum_avatar"),maxNumberOfFiles:25,sequentialUploads:!0,maxFileSize:proboards.data("avatar_size_limit"),done:function(e,t){$(".ui-progressbar").html('<div class="ui-progressbar-complete"></div>'),setTimeout(function(){t.context.smoothRemove($("#fileupload .avatar-select"),500)},2e3),t.result&&$.isArray(t.result)&&t.result.length&&t.result[0].thumbnail_url&&self.add_forum_avatar(t.result[0].thumbnail_url)}})},bind_delete:function(){var e=this;$("#avatars").on("click",".delete-wrapper",function(t){t.stopPropagation();var i=$(this).parentsUntil("#forum-avatars-wrapper"),a=$(this).siblings("img").attr("src");proboards.ajax({url:proboards.route("delete_forum_avatar"),data:{src:a},beforeSend:function(){e.show_status("processing",$(".status.small",i),"<strong>Deleting...</strong>")},success:function(t){$(i).fadeOut(function(){$(this).remove(),e.check_for_avatars()})},error:function(t){e.show_status("error",$(".status.small",i),"<strong>Error: save failed</strong>")}})})},check_image_link:function(url){var self=this,msg="The link entered is not valid.",patt=/^(https?:\/\/|\/\/)/i;patt.test(url)||(url="http://"+url),patt=/^(https?:\/\/|\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?\/.*\./i;var patt_basic=/^(https?:\/\/|\/\/)(([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\:)?([\w\!\~\*\'\(\)\.\$\%\&\+\=\-]+\@))?(([0-9]{1,3}\.){3}[0-9]{1,3}|(([\w!~\*\'\(\)\=]+\.)*(\w[\w\-]{0,61})?\w\.[a-zA-Z]{2,6}))(\:[1-9][0-9]{0,4})?[\w\~\!\@\#\$\%\^\&\*\(\)\-\+\=\/\:\;\?\.\,]*/i;if(patt.test(url)){if(patt=new RegExp(eval(proboards.data("image_regex"))),!patt.test(url))return self.link_image_error(msg),!1}else if(!patt_basic.test(url))return self.link_image_error(msg),!1;return!0},link_image_success:function(e){$("#link .state",document).hide().removeClass("error").addClass("success").html(e).clearQueue().fadeIn().delay(4e3).fadeOut()},link_image_error:function(e){$("#link .state",document).hide().removeClass("success").addClass("error").html(e).clearQueue().fadeIn().delay(4e3).fadeOut()},check_for_avatars:function(){$(".avatar-wrapper").length>0?$("#no-avatars").addClass("hide"):($("#no-avatars").removeClass("hide"),$("#reset-default").addClass("hide"))},sortable_setup:function(){var e=this;$("#forum-avatars-wrapper").sortable({items:".avatar-wrapper",update:function(t,i){var a=[];$(".avatar-wrapper",this).each(function(){a.push({src:$(this).find("img").attr("src")})}),proboards.ajax({url:proboards.route("order_forum_avatars"),data:{img_order:JSON.stringify(a)},success:function(){e.show_status("success",$(".status.small",i.item),"<strong>Saved!</strong>")},error:function(){e.show_status("error",$(".status.small",i.item),"<strong>Error: save failed</strong>")}}),i.item.removeAttr("style")}})},show_status:function(e,t,i){$(t).stop(!0,!0).removeClass("success, error, processing").html(i).addClass(e).slideDown().delay(4e3).slideUp(function(){$(this).addClass("hide").removeAttr("style").removeClass(e)})},default_avatar_setup:function(){var e=this,t="Click to make this avatar the forum default",i="Forum's Default Avatar";
$("#avatars").on("click",".avatar-wrapper",function(){var a=$(this);if(!a.is(".default")){var n=a.find("img").attr("src");return e.check_image_link(n)?void proboards.ajax({url:proboards.route("update_default_avatar"),data:{default_avatar:n},success:function(e,n){$("#forum-avatars-wrapper .avatar-wrapper.default").removeClass("default").find(".default-overlay").text(t),a.addClass("default").find(".default-overlay").text(i),$("#reset-default").removeClass("hide")},error:function(){e.show_status("error",$(".status.small",a),"<strong>Error: save failed</strong>")}}):void e.show_status("error",$(".status.small",a),"<strong>Error: invalid image</strong>")}}),$("#reset-default").click(function(){return proboards.ajax({url:proboards.route("update_default_avatar"),data:{default_avatar:""},success:function(){var e=$("#forum-avatars-wrapper .default");$("#reset-default").addClass("hide"),e.removeClass("default").find(".default-overlay").text(t)}}),!1})}};!function(e){e.fn.smoothAppendTo=function(t,i,a,n){return this.each(function(){t.stop(!0,!0);var o={height:t.height()+"px"};e(this).appendTo(i).show();var r={height:t.height()+"px"};t.css(o).animate(r,a,function(){t.each(function(){this.style.height=""}),e.isFunction(n)&&n()})})},e.fn.smoothRemove=function(t,i,a){return this.each(function(){t.stop(!0,!0);var n={height:t.height()+"px"};e(this).remove();var o={height:t.height()+"px"};t.css(n).animate(o,i,function(){t.each(function(){this.style.height=""}),e.isFunction(a)&&a()})})}}(jQuery);var admin_members_group_manage=function(){$(document).ready(function(){"management"==proboards.data("view")?group_manage.bind_view_bans():"pending"==proboards.data("view")&&group_pending.bind_pending_controls()})},group_manage={update_leaders:function(){var e=$('input[name="leaders_list"]').val();proboards.ajax({url:proboards.route("change_group_leaders",{type:"execute"}),data:{group_id:proboards.data("group_id"),leaders:e},success:function(e){$("#leaders-status").setStatus("saved"),$("#ban-count").html(e.block_count)},error:function(){$("#leaders-status").setStatus("error",{message:"save failed"})}})},add_member:function(){var e=$('input[name="add_members_list"]').val();proboards.ajax({url:proboards.route("change_group_members",{type:"execute"}),data:{group_id:proboards.data("group_id"),members:e},success:function(e){$("#members-status").setStatus("saved"),shared.update_count($("#member-count"),1),$("#ban-count").html(e.block_count)},error:function(){$("#members-status").setStatus("error",{message:"save failed"})}})},ban_member:function(){var e=$('input[name="ban_list"]'),t=$(".user-search","#ban-list").attr("id"),i=$("."+t+"-selectlist");proboards.ajax({url:proboards.route("ban_from_group",{group_id:proboards.data("group_id")}),data:{user_ids:e.val()},success:function(e){$("#ban-status").setStatus("saved"),shared.update_count($("#ban-count"),1)},error:function(t){e.val(t.original_bans),i.selectlist("manipulateIds",[t.ban_member_id],"deselect"),$("#ban-status").setStatus("error",{message:t.error})}})},unban_member:function(){var e=$('input[name="ban_list"]',"#view-bans-dialog").val(),t=$("#view-bans-dialog");return proboards.ajax({url:proboards.route("unban_from_group",{group_id:proboards.data("group_id")}),data:{user_ids:e},success:function(e){var i=$(".user-search","#ban-list").attr("id"),a=$("."+i+"-selectlist");a.selectlist("manipulateIds",e.unbanned_ids,"deselect");var n=$("."+i+"-input");n.autosearch("setData","excluded_ids[]",e.ban_list.split(",")),$("#ban-count").html(e.ban_count),$("#ban-status").setStatus("saved"),t.dialog("close")}}),!1},bind_view_bans:function(){var e=this;$(document.body).append('<div id="view-bans-dialog"></div>');var t=$("#view-bans-dialog");t.dialog({title:"Banned Members",autoOpen:!1,maxHeight:600,width:505,buttons:{Save:function(){e.unban_member()}}}),$("#view-bans").bind("click",function(){return proboards.ajax({url:proboards.route("show_bans",{group_id:proboards.data("group_id")}),data:{id:proboards.data("group_id")},dataType:"html",success:function(i){t.html(i),e.check_empty($(".content",t),t,"There are no banned members."),t.dialog("open")}}),!1})},check_empty:function(e,t,i){0==e.length&&t.html(i)}},group_pending={bind_pending_controls:function(){$(".accept").live("click",function(){var e=this;return $(e).siblings("input").andSelf().attr("disabled","disabled"),proboards.ajax({url:proboards.route("pending_approve",{group_id:proboards.data("group_id")}),data:{user_id:e.id},success:function(t){$(".item-"+e.id).setStatus("saved",{text:"Accepted",position:"html"}),shared.update_count($("#pending-count"),-1),group_pending.check_list_empty()},complete:function(){$(e).siblings("input").andSelf().removeAttr("disabled")}}),!1});var e=$("#message").html();proboards.dialog("reject-dialog",{autoOpen:!1,modal:!0,title:"Reject Member",width:"500",buttons:{"Reject Member":function(){group_pending.reject()}},close:function(){$(".item-"+$("#user-id").val()+" input").removeAttr("disabled"),$("#user-id").val(""),$("#notify-member").attr("checked","checked"),$("#ban-member").removeAttr("checked"),$("#message").val(e).removeAttr("disabled")}});var t=$("#reject-dialog");$(".reject").live("click",function(){var e=this;return $(e).siblings("input").andSelf().attr("disabled","disabled"),$("#user-id",t).val(e.id),t.dialog("open"),!1}),$("#notify-member").bind("click",function(){$(this).attr("checked")?$("#message").removeAttr("disabled"):$("#message").attr("disabled","disabled")})},reject:function(){var e=$("#reject-dialog"),t=$("#user-id",e).val(),i=$("#notify-member:checked",e).length,a=$("#ban-member:checked",e).length,n=$("#message",e).val();proboards.loading(!0),proboards.ajax({url:proboards.route("pending_reject",{group_id:proboards.data("group_id")}),data:{user_id:t,notify_flag:i,ban_flag:a,rejection_text:n},success:function(e){$(".item-"+t).setStatus("saved",{text:"Rejected",position:"html"}),shared.update_count($("#pending-count"),-1),group_pending.check_list_empty()},complete:function(){proboards.loading(!1),e.dialog("close")}})},check_list_empty:function(){0==$("#user-search-0 li .content").length&&($(".pending-yes").hide(),$(".pending-no").show())}},shared={update_count:function(e,t){var i=parseInt(e.html())+parseInt(t);e.html(i)}},admin_members_group_powers=function(){$(document).ready(function(){$("form").submit(function(){proboards.saving($('input[name="submit"]',this),!0)})})},admin_members_groups=function(){$(document).ready(function(){$("#member-groups .list").autoform({createURL:proboards.data("create_url"),updateURL:proboards.data("update_url"),deleteURL:proboards.data("delete_url"),updateOrderURL:proboards.data("update_order_url"),sortable:!0,sortableSelector:".list.sortable",headers:$("#member-groups .headings"),fields:[["input",{name:"name",type:"text",required:1}],["select",{name:"group_type",heading:"Group Type",required:1},{0:"Open",1:"Petition",2:"Private",3:"Hidden"}],["input",{name:"color",type:"text"}],["input",{name:"desc",type:"text"}],["input",{name:"leader",type:"text"}],["input",{name:"stars",type:"text"}],["input",{name:"star_type",type:"text"}],["select",{name:"staff"},{0:"No",1:"Yes"}],["select",{name:"global"},{0:"No",1:"Yes"}],["input",{name:"powers",type:"text"}]],dataID:"id",itemData:proboards.data("itemData"),undelete:!1,confirmDelete:function(e){var t=$(this),i=t.attr("id"),a=$(".name-input",t).val();a=a?"the <strong>"+a+"</strong>":"this";var n=0;$.each(pb.data("itemData"),function(e,t){if(i==t.id)return n=t.members,!1}),proboards.form.gen_verify_box("member_groups_delete_dialog","Confirm Deletion","205","590","Are you sure you want to permanently delete "+a+" group with <strong>"+n+"</strong> members?<br><br>","Delete","Delete Group",e)},check:function(e,t,i){var a=/^\d+$/;if(""==$(".name-input",t.item).val())return["name","The name is required."];var n=$(".stars-input",t.item).val();return!(""!=n&&!a.test(n))||["stars","The number of stars must be a positive whole number."]},checkDelete:function(e,t){if(""==$(".name-input",t.item).val()&&""==$(".description-input",t.item).val()&&""==$(".number_of_stars-input",t.item).val())return!0},onCreateItem:function(e,t){$(".color-input",t.item).after('<div class="color_preview" tabindex="1"><div class="delete-wrapper"><div class="delete"></div></div></div>'),$(".star_type-input",t.item).after(proboards.data("star_menu")),$(".leader-input",t.item).after('<span class="leader_readable-input"><a href="#" class="view-edit">(View/Edit)</a></span>'),$(".powers-input",t.item).after('<div class="power_bar"><div class="filled_bar"></div></div>'),$(".powers-input",t.item).after('<input type="button" class="powers_button" disabled="disabled" value="Edit" />'),$(".star_menu",t.item).bind("change",function(){var e=$(this).val().split("-");$(this).prev(".star_type-input").attr("value",e[0]),$(this).prev(".star_type-input").change()," "!=$(this).prev(".star_type-input").val()?(0==$(this).next(".star_preview").children("img").length&&$(this).next(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e[1]+'" alt="" />'),$(this).next(".star_preview").children("img").attr("src",proboards.image_path()+"/stars/"+e[1]),$(this).next(".star_preview").children("img").show()):$(this).next(".star_preview").children("img").hide()}),$(".leader_readable-input a",t.item).bind("click tabFocus",function(e){e.stopImmediatePropagation(),e.preventDefault();0==$(this).parents(".ui-autoform-new-item").length?(0==$("#change-leaders-container").length&&($(document.body).append('<div id="change-leaders-container"></div>'),proboards.dialog("change-leaders-container",{autoOpen:!1,width:483,title:"Group Leaders"})),proboards.ajax({url:proboards.route("change_group_leaders",{type:"change"}),data:{group_id:$(t.item).attr("id")},dataType:"html",success:function(e){$("#change-leaders-container").bind("save",function(){t.item.setStatus("saved")}),$("#change-leaders-container").html(e),$("#change-leaders-container").append('<input type="hidden" value="'+$(t.item).attr("id")+'" />'),$("#change-leaders-container").dialog("open"),$("#change-leaders-container input.user-search-input").focus()}})):proboards.alert("You must first give this group a name and type.")})},onCreateNewItem:function(e,t){$(".color_preview",t.item).html('<div class="text">None</div>'),$('input[name="stars"]',t.item).val(0),$(".leader_readable-input",t.item).prepend('<span class="leader-count">0 </span>')},onCreate:function(e,t){$(".powers_button",t.item).removeAttr("disabled"),$(".leader_readable-input",t.item).removeAttr("disabled")},updateOrderData:function(e,t){for(var i=[],a=$(e),n=0;n<a.length;n++){var o=parseInt(a.eq(n).attr("id"));if("number"!=typeof o||o<1)return!1;i.push(o)}return{group_ids:i}}}),$(".name-input").live("click focus",function(){0==$("#name_container").length&&($(document.body).append('<div id="name_container"></div>'),proboards.dialog("name_container",{autoOpen:!1,width:483,title:"Group Name"}));var e=$(this),t=$(this).parent().parent().find(".desc-input");$("#name_container").html('<table><tr><td>Name:</td><td><input type="text" id="name_field" name="name_field" />'+proboards.help_icon_plain({title:"This is the name of the group.  BBCode is allowed."})+'</td></tr><tr><td>Description:</td><td><input type="text" id="description_field" name="description_field" />'+proboards.help_icon_plain({title:"This will be displayed on the group tab in profiles."})+'</td></tr></table><br /><input type="button" id="name_submit" name="name_submit" value="Save" />'),$("#name_field").val(e.val()),$("#description_field").val(t.val()),$("#name_container").dialog("open"),$("#name_field").blur(),$("#name_field").focusin(function(){var e=$("#name_field").val();$("#name_field").keyup(function(){e=$("#name_field").val()})}),$("#name_field").focusout(function(){$("#name_field").unbind("keyup")}),$("#name_field").focus().select(),$("#name_submit").click(function(){e.val($("#name_field").val()),t.val($("#description_field").val()),$("#name_container").dialog("close"),e.change(),t.change()})}),$(".color_preview").each(function(){var e=$(this).prev().val();""!=e?($(this).css("background-color","#"+e),$(this).html('<div class="delete-wrapper"><div class="delete"></div></div>')):$(this).html('<div class="text">None</div>')}),$("#color_picker_div").colorPicker({autoUpdate:!1}),$(document).on("click tabFocus",".color_preview",function(){var e=this,t=$(e).prev().val();$("#color_picker_div").colorPicker("show",{hex:t,pos:{of:e},update:function(t){$("#colorPicker-preview").css({backgroundColor:"#"+t}),$(e).css("background-color","#"+t),$(e).html('<div class="delete-wrapper"><div class="delete"></div></div>'),$(e).prev().val(t),$(e).prev().change(),$(e).focus().select(),$(this).colorPicker("hide")}}),$("#colorPicker-input input").focus().select()}),$(".color_preview .delete").live("click",function(e){e.stopPropagation(),$(this).parent().parent().css("background-color","#ffffff"),$(this).parent().parent().prev().val(""),$(this).parent().parent().prev().change(),$(this).parent().parent().html('<div class="text">None</div>')});var e=jQuery.parseJSON(proboards.data("leader_name_hash"));$(".ui-autoform .list").children(":not(.ui-autoform-new-item)").each(function(){var t=$(this).attr("id"),i=0;e&&e[t]&&(i=e[t].split(",").length),$(this).find(".leader_readable-input").prepend('<span class="leader-count">'+i+" </span>")}),$(".ui-autoform-input-container.star_type-container").each(function(){if(""==$(this).children(".star_type-input").val()||0==$(this).children(".star_type-input").val())return!0;var e=$(this).find('.star_menu option[value^="'+$(this).children(".star_type-input").val()+'-"]');e.attr("selected","selected")," "==$(this).find(".star_menu").val()?($(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val()+'" alt="" />'),$(this).find(".star_preview img").hide()):$(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val().replace(/^\d+-/,"")+'" alt="" />')}),$(".power_bar").each(function(){var e=$(this).prev().prev(".powers-input").val(),t=24-(e/4-Math.round(.04*e));$(this).children(".filled_bar").css("margin-bottom","-"+t+"px")}),$(".ui-autoform .list").children(":not(.ui-autoform-new-item)").each(function(){$(this).find(".powers_button").removeAttr("disabled")}),$(".powers_button").live("click",function(){window.location=proboards.route("manage_powers",{id:$(this).parent().parent().attr("id")})})});var e={groupOpen:function(e){e.trigger("tabFocus")},groupClose:function(e){$('[name="name_submit"]').trigger("click")},colorPickerOpen:function(e){$(".color_preview",this.parent).trigger("tabFocus")},colorPickerClose:function(e){$('[name="ok"]').trigger("click")},leadersOpen:function(e){$(".view-edit",this.parent).trigger("tabFocus")},leadersClose:function(e){$('#change-leaders-container [name="submit"]').trigger("click")}};$(document).ready(function(){new proboards.tabHandler({container:"li.item",tabs:[{name:"name",tabInAll:e.groupOpen},{name:"name_field",tabOutReverse:function(){this.prev(),e.groupClose()}},{name:"description_field",tabOut:e.groupClose},{name:"group_type",tabOut:e.colorPickerOpen,tabOutReverse:function(){this.prev(3)}},{"class":"color_preview",tabInAll:e.colorPickerOpen},{name:"hex",tabOut:e.colorPickerClose,tabOutReverse:function(){this.prev(),e.colorPickerClose()}},{"class":"view-edit",tabIn:e.leadersOpen},{"class":"user-search-input",tabOut:e.leadersClose,tabOutReverse:function(){e.leadersClose(),this.prev(2)}},{name:"stars",tabOutReverse:e.leadersOpen},{"class":"star_menu"},{name:"staff"},{name:"global"},{"class":"powers_button"}]})})},admin_members_pending=function(){$(document).ready(function(){function e(){0==$("#request-list .item").length&&$("#request-list").before($('<div class="item center">There are no registration requests pending.</div>')).remove()}$("#request-list").setEven(),$("#request-list").on("click",".view",function(){proboards.alert("Request Message",$(this).data("text").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}),$("#request-list").on("click",".accept",function(){var t=$(this).parent().parent().attr("id");proboards.ajax({url:proboards.route("accept_request"),data:{id:t},dataType:"json",success:function(){$("#"+t).fadeOut(function(){$(this).remove(),$("#request-list").setEven(),e()})},complete:function(){$("#"+t+" .options-container input").removeAttr("disabled")}})}),$("#request-list").on("click",".reject",function(){var t=$(this).parent().parent().attr("id");proboards.ajax({url:proboards.route("decline_request"),data:{id:t},dataType:"json",success:function(){$("#"+t).fadeOut(function(){$(this).remove(),$("#request-list").setEven(),e()})},complete:function(){$("#"+t+" .options-container input").removeAttr("disabled")}})}),$("#request-list").on("click",".ban",function(){var t=$(this),i=t.parent().parent().attr("id");proboards.member.ban({id:i,checked:["ip","user_name","global_id"],success:function(){proboards.ajax({url:proboards.route("decline_request"),data:{id:i},dataType:"json",success:function(){$("#"+i).fadeOut(function(){$(this).remove(),$("#request-list").setEven(),e()})}})}}),$("#ban-member-container").dialog("option","close",function(){t.parent().find("input").removeAttr("disabled")})}),$("#request-list").on("click",".options-container input",function(){$(this).parent().find("input").attr("disabled","disabled")});var t=$(".restrict_registration_message").parents(".option"),i=$(".registration_request_message").parents(".option"),a=$('input[name="registration_request_message"]'),n=$('input[name="require_new_account_approval"]');$("#settings-form .option input, #settings-form .option textarea").each(function(){$(this).autoSubmit({url:proboards.data("members_update_reg_settings_url"),statusElement:$(".status-box",$(this).closest(".option"))})}),n.prop("checked")?(i.show(),a.prop("checked")?t.show():t.hide()):(i.hide(),t.hide()),n.on("change",function(){i.toggle(1==$(this).val()),1==$(this).val()&&a.prop("checked")?t.show():t.hide()}),a.on("change",function(){t.toggle(n.prop("checked")&&1==$(this).val())})})},admin_members_ranks=function(){$(document).ready(function(){function e(e){var t=$(".list.ui-autoform"),i=$(e).parent().parent(),a=parseInt($(e).val()),n=void 0,o=void 0;t.children(".item").each(function(){return o=parseInt($(this).find(".posts_required-input").val()),(a<o||isNaN(o))&&0!=o?(n[0]!=i[0]&&(i.detach(),n.after(i)),!1):void(n=$(this))})}$(".name-input").live("focusin",function(){var e=this;$(document).bind("keydown.name-field",function(t){13==t.which&&$(e).parent().next().children(".number_of_stars-input").focus()})}),$(".name-input").live("focusout",function(){$(document).unbind("keydown.name-field")}),$(".number_of_stars-input").live("focusin",function(){var e=this;$(document).bind("keydown.number_of_stars-field",function(t){13==t.which&&$(e).parent().next().children(".star_menu").focus()})}),$(".number_of_stars-input").live("focusout",function(){$(document).unbind("keydown.number_of_stars-field")}),$(".star_menu").live("focusin",function(){var e=this;$(document).bind("keydown.star-field",function(t){13==t.which&&$(e).parent().next().children(".posts_required-input").focus()})}),$(".star_menu").live("focusout",function(){$(document).unbind("keydown.star-field")}),$(".posts_required-input").live("focusin",function(){var e=this;$(document).bind("keydown.posts_required-field",function(t){13==t.which&&$(e).parent().parent().next().find(".name-input").focus()})}),$(".posts_required-input").live("focusout",function(){$(document).unbind("keydown.posts_required-field"),e(this)}),$("#member-ranks .list").autoform({createURL:proboards.route("create_ranks"),updateURL:proboards.route("update_ranks"),deleteURL:proboards.route("delete_ranks"),fields:[["input",{name:"name",type:"text",size:32,required:1}],["input",{name:"number_of_stars",type:"text",size:32,required:1}],["input",{name:"star",type:"text",size:32}],["input",{name:"posts_required",type:"text",size:32,required:1}]],dataID:"id",itemData:proboards.data("itemData"),check:function(e,t,i){var a=/^\d+$/;if(""==$(".name-input",t.item).val())return["name","The name is required."];if(!a.test($(".number_of_stars-input",t.item).val()))return["number_of_stars","The number of stars must be a positive whole number."];for(var n=$(this).children(".item"),o=n.length,r=0;r<o;++r)if(!$(n[r]).hasClass("header")&&!$(n[r]).hasClass("state-deleted")&&n[r]!==t.item[0]&&$(".posts_required-input",n[r]).val()==$(".posts_required-input",t.item).val())return["posts_required","The required post count must be unique."];return!!a.test($(".posts_required-input",t.item).val())||["posts_required","The required post count must be a positive whole number."]},checkDelete:function(e,t){if(""==$(".name-input",t.item).val()&&""==$(".number_of_stars-input",t.item).val()&&""==$(".posts_required-input",t.item).val())return!0},onCreateItem:function(e,t){$(".star-input",t.item).after(proboards.data("star_menu")),"0"===$(".posts_required-input",t.item).val()&&($(".posts_required-input",t.item).attr("disabled","disabled"),$(".actions",t.item).hide())}}),$(".ui-autoform-input-container.star-container").each(function(){if(""==$(this).children(".star-input").val()||0==$(this).children(".star-input").val())return!0;var e=$(this).find('.star_menu option[value^="'+$(this).children(".star-input").val()+'-"]');e.attr("selected","selected"),""==$(this).find(".star_menu").val()?($(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val()+'" alt="" />'),$(this).find(".star_preview img").hide()):$(this).children(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e.val().replace(/^\d+-/,"")+'" alt="" />')}),$(".star_menu").live("change",function(){var e=$(this).val().split("-");$(this).prev(".star-input").attr("value",e[0]),$(this).prev(".star-input").change()," "!=$(this).prev(".star-input").val()?(0==$(this).next(".star_preview").children("img").length&&$(this).next(".star_preview").append('<img src="'+proboards.image_path()+"/stars/"+e[1]+'" alt="" />'),$(this).next(".star_preview").children("img").attr("src",proboards.image_path()+"/stars/"+e[1]),$(this).next(".star_preview").children("img").show()):$(this).next(".star_preview").children("img").hide()})})},admin_plugins_plugin_editor=function(){function e(e,t){for(var i="",a=0;a<t;++a)i+=e;return i}function t(t,i){var a=50,n=1,o="+",r="|",s="-",l=e(" ",n),d=o+e(s,a-2*o.length)+o,c=d+"\n",u=a-2*r.length-2*n-i.length;return t.length>u-n&&(t=t.substr(0,u-n-3)+"..."),c+=r+l+t+e(" ",u-t.length)+i+l+r+"\n",c+=d+"\n"}function i(){var e=0;$(".list .row-number").each(function(){$(this).html(++e),$(this).next().find(".key-input").attr("tabindex",2*$(this).html()),$(this).next().next().find(".note-input").attr("tabindex",2*$(this).html()+1)})}function a(){var e=[];$("#plugins-keys .list > .item:not(.ui-autoform-deleted-item,.ui-autoform-new-item)").each(function(){var t={};t.id=$(this).attr("id"),t.key=$(".key-container input",this).val(),t.note=$(".note-container input",this).val(),t.type=$(".type-container input",this).val(),e.push(t)}),proboards.data("keyData",e),$("select.select-key").each(function(){var t=$(this).val();$(this).html("");for(var i=0;i<e.length;i++)$(this).append($("<option></option>").val(e[i].key).text(e[i].key));$(this).val(t)}),c("key"),$.each(proboards.data("keyData"),function(){d("key",this.key)})}function n(){for(var e=proboards.data("keyData"),t=[],i=0;i<e.length;++i)t.push({text:e[i].key,value:e[i].key});return t}function o(e,t){if(void 0==t&&(t={}),void 0==m[e]&&(m[e]=0),!(m[e]>=1&&"board"!=e&&"category"!=e&&"js"!=e||m[e]>=2&&"board"!=e&&"category"!=e)){++m[e];var i=e+"-"+(void 0!=t.id?t.id:"new"+m[e]),t=t||{},a={board:"Board Header &amp; Footer",category:"Category Header &amp; Footer",css:"CSS "+proboards.help_icon_plain({title:"CSS code entered here will be placed in a CSS file, and does not need to be surrounded by style tags."}),global:"Global Header &amp; Footer",js:"Javascript "+proboards.help_icon_plain({title:"Javascript code entered here will be placed in a JS file, and does not need to be surrounded by script tags."}),main:"Main Header &amp; Footer"},n=a[e]+("undefined"!=typeof t.title?": "+t.title:""),o=$('<div class="component-wrapper space-bot" id="'+i+'"><div class="headings item"><h4>'+n+'</h4><span class="delete"><span>Delete</span></span></div><table class="component-container"></table></div>');if("board"==e||"category"==e){var r=t.name||"",s=t.description||"";o.find(".component-container").append('<tr class="input"><td><label>Name</label><input type="text" name="name" /></td></tr><tr class="input"><td><label>Description</label><input type="text" name="description" /></td></tr>'),$('input[name="name"]',o).val(r),$('input[name="description"]',o).val(s)}else(m[e]>=2||"js"!=e)&&$("#add-component-controls ."+e).addClass("inactive");var l=t.header||"",d=t.footer||"";"css"!=e&&"js"!=e?o.find(".component-container").append('<tr class="tab-menu"><td><ul class="tabs"><li class="component-header"><a href="javascript:void(0);">Header</a></li><li class="component-footer"><a href="javascript:void(0);">Footer</a></li></ul></td></tr><tr class="admin-content"><td class="content-container containers"><div class="component-header"><textarea name="'+i+'-header" class="content-html"></textarea></div><div class="component-footer"><textarea name="'+i+'-footer" class="content-html"></textarea></div></td></tr>'):o.find(".component-container").append('<tr class="admin-content"><td class="content-container containers"><textarea class="cssjs-header content-'+e+'" name="'+i+'-header"></textarea></td></tr>'),$("#components-"+e).append(o);var c=$('textarea[name="'+i+'-header"]',o).val(l),u=$('textarea[name="'+i+'-footer"]',o).val(d);c.length&&c.data("editor",proboards.code_editor({textarea:c,mode:"css"==e||"js"==e?e:"html"})),u.length&&($(".tab-menu .component-header a",o).click(),u.data("editor",proboards.code_editor({textarea:u}))),$('input[name="name"]',o).bind("change",Settings.fields.components.show),Settings.fields.components.show(),"css"!=e&&"js"!=e||$("img.help-icon").tipTip({defaultPosition:"top"})}}function r(){var e=[];return $(".component-wrapper").each(function(){var t=$(".containers > textarea, .containers > * > textarea",this),i=(t.data("editor"),t.eq(0).attr("name").split("-")),a=i[0],n=i[1],o=t.eq(0).data("editor").getValue(),r={type:a,id:n,header:o};2==t.length&&(r.footer=t.eq(1).data("editor").getValue(),"board"!=a&&"category"!=a||(r.name=$('input[name="name"]',this).val(),r.description=$('input[name="description"]',this).val())),e.push(r)}),e}function s(){var e=r();proboards.data("components",e);var t=$(".save-components");proboards.saving(t,!0),proboards.ajax({url:proboards.data("component_save_url"),data:{components:e},success:function(e){for(var t in e.new_ids)$('textarea[name|="'+t+'"]').each(function(){var i=e.new_ids[t];$(this).attr("name",$(this).attr("name").replace(/^(.+?)\-(.+?)\-(.+?)$/,"$1-"+i+"-$3"))});proboards.plugin.settings.size_warning(e.size)},complete:function(e,i){proboards.saving(t,!1,i)}})}function l(){$(".CodeMirror").live("focus blur",function(){"undefined"!=typeof $(this).data("editor")&&(f=$($(this).data("editor").getTextArea()),action=f.hasClass("content-css")?"hide":"show",$("#plugin-assistant .insertion-box")[action](),$("#plugin-assistant #insert-variable")[action]())}),$("#plugin-assistant .insertion-box > ul > li").live("click",function(){h&&h.removeClass("selected"),h=$(this).addClass("selected")});var e=function(e){if(!h||!f)return void proboards.error("Select a variable from the plugin assistant and click somewhere in a code box to insert.");var t=h.parent("ul").attr("class");"variables"===t&&(t="settings"),$.inArray(t,["images","settings","keys"])===-1&&(t="images");var i=$(f).attr("class").match(/content\-(\w+)/)[1],a=$.trim(h.html());if("css"!==i){var n;if("html"===i&&"keys"!=t)n="$[plugin."+t+"."+a+"]";else if("js"===i||"keys"==t){var o=$('#plugin-editor input[name="code_name"]').val();n="pb.plugin."+("keys"===t?"key('"+a+"').get()":"get('"+o+"')."+t+"."+a)}f.data("editor").replaceSelection(n),$(this).is("button")?(h.removeClass("selected"),h=null):e.preventDefault()}};$("#insert-variable","#plugin-assistant").click(e),$(".insertion-box > ul > li","#plugin-assistant").live("dblclick",e),$(".component-wrapper .tabs li").live("click",function(){var e=$(this).attr("class");e.match(/(component-(?:[a-z-]+))/);var t="."+RegExp.$1,i=$(this).parentsUntil(".component-wrapper").parent(".component-wrapper");return i.find(".tabs").children().removeClass("active"),$(this).addClass("active"),i.find(".containers").children().removeClass("active").addClass("hide"),i.find(".containers "+t).addClass("active").removeClass("hide"),!1}),$(".component-wrapper .delete").live("click",function(){var e=$(this).parents(".component-wrapper"),t=function(){$("#components-container").trigger("change");var t=e.attr("id").match(/^(.+?)\-/)[1];$("#add-component-controls ."+t).removeClass("inactive"),--m[t],e.remove(),Settings.fields.components.show()};return""!==e.find("textarea:first").data("editor").getValue()?proboards.confirm("Are you sure you wish to delete this component?",t):t(),!1}),$("#add-component-controls div").click(function(){$("#components-container").trigger("change"),o($(this).attr("class").replace(/(\s*)inactive(\s*)/,""))}),$(".save-components").click(function(){return $("#components-container").trigger("submit"),s(),!1}),proboards.data("components")&&$.each(proboards.data("components"),function(){o(this.type,this)})}function d(e,t){var i=e+"-"+t;$("#"+i).length||($("#plugin-assistant ."+e+"s").append('<li id="'+i+'">'+t+"</li>").prev().show(),$("#plugin-assistant .insertion-utils").show())}function c(e,t){"undefined"!=typeof t?$("#"+e+"-"+t).remove():$("#plugin-assistant ."+e+"s").html(""),u()}function u(){var e=!1;$.each(["variable","image","key"],function(){var t=$("#plugin-assistant ."+this+"s");t.children().length?e=!0:t.prev().hide()}),e||$("#plugin-assistant .insertion-utils").hide()}var p={components:!1};$(document).ready(function(){$.tabinate({tabs:$(".ui-tabMenu .tabs"),content:$(".containers"),useHash:!0,callback:function(e){var t="components-container-tab"==e;t&&!p.components&&(l(),p.components=!0),$(".content-wrapper").toggleClass("components",t)}})}),$(document).ready(function(){var e=!1,i=$('textarea[name="development_log"]');$("#edit-development-log").click(function(){var t=$(this);return e?proboards.ajax({url:proboards.data("development_log_save_url"),data:{development_log:i.val()},success:function(){$('textarea[name="development_log"]').setStatus("saved",{position:"after"}),i.attr("disabled","disabled"),t.html("Edit")}}):(t.html("Save"),i.removeAttr("disabled")),e=!e,!1}),$("#add-development-log").click(function(){return proboards.dialog("add-development-log-dialog",{html:'<textarea id="add-development-log-input"></textarea>',title:"Development Log",width:330,buttons:{Add:function(){var e=$("#add-development-log-input").trimValue().val();if(""==e)$.inputError($("#add-development-log-input"),"Please enter a development log message to add.");else{var a=new Date,n=a.getUTCMonth()+1+"/"+a.getUTCDate()+"/"+a.getUTCFullYear()+" "+a.getUTCHours()+":"+(a.getUTCMinutes()<10?"0":"")+a.getUTCMinutes()+" GMT",o=t(proboards.data("user").name,n)+"\n"+e+(i.val()?"\n\n":"");i.val(o+i.val()),$("#add-development-log-dialog").dialog("close"),proboards.ajax({url:proboards.data("development_log_save_url"),data:{development_log:i.val()},success:function(){$('textarea[name="development_log"]').setStatus("saved",{position:"after"})}})}},Cancel:function(){$("#add-development-log-dialog").dialog("close")}}}),!1}),$('.plugin_autosave input[name="code_name"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave input[name="name"]').change(function(){$(".plugin-name").text($(this).val())}).autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave textarea[name="description"]').change(function(){
$('#editor-settings .about textarea[name="description"]').val($(this).val())}).autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave input[name^="version_"]').change(function(){$(this).closest("form").find('input[name="version"]').val($(this).closest("form").find('input[name="version_major"]').val()+"."+$(this).closest("form").find('input[name="version_minor"]').val()+"."+$(this).closest("form").find('input[name="version_revision"]').val()).trigger("change")}).trigger("change"),$('.plugin_autosave input[name="version"]').autoSubmit({url:proboards.data("plugin_save_url"),statusElement:$(".plugin_autosave .version-status"),instantUpdate:!0}),$('.plugin_autosave select[name="stage"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave textarea[name="change_log"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave input[name="help_link"]').autoSubmit({url:proboards.data("plugin_save_url")}),$('.plugin_autosave .content > input[name="developers"]').autoSubmit({url:proboards.data("plugin_save_url"),instantUpdate:!0,success:function(e){e.redirect&&(proboards.loading(!0),location.href=location.protocol+"//"+location.host+e.redirect)}}),$(".thumb input").change(function(){$(this).parent().next().show()}),$('select[name="plugin_manager"]').change(function(){window.location=$(this).val()});var a=$(".help_link");$('input[name="help_link"]').on("change",function(){var e=$(this).val();$.check_url(e)?a.attr("href",e).show():a.attr("href","#").hide()}).change()}),$(document).ready(function(){var e=0,t=function(e){$(e).nextAll().each(function(){var e=$(".row-number",this),t=parseInt(e.html())-1;e.html(t),$(this).toggleClass("even"),$(".key-input",this).attr("tabindex",2*t),$(".note-input",this).attr("tabindex",2*t+1)})},n=function(e,t){$(".status-box.error",t.item[0]).hide(),proboards.error(t.data.error)};$("#plugins-keys .list").autoform({createURL:proboards.data("key_create_url"),updateURL:proboards.data("key_update_url"),deleteURL:proboards.data("key_delete_url"),undelete:!1,fields:[["input",{name:"key",type:"text",size:32,maxlength:50,required:1}],["select",{name:"type"},proboards.data("keyTypes")],["input",{name:"note",type:"text",size:65,maxlength:256}]],dataID:"id",itemData:proboards.data("keyData"),check:function(e,t){var i=$(".key-input",t.item).trimValue().val();return""==i?["key","You must enter a key name."]:!!i.match(/^[A-z0-9_]+$/)||["key","A key name may only consist of letters, numbers, or underscores."]},checkDelete:function(e,t){if(!(""!=$(".key-input",t.item).trimValue().val()||$(t.item).hasClass("ui-autoform-new-item")&&$("select",t.item).data("changed")))return!0},onCreateItem:function(e,t){var i='<div class="row-number"></div>',a=($(t.item),$(".key-container",t.item)),n=$("select",t.item);a.before(i);var o=$("option",n),r=n.val();o.sort(function(e,t){return e.text==t.text?0:e.text>t.text?1:-1}),n.append(o).val(r),n.change(function(){$(this).data("changed",!0)})},onCreateNewItem:function(e,t){var i=$(t.item),a=parseInt($("#plugins-keys div.item:last").find(".row-number").html())+1;isNaN(a)&&(a=1),i.find(".row-number").html(a),a%2==0&&i.addClass("even")},onCreateExistingItem:function(t,i){proboards.data("keyData")[e++]},onCreate:function(e,t){c("key"),a()},onUpdate:function(e,t){c("key"),a()},onDelete:function(e,i){$(".row-number",i.item).html(""),t(i.item),a()},onCreateError:n,onUpdateError:n}),i(),$("#plugins-keys .list").setEven()});var h=null,f=null,m={},g=function(){var e=[];return $("#images-container .image-module:not(.new,.deleted)").each(function(){var t=$(this),i=t.attr("id").match(/\d+/)[0],a=$(".image img",t).attr("src"),n=$(".name .text",t).text();e.push({name:n,src:a,id:i})}),e};$(".image-module").live("module.delete module.update",function(e,t){c("image"),$(".image-module:not(.new,.deleted)",".image-modules").each(function(){d("image",$(".text",this).text())}),proboards.data("image_modules",g()),proboards.plugin.settings.size_warning(t.ajaxData.size)}),$(".image-module").live("module.delete",function(e,t){var t=proboards.image_module.get_data(this);$("#settings-pages ul.images .row-"+t.name).remove()}),$(".image-module").live("module.update",function(e,t){if("name"==t.type){var i="row-"+t.previous_name,a="row-"+t.name;$("#settings-pages ul.images ."+i).removeClass(i).addClass(a).find(".name a").text(t.name)}}),$(document).on("click","#editor-images-remove",function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to delete all plugin images?",function(){var e=[];$(".image-module").each(function(){var t=proboards.image_module.get_id($(this));"new"!=t.substr(0,3)&&e.push(t)}),e.length&&(proboards.loading(!0),proboards.ajax({url:proboards.data("image-module-reset-all-url"),success:function(e){proboards.image_module.apply_defaults(e.images,e),proboards.plugin.settings.size_warning(e.size)},complete:function(){proboards.loading(!1)}}))})}),Settings={pages:{add:function(e){var t=parseInt($("#settings-tab-add").prev().attr("id").match(/(\d+)/)[0])+1,i=$('<li id="settings-tab-'+t+'">'+e+"</li>");$("#settings-tab-add").before(i),$("#settings-pages").append('<div id="settings-page-'+t+'" style="display: none;" class="active"><div class="tab-settings"><label class="main-label">Tab Name</label><input name="name" value="'+proboards.escape_html(e)+'" /><a href="#">Delete Tab</a><span class="require-field">Require<input type="checkbox" checked="checked" />'+proboards.help_icon_plain({title:"Checking this box will require the user to set this setting before this plugin can be enabled."})+'</span></div><ul class="field-list"></ul></div>'),$("#settings-page-"+t+" .require-field input").change(function(){$(this).attr("checked","checked")}),$("#settings-page-"+t+" .tab-settings a").click(function(e){e.preventDefault();var i=function(){$("#settings-ui-container").trigger("change"),$("#settings-tab-"+t).prev().click(),$("#settings-tab-"+t).remove(),$("#settings-page-"+t).remove()};$("#settings-page-"+t).find('input[name="id"][value!=""],select[name="key"][value!=""]',parent).length?proboards.confirm("Are you sure you wish to delete this tab and all of the fields within it?",i):i()}),$("#settings-page-"+t+' .tab-settings input[name="name"]').bind("keyup keypress change",function(e){$("#settings-tab-"+t).text($(this).val())}),$("#settings-page-"+t+" .help-icon").tipTip();var a=$("#settings-page-"+t+" > ul.field-list");a.sortable({items:"> li",handle:".drag-handle",placeholder:"placeholder",axis:"y",start:function(e,t){$("> li.placeholder",a).height(t.item.outerHeight(!0)+"px")},stop:function(e,t){$("#settings-ui-container").trigger("change"),$(t.item).toggle().toggle(),a.setEven()}}),i.click()}},fields:{options:{"structure-title":{label:"Title Bar",inputs:[{type:"text",name:"text",placeholder:"Title Bar"}]},"structure-boldtext":{label:"Bold Text",inputs:[{type:"text",name:"text",placeholder:"Bold Text"}]},"structure-plaintext":{label:"Plain Text",inputs:[{type:"textarea",name:"text",placeholder:"Plain Text"}]},field:{label:"Field",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"},{type:"select",name:"validation",options:[{text:"Anything",value:"all"},{text:"Numbers Only",value:"number"},{text:"Alpha-numeric Only (A-Z, 0-9)",value:"alphanumeric"},{text:"Email Address",value:"email"},{text:"URL",value:"url"}]}]},textarea:{label:"Text<br />Area",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"}]},codebox:{label:"Code<br />Box",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"},{type:"select",name:"mode",options:[{text:"HTML",value:"html"},{text:"CSS",value:"css"},{text:"Javascript",value:"js"}]}]},color:{label:"Color Field",inputs:[{type:"text",label:"Field Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"text",label:"Description",name:"description"}]},selection:{label:"Selection",inputs:[{type:"text",label:"Option Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"select",label:"Option Type",name:"displaytype",options:[{text:"Selection Box",value:"select"},{text:"Checkboxes",value:"check"},{text:"Radio Buttons",value:"radio"}]},{type:"radio",label:"Multiple Answers",name:"multipleanswers",options:[{text:"Yes",value:1},{text:"No",value:0}],help:"Allows the user to select multiple answers"},{type:"text",label:"Description",name:"description"},{type:"multi",name:"options",fields:[{type:"text",label:"Name {i}",name:"option"},{type:"text",label:"Value {i}",name:"value"}]}]},search:{label:"Search",inputs:[{type:"text",label:"Search Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"select",label:"Search Type",name:"searchtype",options:[{text:"Members",value:"members"},{text:"Boards",value:"boards"},{text:"Categories",value:"categories"},{text:"Themes",value:"themes"},{text:"Groups",value:"groups"},{text:"Custom Pages",value:"pages"}]},{type:"radio",label:"Multiple Answers",name:"multipleanswers",options:[{text:"Yes",value:1},{text:"No",value:0}],help:"Allows the user to select multiple answers"},{type:"text",label:"Description",name:"description"}]},sortable:{label:"Sortable List",inputs:[{type:"text",label:"Select Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"radio",label:"Show Check Boxes",name:"checkboxes",options:[{text:"Yes",value:1},{text:"No",value:0}]},{type:"text",label:"Check Label",name:"checkbox_label"},{type:"text",label:"Description",name:"description"},{type:"multi",name:"items",fields:[{type:"text",label:"Name {i}",name:"label"},{type:"text",label:"Value {i}",name:"value"}]}]},images:{label:"Image Selector",inputs:[{type:"text",label:"Select Title",name:"label"},{type:"text",label:"Variable ID",name:"id"},{type:"radio",label:"Allow more than one image to be selected by the plugin user",name:"multipleanswers",options:[{text:"Yes",value:1},{text:"No",value:0}]},{type:"text",label:"Description",name:"description"},{type:"images",name:"images"}]},permissions:{label:"Key Perms.",inputs:[{type:"text",label:"Select Title",name:"label"},{type:"select_key",label:"Select Key",name:"key"},{type:"select",label:"Limit Access",name:"access",options:[{text:"Read",value:"read"},{text:"Write",value:"write"},{text:"Read + Write",value:"both"}]},{type:"text",label:"All Text",name:"everyone",help:'Enter a text description for allowing a user to modify all keys.  The default is "Who can affect everything"'},{type:"text",label:"Creator Text",name:"self",help:'Enter a text description for allowing a user to modify keys for objects they own.  The default is "User can affect their own content"'},{type:"text",label:"Description",name:"description"}]},autoform:{label:"Auto Form",inputs:[{type:"text",label:"Autoform Title",name:"label"},{type:"select",label:"Format",name:"format",options:[{text:"Horizontal (Table)",value:"horizontal"},{text:"Vertical (Blocks)",value:"vertical"}]},{type:"text",label:"Variable ID",name:"id"},{type:"checkbox",label:'Prompt user "Are you sure?" when they delete auto form rows.',name:"promptOnDelete"}]}},add:function(e,t,i){function a(e,t){var i=$('<span class="input input-'+e.name+'"></span>');switch(e.type){case"text":var a=$('<input type="text" />').attr("name",e.name);i.append(a),e.label&&a.before("<label>"+e.label+"</label>"),e.placeholder&&a.attr("placeholder",e.placeholder),a.val(t);break;case"textarea":var a=$("<textarea></textarea>").attr("name",e.name);i.append(a),e.label&&a.before("<label>"+e.label+"</label>"),e.placeholder&&a.attr("placeholder",e.placeholder),a.val(t);break;case"radio":var o=$.unique_id(e.name);e.label&&i.append('<label class="field-label">'+e.label+"</label>");for(var r=0;r<e.options.length;r++){var s=$.unique_id(e.name),a=$('<input type="radio" />').attr("name",o).attr("id",s).val(e.options[r].value);i.append(a).append($('<label class="field-sub-label">'+e.options[r].text+"</label>").attr("for",s))}$('input[value="'+(void 0!=t?t:0)+'"]',i).attr("checked","checked");break;case"checkbox":var s=$.unique_id(e.name);i.append($('<input type="checkbox" class="field-checkbox" value="1" />').attr("name",e.name).prop("checked",t).attr("id",s)),e.label&&i.append('<label class="field-label checkbox-label">'+e.label+"</label>").attr("for",s);break;case"select_key":e.options=n(),e.className="select-key";case"select":for(var l=$("<select />").attr("name",e.name),r=0;r<e.options.length;r++)l.append($("<option></option>").val(e.options[r].value).text(e.options[r].text));i.append(l),e.className&&l.attr("class",e.className),e.label&&l.before("<label>"+e.label+"</label>"),l.val(t)}return i}var o=this;"object"!=typeof t&&(t={}),fieldOptions=$.extend({target:$("#settings-pages > div.active > .field-list")},i);var r=o.options[e],s=$('<li class="field field-'+e+'"><div class="main-label">'+r.label+'</div><div class="warning-message hide"></div><div class="fields"></div></li>').addClass(e);if("autoform"==e){var l=$('<ul class="field-list"></ul>'),d=$('<a href="#">Add Field</a>');l.sortable({items:"> li",axis:"y",handle:".drag-handle",placeholder:"placeholder",start:function(e,t){$("> li.placeholder",l).height(t.item.outerHeight(!0)+"px")},stop:function(e,t){$("#settings-ui-container").trigger("change"),$(t.item).toggle().toggle(),l.setEven()}}),d.click(function(e){e.preventDefault();var t=$("#settings-assistant > .add-field-controls:visible").clone();$(".autoform",t).remove(),$(".permissions",t).remove();var i=proboards.dialog("add-field",{title:"Add Form Field to Auto Form",html:t,width:390,height:245});$("li",t).click(function(){$("#settings-ui-container").trigger("change");var e=$(this).attr("class");Settings.fields.add(e,{},{target:l}),i.dialog("close")})}),s.append(l),s.append(d)}for(var c=0;c<r.inputs.length;c++){var u=r.inputs[c],p=void 0!=typeof t[u.name]?t[u.name]:"",h=null;if("multi"==u.type){var f=$.unique_id(u.name);row=$('<div class="row-template"></div>');for(var m=0;m<u.fields.length;++m){var g=$.extend({},u.fields[m]);row.append(a(g))}h=$('<span class="input multi-'+u.name+'" id="'+f+'"></span>').append(row),h.autoRow(p)}else if("images"==u.type){var f=$.unique_id(u.name);if(h=$('<span class="input images-'+u.name+'" id="'+f+'"><ul class="images"></ul><a href="#">Add More</a></span>'),$("a",h).click(function(e){e.preventDefault(),Settings.fields.images.dialog(h)}),$.isArray(p)){for(var v=[],b=0;b<p.length;++b)v.push(p[b].name);h.data("selected",v),Settings.fields.images.list(h);for(var b=0;b<p.length;++b)$(".row-"+p[b].name+' input[name="value"]',h).val(p[b].value)}else Settings.fields.images.list(h)}else h=a(u,p);s.find(".fields").append(h),u.help&&h.append(proboards.help_icon(proboards.escape_html(u.help)))}s.find(".fields").append('<div class="clear-left"></div>'),s.append('<div class="plugin-required" title="Make this field required before this plugin can be enabled."><input type="checkbox" value="1" name="required" /></div><div class="plugin-drag drag-handle" title="click and drag to reorder"></div><div class="plugin-delete delete"><span></span></div>'),t.required&&$('.plugin-required input[name="required"]',s).attr("checked","checked"),$(".plugin-delete",s).click(function(){var e=$(this).closest("ul.field-list"),t=$(this).closest("li.field"),i=function(){t.remove(),e.setEven(),$("#settings-ui-container").trigger("change")};$('input[type="text"][value!=""],textarea[value!=""]',t).length?proboards.confirm("Are you sure you wish to remove this field?",i):i()}),"selection"==e&&$("select",s).change(function(){var e=$(".input-multipleanswers input",s);"radio"==$(this).val()?($('.input-multipleanswers input[type="radio"][value="0"]',s).attr("checked","checked"),e.attr("disabled","disabled")):e.removeAttr("disabled")}).change();var _=$('input[name="id"]',s),y=$('input[name="label"]',s);if(_.length&&y.length&&""===_.trimValue().val()){var A=function(){var e=y.val();e=e.replace(/ /g,"_"),e=e.replace(/[^a-zA-Z0-9_]+/g,""),e=e.toLowerCase(),_.val(e)};y.bind("keyup change",A),_.bind("change",function(){y.unbind("keyup change",A)})}return fieldOptions.target.append(s).setEven(),s},images:{list:function(e){var t=proboards.data("image_modules"),i=e.data("selected")||[];if($(".row",e).each(function(){var e=$(this).attr("class").match(/row-(\w+)/)[1];$.inArray(e,i)==-1&&$(this).remove()}),null!=t)for(var a=0;a<t.length;++a)if($.inArray(t[a].name,i)!=-1){var n=$(".row-"+t[a].name,e);if(n.length)$("ul.images",e).append(n);else{var o=$('<li class="row row-'+proboards.escape_html(t[a].name)+'"><span class="input input-name"><label>Image <span class="index"></span></label><span class="name"><a href="#">'+proboards.escape_html(t[a].name)+'</a></span></span><span class="input input-value"><label>Label <span class="index"></span></label><input type="text" name="value" /><div class="delete"><span></span></div></span><div class="clear-left"></div></li>');$("ul.images",e).append(o),$("a",o).click(function(e){e.preventDefault();var t=$(this).parents("li.row");Settings.fields.images.display(t.parent().parent(),t.attr("class").match(/row-(\w+)/)[1])}),$(".delete",o).click(function(e){e.preventDefault();var t=$(this).parents("li.row");Settings.fields.images.remove(t.parent().parent(),t.attr("class").match(/row-(\w+)/)[1])})}}var r=0;$(".row",e).each(function(){$(".index",this).html(++r)})},display:function(e,t){for(var i=proboards.data("image_modules"),a=0;a<i.length;++a)if(i[a].name==t)return void proboards.image_preview(i[a].src)},remove:function(e,t){var i=e.data("selected");i.splice($.inArray(t,i),1),e.data("selected",i),Settings.fields.images.list(e)},dialog:function(e){var t=proboards.data("image_modules"),i=e.data("selected"),a=[];if(null!=t)for(var n=0;n<t.length;++n)a.push({label:"<span>"+proboards.escape_html(t[n].name)+'</span><img src="'+proboards.escape_html(t[n].src)+'" />',value:t[n].name});proboards.select_dialog({title:"Select Images",id:"image-select-dialog",options:a,selected:i,labelTextType:"html",onComplete:function(t){e.data("selected",t),Settings.fields.images.list(e)}})}},components:{show:function(){var e=$("#plugin-editor ul.component-list");$("> li.component",e).remove();var t=r();$.each(t,function(){if("board"==this.type||"category"==this.type){var t=this,i=$('<li class="component field"><div class="label">'+proboards.capitalize(t.type)+' Selection</div><div class="label help">'+proboards.escape_html(t.name)+'</div><button>Edit</button><div class="clear-left"></div></li>');""!=t.description&&$(".help",i).after(proboards.help_icon(proboards.escape_html(t.description))),e.append(i),$("button",i).click(function(e){e.preventDefault(),$('.tab-menu ul.tabs li a[href="#components-container"]').click(),document.getElementById(t.type+"-"+t.id).scrollIntoView({behavior:"smooth"})})}}),$("> li",e).removeClass("even"),$("> li:even",e).addClass("even")}},"export":function(){var e={pages:[]},t=function(e){var i=e.attr("class").match(/field\-(.+?)(\s|$)+/);if(i&&void 0!=Settings.fields.options[i[1]]){for(var a=Settings.fields.options[i[1]],n={type:i[1],required:$('.plugin-required input[name="required"]',e).is(":checked")},o=0;o<a.inputs.length;++o){var r=a.inputs[o];if("multi"==r.type){for(var s=[],l=$(".input.multi-"+r.name,e),d=[],c=0;c<r.fields.length;++c)d.push(r.fields[c].name);$(">*:not(.row-template)",l).each(function(){for(var e=$(this),t={},i=!1,a=0;a<d.length;++a)t[d[a]]=$('*[name="'+d[a]+'"]',e).val(),""!=t[d[a]]&&(i=!0);i&&s.push(t)}),n[r.name]=s}else if("images"==r.type){var u=[],p=$(".input.images-"+r.name,e);$("ul.images > li",p).each(function(){u.push({name:$(this).attr("class").match(/row-(\w+)/)[1],value:$('input[name="value"]',this).val()})}),n[r.name]=u}else"radio"==r.type?n[r.name]=$(".input-"+r.name+" input:checked",e).val():"checkbox"==r.type?n[r.name]=$('input[name="'+r.name+'"]',e).is(":checked"):n[r.name]=$('*[name="'+r.name+'"]',e).val()}return"permissions"==n.type&&(n.id="_permissions_"+n.key),"autoform"==n.type&&(n.fields=[],$("ul.field-list > .field",e).each(function(){var e=t($(this));n!==!1&&n.fields.push(e)})),n}return!1};return $("#settings-pages > div:not(:first)").each(function(){var i=$(this),a={name:$('.tab-settings input[name="name"]',i).val(),fields:[]};$("> ul.field-list > .field",i).each(function(){var e=t($(this));e!==!1&&a.fields.push(e)}),e.pages.push(a)}),e},get_full_id:function(e){var t=$(e).closest(".field").parent().closest(".field-autoform"),i=$(e).val();return t.length?$('> .fields input[name="id"]',t).val()+"."+i:i},validate:function(e){var t=[],i={},a={},n='#settings-pages input[name="id"], #settings-pages select[name="key"]';return $("#settings-pages .warning-message").hide(),$("#settings-tabs .warning").removeClass("warning"),$(n).each(function(){var e=Settings.fields.get_full_id(this);"SELECT"===this.nodeName?("undefined"==typeof a[e]&&(a[e]=0),++a[e]):("undefined"==typeof i[e]&&(i[e]=0),++i[e])}),$(n).each(function(){var e=$(this).closest(".field"),n=$("> .main-label",e).text(),o=[],r=$(this).val(),s=Settings.fields.get_full_id(this);if("SELECT"===this.nodeName?a[s]>1&&o.push(s+" has multiple permission selectors which will cause conflicts."):""===r?o.push(n+" is missing a variable identifier."):i[s]>1&&o.push(s+" is used as an identifier in multiple fields which will cause conflicts."),o.length){var l=$("> .warning-message",e),d=$(this).closest("#settings-pages > *").prevAll().length;$("#settings-tabs > *").eq(d).addClass("warning");l.show().text(o.join("<br />"));for(var c=0;c<o.length;++c)t.push(o[c])}}),$("li.field-sortable").each(function(){var e={};$('input[name="value"]:visible',this).each(function(){var i=$(this).val();if(e[i]){var a="Sortable list values must be unique to function properly.  Please rename or remove any duplicate values from the list.",n=$(this).closest(".field");t.push(a);var o=$("> .warning-message",n),r=$(this).closest("#settings-pages > *").prevAll().length;$("#settings-tabs > *").eq(r).addClass("warning");o.show().text(a)}e[i]=!0})}),t},"import":function(e){$.isPlainObject(e)||(e={}),$.isArray(e.pages)||(e.pages=[]);for(var t=0;t<e.pages.length;++t){var i=e.pages[t];Settings.pages.add(i.name);for(var a=0;a<i.fields.length;++a){var n=i.fields[a],o=Settings.fields.add(n.type,n);if("autoform"==n.type&&$.isArray(n.fields))for(var r=0;r<n.fields.length;++r){var s=n.fields[r];Settings.fields.add(s.type,s,{target:$(".field-list",o)})}}}},update_component_assistant:function(){c("variable"),$('input[name="id"]').each(function(){var e=Settings.fields.get_full_id(this);""===e||e.match(/^\.|\.$/)||d("variable",e)})}}};var v=[];$(document).ready(function(){function e(){$('input[name="mode"]').val("new"),$('input[type="file"]').val(""),$('.export_tags, input[name="authorize"]').removeAttr("checked"),$(".preview_image, .or_text").hide(),$(".thumb td").removeClass("active_selection"),$(".primary.thumb .upload_box").addClass("active_selection"),$(".secondary.thumb .none_button").addClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".secondary.thumb, .thumb_container, .tag_container").show()}function t(){$('input[name="mode"]').val("update"),$('input[type="file"]').val(""),$('.export_tags, input[name="replacing"], input[name="authorize"]').removeAttr("checked"),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".preview_image, .or_text").show(),$(".thumb_container, .tag_container").hide()}function i(){$(".export_tags:checked").length>5?proboards.error("Error: Too many tags selected."):5==$(".export_tags:checked").length?$(".export_tags").not(":checked").attr("disabled","disabled"):$(".export_tags").removeAttr("disabled"),$(".tag_container").show()}function a(e){$(".thumbs .thumb").addClass("whiteout"),$(".thumbs .thumb .preview_image").empty(),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$.each(e,function(e){$("#thumb_"+this.order+" .preview_image").addClass("active_selection").html('<img src="'+proboards.data("library_upload_path")+"/"+this.thumb_url+'" alt="thumb_'+this.order+'" />').show().parent().removeClass("whiteout").show(),$('input[name="thumb_choice_'+this.order+'"]').val(1)}),$(".loading_gif").hide(),$(".thumb_container").show()}$("#settings-builder ul.tabs li").live("click",function(){$("#settings-builder ul.tabs li").removeClass("active"),$(this).addClass("active"),$("#settings-pages > div").removeClass("active").hide(),$("#"+$(this).attr("id").replace(/tab/,"page")).addClass("active").show(),$("#settings-assistant")["settings-tab-0"==$(this).attr("id")?"hide":"show"]()}),$("li#settings-tab-add").bind("click",function(e){e.stopImmediatePropagation(),Settings.pages.add("New Tab")}),$("#settings-assistant li").click(function(){if(!$("#settings-tab-0").is(".active")){var e=$(this).attr("class");Settings.fields.add(e),$("#settings-ui-container").trigger("change")}}),$('input:visible[type="text"]').live("keydown",function(e){if(e.which==Keys.backspace&&""==$(this).val()){e.stopPropagation(),e.preventDefault();var t=this,i=null,a=!1;$('input:visible[type="text"]').each(function(){a||($(this).is(t)&&(null!=i&&$(i).focus(),a=!0),i=this)})}}),proboards.data("image_modules",g()),Settings.fields.components.show(),$('#settings-pages .about textarea[name="description"]').change(function(){$('#editor-manage textarea[name="description"]').val($(this).val()).keydown()}),$('#editor-manage textarea[name="description"]').change(function(){$('#settings-pages .about textarea[name="description"]').val($(this).val())}),proboards.form.confirm_ignore_changes("#components-container, #settings-ui-container");var n={};$("#settings-save-button").click(function(){var e=Settings.fields.validate(),t=this;proboards.saving(t,!0),$(".text",this)[(e.length?"add":"remove")+"Class"]("warning");var i=Settings.fields["export"]();i.defaults=n,proboards.ajax({url:proboards.data("settings_save_url"),data:{settings:JSON.stringify(i)},success:function(e){proboards.plugin.settings.requirement_warning(e),$("#settings-save-button").setStatus("saved",{position:"after"})},complete:function(e,i){proboards.saving(t,!1,i),$("#settings-ui-container").trigger("submit"),Settings.fields.update_component_assistant()}})});var o;if($("#settings-preview-button").click(function(){$("#settings-builder").hide(),$("#settings-preview").html('<div class="settings-tabs"></div><div class="settings-pages"></div>'),o=Settings.fields["export"]();var e=(proboards.plugin.settings.render({container:$("#settings-preview > .settings-pages"),tabContainer:$("#settings-preview > .settings-tabs"),settings:o,data:n,preview:!0}),$("#settings-tabs .active").prevAll().length);$("#settings-preview .settings-tabs .tabs > li > a").eq(e).click(),$("#settings-preview").show(),$("#settings-preview-button").hide(),$("#settings-build-save-button").show(),$("#settings-build-cancel-button").show(),$("#settings-save-button").hide(),proboards.plugin.settings.resizeAutoforms()}),$("#settings-build-save-button,#settings-build-cancel-button").click(function(){var e=proboards.plugin.settings["export"]({container:$("#settings-preview > .settings-pages"),settings:o,defaults:!0});if(n=e.settings_data,e.message.unsaveable.length){var t=$('<span class="warning-message tab-ignore" />');t.text('The following fields contained data that could not be saved: "'+e.message.unsaveable.join('", "')+'"'),$("#plugin-editor").prepend(t),setTimeout(function(){t.slideUp()},5e3)}$("#settings-builder").show(),$("#settings-preview").hide(),$("#settings-preview-button").show(),$("#settings-build-save-button").hide(),$("#settings-build-cancel-button").hide(),$("#settings-save-button").show();var i=$("#settings-preview .settings-tabs .tabs .ui-active").prevAll().length;$("#settings-tabs > li").eq(i).click(),$(window).trigger("resize"),$(this).is("#settings-build-save-button")&&$("#settings-save-button").click()}),$("#settings-build-save-button").hide(),$("#settings-build-cancel-button").hide(),proboards.data("settings-ui")){var r=$.parseJSON(proboards.data("settings-ui"));r&&("object"==typeof r.defaults&&(n=r.defaults),Settings.fields["import"](r),$("#settings-tab-0").click())}$("#export-container form").bind("submit",function(e){e.stopPropagation(),e.stopImmediatePropagation()}),$("#select_computer").click(function(){$("#computer_container").show(),$("#select_export_option").hide(),$('input[name="mode"]').val("computer")}),$("#select_library").click(function(){$("#library_container").show(),$("#select_export_option").hide()}),$(".back_button").click(function(e){e.preventDefault(),$(".export_plugin_containers").hide(),$("#select_export_option").show()}),$("#select_new").click(function(){$("#update_container").hide(),$("#library_container_2").show(),$("#select_export_option_2").hide(),e()}),$("#select_update").click(function(){$("#update_container").show(),$("#library_container_2").show(),$("#select_export_option_2").hide(),t()}),$(".back_button_2").click(function(e){e.preventDefault(),$(".export_plugin_containers").hide(),$("#library_container").hide(),$("#select_export_option").show()}),$(".back_button_3").click(function(e){e.preventDefault(),$(".export_plugin_containers").hide(),$("#select_export_option_2").show()}),$('input[name="replacing"]').change(function(){var e=$(this).val();$(".thumb_container").hide().after(proboards.processing_icon({alt:"preview_loading","class":"loading_gif"})),$("input.export_tags").prop("checked",!1);for(var t=proboards.data("tags")[e],n=0;n<t.length;n++)$('input[name="'+t[n]["class"]+'"]').prop("checked",!0);i(),$('input[type="file"]').val(""),"undefined"==typeof v[e]?proboards.ajax({url:proboards.route("plugin_editor_get_thumbs",{plugin_id:e}),success:function(t){v[e]=t.thumbs,a(v[e])}}):a(v[e])}),$(".export_tags").change(function(){i()}),$(".thumbs td").click(function(){($(this).hasClass("preview_image")&&!$(this).parent().hasClass("whiteout")||$(this).hasClass("upload_box")||$(this).hasClass("none_button"))&&($(this).addClass("active_selection"),$(this).siblings().removeClass("active_selection"),$(this).parent().find('input[type="hidden"]').val($(this).data("val")))}),$('#library_container_2 input[name="export"]').click(function(e){return"update"==$('input[name="mode"]').val()&&"undefined"==typeof $('input[name="replacing"]:checked').val()?(proboards.error("You must select a plugin to replace."),e.preventDefault(),!1):"new"!=$('input[name="mode"]').val()||$('input[name="thumb_1"]').val()?!!$('input[name="authorize"]').prop("checked")||(proboards.error("You must authorize this plugin before you can export it."),e.preventDefault(),!1):(proboards.error("You must select at least one screenshot to upload with this plugin before you can export it."),e.preventDefault(),!1)}),$(document).bind("keydown",function(e){var t=$(".tab-menu ul.tabs li.ui-active a").attr("href");e.ctrlKey&&e.which==Keys.s&&(e.preventDefault(),e.stopPropagation(),"#components"==t?$(".save-components:first").click():"#settings-ui"==t&&$("#settings-save-button").click())}),proboards.plugin.settings.requirement_warning(proboards.data("plugin_requirements")),proboards.plugin.settings.size_warning(proboards.data("plugin_size")),u(this),Settings.fields.update_component_assistant()})},admin_plugins_plugin_settings=function(){$(document).ready(function(){var t=$.parseJSON(proboards.data("settings-ui"))||[],i=proboards.data("settings-data"),a=proboards.data("component_map");i=""!=i&&"{}"!=i?$.parseJSON(i)||{}:"object"==typeof t.defaults?t.defaults:{},"object"!=typeof i&&(i={}),"object"!=typeof a&&(a={}),proboards.plugin.settings.render({container:$("#plugin-settings"),tabContainer:$("#plugin-setting-tabs"),useTabHash:!0,settings:t,data:i,component_map:a}),proboards.form.confirm_ignore_changes("#plugin-settings"),$('select[name="plugin_manager"]').change(function(){window.location=$(this).val()}),$("#plugin-settings-save").click(function(e){e.preventDefault(),
proboards.loading(".admin-content",!0);var i=proboards.plugin.settings["export"]({container:$("#plugin-settings"),settings:t});proboards.ajax({url:proboards.data("plugins_settings_save_url"),data:{settings_data:JSON.stringify(i.settings_data),component_map:i.component_map},success:function(e){$("#plugin-settings-save").setStatus("saved",{position:"after"}),proboards.plugin.settings.requirement_warning(e),$("#plugin-settings").trigger("submit").removeClass("unsaved")},complete:function(){proboards.loading(".admin-content",!1)}})}),proboards.plugin.settings.requirement_warning(proboards.data("plugin_requirements")),$(".rate_button").on("click",function(){proboards.ajax({url:proboards.data("rate_dialog_url"),success:function(t){"undefined"==typeof t.review&&(t.review={score:0,comments:""}),$("#rate-dialog textarea").val(t.review.comments);var i=t.review.score;e("#rate-dialog .star_rating",i),$("#rate-dialog .stars .star").on("click",function(){i=$(this).data("star"),e("#rate-dialog .star_rating",i)}),proboards.dialog("rate-dialog",{width:550,height:400,title:"Rate Forum Plugin",buttons:[{text:"Submit",id:"rate-submit-button",click:function(){proboards.ajax({url:proboards.data("rate_plugin_url"),data:{score:i,comments:$("#rate-dialog textarea").val()},complete:function(){proboards.alert("Plugin Rated","Thank you for rating this plugin."),$("#rate-dialog").dialog("close")}})}}]}).dialog("open").show()}})})});var e=function(e,t){var i=100-t/5*100;i<100?$(e).css("left","-"+i+"px").parent().css("opacity","1"):$(e).css("left","-100px").parent().css("opacity",".5")}},admin_plugins_plugin_settings_transfer=function(){$(document).ready(function(){$('select[name="key_option"]').change(function(e){1==$(this).val()?$(".keys_transfer_options").addClass("key_update").removeClass("key_reset"):2==$(this).val()?$(".keys_transfer_options").addClass("key_reset").removeClass("key_update"):$(".keys_transfer_options").removeClass("key_reset").removeClass("key_update"),$(this).val()>0&&$('input[name="key_choice"]:checked').length>0?$("#key_choice_next").removeAttr("disabled"):$("#key_choice_next").attr("disabled","disabled")}),$('input[name="key_choice"]').change(function(e){$(".key_choice").removeClass("current_choice"),$('select[name="key_option"]').val()>0?($("#key_choice_next").removeAttr("disabled"),$(this).parent().addClass("current_choice")):$("#key_choice_next").attr("disabled","disabled")}),$("#cancel_install").click(function(e){e.preventDefault(),proboards.instapost(proboards.data("no_install_url"))}),$("#key_choice_next").click(function(e){e.preventDefault(),$(".keys_transfer_options").hide(),$(".settings_transfer_options").show()}),$("#settings_transfer_back_1").click(function(e){e.preventDefault(),$(".keys_transfer_options").show(),$(".settings_transfer_options, .settings_transfer_form").hide()}),$("#settings_transfer_yes").click(function(e){e.preventDefault(),$(".settings_transfer_options").hide(),$(".settings_transfer_form").show(),$('input[name="transfer_settings"]').val(1)}),$("#settings_transfer_back_2").click(function(e){e.preventDefault(),$(".settings_transfer_options").show(),$(".settings_transfer_form").hide(),$('input[name="transfer_settings"]').val(0)}),$('select[name="plugin_choice"]').change(function(e){$(this).val()>0?$('input[type="submit"]').removeAttr("disabled"):$('input[type="submit"]').attr("disabled","disabled")})})},admin_security_ban=function(){$(document).ready(function(){for(var e=proboards.data("locale_settings"),t=24==e.input_time_format,i=$("#banned-members > div.ui-autoform > div.list"),a=function(e,t){var a,n,o,r=$("input.global_id-input:first",t.item),s=$("input.can_ip-input:first",t.item),l=$("input.ip-input:first",t.item);"undefined"!=typeof t.data?(a=t.data.global_id,n=t.data.can_ip,o=t.data.ip,r.val(a),s.val(n),l.val(o)):(a=r.val(),n=s.val(),o=l.val()),i.autoform("ignoreChange",t.item.attr("id"),l);var d="";switch(a){case"1":d=$("<span>Banned </span>").append($('<a href="#">(Remove)</a>').click(function(e){return e.preventDefault(),r.val("2-"+Math.random()),r.change(),!1}));break;case"2":d=$("<span>Ban Global ID? </span>").append($('<a href="#">(Ban)</a>').click(function(e){return e.preventDefault(),r.val("1-"+Math.random()),r.change(),!1}))}$("span.global_id-visible:first",t.item).html(d);var c=$("span.ip-visible:first",t.item);""!=$.trim($("input.user_name-input:first",t.item).val())?(l.hide(),d=""!=$.trim(l.val())?$("<span>"+o+" </span>").append($('<a href="#">(Remove)</a>').click(function(e){return e.preventDefault(),l.val(""),l.change(),!1})):n?$("<span>Ban IP? </span>").append($('<a href="#">(Ban)</a>').click(function(e){return e.preventDefault(),l.val(1),l.change(),!1})):"",c.html(d),c.show()):(l.show(),c.hide())},n=function(e,t){var i=$("input.expire_date-input:first",t.item).val(),a=$("input.expire_time-input:first",t.item).val();if(""!=i){var n=proboards.time.createDate(i,a);if(null==n)return;var o=proboards.time.dateToUTCTimestamp(n);t.settings.expire_date_utc=o}},o=proboards.data("bans"),r=0;r<o.length;r++)if(""!=o[r].expire){var s=proboards.time.createDate(o[r].expire,o[r].expire_time,{utc:!0}),l=proboards.time.dateToString(s,{dateFormat:e.input_date_format,military:t});o[r].expire_date=l.date,o[r].expire_time=l.time_no_pad}proboards.data("bans",o);var d="time";t&&(d+=" military");var c=[["input",{name:"user_name",type:"text",size:32}],["input",{name:"global_id",type:"hidden"}],["input",{name:"can_ip",type:"hidden"}],["input",{name:"ip",type:"text",size:32}],["input",{name:"expire_date",type:"text",size:12,"class":"date"}],["input",{name:"expire_time",type:"text",size:8,"class":d}],["input",{name:"note",type:"text",size:32}]];proboards.data("is_enterprise")&&c.splice(1,1),i.autoform({createURL:proboards.route("create_member_ban"),updateURL:proboards.route("update_member_ban"),deleteURL:proboards.route("delete_member_ban"),fields:c,dataID:"id",undelete:!1,itemData:o,headers:$("#banned-members .headings"),check:function(e,t,i){void 0===i&&(i=!1);for(var a=t.item,n=$.trim($("input.user_name-input:first",a).val()),o=$.trim($("input.ip-input:first",a).val()),r=$(this).children(".item"),s=r.length,l=0;l<s;++l){var d=r[l];if(!$(d).hasClass("header")&&!$(d).hasClass("state-deleted")&&d!==a[0]){var c=$.trim($("input.user_name-input:first",d).val());if(""!=c&&n==c)return["user_name","The user '"+n+"' is already banned."]}}return""!=n||""!=o||"1"==$("input.global_id-input:first",t.item).val().substr(0,1)||["user_name","You must enter either a username, or an IP address."]},checkDelete:function(e,t){if(""==$.trim($("input.user_name-input:first",t.item).val())&&""==$.trim($("input.ip-input:first",t.item).val())&&"1"!=$("input.global_id-input:first",t.item).val().substr(0,1))return!0},onCreateItem:function(e,t){function i(e){""!=$.trim(e.val())?o.show():o.val("").hide()}var n=$("input.expire_date-input:first",t.item).addClass("date"),o=$("input.expire_time-input:first",t.item);(!$.browser.msie||parseInt($.browser.version)>9)&&n.attr("placeholder","never"),n.on("change",function(){i($(this))}),i(n),$("input.global_id-input:first",t.item).after('<span class="global_id-visible"></span>'),$("input.ip-input:first",t.item).after('<span class="ip-visible"></span>'),a.call(this,e,t)},onCreate:a,onUpdate:a,onBeforeCreate:n,onBeforeUpdate:n})})},admin_security_forum_cleanup=function(){$(document).ready(function(){$('.form-spaced input[type="checkbox"]').change(function(){if("locate_posts"==$(this).attr("name")){var e=$('input[name="locate_threads"]').next("label");e.text(e.text().replace(/^And /,"")),"undefined"!=typeof $(this).attr("checked")&&e.text("And "+e.text());var t=$('input[name="locate_pms"]').next("label");t.html(t.html().replace(/^And /,"")),"undefined"==typeof $(this).attr("checked")&&"undefined"==typeof $('input[name="locate_threads"]').attr("checked")||t.html("And "+t.html())}else if("locate_threads"==$(this).attr("name")){var i=$('input[name="locate_pms"]').next("label");i.html(i.html().replace(/^And /,"")),"undefined"==typeof $(this).attr("checked")&&"undefined"==typeof $('input[name="locate_posts"]').attr("checked")||i.html("And "+i.html())}});var e=$('input[name="by"][value="user"]');$('div[id$="user_input-searchbox-container"]').insertAfter(e.next("label")),$('input[name="by"]').change(function(){var e=$(this).val();$(".user-search").parent().toggle("user"==e),$('input[name="ip"]').toggle("ip"==e)}),$(".back-button").live("click",function(){$("#result-form").hide(),$("#find-form-container").show(),$('input[type="submit"]').removeAttr("disabled")}),$(".restart-button").live("click",function(){window.location.reload()});var t=$('input[name="by"][value="all"]');$('input[name="locate_pms"]').change(function(){$(this).prop("checked")?(t.prop("disabled",!0).next().css("color","#ddd"),t.prop("checked")&&e.prop("checked",!0).change()):t.prop("disabled",!1).next().css("color","#000")});var i=$("#board-listing");$('input[name="where"]').change(function(){"all"!=$(this).val()?i.show():i.hide()}),$(document).ready(function(){$('input[name="locate_posts"]').change(),$('input[name="locate_threads"]').change(),$('input[name="by"]:checked').change(),$('input[name="where"]:checked').change()});var a=function(){$("#find-form form").data("form")||setTimeout(a,500),$("#find-form form").form("option","submit",function(e){var t=[];$("input:checked",i).each(function(){t.push($(this).val())}),$('input[id$="where_input_radio_1"], #selected-boards').val(t.join(","));var a=$(this).serialize();return proboards.ajax({url:$(this).attr("action"),data:a,dataType:"html",success:function(e){$("#result-form").html(e),$("#result-form .back-button").show(),$("#find-form-container").hide(),$("#result-form").show(),$("#result-form form").bind("validated",function(e){proboards.ajax({url:$(this).attr("action"),data:a,dataType:"html",success:function(e){$("#result-form").html(e)},error:function(e){$("#result-form form input").attr("disabled",""),proboards.error(e)}}),$("#result-form form input").attr("disabled","disabled"),$("#result-form .back-button").hide(),$('#result-form form input[type="submit"]').val("Deleting, Please Wait"),$('#result-form form input[type="submit"]').progress_text(),$("#warning").hide()})},error:function(e){$('input[type="submit"]').prop("disabled",!1),proboards.error(e)}}),!1})};a()})},admin_security_reports_list=function(){$(document).ready(function(){new listManager("reports",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:{archived:proboards.data("lm_archived")}})})},on_discussion_change=void 0,admin_security_reports_show=function(){$(window).load(function(){$("#more-reasons").live("click",function(){return proboards.ajax({url:proboards.route("more_reasons"),data:{post_id:proboards.data("post_id"),more:proboards.data("more-reasons"),when:proboards.data("when-reasons"),user_id:proboards.data("user_id-reasons")},dataType:"json",success:function(e){proboards.data("more-reasons",e.more),proboards.data("when-reasons",e.when),proboards.data("user_id-reasons",e.user_id),$(".container.reasons .content").append(e.html),$("#more-reasons-container").remove(),$(".reason").removeClass("last")}}),!1}),$(".toggle_button").on("click",function(){$(this).toggleClass("collapsed"),$(this).closest(".container").children().not(".title-bar").slideToggle()}),$("#more-discussions").live("click",function(){return $("#discussions-link").remove(),proboards.ajax({url:proboards.route("more_discussions"),data:{post_id:proboards.data("post_id"),more:proboards.data("more-discussions"),last:proboards.data("last-discussions")},dataType:"json",success:function(e){proboards.data("more-discussions",e.more),proboards.data("last-discussions",e.last),$(".container.discussions .content").prepend(e.html),on_discussion_change()}}),!1}),$("#hide-discussion").bind("click",function(){return $(this).hasClass("showing")?($(this).removeClass("showing"),$(this).html("Show Discussion"),$(".container.discussions .content").hide()):($(this).addClass("showing"),$(this).html("Hide Discussion"),$(".container.discussions .content").show()),$(window).trigger("scroll"),!1}),$("form .no-action").bind("change",function(){$(this).attr("checked")?($("form .affected").addClass("greyed"),$("form input.affected").not(".member-only").attr("disabled","disabled"),$("form textarea.affected").not(".member-only").attr("disabled","disabled")):($("form .affected").removeClass("greyed"),$("form input.affected").not(".member-only").removeAttr("disabled"),$("form textarea.affected").not(".member-only").removeAttr("disabled"))}),$("form .no-action").attr("checked")&&($("form .affected").addClass("greyed"),$("form input.affected").attr("disabled","disabled"),$("form textarea.affected").attr("disabled","disabled")),$("form .disable-check").bind("change",function(){$("form .disable-affected").toggle()}),$("form .disable-check").attr("checked")&&$("form .disable-affected").toggle(),$("form .ban-check").bind("change",function(){$("form .ban-affected").toggle()}),$("form .ban-check").attr("checked")&&$("form .ban-affected").toggle(),on_discussion_change=function(){$(".container.discussions .change-me").each(function(){var e=/(^| )discussion-([0-9]+)($| )/,t=e.test($(this).attr("class"))?RegExp.$2:"";$(this).selectMenu({container:"#discussion-"+t+"-options",status:proboards.get_image({src:"/icon-options.png",alt:"Options",title:"Options"}),staticStatus:!0,beforeShow:function(){$(this).next().addClass("open-menu"),$(this).menu("showOption",t+"-edit"),$(this).menu("showOption",t+"-delete")},onClose:function(){$("#discussion-"+t+"-options").removeClass("open-menu")},menuOptions:{click:function(e,i){var a=$(i.item).attr("class");if(a==t+"-edit"){0==$("#edit-report-discussion").length&&($(document.body).append('<div id="edit-report-discussion"></div>'),proboards.dialog("edit-report-discussion",{autoOpen:!1,width:433,title:"Edit Discussion Comment"}));var n={id:t};$(".discussion-"+t+" #discussions-link").length>0&&(n={id:t,more:proboards.data("more-discussions")}),proboards.ajax({url:proboards.route("edit_report_discussion"),data:n,dataType:"html",success:function(e){$("#edit-report-discussion").html(e),$("#edit-report-discussion").dialog("open")}})}else a==t+"-delete"&&proboards.confirm("Are you sure you wish to delete this message?",function(){proboards.loading(!0),proboards.ajax({url:proboards.route("delete_report_discussion"),data:{id:t},dataType:"json",success:function(e){0!=$(".container.discussions .discussion-"+t+" #discussions-link").length&&$("#more-discussions").click(),$(".container.discussions .discussion-"+t).remove()},complete:function(){proboards.loading(!1)}})})}}});$(this).removeClass("change-me")}),$(".discussion-options").show()},$("img",".reported-post .content").each(function(){$(this).data("orig_size",$(this).width()),$(this).width("100%"),$(this).css("max-width","100%");var e=$(".reported-post .content").width()-30;e>$(this).data("orig_size")?$(this).width($(this).data("orig_size")):$(this).width("100%")}),$(window).bind("scroll resize",function(){var e=$(".reported-post .content").width()-30;$("img",".reported-post .content").each(function(){"undefined"!=typeof $(this).data("orig_size")&&(e>$(this).data("orig_size")?$(this).width($(this).data("orig_size")):$(this).width("100%"))}),$("#slide-container").width("auto"),$("#right-td-div").width("auto"),$("#right-td-div").width($("#right-td").width()),$("#slide-container").width($("#right-td-div").width());var t={left:$("#right-td-div").offset().left,top:$("#right-td-div").offset().top+$(".reported-user").innerHeight()}||{left:0,top:0},i=$("#left-td-div").offset().top+$("#left-td-div").height();$("#left-td-div").height()<$("#right-td-div").height()||$(".container.reported-user").offset().top+$(".container.reported-user").height()>=$("#slide-container").offset().top?($("#right-td-div").css("position","relative"),$("#slide-container").css({top:0,left:0,position:"relative"})):$(this).scrollTop()+100+$("#slide-container").height()>=i?($("#right-td-div").css("position","absolute"),$("#slide-container").css({top:$("#left-td").height()-$("#slide-container").height(),left:0,position:"absolute"})):$(this).scrollTop()>=t.top-100?($("#right-td-div").css("position","relative"),$("#slide-container").css({top:100,left:t.left,position:"fixed"})):($("#right-td-div").css("position","relative"),$("#slide-container").css({top:0,left:0,position:"relative"}))}),$("#immediate-action-link").bind("click",function(){return $(this).remove(),$("#immediate-actions").slideDown(200),!1}),$("#move-post-link").bind("click",function(){var e=[proboards.data("post_id")];if(0==e.length)return!1;var t=document.createElement("form");t.setAttribute("method","POST"),t.setAttribute("action",proboards.route("move_reported_post"));var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name","selection"),i.setAttribute("value",e.join(",")),t.appendChild(i);var a=document.createElement("input");return a.setAttribute("type","hidden"),a.setAttribute("name","type"),a.setAttribute("value","move_post_selected"),t.appendChild(a),document.body.appendChild(t),t.submit(),!1}),$("#move-thread-link").bind("click",function(){var e=[proboards.data("thread_id")],t="Move Thread",i={},a=function(){proboards.ajax({url:proboards.route("thread_move"),data:$("#move-threads-container form").serialize()+($('input[name="move_message"]').serialize()?"&"+$('input[name="move_message"]').serialize():"")+($('input[name="send_user_pm"]').serialize()?"&"+$('input[name="send_user_pm"]').serialize():""),dataType:"json",success:function(e){$(".discussions .content").append(e.discussion_html),"undefined"!=typeof e.pm_dialog?(proboards.dialog("move-threads-container",{title:"Send PM",height:340,buttons:{"Send PM":function(){proboards.ajax({url:proboards.route("thread_move_pm"),data:$("#move-threads-container form").serialize(),dataType:"json",success:function(){n(e),proboards.dialog("move-threads-container",{title:t,height:420,buttons:i})}})}}}),$("#move-threads-container").html(e.pm_dialog)):n(e)}})},n=function(e){$("#move-threads-container").dialog("close")};return i[t]=a,$("#move-threads-container").length||($(document.body).append('<div id="move-threads-container"></div>'),proboards.dialog("move-threads-container",{autoOpen:!1,width:620,height:420,title:t,buttons:i})),proboards.ajax({url:proboards.route("thread_move_dialog"),dataType:"html",data:{"thread_ids[]":e,type:self.type},success:function(e){$("#move-threads-container").html(e);var t=$("#move-threads-container").nextAll(".ui-dialog-buttonpane");t.children(".button-text").remove(),t.prepend($("#move-threads-container .button-text")),$("#move-threads-container").dialog("open")}}),!1}),$("#lock-thread-link").bind("click",function(){var e=this,t="";return $(this).hasClass("lock")?t+="lock":$(this).hasClass("unlock")&&(t+="unlock"),proboards.ajax({url:proboards.route("mark_threads",{type:t}),data:{"ids[]":[proboards.data("thread_id")]},success:function(t){$(e).hasClass("lock")?($(e).removeClass("lock"),$(e).addClass("unlock"),$(e).html("Unlock Thread")):($(e).removeClass("unlock"),$(e).addClass("lock"),$(e).html("Lock Thread")),$(".discussions .content").append(t.discussion_html)}}),!1}),$("#delete-post-link").bind("click",function(){var e=[proboards.data("post_id")],t="posts";return 0!=e.length&&(proboards.confirm_dialog(t,"delete",e,function(e){$("#move-post-link, #delete-post-link").remove(),$(".discussions .content").append(e.discussion_html)}),!1)}),$("#delete-thread-link").bind("click",function(){var e=[proboards.data("thread_id")],t="threads";return 0!=e.length&&(proboards.confirm_dialog(t,"delete",e,function(e){$(".immediate-action-container").remove(),$(".discussions .content").append(e.discussion_html)}),!1)}),$("#ban-user-link").bind("click",function(){return proboards.member.ban({id:proboards.data("user_id-ban"),checked:["ip","user_name","global_id"],from:{type:"reported_post",id:proboards.data("post_id")},success:function(e){$(".container.resolution #resolution-string").html(e.resolution_list)}}),!1}),1==$('input[name="account_disabled"]').val()&&$('input[name="account_disabled"]').attr("checked")&&$("#account-disabled-until-when").show(),$('input[name="account_disabled"]').bind("change",function(){1==$(this).val()&&$(this).attr("checked")||0==$(this).val()&&!$(this).attr("checked")?$("#account-disabled-until-when").show():$("#account-disabled-until-when").hide()}),$("#show-report.is-guest .member-only input").addClass("member-only"),$("#show-report.is-guest .member-only textarea").addClass("member-only"),$("#show-report.is-guest input.member-only").attr("disabled","disabled"),$("#show-report.is-guest textarea.member-only").attr("disabled","disabled"),on_discussion_change(),$(".report-reply form").submit(function(){proboards.saving($('input[type="submit"]',this),!0)}),proboards.data("saved")&&$('.report-reply form input[type="submit"]').setStatus("saved",{position:"after"})})},admin_security_security_log=function(){$(document).ready(function(){security_log.bind_ban_links(),security_log.setup_list_manager()})},security_log={bind_ban_links:function(){$(".security_logs").on("click",".security-log.item .ip",function(){var e=$(this),t=e.parent("tr"),i=0;null!=t.attr("id")&&(i=t.attr("id").substr(5));var a=0;1==$(".user a",t).length&&(userClass=$(".user a",t).attr("class"),userClass.match(/user-(\d+)/)&&(a=RegExp.$1)),i&&a&&proboards.member.ban({id:a,from:{id:i,type:"security_log"},checked:["ip"]})})},setup_list_manager:function(){var e="undefined"!=typeof proboards.data("lm_data")&&null!=proboards.data("lm_data")?proboards.data("lm_data"):{};listMan=new listManager("security_logs",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:e})}},admin_settings_censored_words=function(){$(document).ready(function(){$(".this-input").live("focusin",function(){var e=this;$(document).bind("keydown.this-field",function(t){13==t.which&&$(e).parent().next().children(".that-input").focus()})}),$(".this-input").live("focusout",function(){$(document).unbind("keydown.this-field")}),$(".that-input").live("focusin",function(){var e=this;$(document).bind("keydown.that-field",function(t){13==t.which&&$(e).parent().parent().next().find(".this-input").focus()})}),$(".that-input").live("focusout",function(){$(document).unbind("keydown.that-field")}),$("#censored-words .list").autoform({createURL:proboards.data("create_url"),updateURL:proboards.data("update_url"),deleteURL:proboards.data("delete_url"),fields:[["input",{name:"this",type:"text",size:32,maxlength:250}],["input",{name:"that",type:"text",size:32,maxlength:1024}],["input",{name:"exact",type:"checkbox",value:1}]],dataID:"id",itemData:proboards.data("itemData"),headers:$("#censored-words .headings"),check:function(e,t,i){if(void 0===i&&(i=0),""==$(".this-input",t.item).val())return["this","The censored word field is required."];for(var a=$(this).children(".item"),n=a.length,o=0;o<n;++o)if(1==i){if(!$(a[o]).hasClass("header")&&!$(a[o]).hasClass("state-deleted")&&a[o]!==t.item[0]&&!$(a[o]).hasClass("state-error")){if($(".this-input",a[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already censored."];if($(".that-input",a[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already a replacement."]}}else if(!$(a[o]).hasClass("header")&&!$(a[o]).hasClass("state-deleted")&&a[o]!==t.item[0]){if($(".this-input",a[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already censored."];if($(".that-input",a[o]).val()==$(".this-input",t.item).val())return["this","The word `"+$(".this-input",t.item).val()+"` is already a replacement."]}return!0},checkDelete:function(e,t){if(""==$(".this-input",t.item).val()&&""==$(".that-input",t.item).val()&&!$(".exact-input",t.item).attr("checked"))return!0}})})},admin_settings_file_storage=function(){$(document).ready(function(){$(".storage-attachments .cancel-plan").on("click",function(e){e.preventDefault(),$('input[name="verify"]').val(""),proboards.loading(!0),proboards.ajax({url:proboards.data("cancel_dialog_url"),complete:function(){proboards.loading(!1)},success:function(e){proboards.dialog("cancel-plan-dialog",{modal:!0,width:450,title:"Change Storage",buttons:{"Cancel My Plan":function(){return"cancel"!=$('input[name="verify"]').val().toLowerCase()?void $.inputError($('input[name="verify"]'),'You must type "cancel" in the box.'):(proboards.loading(!0),void proboards.ajax({url:proboards.data("cancel_plan_url"),data:$("#cancel-plan-dialog form").serializeArray(),success:function(e){$(".button.change-storage").text("Increase Storage"),$(".storage-attachments .cancel-plan").unbind("click"),$(".storage-attachments .cancel-plan").removeClass("cancel-plan");var t=e.plan_details;$(".storage-attachments .usage-container .plan-name").text(t.plan_name),$(".storage-attachments .usage-container .size-max").text(t.size_max),$(".storage-attachments .usage-container .per-post-max").text(t.per_post_max),$(".storage-attachments .usage-container .bandwidth-max").text(t.bandwidth_max),$(".storage-attachments .graph-container .usage-max").text("/"+t.usage_max),$(".storage-attachments .graph-container .meter").css("width",t.usage_percent+"%"),proboards.alert("Your storage plan has been canceled."+(e.refunded?"  You have been refunded "+e.refunded+".  Please allow up to 72 hours for the refund transaction to be processed.":""))},complete:function(){$("#cancel-plan-dialog").dialog("close"),proboards.loading(!1)}}))},Close:function(){$("#cancel-plan-dialog").dialog("close")}},html:e.html}),$("#cancel-plan-dialog form").on("submit",function(e){return e.preventDefault(),!1})}})}),$(".attachments-list .delete").on("click",function(e){e.preventDefault();var t=$(this),i=$("td.file-name a",t.closest("tr")).html(),a=$("td.checkbox input",t.closest("tr")).val();proboards.confirm("Are you sure you want to delete the attachment '"+i+"'?",function(){proboards.ajax({url:t.attr("href"),data:{ids:[a]},success:function(e){t.closest("tr").remove(),$("table.attachments-list tbody").setEven(),$(".storage-attachments .graph-container .usage").text(e.usage),$(".storage-attachments .graph-container .meter").css("width",e.usage_percent+"%")}})})});var e=function(){$(".delete-attachments").prop("disabled",0==$(".attachments-list td.checkbox input:checked").length)};$(".attachments-list td.checkbox input").on("change",e),e(),$(".delete-attachments").on("click",function(t){var i=$(".attachments-list td.checkbox input:checked").length;proboards.confirm("Are you sure you want to delete "+(1==i?"this attachment?":"these "+i+" attachments?"),function(){proboards.ajax({url:proboards.data("delete_attachments_url"),data:$("form").serializeArray(),success:function(t){for(var i=0;i<t.deleted_ids.length;i++)$('input[name="ids[]"][value="'+t.deleted_ids[i]+'"]').closest("tr").remove();$("table.attachments-list tbody").setEven(),e(),$(".storage-attachments .graph-container .usage").text(t.usage),$(".storage-attachments .graph-container .meter").css("width",t.usage_percent+"%")}})})}),$('select[name!="attachments_permissions_level"]').each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})}),fileStorage.pluginStoreLink()})},fileStorage={pluginStoreLink:function(){var e=$("#plugin-store-link-dialog");e.dialog({autoOpen:!1,width:550,title:"Plugin Store Link"}),$(".plugin-store-link").on("click",function(t){t.preventDefault(),e.dialog("open"),$("input",e).on("click",function(){t.preventDefault(),this.select()}).select()})}},admin_settings_navigation=function(){var e=function(e,t){if(t&&(e=t.item),"undefined"!=typeof e&&e.length){var i=$(e).closest("li");i.setStatus("saved")}var a=[];$("#navigation-item-container > li").each(function(){var e=$(this),t=$('input[name="name"]',e),i=$('input[name="desktop"]',e),n=$('input[name="mobile"]',e),o={id:e.attr("id").substr(2),name:t.val()};if(o.desktop=i.is(":checked")?1:0,o.mobile=n.is(":checked")?1:0,e.is(".custom")){var r=$('input[name="url"]',this);o.url=r.val()==r.attr("placeholder")&&r.hasClass("placeholder")?"":r.val(),o.permissions=$.parseJSON($('input[name="permissions"]',this).val()),o.theme_ids=$.parseJSON($('input[name="theme_ids"]',this).val())}(o.name||o.url)&&a.push(o)}),proboards.ajax({url:proboards.data("save_url"),data:{data:JSON.stringify(a)}})};$(document).ready(function(){$("#navigation-item-container").sortable({handle:".drag-handle",stop:e}),$("#navigation-item-container li").each(function(){var t=$(this);$("input",t).autoSubmit({send:e,statusElement:$(".status-box",t)})}),$("#navigation-add-custom").click(function(i){i.preventDefault();var a=$("#navigation-item-container"),n=($("> li:first",a),$('<li class="item custom">\n<span class="checkbox-wrapper"><input type="checkbox" name="desktop" checked="checked" /></span>\n<span class="checkbox-wrapper"><input type="checkbox" name="mobile" checked="checked" /></span>\n<span class="input-wrapper"><input type="text" name="name" value="" /></span>\n<span class="input-wrapper"><input type="text" name="url" value="" placeholder="http://" /></span>\n<div class="navigation-permissions">\n<button>Edit</button>\n<span class="permissions-summary">\n</span><span class="themes-summary">\n</span><input name="permissions" type="hidden" value="" />\n<input name="theme_ids" type="hidden" value="" />\n</div>\n<span class="drag-handle" title="click and drag to reorder"></span>\n<span class="delete"><span></span></span>\n<span class="status-box"></span>\n</li>')),o=0;a.find("li.custom").each(function(){var e=$(this).attr("id").substr(2);$.isNumeric(e)&&parseInt(e)>=o&&(o=parseInt(e)+1)}),n.attr("id","n-"+o),$("input",n).autoSubmit({send:e,statusElement:$(".status-box",n)}),t.apply(n),a.append(n)}),$("#navigation-item-container").on("click",".custom > .delete",function(){$(this).closest("li").remove(),e()}),$("#navigation-customization .content-container a").click(function(e){e.preventDefault(),proboards.confirm("Are you sure you want to reset the navigation menu to default?",function(){proboards.instapost(proboards.data("reset_url"))})});var t=function(){var e=$(this),t=(e.attr("id").match(/\d+/)[0],$.parseJSON(e.find('input[name="permissions"]').val())||{});t=$.isPlainObject(t)?t:{};var i=$.parseJSON(e.find('input[name="theme_ids"]').val())||[];i=$.isArray(i)&&i.length?i.length:"All",e.find(".navigation-permissions .themes-summary").text(i),e.find(".navigation-permissions .permissions-summary").attr("class","permissions-summary level-"+(t.level||0))};$("#navigation-item-container").on("click",".navigation-permissions button",function(e){e.preventDefault();var i=$(this).closest(".item"),a=i.find('input[name="theme_ids"]'),n=i.find('input[name="permissions"]'),o=$.parseJSON(a.val())||[],r=$.parseJSON(n.val())||{},s=proboards.data("theme_selection");i.attr("id").match(/\d+/)[0];if($.isArray(o)||(o=[]),!o.length)for(var l=0;l<s.length;++l)o.push(s[l].value);var d=this,c=proboards.select_dialog({title:"Permissions",options:s,selected:o,id:"navigation-permissions-dialog",width:455,onComplete:function(e){e.length==s.length&&(e=[]),a.val(JSON.stringify(e));var o={},r={};$("input, select","#navigation-permissions-dialog .permissions").each(function(){var e=$(this).val(),t=$(this).attr("name");"permissions_include_groups"!=t&&"permissions_exclude_groups"!=t||(e=e.split(",")),r[t]=e,o[t.match(/^.+?_(.+)$/)[1]]=e}),n.val(JSON.stringify(o)),t.apply($(d).closest(".item")),i.find('input[name="desktop"]').change()}});c.prepend("<span>The button will only be applied to the following themes:</span>"),c.prepend(proboards.permissions.selection({action:"[b]view[/b] this button",values:r}))}),$("#navigation-item-container .item.custom").each(t)})},admin_settings_news=function(){$(document).ready(function(){
$(".option select").each(function(){$(this).autoSubmit({url:proboards.route("update_settings"),statusElement:$(this).closest(".option").find(".status-box")})}),$("#explicit").on("keydown",".headline-input",function(e){e.which==Keys.enter&&$(this).closest("li.item").next().find(".headline-input").focus()}),$("#news .list").autoform({createURL:proboards.route("create_news"),updateURL:proboards.route("update_news"),deleteURL:proboards.route("delete_news"),fields:[["input",{name:"headline",type:"text",size:100,maxlength:200}],["input",{name:"displayed",type:"checkbox"}]],dataID:"id",itemData:proboards.data("itemData"),check:function(e,t,i){return""!=$(".headline-input",t.item).val()||["headline","This field is required."]},checkDelete:function(e,t){if(""==$(".headline-input",t.item).val())return!0},sortable:!0,sortableSelector:".list.sortable",updateOrderURL:proboards.route("update_news_order")});var e=$('select[name="news_data_source"]'),t=$('input[name="news_dynamic_board"]'),i=$("#select-board-status"),a=$("#dynamic"),n=$("#explicit");e.on("change pageload",function(){var t="dynamic"==e.val();a.toggle(t),n.toggle(!t)}).trigger("pageload");var o={display:"inline"};i.loadingStatus({loadingClass:"saved",loadingCss:o,successClass:"saved",successCss:o,successText:"Saved!",errorCss:o});var r=i.data("loadingStatus");t.on("click",function(){proboards.board.select(function(e,i){r.setStatus("loading"),proboards.ajax({url:proboards.route("update_settings"),data:{news_dynamic_board_id:e},success:function(){t.val(i),r.setStatus("success")},error:function(e){r.setStatus("error",e.error)}})},{useExisting:!0,mimicGuest:!0})})})},admin_settings_reserved_names=function(){$(document).ready(function(){$(".name-input").live("focusin",function(){var e=this;$(document).bind("keydown.name-field",function(t){13==t.which&&$(e).parent().parent().next().find(".name-input").focus()})}),$(".name-input").live("focusout",function(){$(document).unbind("keydown.name-field")}),$("#reserved-names .list").autoform({createURL:proboards.data("create_url"),updateURL:proboards.data("update_url"),deleteURL:proboards.data("delete_url"),fields:[["input",{name:"name",type:"text",size:32}]],dataID:"id",itemData:proboards.data("itemData"),check:function(e,t,i){if(void 0===i&&(i=0),""==$(".name-input",t.item).val())return["name","The reserved name field is required."];for(var a=$(this).children(".item"),n=a.length,o=0;o<n;++o)if(1==i){if(!$(a[o]).hasClass("header")&&!$(a[o]).hasClass("state-deleted")&&a[o]!==t.item[0]&&!$(a[o]).hasClass("state-error")&&$(".name-input",a[o]).val()==$(".name-input",t.item).val())return["name","The word `"+$(".name-input",t.item).val()+"` is already reserved."]}else if(!$(a[o]).hasClass("header")&&!$(a[o]).hasClass("state-deleted")&&a[o]!==t.item[0]&&$(".name-input",a[o]).val()==$(".name-input",t.item).val())return["name","The word `"+$(".name-input",t.item).val()+"` is already reserved."];return!0},checkDelete:function(e,t){if(""==$(".name-input",t.item).val())return!0}})})},admin_settings_shoutbox=function(){$(document).ready(function(){$("#admin-shoutbox form").submit(function(){return!1}),0==$(".shoutbox-enabled select").val()&&$(".shoutbox_container").addClass("fade"),$('select, form input[name="welcome_message"], form input[name="height"]').each(function(){$(this).autoSubmit({url:proboards.data("settings_update_url"),statusElement:$(this).closest(".option").find(".status-box"),success:function(e){var t=$(this).attr("name");if("guest_posting_enabled"!=t){var i=$(".shoutbox_container:first");$.browser.msie&&7==parseInt($.browser.version)?(i.hide(),$(".shoutbox").replaceWith(e.shoutbox),proboards.shoutbox.init(e.shoutbox_init),"enabled"==t&&i.toggleClass("fade"),i.show()):i.slideUp(800,"swing",function(){$(".shoutbox").replaceWith(e.shoutbox),proboards.shoutbox.init(e.shoutbox_init),"enabled"==t&&i.toggleClass("fade"),i.slideDown(800,"swing")})}}})});var e=$("#clear-shouts");e.on("click",function(){var t=$(".shoutbox_container .content");if(0!=$(".shoutbox-post",t).length){e.prop("disabled",!0);var i=t.overlay();proboards.ajax({url:proboards.data("clear_shouts_url"),success:function(e){$(".shoutbox_messages",t).html(e.html)},complete:function(){e.prop("disabled",!1),i.remove()}})}})})},admin_structure_category_board=function(){$(document).ready(function(){proboards.preload(proboards.data("movement_images")),proboards.form.confirm_ignore_changes($(document)),$(".control-area .new_category").click(function(e){open_dialog("create","cat")}),$(".control-area .new_board").click(function(e){open_dialog("create","board")}),$(".control-area .edit_properties").click(function(e){open_dialog("edit")}),$(".control-area .duplicate").click(function(e){var t=$(tree.selected_arr[0]).attr("id").split("_");proboards.ajax({url:proboards.route("category_board_duplicate"),data:{id:t[1],type:t[0]},success:function(e){dialog_success(e),page_changed()}})}),tree=$.tree.create(),tree.init("#tree-container > .tree",{data:{type:"json",opts:{"static":proboards.data("category_board_data")}},rules:{multiple:"ctrl",createat:"top"},ui:{theme_name:"boards",dots:!1},types:{cat:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1},selected:0},board:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1},selected:0}},callback:{onchange:function(e,t){0==t.settings.types.cat.selected&&0==t.settings.types.board.selected?($(".control-area .edit_properties").hide(),$(".control-area .duplicate").hide()):1==t.settings.types.cat.selected||1==t.settings.types.board.selected?($(".control-area .edit_properties").css("display","inline"),$(".control-area .duplicate").css("display","inline")):($(".control-area .edit_properties").css("display","inline"),$(".control-area .duplicate").hide())},onselect:function(e,t,i){var a=t.get_type(e),n=t.selected_arr.length-1;if("cat"==a&&t.settings.types.board.selected>0||"board"==a&&t.settings.types.cat.selected>0){for(var o=0;o<n;o++)t.deselect_branch(t.selected_arr[0]);t.settings.types.board.selected=0}t.settings.types[t.get_type(e)].selected++},ondeselect:function(e,t){t.settings.types[t.get_type(e)].selected--},onmove:function(e,t,i,a,n){$(e).addClass("processing"),$(t).addClass("processing");var o=[];$.isArray(e)?$.each(e,function(){o.push($(this).attr("id"))}):o.push(e.id),proboards.ajax({url:proboards.route("category_board_reorder"),data:{tree:JSON.stringify(a.get()),node_ids:o},success:function(i){$(e).removeClass("processing"),$(t).removeClass("processing"),page_changed()},error:function(i){$(e).removeClass("processing"),$(t).removeClass("processing"),$.tree.rollback(n),proboards.error(i.error)}})},check_move:function(e,t,i,a){return t=$(t)[0].parentNode,!$(e).hasClass("board")||!$(t).hasClass("cat")||"inside"==i},onrename:function(e,t,i){tree_add_leaf_controls(e)},ondblclk:function(e,t){var i=$(e).attr("id").split("_");open_dialog("edit",i[0],{ids:[i[1]]})}}}),$("#tree-container .tree ul li").each(function(){tree_add_leaf_controls(this)})})},open_dialog=function(e,t,i){if(proboards.loading(!0),"undefined"==typeof i&&(i={ids:[]},"edit"==e))for(var a=0;a<tree.selected_arr.length;a++)i.ids.push($(tree.selected_arr[a]).attr("id").split("_")[1]);if("cat"==t)i.name="Category";else if("board"==t)i.name="Board";else if(tree.settings.types.cat.selected>0)t="cat",i.name="Category";else{if(!(tree.settings.types.board.selected>0))return proboards.loading(!1),!1;t="board",i.name="Board"}var n="",o="";if("create"==e)n=e.charAt(0).toUpperCase()+e.slice(1)+" New "+i.name,o="Create "+i.name;else{if("edit"!=e)return proboards.loading(!1),!1;n=e.charAt(0).toUpperCase()+e.slice(1)+" "+i.name+" Properties",o="Save Changes"}proboards.ajax({url:proboards.route("category_board_"+t+"_dialog"),data:{ids:i.ids,parent_type:i.parent_type,parent_id:i.parent_id},dataType:"json",success:function(e){function a(e,t){1==$(e).val()?$(t).show():$(t).hide()}e.content||(e.content="");proboards.dialog("dialog_settings",{html:e.content,title:n,width:700,resizable:!1,buttons:[{text:o,click:function(){var e=this;$('#dialog_settings form input[name="ids"]').val(i.ids);var a=$('input[name="board_id"]:checked').val();if("undefined"!=typeof a){var n=a,o="board";if(a.indexOf("cat")!=-1){var r=a.split("_");n=r[1],o=r[0]}$('#dialog_settings form input[name="parent_id"]').val(n),$('#dialog_settings form input[name="parent_type"]').val(o)}return $('input[name="name"]').length>0&&""==$('input[name="name"]').val()?("board"==t?proboards.error("You must enter a board name.  Click on the About tab to pick a board name."):proboards.error("You must enter a category name."),proboards.loading(!1),!1):$('input[name="board_id"]').length>0&&1!=$('input[name="board_id"]:checked').length?(proboards.error("You must pick a board location.  Click on the Location tab to pick a board location."),proboards.loading(!1),!1):($("input[placeholder], textarea[placeholder]","#dialog_settings form").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.hasClass("placeholder")&&e.val("")}),proboards.loading(!0),void proboards.ajax({url:$("#dialog_settings form").attr("action"),data:$("#dialog_settings form").serialize(),dataType:"json",success:function(a){if(1==i.ids.length){var n=tree.get_node($("#"+t+"_"+i.ids[0])),o=n.find("> a > span.small.note"),r=n.find("> a > ins.description");n.find("> a > ins.description").remove(),tree.rename(n,$('#dialog_settings form input[name="name"]').val()),r.text($('#dialog_settings form textarea[name="description"]').val()),n.children("a").append(r).append(o)}dialog_success(a),$(e).dialog("close"),page_changed()},complete:function(){proboards.loading(!1)}}))}}],close:function(e){proboards.unsaved_changes=0}});$('#dialog_settings form input[name="redirect"]').on("blur",function(){var e=$(this).val(),t=$('#dialog_settings form input[name="password"]'),i=$.trim(e).length>0;t.prop("disabled",i)}),$('#dialog_settings form input[name="redirect"]').trigger("blur"),$("#dialog_settings form").submit(function(e){e.preventDefault()}),$("#board_dialog .ui-tabMenu li").click(function(e){e.preventDefault(),$("#board_dialog .ui-tabMenu li").removeClass("ui-active"),$(this).addClass("ui-active"),$("#content_area > div").hide();var t=$(this).attr("id").split("_")[1];$("#content_"+t).show()}),a($(".hidden_board_toggle input:checked"),".hidden_board_url"),$(".hidden_board_toggle input").click(function(){a(this,".hidden_board_url")}),$('.private_board_toggle input[name="private_threads"]').click(function(){for(var e=1==$(this).val(),t=["permissions_create_threads_level","permissions_reply_to_threads_level","permissions_create_polls_level"],i=0;i<t.length;i++){var a=$('select[name="'+t[i]+'"]',"#board_dialog");e?$('option[value="0"]',a).remove():0==$('option[value="0"]',a).length&&$(a).prepend('<option value="0">Everyone</option>')}e?$(".private_board_container").show():$(".private_board_container").hide()}),$(".private_board_toggle input:checked").trigger("click"),$(".thread_label_div .list").autoform({doNotSave:!0,fields:[["input",{name:"tl-name",type:"text",required:1,maxlength:40}],["input",{name:"tl-color",type:"text",maxlength:6}],["input",{name:"tl-permissions_accessible",type:"hidden"}],["input",{name:"tl-permissions_viewable",type:"hidden"}]],itemData:proboards.data("threadLabels"),undelete:!1,onCreateItem:function(e,t){$(".tl-color-input",t.item).parent().after('<div class="label_preview">test</div>'),$(".tl-name-input",t.item).parent().after('<div><span class="button permissions_button">Permissions</span></div>'),$(".tl-color-input",t.item).colorPickMe({update:function(e){$(".label_preview",t.item).css("color","#"+e)}}),$(".label_preview",t.item).text($(".tl-name-input",t.item).val()),""==$(".tl-color-input",t.item).val()&&$(".tl-color-input",t.item).val("000000");var i=$(".tl-color-input",t.item).val();$(".color-picker-preview",t.item).css("background-color","#"+i),$(".label_preview",t.item).attr("style","color: #"+i+";"),$(".tl-name-input",t.item).change(function(){$(".label_preview",t.item).text($(this).val())}),""==$(".tl-permissions_accessible-input",t.item).val()&&$(".tl-permissions_accessible-input",t.item).val("{}"),""==$(".tl-permissions_viewable-input",t.item).val()&&$(".tl-permissions_viewable-input",t.item).val("{}");var a=proboards.permissions.selection({name:"viewable",values:jQuery.parseJSON($(".tl-permissions_viewable-input",t.item).val())||{},action:"[b]view[/b] the label"}),n=proboards.permissions.selection({name:"accessible",values:jQuery.parseJSON($(".tl-permissions_accessible-input",t.item).val())||{},action:"[b]apply[/b] the label"}),o=a.wrap("<div></div>").after("<br /><br />",n).parent();$(".permissions_button",t.item).click(function(e){return e.preventDefault(),proboards.dialog("permissions_dialog",{html:o,title:"Label Permissions",width:700,height:450,buttons:[{text:"Apply",click:function(){var e=this;$("#permissions_dialog .permissions").each(function(){var e={},i="";$("input, select",this).each(function(){i=$(this).attr("name").split("_")[0],""!=$(this).val()&&(e[$(this).attr("name").match(/^.+?_(.+)$/)[1]]=$(this).val())}),$(".tl-permissions_"+i+"-input",t.item).val(JSON.stringify(e))}),$(e).dialog("close")}}]}),proboards.loading(!1),!1})}}),$("img.help-icon, img.tiptipify").tipTip({defaultPosition:"top"})},complete:function(){proboards.loading(!1)}})},dialog_success=function(e){var t;if("duplicate"==e.mode)t=tree.create(e.data,"#"+e.type+"_"+e.ref_id,"before");else if("create"==e.mode)if("cat"==e.type)t=tree.create(e.data,-1);else{var i="#"+e.parent_type+"_"+e.parent_id;t=tree.create(e.data,i,"inside")}tree_add_leaf_controls(t)},tree_add_leaf_controls=function(e){e=$(e),e.draggable({helper:function(){return $("<img />")},containment:"parent"});var t=e.hasClass("cat")?"New Board":"New Sub-Board",i=e.hasClass("cat")?"Category":"Board";$("#"+e.attr("id")+" > a").append('<div id="controls_'+e.attr("id")+'" class="controls"><div class="edit"><div class="icon" title="Edit Properties"></div></div><div class="create"><div class="icon" title="'+t+'"></div></div><div class="permissions"><div class="icon"></div></div><div class="goto"><div class="icon" title="Go To '+i+'"></div></div><div class="delete"><div></div></div></div>'),$("#"+e.attr("id")+" > a").bind("mouseenter",function(e){$(".controls",this).show(),$("span.small.note",this).show(),$("ins.description",this).show()}),$("#"+e.attr("id")+" > a").bind("mouseleave",function(e){$(".controls",this).hide(),$("span.small.note",this).hide(),$("ins.description",this).hide()}),$("> a > .controls .create",e).click(function(e){var t=$(this).closest("li").attr("id").split("_");open_dialog("create","board",{parent_type:t[0],parent_id:t[1],ids:[]})}),$("> a > .controls .edit",e).click(function(e){var t=$(this).closest("li").attr("id").split("_");open_dialog("edit",t[0],{ids:[t[1]]})}),$("> a > .controls .goto",e).click(function(){var e=$(this).closest("li").attr("id").split("_"),t=e[1];"board"==e[0]?window.open(proboards.route("board",{board_id:t})):"cat"==e[0]&&window.open(proboards.route("home")+"#category-"+t)}),$("> a > .controls .delete",e).click(function(){proboards.dialog("delete-confirm-container",{autoOpen:!1,width:620,title:"Delete",buttons:[{text:"Delete",id:"action-button",click:function(){"DELETE"===$('input[name="verify"]').val().toUpperCase()&&$('input[name="acknowledge"]:checked').length>0?($("#action-button").button("disable").addClass("ui-state-disabled"),proboards.loading(!0),proboards.ajax({url:proboards.route("category_board_delete"),data:$("#delete-confirm-container form").serialize(),success:function(e){$("#delete-confirm-container").dialog("close"),tree.remove($("#"+e.type+"_"+e.id)),page_changed(),proboards.loading(!1)},error:function(e){$("#action-button").button("enable").removeClass("ui-state-disabled"),proboards.error(e.error),proboards.loading(!1)}})):"DELETE"!=$('input[name="verify"]').val().toUpperCase()?proboards.alert('Please type the word "Delete" into the verification text box first.'):proboards.alert("Please click the checkbox to acknowledge your understanding of this warning.")}}]}),$("#delete-confirm-container").dialog("open"),$("#delete-confirm-container").html('<div class="center pad-top-bottom-thick">'+proboards.processing_icon({alt:"Loading, "})+" Please Wait</div>"),$("#action-button").button("disable").addClass("ui-state-disabled"),proboards.ajax({url:proboards.route("category_board_delete_prompt"),data:{ids:e.attr("id").split("_")[1],type:tree.get_type(e)},datatype:"html",success:function(e){$("#delete-confirm-container").html(e),$("#action-button").button("enable").removeClass("ui-state-disabled"),$("#delete-confirm-container form").submit(function(e){e.preventDefault()})}})}),$(".controls .permissions").tipTip({content:function(e){var t=this,i=$(t).closest("li").attr("id"),a=i.split("_"),n=a[0];if("cat"==n?n="Category":"board"==n&&(n="Board"),i in cached_permissions)return permissions_html(a[1],n);var o=setTimeout(function(){proboards.ajax({url:proboards.route("category_board_permissions"),data:{id:a[1],type:n},success:function(t){cached_permissions[i]=1,e.content.html(permissions_html(a[1],n)),e.position()}})},1e3);return $(this).data("timeout",o),'<div class="tiptip_loading">'+proboards.processing_icon({alt:"Loading"})+"</div>"},exit:function(e){clearTimeout($(this).data("timeout"))}})},permissions_html=function(e,t){for(var i="To access this, you must meet all the requirements below: <br /><br />",a=proboards.data(t+"_"+e+"_hover"),n=a.length-1;n>-1;n--)i+="<b>"+a[n].name+"</b><br />",i+=a[n].permissions+"<br />";return i},cached_permissions={},page_changed=function(){cached_permissions={},$(document).trigger("submit")},admin_structure_custom_page_edit_html=function(){$(document).ready(function(){var e=$("#html"),t=$("#html-form"),i=($("save"),!!proboards.data("required_vars")),a=["head","header","footer"];i&&$(".var-section").first().attr("id","required");var n=proboards.code_editor({textarea:e,height:470,mode:"html",onChange:function(e,t){proboards.unsaved_changes=1,o(e)}}),o=function(e){$(".var-section, li",".var-list").show();var t=e.getValue(),n=t.match(/\$\[zone_\d+\]/g);if(n)for(var o=0;o<n.length;++o)$('.var-list a[alt="'+n[o]+'"]').parent().hide();if(i){for(var o=0;o<a.length;o++){var r=a[o],s=new RegExp("\\$\\["+r+"\\]"),l=s.test(t);l&&$('.var-list a[alt="$['+r+']"]').parent().hide()}0==$("#required ul li:visible").length&&$("#required").hide()}};o(n),$(t).on("submit",function(){var t=e.data("editor").getValue();if(i){if(1==$("#required:visible").length)return proboards.error("Unable to save. All of the 'Required' variables on the right side must be included in the HTML."),!1;var n=/((?:\$\[zone_\d+\])|(?:\$\[header\]))/;if(n.test(t),"$[header]"!=RegExp.$1)return proboards.error("Unable to save. The 'header' variable must be placed before all 'zone' variables."),!1}var o=/(\$\[zone_(?:1?[1-9]|10|20)\])/g,r=[];r=r.concat(t.match(o));for(var s=[],l=0;l<a.length;l++)s.push("\\$\\["+a[l]+"\\]");var d=new RegExp(s.join("|"),"g"),c=t.match(d)||[];if(i)r=r.concat(c);else if(c.length>0)return proboards.error("Unable to save.  The following variables may not be included in the HTML and must be removed:<br /><br />"+c.join("<br />")),!1;for(var u={},p=[],h=1,f=2,l=0;l<r.length;l++){var m=r[l];u[m]==h?(p.push(m),u[m]=f):u[m]||(u[m]=h)}return p.length>0?(proboards.error("Unable to save. Duplicates of the following variables were found:<br /><br />"+p.join("<br />")+"<br /><br />Each of these variables may only appear once in the HTML."),!1):(proboards.saving($("#save"),!0),proboards.ajax({url:proboards.data("custom_page_edit_html_save_url"),data:{html:t},success:function(){proboards.unsaved_changes=0},complete:function(e,t){proboards.saving($("#save"),!1,t)}}),!1)}),$("a.plus").live("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).next().next();return t.toggle(),$("span.arrow",this).attr("class",t.is(":visible")?"arrow down":"arrow right"),!1}),$("a.var").live("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).parents(".var-list");t.find("a.selected").removeClass("selected"),$(this).addClass("selected"),t.trigger("select")}),$(window).click(function(){$(".var-list a.selected").removeClass("selected"),$(".var-list").trigger("select")}),$("#insert-button").bind("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(".var-list a.selected").attr("alt");t&&n.replaceSelection(t)}),$("a.var").dblclick(function(e){return e.preventDefault(),e.stopPropagation(),n.replaceSelection($(this).attr("alt")),!1})})},admin_structure_custom_page_edit_settings=function(){$(document).ready(function(){$("input, select","form").change(function(){proboards.unsaved_changes=1}),$('input[type="submit"]').click(function(){proboards.unsaved_changes=0}),$("form").submit(function(){proboards.saving($('input[type="submit"]'),!0)}),proboards.data("homepage_disable")?$('input[name="homepage"]').prop("disabled",!0):$('input[name="homepage"]').change(function(){var e="<p>The custom page with id "+proboards.data("homepage_check")+" is already set as your forum's Homepage.</p><br /><p>Saving these changes will make this custom page the new homepage.</p>";1==$(this).val()&&proboards.data("homepage_check")&&proboards.dialog("change_check",{html:e,title:"Reassign Homepage",modal:!0,height:200,buttons:[{text:"Okay",click:function(){$(this).dialog("close")}},{text:"Cancel",click:function(){$('input[id$="homepage_input_radio_1"]').attr("checked","checked"),$(this).dialog("close")}}]})}),proboards.data("saved")&&$('input[name="settings_save"]').setStatus("saved",{position:"after"});var e=$("#basic-styles"),t=$("#container-styles");if(0!=e.length){for(var i=proboards.data("basic_styles"),a=proboards.data("container_styles"),n=0;n<i.length;n++){var o=i[n],r=theme_settings[o.func]({name:o.name,value:o.value});$("input",r).first().attr("name",o.input_name),e.append(r)}for(var n=0;n<a.length;n++){var o=a[n];if("set_field"!=o.func){var s={name:o.name};s.value=o.value||"",1==o.presets&&(s.presets=1);var r=theme_settings[o.func](s);$("input",r).first().attr("name",o.input_name),"gen_border_radius"==o.func&&$('input[name="type"]',r).attr("name",o.input_name+"_type"),t.append(r)}else $('input[name="'+o.input_name+'"]').val(o.value)}theme_settings.setup_image_selector(proboards.data("bg_presets"),{imgPath:proboards.image_path()+"/gradients/",listId:"c-background-image-menu",listClass:"bg-presets"}),theme_settings.bind_upload_buttons(".bg-upload"),theme_settings.setup_color_picker(".property.color > input"),theme_settings.setup_comboboxes(".combobox","simple",1,{onOpen:function(){if(this.hasClass("presets")){var e=this.closest(".property").prev(".color").find("input"),t="transparent";e.length>0&&""!=e.val()&&(t="#"+e.val()),$("#c-background-image-menu li").css("backgroundColor",t)}}}),theme_settings.setup_comboboxes(".image-button","image",1),theme_settings.apply_image_menu_values(),$("#custom-page-settings form").submit(function(){for(var e=i.concat(a),t=0;t<e.length;t++){var n=e[t];if("undefined"!=typeof n.validate){var o=$('input[name="'+n.input_name+'"]'),r=o.val();r=validate[n.validate](r),o.val(r)}}})}})},admin_structure_custom_page_edit_visual=function(){$(document).ready(function(){var e=$("#visual-iframe"),t=e[0].contentWindow,i=function(){var i=t.document,a=null,n=4,o=500,r=i.body.scrollHeight,s=function(){var o=i.body.scrollHeight,s=t.$("body *").filter(function(){return"absolute"===$(this).css("position")});s.each(function(){var e=$(this),t=e.offset().top+e.outerHeight(!0);t>o&&(o=t)}),r<o?n=4:0==--n&&window.clearInterval(a),r=o,e.attr("height",o)},l=function(){n=4,window.clearInterval(a),a=window.setInterval(s,o)};t.$("body").bind("resizeIframe",l).trigger("resizeIframe"),$("#toggle-controls-checkbox").on("click",function(){$(this).attr("checked")?(t.$(".pbcpe-zone-header, .pbcpe-settings-handle").show(),t.$(".pbcpe-zone").removeAttr("style")):(t.$(".pbcpe-zone-header, .pbcpe-settings-container, .pbcpe-settings-handle").hide(),t.$(".pbcpe-zone").css({border:"none",padding:0}))});var d=e.offset(),c=d.left+" "+(d.top+5);$(".pbcpe-add-widget",i).combobox({menuId:"pbcpe-widget-menu",onOpen:function(e){$(document).one("click",function(){e.hide()})},onClick:function(e){var i=t.$(this).parents(".pbcpe-zone").first(),a=i.data("zoneId"),n=t.$(e).attr("class").replace("pbcpe-","");if(t.$(".pbcpe-widget:not(.pbcpe-new)").length>=proboards.data("max_widgets"))return proboards.dialog("error-message",{title:"Error",html:"This custom page has reached the maximum of "+proboards.data("max_widgets")+" widgets.  Please remove a widget before adding a new one."});var o=t.$('<div class="pbcpe-widget"></div>');o.addClass("widget-"+n),o.data("zone",a),o.data("type",n);var r=t.$('<div class="title-bar"><h2 class="pbcpe-widget-title"></h2></div>');o.append(r),t.$(".pbcpe-widgets",i).prepend(o),t.widgetForms.generateForm(o,t.proboards.data("widget"),"add"),o.next(".pbcpe-form").prepend('<div class="pbcpe-widget-header">Widget Settings: '+t.$(e).text()+"</div>"),l()},position:{my:"right top",at:"right bottom",of:"self",collision:"flipfit",offset:c}}),$(i).on("click",'input[name="board_id_display"]',function(e){var i=this;proboards.board.select(function(e,a){var n=t.$(i),o=n.data("hiddenInput");o.val(e),n.val(a),$(i).trigger("change.widget",{name:a,value:e})})}),t.$(i).on("proboardsError",function(e,t){proboards.error(t.error)})},a=$(".content-container").overlay();e.on("load",function(){i(),a.remove()}),$(document).on("click",function(){t.$(".pbcpe-js-overlay").remove()}),$(document).on("mouseup",function(){t.$("body").data("currentSortable")&&t.$("body").data("currentSortable").trigger("mouseup")})})},admin_structure_custom_page_setup=function(){$(document).ready(function(){var e=$("#layout-selector .selected");$("#layouts").on("click",".layout-option",function(){e.removeClass("selected"),e=$(this).addClass("selected"),$('input[name="layout"]').val(e.attr("id"))})})},admin_structure_custom_pages=function(){$(document).ready(function(){var e=$("#custom-page-create-dialog"),t=$("#new-id",e),i=$("#new-title",e),a=!1;t.keyup(function(){a=!0}),i.keyup(function(){if(!a){var e=i.val().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");t.val(e.slice(0,20))}}),e.dialog({autoOpen:!1,buttons:{Create:function(){if(!i.val())return $.inputError(i,"Required");if(!t.val().match(/^[A-z0-9-_]+$/))return $.inputError(t,"The ID field is required and must consist of letters, numbers, dashes, or underscores.");var a=!1;return $("#page-listing .page-id > a").each(function(){if($(this).text()==t.val())return a=!0}),a?$.inputError(t,"A custom page already exists for this ID.  Please enter a different ID."):void proboards.ajax({url:proboards.data("custom_pages_create_url"),data:{pageID:t.val(),title:i.val(),order:$("#page-listing .content .item").length++},success:function(t){if(t.redirect)return void(location.href=t.redirect);var i=t.id,a=t.pageID,n=t.title,o=t.href,r=t.edit;$("#no-custom-pages").remove(),$("#page-listing .content br").before('<div class="item single-line clear" id="cpid-'+i+'"><div class="page-title"><a href="'+r+'">'+n+'</a></div><div class="page-id"><a href="'+o+'" title="'+o+'" target="_blank">'+a+'</a></div><div class="page-permissions"><button>Edit</button><span class="permissions-summary level-0"></span></div><div><div class="drag-handle float-left" title="click and drag to reorder"></div><div class="page-delete delete float-left"><span></span></div></div></div>'),e.dialog("close")}})},Cancel:function(){$(this).dialog("close")}},close:function(){$.clearInputError(),$("input",$(this)).each(function(){$(this).val("")})},title:"Create a New Custom Page",create:function(){proboards.dialogEnter($(this))}});var n=$("#create-page");n.on("click",function(){e.dialog("open")});var o=function(e){var t=$(e).closest(".item"),i=t.attr("id").match(/cpid-([A-z-_0-9]+)/)[1],a=proboards.data("custom_page_permissions")[i]||{};t.find(".page-permissions .permissions-summary").attr("class","permissions-summary level-"+(a.level||0))},r=$("#permissions-dialog");r.dialog({autoOpen:!1,buttons:{Save:function(){var e=$(this),t=e.data("id"),i=e.data("button"),a={},n={};$("input, select",r).each(function(){n[$(this).attr("name")]=$(this).val(),a[$(this).attr("name").match(/^.+?_(.+)$/)[1]]=$(this).val()}),proboards.ajax({url:proboards.data("custom_pages_permissions_set_url"),data:{id:t,permissions:n},success:function(){var e=proboards.data("custom_page_permissions");e[t]=a,proboards.data("custom_page_permissions",e),o(i)},complete:function(){e.dialog("close")}})},Cancel:function(){$(this).dialog("close")}},close:function(){proboards.unsaved_changes=0},title:"Permissions",width:460}),$("#page-listing .content").on("click",".page-permissions button",function(e){e.preventDefault();var t=this,i=$(this).closest(".item"),a=i.attr("id").match(/cpid-([A-z-_0-9]+)/)[1],n=proboards.data("custom_page_permissions")[a]||{};r.html(proboards.permissions.selection({action:"[b]view this page[/b]",values:n})),$("select",r).on("change",function(){proboards.unsaved_changes=1}),$(r).on("click","a, .delete",function(){proboards.unsaved_changes=1}),r.data("button",t),r.data("id",a),r.dialog("open")}),$(".page-permissions button").each(function(){o(this)}),$("#page-listing .sortable").sortable({items:".item",handle:".drag-handle",placeholder:"placeholder",create:function(e,t){},update:function(e,t){var i={ids:[],order:[]};$("#page-listing .item").each(function(e){var t="position-"+e;$(this).hasClass(t)||(i.ids.push($(this).attr("id").match(/\d+/)[0]),i.order.push(e),$(this).removeClass($(this).attr("class").match(/position-\d+/)[0]),$(this).addClass(t))}),proboards.ajax({url:proboards.data("custom_pages_order_url"),data:i,success:function(){$(".status",t.item).setStatus("saved")}})},change:function(e,t){$("#page-listing .sortable > div:not(.ui-sortable-helper)").removeClass("even"),$("#page-listing .sortable > div:not(.ui-sortable-helper)").filter(":odd").addClass("even")},stop:function(e,t){$("#page-listing .sortable").setEven()}});var s=0;$("#page-listing .item").each(function(){$(this).addClass("position-"+s++)}),$(".page-delete span").click(function(){var e=$(this).parents(".item"),t=$(".page-title",e).text(),i=e.attr("id").match(/cpid-([A-z-_0-9]+)/)[1],a=e.attr("class").match(/position-(\d+)/)[1],n=function(){proboards.ajax({url:proboards.data("custom_pages_delete_url"),data:{ids:[i],titles:[t],order:a},success:function(t){e.remove(),$("#page-listing .sortable").setEven(),$("#page-listing .item").each(function(e){var t="position-"+e;$(this).hasClass(t)||($(this).removeClass($(this).attr("class").match(/position-\d+/)[0]),$(this).addClass(t))})}})};proboards.dialog("confirmation",{title:"Confirm",html:'Are you sure you want to delete the "'+proboards.escape_html(t)+'" custom page?',width:330,height:200,buttons:{"Delete Custom Page":function(){$(this).dialog("close"),n()},Cancel:function(){$(this).dialog("close")}}})})})},admin_structure_headers=function(){$(document).ready(function(){function e(e){var t=proboards.data("legacy"),i=proboards.data("current");e="object"==typeof e?e:$(e);var a=parseInt($(e).attr("id").match(/[\d]+$/));isNaN(a)&&(a=0);var n=$(e).hasClass("board")?"board":"category",o=proboards.route("edit_headers",{type:n,id:a});$("#"+$(e).attr("id")+" > a").attr("href",o).bind("click",function(e){e.stopPropagation()});var r=t[n][a]?' class="v4code"':"",s=i[n][a]?' class="hfcode"':"";$("#"+$(e).attr("id")+" > a").append('<div id="controls_'+$(e).attr("id")+'" class="controls"><div class="headers_icon"><div title="Click this icon to view the headers and footers from before this forum was upgraded to ProBoards v5."'+r+'></div></div><div class="headers_icon"><div'+s+"></div></div></div>"),$("#"+$(e).attr("id")+" > a .v4code").bind("click",function(e){return document.location=proboards.route("view_headers",{
type:n,id:a}),!1})}if($("#tree-container").length>0&&(tree=$.tree.create(),tree.init("#tree-container > .tree",{data:{type:"json",opts:{"static":proboards.data("board_data")}},ui:{theme_name:"boards",dots:!0},types:{cat:{clickable:!1,renameable:!1,deletable:!1,creatable:!1,draggable:!1,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1}},board:{clickable:!1,renameable:!1,deletable:!1,creatable:!1,draggable:!1,max_children:-1,max_depth:-1,valid_children:["board"],icon:{image:!1,position:!1}}}}),$("#extras").addClass("tree"),$("#tree-container .tree ul li, #extras ul li").each(function(){e(this)}),$("#headers .tree-boards li .controls").show()),$("#headers.edit-headers").length>0){var t=$('textarea[name="headers"]'),i=$('textarea[name="footers"]'),a=$('input[name="save"]'),n=65535;proboards.code_editor({textarea:t,height:200,mode:"html"}),proboards.code_editor({textarea:i,height:200,mode:"html"});a.click(function(e){var o=$('input[name="type"]').val(),r=$('input[name="id"]').val(),s=t.data("editor").getValue(),l=i.data("editor").getValue();if(s.length>n||l.length>n){var d="",c=s.length-n,u=l.length-n;return s.length>n&&(d+="You are over the header character limit of "+n+" by "+c+" character"+(c>1?"s":"")+".<br /><br />"),l.length>n&&(d+="You are over the footer character limit of "+n+" by "+u+" character"+(u>1?"s":"")+".<br /><br />"),d+="Please shorten your entry and try again.",proboards.error(d),!1}return proboards.saving(a,!0),proboards.ajax({url:proboards.data("update_url"),data:{type:o,id:r,headers:s,footers:l},async:!1,success:function(){proboards.unsaved_changes=!1},complete:function(e,t){proboards.saving(a,!1,t)}}),!1}),$("#headers.edit-headers .edit-check").bind("change",function(){proboards.unsaved_changes=!0})}if($("#headers.priority").length>0){$("#type-list .item.movable").bind("mouseover",function(){var e=$(this).attr("id").substr(7);$("#header-"+e).addClass("affected"),$("#footer-"+e).addClass("affected"),$(this).bind("mouseout",function(){$("#type-list .item").removeClass("affected")})});var o;$("#sortable-top").sortable({items:"li",handle:".drag-handle",placeholder:"item ui-placeholder",update:function(e,t){for(var i=$(".item.head"),a=0;a<i.length;a++){var n=$(i[a]).attr("id").substr(7);$("#sortable-bottom").prepend($("#footer-"+n))}proboards.ajax({url:proboards.data("priority_update_url"),data:{"order[]":$("#sortable-top").sortable("toArray")},success:function(){$("#not-sortable .non-movable .state").css("visibility","visible"),clearTimeout(o),o=setTimeout(function(){$("#not-sortable .non-movable .state").css("visibility","hidden")},2e3)}})}}),$("#sortable-bottom").sortable({items:"li",handle:".drag-handle",placeholder:"item ui-placeholder",update:function(e,t){for(var i=$(".item.foot"),a=0;a<i.length;a++){var n=$(i[a]).attr("id").substr(7);$("#sortable-top").prepend($("#header-"+n))}proboards.ajax({url:proboards.data("priority_update_url"),data:{"order[]":$("#sortable-bottom").sortable("toArray")},success:function(){$("#not-sortable .non-movable .state").css("visibility","visible"),clearTimeout(o),o=setTimeout(function(){$("#not-sortable .non-movable .state").css("visibility","hidden")},2e3)}})}})}})},admin_themes_advanced=function(){var e=null,t=null,i={},a=[],n=null,o=null,r=null,s=null;$(document).ready(function(){function l(e){var t=e.parents(".var-list");t.find("a.selected").removeClass("selected"),e.addClass("selected"),t.trigger("select")}function d(e){for(var t=$(e).data("action"),i=proboards.data("template_list"),a=proboards.data("theme_list"),n='Select the templates you want to export:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',o=0;o<i.length;o++)n+='<label><input type="checkbox" name="templates[]" value="'+i[o].value+'"'+(i[o].present?' checked="checked"':"")+">"+i[o].name+"</label><br />",12!=o&&25!=o||(n+="</td><td>");n+='</td></tr></table><br /><br /> Select a theme to export the selected templates to: <br /><br /><select name="theme">';for(var o=0;o<a.length;o++)a[o].id!=proboards.data("theme_id")&&(n+='<option value="'+a[o].id+'">'+a[o].name+"</option>");n+="</select>",proboards.dialog("advanced-export-dialog",{title:"Export Templates",html:n,height:550,width:600,buttons:[{id:"advanced-export-button",text:"Export Template",click:function(){var e=this;proboards.confirm("Are you sure you want to replace all the selected templates?",function(){var i=$("#advanced-export-dialog input, #advanced-export-dialog select").serializeArray();i.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:t,data:i,success:function(){proboards.alert("Success","Export Successful")},complete:function(){$(e).dialog("close")}})},{title:"Confirm"})}}]}),c("#advanced-export-dialog","#advanced-export-button"),$("#advanced-export-dialog input").change(function(){c("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .select_all").click(function(){$('input[name="templates[]"]').attr("checked","checked"),c("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .deselect_all").click(function(){$('input[name="templates[]"]').removeAttr("checked"),c("#advanced-export-dialog","#advanced-export-button")})}function c(e,t){$(e+" input:checked").length>0?$(t).button("enable"):$(t).button("disable")}function u(l){if($("#if-else-dialog").dialog("isOpen")!==!0&&$("#tree-dialog").dialog("isOpen")!==!0){r=null,s=null,t=l.substr(1),e=$('textarea[name="template['+t+']"]');var d=$('#template-tabs a[href="'+l+'"]').parent();n&&(n.toTextArea(),n=null),n=proboards.code_editor({textarea:e,height:470,mode:"html",onChange:function(e,t){var n=e.getTextArea(),o=$(n).attr("name");"undefined"==typeof i[o]&&(i[o]=1,a.push(n),$("#save-theme").addClass("highlight"),proboards.unsaved_changes=1)}}),$("#template-tabs .tab").removeClass("active"),$(".container").hide(),d.addClass("active"),$(l+"-container,"+l+"-vars").show(),A=l,o=$("#vars-wrapper "+l+"-vars")}}function p(){var e=location.hash;e=e.length>1?e:defaultTab,A!=e&&u(e)}$(document.body).on("click",".var-list a.plus",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).next().next();return t.toggle(),$("span.arrow",this).attr("class",t.is(":visible")?"arrow down":"arrow right"),!1}),$(".var-list").on("click.var","a.var",function(e){e.preventDefault(),e.stopPropagation(),l($(this))}),$(window).click(function(e){$(e.target).is(".var")||$("#if-else-dialog").dialog("isOpen")===!0||($(".var-list a.selected").removeClass("selected"),$(".var-list").trigger("select"))}),$(document.body).on("dblclick",".var-list a.var",function(e){return e.preventDefault(),e.stopPropagation(),n.replaceSelection($(this).attr("alt")),!1});var h=function(e){var t=$("a.selected",e);if(!t.length)return{type:0,variable:"",name:""};var i=parseInt(t.parents("li").attr("class").match(/opt\-type\-(\S+)/)[1]);return{type:isNaN(i)?0:i,variable:t.attr("alt"),name:t.text()}};$(".var-list li:last-child").append('<span class="nub-roswell"></span>'),$("#save-changes, #save-theme").click(function(e){e.preventDefault();var t=this;n.save();var o=$(a).serialize();$('input[name="default"]').attr("checked")&&(o+=o?"&default=1":"default=1"),$('input[name="disabled"]').attr("checked")&&(o+=o?"&disabled=1":"disabled=1"),proboards.saving($(t),!0);var r={method:"post",url:proboards.route("save_template",{theme_id:proboards.data("theme_id")}),success:function(e){$('input[name="default"]').attr("checked")&&updateThemeDropdown(e.old_default),i={},a=[],proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")},complete:function(e,i){proboards.saving($(t),!1,i)}};""!=o&&(r.data=o),proboards.ajax(r)}),$("#preview-changes").bind("click",function(e){e.preventDefault();var t=A.match(/#(\d+)/)[1],i=proboards.data("template_preview_urls")[t],a=[],o=0;i.indexOf(":user_id")!=-1&&(i=i.replace(/:user_id/,proboards.data("user_id"))),i.indexOf(":thread_id")!=-1?(a.push("board"),a.push("thread")):i.indexOf(":board_id")!=-1?a.push("board"):i.indexOf(":conversation_id")!=-1?a.push("conversation"):i.indexOf(":post")!=-1&&a.push("post");var r=function(e,t){if(t.length){var i=t.shift();if("board"==i)return proboards.board.select(function(i,a){e=e.replace(/:board_id/,i),o=i,r(e,t)});if("thread"==i)return proboards.thread.select(o,function(i){e=e.replace(/:thread_id/,i),r(e,t)});if("conversation"==i)return proboards.conversation.select(function(i){e=e.replace(/:conversation_id/,i),r(e,t)});if("post"==i){var a=JSON.parse(e.substr(e.indexOf(":post")+6));e=e.substr(0,e.indexOf(":post")),$("#template-form").attr("method","post");for(_name in a)a.hasOwnProperty(_name)&&$("#template-form").prepend($('<input type="hidden" />').attr("name",_name).val(a[_name]).addClass("added-by-js"))}}n.save(),window.open("","preview_window"),proboards.instapost(e,$("#template-form").serializeArray(),{target:"preview_window"}),$("#instapost").remove()};r(i,a)}),$("#tree-button").bind("click",function(e){if(e.stopPropagation(),e.preventDefault(),null!=s)return s.dialog("open");s=proboards.dialog("tree-dialog",{title:"Expanded Tree",width:600,height:400,html:'<div class="var-list" style="width: auto; height: auto;"><h3>'+$("#template-tabs .active a").html()+"</h3><h4>Loops and Variables</h4></div>",modal:!0,buttons:[{text:"< Insert","class":"require-selection",click:function(e){e.stopPropagation(),m(h($("#tree-dialog")).variable),$(this).dialog("close"),$("#insert-button").click()}},{text:"Define","class":"require-selection",click:function(){$(this).dialog("close")}},{text:"if / else",click:function(e){e.stopPropagation(),m(h($("#tree-dialog")).variable),$(this).dialog("close"),$("#if-button").click()}}]});var t=$("div.var-list > ul",o).clone();t.find("ul").show(),s.children("div").append(t),s.on("click","a.var",function(e){e.preventDefault(),l($(this))}),$("div.var-list",s).bind("select",f)});var f=function(e){var t=0==$("#tree-dialog a.selected").length;$("#tree-dialog").parent().find("button.require-selection").prop("disabled",t)},m=function(e){var t=$(".var-list",o);if($("a.selected",t).removeClass("selected"),$("ul ul",t).hide(),$(".arrow.down",t).removeClass("down").addClass("right"),e){var i=$('a[alt="'+e+'"]',t);i.parents("li").children("a.plus").click(),i.addClass("selected"),t.scrollTop(i.offset().top-t.offset().top+t.scrollTop()-30)}};$("#insert-button").bind("click",function(e){e.stopPropagation(),e.preventDefault();var t=h(o).variable;t&&n.replaceSelection(t)}),$("#advanced-edit a.reset").bind("click",function(o){o.preventDefault();var r=$(this).data("action")+t;proboards.confirm("Are you sure you wish to reset this template?  Any changes made to this template will be lost.",function(){var t=e.parent().overlay();proboards.ajax({url:r,success:function(o){n.setValue(o.template),n.save();var r=e.attr("name");if("undefined"!=typeof i[r]){delete i[r];for(var s=0;s<a.length;s++)if(exists=$(a[s]).attr("name"),r==exists){a.splice(s,1);break}}0==a.length&&(proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")),t.remove()}})})}),$("#advanced a.reset-all").bind("click",function(e){e.preventDefault();var t=$(this).data("action");proboards.confirm("Are you sure you wish to reset all templates to default?",function(){proboards.ajax({url:t}),$(this).dialog("close"),$("#save-theme").removeClass("highlight")})}),$("#advanced a.import, #advanced-edit a.import").bind("click",function(e){e.preventDefault();for(var t=$(this).data("action"),i=proboards.data("template_list"),a=proboards.data("theme_list"),n='Select the templates you want to import:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',o=0;o<i.length;o++)n+='<label><input type="checkbox" name="templates[]" value="'+i[o].value+'"'+(i[o].present?' checked="checked"':"")+">"+i[o].name+"</label><br />",12!=o&&25!=o||(n+="</td><td>");n+='</td></tr></table><br /><br /> Select a theme to import the selected templates from: <br /><br /><select name="theme">';for(var o=0;o<a.length;o++)a[o].id!=proboards.data("theme_id")&&(n+='<option value="'+a[o].id+'">'+a[o].name+"</option>");n+="</select>",proboards.dialog("advanced-import-dialog",{title:"Import Templates",html:n,height:550,width:600,buttons:[{id:"advanced-import-button",text:"Import Template",click:function(){var e=this;proboards.confirm("Are you sure you want to replace all the selected templates?",function(){var i=$("#advanced-import-dialog input, #advanced-import-dialog select").serializeArray();i.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:t,data:i,success:function(){location.reload()},complete:function(){$(e).dialog("close")}})},{title:"Confirm"})}}]}),c("#advanced-import-dialog","#advanced-import-button"),$("#advanced-import-dialog input").change(function(){c("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .select_all").click(function(){$('input[name="templates[]"]').attr("checked","checked"),c("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .deselect_all").click(function(){$('input[name="templates[]"]').removeAttr("checked"),c("#advanced-import-dialog","#advanced-import-button")})}),$("#advanced a.export, #advanced-edit a.export").bind("click",function(e){e.preventDefault();var t=$(this);proboards.unsaved_changes?proboards.confirm("You have unsaved changes.  If you try to export now, your changes will not be included.  Continue?",function(){d(t)},{title:"Unsaved Changes"}):d(t)}),$("#if-button").bind("click",function(e){e.preventDefault(),e.stopPropagation();var t=$("#if-else-dialog");t.dialog({title:"If / Else",width:600,beforeClose:function(){$("#var-list-holder").hide()}}),t.html('Create and insert if / else statements below. <div id="conditions"></div> <div><a href="#" class="elseif">+else If</a></div><div><a href="#" class="else">+else</a></div><div><button class="insert">&lt;&lt; Insert</button></div>'),$("a.elseif",t).click(function(e){e.preventDefault(),g("Else If")}),$("a.else",t).click(function(e){e.preventDefault(),$(this).hasClass("disabled")||g("Else")}),$("button.insert",t).click(function(e){e.preventDefault();var i=!0;$("#conditions .condition-line .condition-vars select").each(function(){$(this).val()||(i=!1)}),i&&(y(),t.dialog("close"))}),g("If"),t.dialog("open")});var g=function(e){var t=h(o),i=$('<div class="condition-line condition-line-'+e.toLowerCase().replace(/\s+/g,"")+'"><span class="condition-type">'+e.toLowerCase()+'</span><span class="condition-vars"></span><span class="condition-operator"><select name="operator"><option></option><option>==</option><option>!=</option><option class="operator-int">&lt;</option><option class="operator-int">&lt;=</option><option class="operator-int">=&gt;</option><option class="operator-int">&gt;</option></select></span><span class="condition-right-operand"><input type="text" name="right-operand" /></span><span class="condition-delete"><a href="#" class="button-x">X</a></span></div>');if("Else"==e)$("span:not(.condition-type,.condition-delete)",i).hide();else{var a='<button>change</button><span class="condition-var-name" alt="'+t.type+t.variable+'">'+t.name+"</span>";$(".condition-vars",i).append(a).click(function(e){if(e.preventDefault(),e.stopPropagation(),r&&0!=r.length||(r=$(".var-list",o).clone().attr("id","var-list-holder").appendTo(document.body).css({position:"absolute",zIndex:2e3,display:"none"})),!r.is(":visible")){var a=$(this).offset();r.css({top:a.top+$(this).height(),left:a.left-3})}r.toggle(),$("a.selected",r).removeClass("selected"),$("ul ul",r).hide(),$(".arrow.down",r).removeClass("down").addClass("right");var n=""!=$(".condition-var-name",i).attr("alt")?$(".condition-var-name",i).attr("alt").substr(1):t.variable;if(n){var s=$('a[alt="'+n+'"]',r);s.parents("li").children("a.plus").click(),s.addClass("selected"),r.scrollTop(s.offset().top-r.offset().top+r.scrollTop()-30)}r.off(".var"),r.on("click.var","a.var",function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".var-list").find("a.selected").removeClass("selected"),$(this).addClass("selected");var t=h(r);return $(".condition-var-name",i).text(t.name),$(".condition-var-name",i).attr("alt",""+t.type+t.variable),m(t.variable),r.toggle(),b(i),!1}),$(window).on("click.ifelse",function(e){$(e.target).is("li, .var-list")||(r&&r.is(":visible")===!0&&r.hide(),$(this).off(".ifelse"))})}),$(".condition-operator select",i).change(_),$(".condition-operator select",i).change(),b(i)}"If"==e?$(".condition-delete",i).hide():$(".condition-delete a",i).click(function(e){e.preventDefault(),$(this).parents(".condition-line").remove(),v()}),$("#conditions .condition-line-else").length?$("#conditions .condition-line-else").before(i):$("#conditions").append(i),v()},v=function(){var e=$("#conditions .condition-line-else").length?"addClass":"removeClass";$("#if-else-dialog a.else")[e]("disabled")},b=function(e){var t=parseInt($(".condition-var-name",e).attr("alt").substr(0,1));if(1==t)$(".condition-operator",e).show(),$(".condition-operator select option",e).show(),$(".condition-right-operand",e).show();else if(2==t){$(".condition-operator",e).show(),$(".condition-operator select option.operator-int",e).hide(),$(".condition-right-operand",e).show();var i=$(".condition-operator select",e);$('option[value="'+i.val()+'"]:visible',i).length||i.val("")}else $(".condition-operator",e).hide(),$(".condition-right-operand",e).hide();$(".condition-operator select",e).change()},_=function(){var e=$(this).parents(".condition-line");""!=$(this).val()&&$(this).is(":visible")?$(".condition-right-operand",e).show():$(".condition-right-operand",e).hide()},y=function(){var e="",t="",i=$("#conditions .condition-line");i.each(function(){var a=$(".condition-type",this).text().toLowerCase().replace(/ /,"");if("else"==a)t+=e+"{else";else{var n=$(".condition-var-name",this).attr("alt").substr(1),o=parseInt($(".condition-var-name",this).attr("alt").substr(0,1)),r=$(".condition-operator select",this).val(),s=$(".condition-right-operand input",this).val();t+=e+"{"+a+" "+n,""!=r&&(t+=" "+r+" ",1!=o&&(s='"'+s.replace(/"/,"")+'"'),t+=s)}t+="}\n",t+="else"==a?"\tcode to be executed if condition"+(i.length>2?"s are":" is")+" not met\n":"\tcode to be executed if condition is true\n"}),t+=e+"{/if}\n",n.replaceSelection(t)};if($("#template-tabs").length){var A="";if(p(),$("#template-tabs").on("click",".tab",function(e){e.preventDefault(),e.stopPropagation(),$("#if-else-dialog").dialog("isOpen")!==!0&&$("#tree-dialog").dialog("isOpen")!==!0&&(window.location.hash=$(".tab-link",this).attr("href"))}),$("html").is(".ie7")?setInterval(p,500):$(window).bind("hashchange",p),$("#template-tabs .child-wrapper").width()<$("#template-tabs .child-wrapper table").width()){scroller={tabs:{current:0,last:0,all:$("#template-tabs .child-wrapper .tab"),total:$("#template-tabs .child-wrapper .tab").length},target:0,max:$(".child-wrapper table").width()-$(".child-wrapper").width(),container:$("#template-tabs .child-wrapper"),offset:$("#template-tabs .child-wrapper").offset().left,current:0,intervals:{scroll:0,click:0,hold:0},setTarget:function(e){scroller.tabs.current=e,scroller.target=Math.min($(scroller.tabs.all[e]).offset().left-scroller.offset+scroller.container.scrollLeft(),scroller.max),scroller.intervals.scroll||(scroller.intervals.scroll=setInterval(scroller.scroll,10))},scroll:function(){Math.abs(scroller.current-scroller.target)<5?(scroller.current=scroller.target,clearInterval(scroller.intervals.scroll),scroller.intervals.scroll=0):scroller.current+=(scroller.target-scroller.current)/5,scroller.container.scrollLeft(scroller.current)}},scroller.container.scrollLeft(0);for(var w=0;w<scroller.tabs.total;++w)if($(scroller.tabs.all[w]).offset().left-scroller.offset>=scroller.max){scroller.tabs.last=w;break}$("#template-tabs .scroll-left").mousedown(function(e){e.preventDefault(),e.stopPropagation();var t=function(e){scroller.tabs.current>0&&scroller.setTarget(scroller.tabs.current-1)};scroller.intervals.click=setTimeout(function(){scroller.intervals.hold=setInterval(t,70)},500),t()}),$("#template-tabs .scroll-right").mousedown(function(e){e.preventDefault(),e.stopPropagation();var t=function(e){scroller.tabs.current<scroller.tabs.last&&scroller.setTarget(scroller.tabs.current+1)};scroller.intervals.click=setTimeout(function(){scroller.intervals.hold=setInterval(t,70)},500),t()}),$("#template-tabs .scroll-right, #template-tabs .scroll-left").mouseup(function(e){e.preventDefault(),e.stopPropagation(),clearTimeout(scroller.intervals.click),clearInterval(scroller.intervals.hold),scroller.intervals.click=0}).click(function(e){e.preventDefault(),e.stopPropagation()}).show()}}})},admin_themes_css_editor=function(){$(document).ready(function(){function e(){var e="",t="",i=!0;less.Parser().parse(k.getValue(),function(a,n){if(a)message=a.message,"Syntax"==a.type&&(message+=" on line "+a.line),i=!1,$(".error_area").html(message+"<br /><br />");else{$(".error_area").empty(),t=n;try{e=n.toCSS(),$(".error_area").empty()}catch(a){i=!1,$(".error_area").html(a.message+" on line "+a.line+"<br /><br />")}i&&$('input[name="css_submit"]').removeAttr("disabled")}}),p={},f=1,i&&(theme_settings.options.stylesheetData=t,theme_settings.updateLivePreview())}function t(e,i){var a=$("<div/>");if(0==S&&a.attr("class","section_list"),e.is(i));else if(e.hasClass("property_wrapper")){var n=$(e).attr("class").replace("property_wrapper ","");$('<input type="radio" name="move_location" id="move_location_'+S+'" class="location_property" /><label for="move_location_'+S+'">'+n+"</label><br />").appendTo(a).data("selector",e),S++}else e.children("div").not(i).each(function(){if($(this).hasClass("section")){var e=$(this).children("h2").children(".section_name").text();$('<input type="radio" name="move_location" id="move_location_'+S+'" class="location_section" /><label for="move_location_'+S+'"><b>'+e+"</b></label>").appendTo(a).data("selector",$(this)),S++,a.append(t($(this),i))}if($(this).hasClass("property_wrapper")){var n=$(this).attr("class").replace("property_wrapper ","");$('<input type="radio" name="move_location" id="move_location_'+S+'" class="location_property" /><label for="move_location_'+S+'">'+n+"</label><br />").appendTo(a).data("selector",$(this)),S++}});return a}function i(e){var t=e.find('select[name="type"]').first(),i=e.find('select[name="variable"]').first();t.change(function(){"section"==t.val()?i.hide():i.show()}),i.focus(function(){var t=e.prev(".section, .property").data();t?i.html(o(t.item)):i.html(o())})}function a(e){var t=e.data().item;"background"==t.type||"border"==t.type||"box-shadow"==t.type||"font"==t.type||"text-shadow"==t.type?(e.parent().children(".section, .property").hide(),e.parent().children(".section, .property").last().after("<div>"+s(t)+"</div>"),i(e.parent().children(".section, .property").last().next())):(e.hide(),e.after("<div>"+s(t)+"</div>"),i(e.next()))}function n(e){return'<div><select name="variable">'+o(e,1)+"</select></div>"}function o(e,t){0==proboards.size(p)&&r($("#forum-related"),p),"undefined"==typeof t&&(t=0),1==f&&(h=proboards.css.variables(proboards.css.parse($(".CodeMirror").data("editor").getValue())),f=0);var i='<option value="">Select Variable</option>';for(var a in h)("undefined"==typeof p[a]||"undefined"!=typeof e&&a==e.variable)&&(i+="undefined"!=typeof e&&a==e.variable?'<option selected="selected" value="'+a+'">'+a+"</option>":'<option value="'+a+'">'+a+"</option>");return i}function r(e,t){e.hasClass("property_wrapper")?t[e.children(".property").first().data().item.variable]=1:e.children("div").each(function(){r($(this),t)})}function s(e,t,i){var a=$.extend({},e);"undefined"==typeof a.type&&(a.type="section"),"undefined"==typeof a.name&&(a.name=""),"undefined"==typeof a.variable&&(a.variable=""),"undefined"==typeof i&&(i=0);var o=$(g),r=$(n(a)),s='<div class="edit_block'+(i?' creating">':'">')+'<input type="text" placeholder="name" name="name" value="'+a.name+'" />';return o.find('option[value="'+a.type+'"]').attr("selected","selected"),"section"==a.type&&0==i?(o.children("select").attr("disabled","disabled"),s+o.html()+y+w+"</div>"):"section"==a.type&&1==i?(r.children("select").hide(),s+o.html()+" "+r.html()+(i?A:y)+w+"</div>"):(r.find('option[value="'+a.variable+'"]').attr("selected","selected"),s+o.html()+" "+r.html()+(i?A:y)+w+"</div>")}function l(){var e=$('input[name="var_search"]').val();if("@"!=e.substr(0,1)&&(e="@"+e),1==f&&(h=proboards.css.variables(proboards.css.parse($(".CodeMirror").data("editor").getValue())),f=0),"undefined"==typeof h[e])proboards.alert("Variable does not exist.");else if(0==proboards.size(p)&&r($("#forum-related"),p),"undefined"==typeof p[e])proboards.alert("Variable is not currently in use.");else{var t="undefined";$(".property_wrapper > .property:first-child").each(function(){if(e==$(this).data().item.variable)return void(t=$(this))}),"undefined"!=t&&($("#settings h2").siblings("div").hide(),$("h2 .arrow").removeClass("down").addClass("right"),t.parents(".section").each(function(){var e=$(this).children("h2").first();e.siblings("div").show(),$(".arrow",e).removeClass("right").addClass("down")}),$(document).scrollTop(t.offset().top),0!=t.next().length&&t.siblings("div").hasClass("edit_block")||a(t))}return!1}function d(e){if(e.hasClass("property_wrapper"))e=e.children(".property"),"undefined"!=typeof e.data().item.children&&delete e.data().item.children,delete e.data().item.value;else{var t=[];e.children("div").each(function(){($(this).hasClass("section")||$(this).hasClass("property_wrapper"))&&t.push(d($(this)))}),"undefined"!=typeof e.data().item&&(e.data().item.children=t),delete e.data().item.variable}return e.data().item}var c=$('textarea[name="css"]');if(c.length){var u,p={},h={},f=1,m=0,g='<div><select name="type"><option value="section">Section</option><option value="background">Background</option><option value="background-color">Background Color</option><option value="background-image">Background Image</option><option value="background-image-texture">Background Image Texture</option><option value="background-repeat">Background Repeat</option><option value="background-attachment">Background Attachment</option><option value="background-position">Background Position</option><option value="border">Border</option><option value="border-width">Border Width</option><option value="border-style">Border Style</option><option value="border-color">Border Color</option><option value="border-radius">Border Radius</option><option value="box-shadow">Box Shadow</option><option value="color">Color</option><option value="font">Font</option><option value="font-family">Font Family</option><option value="font-size">Font Size</option><option value="font-style">Font Style</option><option value="font-weight">Font Weight</option><option value="font-variant">Small Caps</option><option value="text-align">Text Align</option><option value="text-decoration">Text Decoration</option><option value="text-shadow">Text Shadow</option><option value="text-transform">Text Transform</option><option value="width">Width</option><option value="height">Height</option></select></div>',v=proboards.get_image({src:"/admin/themes/css-editor/icon-move.png",alt:"move","class":"control_button move_button"}),b=proboards.get_image({src:"/admin/themes/css-editor/icon-new.png",alt:"new","class":"control_button new_button"}),_=proboards.get_image({src:"/admin/themes/css-editor/icon-edit.png",alt:"edit","class":"control_button edit_button"}),y=proboards.get_image({src:"/admin/themes/css-editor/icon-accept.png",alt:"Ok","class":"row_button ok_button"}),A=proboards.get_image({src:"/admin/themes/css-editor/icon-create.png",alt:"Create","class":"row_button create_button"}),w=proboards.get_image({src:"/admin/themes/css-editor/icon-cancel.png",alt:"Cancel","class":"row_button cancel_button"}),x='<span class="control_button delete_button"><div class="delete"><div></div></div></span>',k=proboards.code_editor({textarea:c,height:553,mode:"css",onChange:function(){clearTimeout(u),$('input[name="css_submit"]').attr("disabled","disabled"),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),u=setTimeout(function(){e()},1e3)}});$("#save-theme").click(function(){$('input[name="css_submit"]').click()}),$('input[name="css_submit"]').click(function(e){e.preventDefault();var t=$(this);$(this).val();k.save();var i={};i.css=c.data("editor").getValue();try{i.css_parsed=proboards.css.clean(proboards.css.parse(i.css).toCSS({compress:!0}))}catch(e){proboards.error(e.message)}var a=proboards.css.parse(theme_settings.options.stylesheetW);proboards.css.extendVariables(a,theme_settings.options.stylesheetData),proboards.css.extendVariables(a,proboards.css.parse(proboards.data("css_required_vars")));try{i.wysiwyg_css_parsed=proboards.css.clean(a.toCSS({compress:!0}))}catch(e){proboards.error(e.message)}var n=proboards.css.parse(theme_settings.options.stylesheetM);proboards.css.extendVariables(n,theme_settings.options.stylesheetData),proboards.css.extendVariables(n,proboards.css.parse(proboards.data("css_required_vars")));try{i.css_mobile=proboards.css.clean(n.toCSS({compress:!0}))}catch(e){proboards.error(e.message)}if($('input[name="default"]').attr("checked")&&(i["default"]=1),$('input[name="disabled"]').attr("checked")&&(i.disabled=1),1==m){var o=[];$("#forum-related > div").each(function(){($(this).hasClass("section")||$(this).hasClass("property_wrapper"))&&o.push(d($(this)))}),i.tree=JSON.stringify(o),m=0}for(var r=[],s=JSON.parse(proboards.data("unfiltered_vars")),l=proboards.css.variables(proboards.css.parse(i.css)),u=0;u<s.length;u++)"undefined"!=typeof l[s[u].variable]&&r.push(s[u]);for(var p={scheme_id:"theme_preview"},h=0;h<r.length;h++)p[r[h].variable.slice(1)]=l[r[h].variable].value.slice(1);i.color_scheme=JSON.stringify(p),proboards.saving(t,!0),proboards.ajax({method:"post",url:proboards.data("css_save_url"),data:i,success:function(e){i["default"]&&updateThemeDropdown(e.old_default),$(".admin-theme-color-bar td").empty().append(proboards.color_scheme.build(p,0)),proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")},complete:function(e,i){proboards.saving(t,!1,i)}})}),$("#menu-item-preview").click(function(e){$("#preview-container").show(),$("#builder-container").hide(),$("#code-container").hide(),$("#menu-item-preview").addClass("ui-active"),$("#menu-item-builder").removeClass("ui-active"),$("#menu-item-code").removeClass("ui-active")}),$("#menu-item-builder").click(function(e){$("#builder-container").show(),$("#preview-container").hide(),$("#code-container").hide(),$("#menu-item-builder").addClass("ui-active"),$("#menu-item-preview").removeClass("ui-active"),$("#menu-item-code").removeClass("ui-active")}),$("#menu-item-code").click(function(e){$("#code-container").show(),$("#preview-container").hide(),$("#builder-container").hide(),$("#menu-item-code").addClass("ui-active"),$("#menu-item-preview").removeClass("ui-active"),$("#menu-item-builder").removeClass("ui-active")}),$("#advanced-css a.reset").bind("click",function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to reset the theme CSS?",function(){var e=$(".CodeMirror").overlay(),t=$("#builder-container:visible").overlay();proboards.ajax({url:proboards.data("css_reset_url"),success:function(i){k.setValue(i.css),e.remove(),t.remove(),proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")}})})});try{theme_settings.setup_editor(1)}catch(C){e(),proboards.error("We're sorry. There was a problem loading the preview due to errors in your CSS file. Please check the error status area (in red) below the code editor for more details.")}$("#advanced-css a.reset_structure").bind("click",function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to reset the Visual Editor structure?  <b>This will discard any unsaved changes to your CSS.</b>",function(){proboards.instapost(proboards.data("structure_reset_url"));
})}),$(".section, .property_wrapper > .property:first-child").append(v+_+b+x),$("#forum-related").on("keypress","input",function(e){e.which==Keys.enter&&e.preventDefault()});var S=0;$("#forum-related").on("click",".move_button",function(){var e,i=$(this).closest(".section, .property_wrapper"),a=$("<div/>");S=0,a.html('<p>Choose where you want to move this element to: </p><br /><select name="move_location_rel"><option value="before">Before</option><option value="inside">Inside</option><option value="after">After</option></select><br /><br />'),a.append(t($("#forum-related"),i)),proboards.dialog("move-location-dialog",{title:"Move Element",html:"",height:500,width:500,open:function(){e=$("#builder-container:visible").overlay(),$("#move-location-dialog").append(a)},close:function(){e.remove()},buttons:{Move:function(){var e=$('#move-location-dialog select[name="move_location_rel"]').val(),t=$('#move-location-dialog input[name="move_location"]:checked');if("inside"==e&&t.hasClass("location_property"))proboards.alert("Error: Cannot move elements inside of a property.");else{i.detach();var a=t.data().selector;"inside"==e?(a.append(i),i.hasClass("heading")&&(i.removeClass("heading").removeAttr("style"),i.children("h2").prepend('<span class="arrow down"><span></span></span>'),i.children().removeAttr("style"),theme_settings.setup_collapsable(i.children("h2"),1))):"before"==e?(a.before(i),"forum-related"==a.parent().attr("id")&&(i.hasClass("section")&&(i.addClass("heading").removeAttr("style"),i.children("h2").children("span.arrow").remove(),i.children().removeAttr("style")),i.removeAttr("style"))):(a.after(i),"forum-related"==a.parent().attr("id")&&(i.hasClass("section")&&(i.addClass("heading").removeAttr("style"),i.children("h2").children("span.arrow").remove(),i.children().removeAttr("style")),i.removeAttr("style")));var n=a.closest(".section");n.length>0&&("inside"!=e&&a.hasClass("section")&&(n=a.parent().closest(".section")),!n.hasClass("heading")&&$(".arrow",n).eq(0).hasClass("right")?i.hide():i.show()),theme_settings.setup_alternating_bg(),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),m=1,$(this).dialog("close")}}}})}),$("#forum-related").on("click",".new_button",function(){var e=$(this).closest(".section, .property_wrapper");e.hasClass("property_wrapper")||(e.children("div").show(),e=e.children("h2").first(),e.children(".arrow").removeClass("right").addClass("down")),e.after("<div>"+s({},void 0,1)+"</div>"),i(e.next()),theme_settings.setup_alternating_bg()}),$('button[name="new_top_level"]').click(function(){return $("#forum-related").prepend("<div>"+s({},void 0,1)+"</div>"),i($("#forum-related > div:first-child")),!1}),$("#forum-related").on("click",".edit_button",function(){a($(this).closest(".section, .property"))}),$("#forum-related").on("click",".delete_button",function(){var e=this;proboards.confirm("Are you sure you want to remove this?",function(){var t=$(e).closest(".section, .property_wrapper");t.hasClass("property_wrapper")&&0!=proboards.size(p)?(delete p[t.children(".property").first().data().item.variable],t.remove()):(t.remove(),p={},r($("#forum-related"),p)),theme_settings.setup_alternating_bg(),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),m=1})}),$("#forum-related").on("click",".ok_button",function(){var e=new Object,t=$(this).parent(),i=t.parent().prev();if(proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),m=1,$(this).siblings("input, select").each(function(){"name"==$(this).attr("name")?e.name=$(this).val():"type"==$(this).attr("name")?e.type=$(this).val():"variable"==$(this).attr("name")&&(e.variable=$(this).val())}),""==e.name&&(e.name=void 0),"section"==e.type&&i.hasClass("section"))i.data().item.name=e.name,i.find(".section_name").first().text(e.name),i.show(),t.remove();else if("section"==e.type){var a=t.parent();delete p[i.data().item.variable],e=$.extend({name:"Section"},e),a.empty(),"forum-related"==a.parent().attr("id")?(a.attr("class","heading section"),a.append('<h2><span class="section_name">'+e.name.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></h2>"+v+_+b+x)):(a.attr("class","section"),a.append('<h2><span class="arrow right"><span></span></span><span class="section_name">'+e.name.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></h2>"+v+_+b+x)),a.data("item",e),theme_settings.setup_collapsable(a.children("h2"),1),theme_settings.setup_alternating_bg(a)}else{t=t.parent();var n=t.prev().data().item.variable;t.prevUntil().remove(),theme_settings.select_editor_options(t.parent(),e,1),t.next().append(v+_+b+x),t.nextUntil().data("item",e),delete p[n],p[e.variable]=1,theme_settings.setup_alternating_bg(t.parent().children().last());var a=t.parent();t.remove(),theme_settings.setup_comboboxes($(".combobox",a),"simple",1),theme_settings.setup_comboboxes($(".image-button",a),"image",1),theme_settings.setup_color_picker($(".property.color > input",a)),theme_settings.bind_upload_buttons($(".bg-upload",a),1)}}),$("#forum-related").on("click",".create_button",function(){var e=new Object,t=$(this).parent();if(proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"),m=1,$(this).siblings("input, select").each(function(){"name"==$(this).attr("name")?e.name=$(this).val():"type"==$(this).attr("name")?e.type=$(this).val():"variable"==$(this).attr("name")&&(e.variable=$(this).val())}),""==e.name&&(e.name=void 0),"section"==e.type){var i=t.parent();e=$.extend({name:"Section"},e),"forum-related"==i.parent().attr("id")?i.attr("class","heading section"):i.attr("class","section"),i.append('<h2><span class="arrow right"><span></span></span><span class="section_name">'+e.name.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span></h2>"+v+_+b+x),i.data("item",e),t.remove(),theme_settings.setup_collapsable(i.children("h2"),1),theme_settings.setup_alternating_bg(i)}else{var i=t.parent();i.attr("class","property_wrapper "+e.type).attr("style","display: block;"),theme_settings.select_editor_options(i,e,1),i.children(".property").data("item",e),t.next().append(v+_+b+x),t.remove(),theme_settings.setup_alternating_bg(i),0!=proboards.size(p)&&(p[e.variable]=1),theme_settings.setup_comboboxes($(".combobox",i),"simple",1),theme_settings.setup_comboboxes($(".image-button",i),"image",1),theme_settings.setup_color_picker($(".property.color > input",i)),theme_settings.bind_upload_buttons($(".bg-upload",i),1)}}),$("#forum-related").on("click",".cancel_button",function(){var e=$(this).parent().parent();e.hasClass("creating")?e.remove():(e.prevUntil().show(),e.remove())}),$('button[name="var_search_button"]').click(function(){return l(),!1}),$('input[name="var_search"]').keypress(function(e){if(13==e.which)return e.stopPropagation(),e.preventDefault(),l(),!1})}else if($("#settings").length){try{theme_settings.setup_editor()}catch(C){proboards.error("We're sorry. There was a problem loading the editor due to errors in your CSS file. You must manually fix your CSS <a href=\""+proboards.data("css_edit_url")+'">here</a> before you can proceed.')}$(".visual-save, #save-theme").click(function(e){saveButton(".admin-content",e,this)})}})},admin_themes_easy=function(){function e(e){"undefined"==typeof e&&(e=0);for(var t=$("#current_scheme .scheme").data().scheme,i=0;i<r.length;i++)r[i].value="#"+t[r[i].variable.slice(1)],"#"!=r[i].value&&theme_settings.changeVariable(r[i],theme_settings.options.variables[r[i].variable],r[i].value);theme_settings.updateLivePreview(),e?(proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight")):(proboards.unsaved_changes=1,$("#save-theme").addClass("highlight"))}function t(e){theme_settings.options.gradient_background="#"+e.title_bar_background_color,theme_settings.options.page_background="#"+e.body_background_color,theme_settings.options.banner_text="#"+e.title_text_color,$("#forum-related .property_wrapper.background-color .color-picker-preview").attr("style","background-color: #"+e.title_bar_background_color+";"),$('#forum-related .property_wrapper.background-color input[type="text"]').val(e.title_bar_background_color).trigger("change.color"),$("#forum-related .property_wrapper.color .color-picker-preview").attr("style","background-color: #"+e.title_text_color+";"),$('#forum-related .property_wrapper.color input[type="text"]').val(e.title_text_color).trigger("change.color")}function i(){$.each(n,function(e,t){1==t.current_favorite&&$("#scheme_"+e).prev("img").attr("src",favstar_active_url)})}function a(e,t,i,a){var r=[];"all"==t?r=e:"favorites"==t?r=$.grep(e,function(e,t){return"undefined"!=typeof n[""+e.scheme_id]&&1==n[""+e.scheme_id].current_favorite?1:0}):"my_schemes"==t?(i=0,r=o):r=$.grep(e,function(e,i){return 1==e[t]?1:0}),a.empty();for(var s=0;s<r.length;s++)a.append(proboards.color_scheme.build(r[s],i))}var n={},o=[],r=[],s=0;$(document).ready(function(){var l=JSON.parse(proboards.data("schemes"));n=JSON.parse(proboards.data("favorites")),o=proboards.data("my_schemes");for(var d=0;d<o.length;d++)o[d].scheme_id=o[d].scheme_id+"_"+d;a($.extend(!0,[],l),"all",1,$("#schemes")),i();try{for(var c=JSON.parse(proboards.data("unfiltered_vars")),u=proboards.css.variables(proboards.css.parse(proboards.data("css_forum"))),p=0;p<c.length;p++)"undefined"!=typeof u[c[p].variable]&&r.push(c[p])}catch(h){return void proboards.error("We're sorry. There was a problem loading the editor due to errors in your CSS file. You must manually fix your CSS <a href=\""+proboards.data("css_edit_url")+'">here</a> before you can proceed.')}for(var f={scheme_id:"current"},m=0;m<r.length;m++)f[r[m].variable.slice(1)]=u[r[m].variable].value.slice(1);$("#current_scheme").empty().append(proboards.color_scheme.build(f,0)),$('select[name="display_schemes"]').change(function(){var e=$(this).val();"all"==e||"favorites"==e||"my_schemes"==e?a($.extend(!0,[],l),e,1,$("#schemes")):a($.extend(!0,[],l),"tag_"+e,1,$("#schemes")),i()}),$("#schemes .scheme").live("click",function(){var i=$(this).data().scheme,a=$(this).clone();a.attr("id","current_"+a.attr("id")),$("#current_scheme").empty().append(a),$("#current_scheme .scheme").data("scheme",i),t(i),e()}),$("#schemes .fav-star").live("click",function(){var e=$(this).next("div.scheme").attr("id").substr(7);"undefined"==typeof n[e]?(n[e]={started_favorite:0,current_favorite:1},$(this).attr("src",favstar_active_url)):0==n[e].current_favorite?(n[e].current_favorite=1,$(this).attr("src",favstar_active_url)):(n[e].current_favorite=0,$(this).attr("src",favstar_dim_url))}),$(".customize_scheme_link, #current_scheme").click(function(t){t.preventDefault();var i=$("#current_scheme .scheme").data().scheme,a=$('<div class="etc_dialog"><div id="current_preview_scheme"></div><table><tr><td><div class="forum_header"><h3>Forum</h3></div><br /><div class="title_bars_header"><h3>Title Bars</h3></div><br /><div class="buttons_header"><h3>Buttons</h3></div><br /></td><td><div class="containers_header"><h3>Containers</h3></div><br /><div class="pagination_header"><h3>Pagination</h3></div><br /></td></tr></table></div>');if("undefined"==typeof i)a.text("Error: could not load selected color scheme.");else{var n=proboards.color_scheme.build(i,0);n.attr("id","preview_"+n.attr("id")),a.find("#current_preview_scheme").append(proboards.color_scheme.build(i,0));for(var o=0;o<r.length;o++)r[o].value=i[r[o].variable.slice(1)],"undefined"==typeof r[o].value&&(r[o].value=""),a.find("."+r[o].section+"_header").append(theme_settings.gen_color(r[o],0));var l,d={};proboards.dialog("customize-scheme-dialog",{title:"Customize Scheme",html:a,height:540,width:600,open:function(){l=1},buttons:{"Apply Color Scheme":function(){l=0,$(this).dialog("close");for(p in d)"title_bar_background_color"==p?theme_settings.options.gradient_background="#"+d[p]:"body_background_color"==p&&(theme_settings.options.page_background="#"+d[p]),d.hasOwnProperty(p)&&($("#current_preview_scheme .scheme").data().scheme[p]=d[p]);$("#current_scheme").html(proboards.color_scheme.build($("#current_preview_scheme .scheme").data("scheme"),0)),d={},s=1}},close:function(){1==l&&e(1)}}),theme_settings.setup_color_picker(".property.color > input",!1),theme_settings.bind_data_change(),$('.etc_dialog input[type="text"]').bind("change.data, change.color",function(){var e=$(this).closest(".property").data().item,t=e.variable.slice(1);d[t]=$(this).val(),$("#current_preview_scheme ."+t).css("background-color","#"+$(this).val())})}}),$(".scheme_refresh img").click(function(){s?proboards.confirm("Are you sure you want to reset your color scheme?",function(){$("#current_scheme").empty().append(proboards.color_scheme.build(f)),$("#current_scheme .scheme").attr("id","current_"+$("#current_scheme .scheme").attr("id")),e(),s=0,t(f)}):($("#current_scheme").empty().append(proboards.color_scheme.build(f)),$("#current_scheme .scheme").attr("id","current_"+$("#current_scheme .scheme").attr("id")),e(),s=0,t(f))}),theme_settings.setup_editor(0),"undefined"!=typeof u["@title_bar_background_color"]?(theme_settings.options.gradient_background=u["@title_bar_background_color"].value,theme_settings.options.page_background=u["@body_background_color"].value):(theme_settings.options.gradient_background="#007bf7",theme_settings.options.page_background="#007bf7"),$(".help-icon").detach().appendTo("#forum-related .background-color label").show(),$(".property.background-image .combobox.presets").addClass("etc"),$(".property.background-image-texture .combobox.presets").addClass("etc"),$("#save-theme").click(function(e){$('input[name="css_submit"]').click()}),$('input[name="css_submit"]').click(function(e){saveButton(".half-editor.left",e,this,n),f=$("#current_scheme .scheme").data("scheme"),s=0})})},admin_themes_easy_layout=function(){var e=0;$(document).ready(function(){$("#template_layout_"+proboards.data("current_template_set")).addClass("selected"),$("#image_selector .avatar-wrapper").click(function(){var t=this;$("#image_selector .avatar-wrapper").removeClass("selected"),$(this).addClass("selected"),$('input[name="template_set"]').val($(t).attr("id").split("_")[2]),e=0,proboards.unsaved_changes=1,$("#save-theme").addClass("highlight")}),$("#image_selector .icon-wrapper").click(function(e){e.stopPropagation(),proboards.ajax({method:"post",url:proboards.data("layout_preview_url"),data:{id:$(this).closest(".avatar-wrapper").attr("id").split("_")[2]},success:function(e){var t="";if(e.file_paths.length>0)for(var i=0;i<e.file_paths.length;i++)t+='<img src="'+e.file_paths[i]+'" alt="Preview #'+i+'" title="Preview #'+i+'" />';else t="No Preview Images Found";proboards.dialog("layout-preview-dialog",{title:"Layout Preview",html:t,height:570,width:700})}})}),$("#save-theme").click(function(){$(".layout_form > form").submit()}),$(".layout_form > form").submit(function(t){var i=this;return 0==e&&(t.preventDefault(),proboards.data("dialog_text").length?proboards.form.gen_verify_box("layout-save-dialog","Verify &amp; Apply Layout",450,500,proboards.data("dialog_text"),"Delete","Verify & Apply",function(){e=1,proboards.unsaved_changes=0,$('.layout_form input[name="default"]').val("checked"==$('#theme-manager-buttons input[name="default"]').attr("checked")?1:0),$('.layout_form input[name="disabled"]').val("checked"==$('#theme-manager-buttons input[name="disabled"]').attr("checked")?1:0),$(i).submit()}):(e=1,proboards.unsaved_changes=0,$('.layout_form input[name="default"]').val("checked"==$('#theme-manager-buttons input[name="default"]').attr("checked")?1:0),$('.layout_form input[name="disabled"]').val("checked"==$('#theme-manager-buttons input[name="disabled"]').attr("checked")?1:0),$(i).submit())),$('.layout_form input[name="default"]').val("checked"==$('#theme-manager-buttons input[name="default"]').attr("checked")?1:0),$('.layout_form input[name="disabled"]').val("checked"==$('#theme-manager-buttons input[name="disabled"]').attr("checked")?1:0),!0})})},admin_themes_export=function(){var e=[];$(document).ready(function(){function t(){$('input[name="mode"]').val("new"),$('input[type="file"]').val(""),$('.export_tags, input[name="authorize"]').removeAttr("checked"),$(".preview_image, .or_text").hide(),$(".thumb td").removeClass("active_selection"),$(".primary.thumb .upload_box").addClass("active_selection"),$(".secondary.thumb .none_button").addClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".secondary.thumb, .thumb_container, .tag_container").show()}function i(){$('input[name="mode"]').val("update"),$('input[type="file"]').val(""),$('.export_tags, input[name="replacing"], input[name="authorize"]').removeAttr("checked"),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$(".preview_image, .or_text").show(),$(".thumb_container, .tag_container").hide()}function a(){$(".export_tags:checked").length>5?proboards.error("Error: Too many tags selected."):5==$(".export_tags:checked").length?$(".export_tags").not(":checked").attr("disabled","disabled"):$(".export_tags").removeAttr("disabled"),$(".tag_container").show()}function n(e){$(".thumbs .thumb").addClass("whiteout"),$(".thumbs .thumb .preview_image").empty(),$(".thumb td").removeClass("active_selection"),$('.thumbs input[type="hidden"]').val(0),$.each(e,function(e){$("#thumb_"+this.order+" .preview_image").addClass("active_selection").html('<img src="'+proboards.data("library_upload_path")+"/"+this.thumb_url+'" alt="thumb_'+this.order+'" />').show().parent().removeClass("whiteout").show(),$('input[name="thumb_choice_'+this.order+'"]').val(1)}),$(".loading_gif").hide(),$(".thumb_container").show()}$("#select_computer").click(function(){$("#computer_container").show(),$("#select_export_option").hide(),$('input[name="mode"]').val("computer")}),$("#select_library").click(function(){$("#library_container").show(),$("#select_export_option").hide()}),$(".back_button").click(function(e){e.preventDefault(),$(".export_theme_containers").hide(),$("#select_export_option").show()}),$("#select_new").click(function(){$("#update_container").hide(),$("#library_container_2").show(),$("#select_export_option_2").hide(),t()}),$("#select_update").click(function(){$("#update_container").show(),$("#library_container_2").show(),$("#select_export_option_2").hide(),i()}),$(".back_button_2").click(function(e){e.preventDefault(),$(".export_theme_containers").hide(),$("#library_container").hide(),$("#select_export_option").show()}),$(".back_button_3").click(function(e){e.preventDefault(),$(".export_theme_containers").hide(),$("#select_export_option_2").show()}),$('input[name="replacing"]').change(function(){var t=$(this).val();$(".thumb_container").hide().after(proboards.processing_icon({alt:"preview_loading","class":"loading_gif"})),$("input.export_tags").prop("checked",!1);for(var i=proboards.data("tags")[t],o=0;o<i.length;o++)$('input[name="'+i[o]["class"]+'"]').prop("checked",!0);a(),$('input[type="file"]').val(""),"undefined"==typeof e[t]?proboards.ajax({url:proboards.route("admin_theme_get_thumbs",{theme_id:t}),success:function(i){e[t]=i.thumbs,n(e[t])}}):n(e[t])}),$(".export_tags").change(function(){a()}),$(".thumbs td").click(function(){($(this).hasClass("preview_image")&&!$(this).parent().hasClass("whiteout")||$(this).hasClass("upload_box")||$(this).hasClass("none_button"))&&($(this).addClass("active_selection"),$(this).siblings().removeClass("active_selection"),$(this).parent().find('input[type="hidden"]').val($(this).data("val")))}),$('#library_container_2 input[name="export"]').click(function(e){return"update"==$('input[name="mode"]').val()&&"undefined"==typeof $('input[name="replacing"]:checked').val()?(proboards.error("You must select a theme to replace."),e.preventDefault(),!1):"new"!=$('input[name="mode"]').val()||$('input[name="thumb_1"]').val()?!!$('input[name="authorize"]').prop("checked")||(proboards.error("You must authorize this theme before you can export it."),e.preventDefault(),!1):(proboards.error("You must select at least one screenshot to upload with this theme before you can export it."),e.preventDefault(),!1)})})},admin_themes_manager=function(){$(document).ready(function(){$("div.theme-color_scheme .non_hover").each(function(){$(this).html(proboards.color_scheme.build(proboards.data("themes")[$(this).closest(".item").attr("id").split("-")[1]].color_scheme,0))}),$(".delete").on("click",function(e){var t=this,i=proboards.data("themes")[$(t).closest(".item").attr("id").split("-")[1]];e.preventDefault(),$("#delete-theme-container > strong").html(i.name),proboards.dialog("delete-theme-container",{width:550,title:"Delete Forum Theme",modal:!0,buttons:[{text:"Delete Forum Theme",id:"delete-theme-button",click:function(){"delete"!=$('input[name="verify"]').val().toLowerCase()?$.inputError($('input[name="verify"]'),'You must type "delete" in the box.'):proboards.ajax({url:i.delete_url,success:function(){$(t).parent().remove();var e=0;$("#theme-manager .item").each(function(){e++%2?$(this).addClass("even"):$(this).removeClass("even")})},complete:function(){$("#delete-theme-container").dialog("close")}})}}]}),$('input[name="verify"]').val("")}),$(".theme-size").on("click",function(e){var t=this,i=proboards.data("themes")[$(t).closest(".item").attr("id").split("-")[1]],a="<br /><table><tr><td>"+i.name+'</td><td style="text-align: right;">'+i.total_size.amount+" "+i.total_size.unit+' Total</td></tr><tr><td colspan="2"><div class="meter-container"><div class="meter css_color" style="width: '+i.css_percent+'%;"></div><div class="meter template_color" style="width: '+i.template_percent+'%;"></div><div class="meter image_color" style="width: '+i.image_percent+'%;"></div></div><span class="meter_text css_color"><span class="meter_number">'+i.css_size.amount+"</span>"+i.css_size.unit+' CSS</span><br /><span class="meter_text template_color"><span class="meter_number">'+i.template_size.amount+"</span>"+i.template_size.unit+' Templates</span><br /><span class="meter_text image_color"><span class="meter_number">'+i.image_size.amount+"</span>"+i.image_size.unit+" Images</span><br /></td></tr></table>";proboards.dialog("size-dialog",{title:"Theme Summary",html:a,height:350,width:504,buttons:{Done:function(){$(this).dialog("close")}}})}),$(".theme-enable").on("click",function(e){var t=this,i=$(t).closest(".item");proboards.ajax({url:proboards.data("themes")[i.attr("id").split("-")[1]].flags_url,data:{"default":i.hasClass("default")?1:0,disabled:i.hasClass("disabled")?0:1},success:function(){i.hasClass("disabled")?i.removeClass("disabled"):i.addClass("disabled")}})}),$(".theme-default").on("click",function(e){var t=this;e.preventDefault();var i=$(t).closest(".item"),a=proboards.data("themes")[i.attr("id").split("-")[1]];i.is(".default")||proboards.ajax({url:a.flags_url,data:{"default":1,disabled:0},success:function(){$(".item.default").removeClass("default"),i.addClass("default"),i.removeClass("disabled")}})}),$(".permissions-summary").tipTip({content:function(e){var t=this,i=$(t).closest(".item"),a="",n=proboards.data("Theme_"+i.attr("id").split("-")[1]+"_hover");if(i.hasClass("default"))a="This is the default theme, and can be accessed by all members and guests";else{a="To access this theme, you must meet all the requirements below: <br /><br />";for(var o=n.length-1;o>-1;o--)a+="<b>"+n[o].name+"</b><br />",a+=n[o].permissions+"<br />"}return a}})})},admin_themes_new=function(){$(document).ready(function(){$("#select_default").click(function(){$(".options_containers").show(),$("#default_container").show(),$("#select_create_option").hide(),$('input[name="mode"]').val("default")}),$("#select_copy").click(function(){$(".options_containers").show(),$("#copy_container").show(),$("#select_create_option").hide(),$('input[name="mode"]').val("copy")}),$(".back_button").click(function(e){e.preventDefault(),$(".create_theme_containers").hide(),$("#select_create_option").show()}),$('select[name="copy"] > option').first().attr("disabled","disabled"),$("#template_layout_0").addClass("selected"),$("#image_selector .avatar-wrapper").click(function(){var e=this;$("#image_selector .avatar-wrapper").removeClass("selected"),$(this).addClass("selected"),$('input[name="template_set"]').val($(e).attr("id").split("_")[2])}),$("#image_selector .icon-wrapper").click(function(e){e.stopPropagation(),proboards.ajax({method:"post",url:proboards.data("layout_preview_url"),data:{id:$(this).closest(".avatar-wrapper").attr("id").split("_")[2]},success:function(e){var t="";if(e.file_paths.length>0)for(var i=0;i<e.file_paths.length;i++)t+='<img src="'+e.file_paths[i]+'" alt="Preview #'+i+'" title="Preview #'+i+'" />';else t="No Preview Images Found";proboards.dialog("layout-preview-dialog",{title:"Layout Preview",html:t,height:570,width:700})}})}),$("form").submit(function(e){0==$('input[name="name"]').val().length?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),proboards.error("Please provide a name for your theme.")):"copy"==$('input[name="mode"]').val()&&$('select[name="copy"]').val()==-1&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),proboards.error("Please select an existing theme to copy.")),$('input[type="submit"]').removeAttr("disabled")}),$('form input[name="name"]').on("keydown",function(e){e.which==Keys.enter&&(e.preventDefault(),$("form").trigger("submit"))}),$("#select_import").click(function(e){e.preventDefault();var t=proboards.dialog("import-dialog",{title:"Import Theme",modal:!0,width:600}),i=Math.min(10485760,proboards.data("available_theme_space"));pbFileUpload.init({enableDragAndDrop:!1},{acceptFileTypes:/\.(pbt)$/i,url:proboards.data("theme_import_url"),maxNumberOfFiles:1,maxFileSize:i}),$("#fileupload").on("fileuploaddone",function(e,i){var a=i.result[0].redirect;$(".fileupload-buttonbar",t).hide(),t.append('\t\t\t\t<br>\t\t\t\t<p>\t\t\t\t\tThis theme has been successfully installed.  All plugins will be\t\t\t\t\tturned on for this theme.  To change this, go to your <a href="'+proboards.data("plugins_manage_url")+'">Plugin Manage</a> page. \t\t\t\t\tYou may now edit the theme and customize it how you wish.\t\t\t\t</p>\t\t\t\t<br>\t\t\t'),t.dialog("option","buttons",{Finished:function(){$(this).dialog("close")}}).dialog("option","close",function(){window.location=a})})})})},admin_themes_settings=function(){$(document).ready(function(){$('input:not([name^="groups"]), select',".group-row").bind("change",function(){var e=$(this).closest(".group-row");$('input[name^="groups"]',e).val($('input[name^="group_color"]',e).val()+"-"+$('input[name^="group_stars"]',e).val()+"-"+$('select[name^="group_star_type"] option:selected',e).val()).trigger("change")}),$('input:not([name^="ranks"]), select',".rank-row").bind("change",function(){var e=$(this).closest(".rank-row");$('input[name^="ranks"]',e).val($('input[name^="rank_stars"]',e).val()+"-"+$('select[name^="rank_star_type"] option:selected',e).val()).trigger("change")}),$('.group-row input[name^="groups"]').each(function(){$(this).autoSubmit({url:proboards.data("admin_theme_groups_save_url"),statusElement:$(".state",$(this).closest(".group-row")),instantUpdate:!0})}),$('.rank-row input[name^="ranks"]').each(function(){$(this).autoSubmit({url:proboards.data("admin_theme_ranks_save_url"),statusElement:$(".state",$(this).closest(".rank-row")),instantUpdate:!0})}),$('input[name="default"]').change(function(){$("#permissions-delete").toggle(!$('input[name="default"]').prop("checked"))}),$('select[name="permissions_level"]').val()==-1&&$('select[name="permissions_level"]').val(0),$('select[name="permissions_level"] option[value="-1"]').remove(),$(".rate_button").on("click",function(){proboards.ajax({url:proboards.data("rate_dialog_url"),success:function(e){"undefined"==typeof e.review&&(e.review={score:0,comments:""}),$("#rate-dialog textarea").val(e.review.comments);var i=e.review.score;t("#rate-dialog .star_rating",i),$("#rate-dialog .stars .star").on("click",function(){i=$(this).data("star"),t("#rate-dialog .star_rating",i)}),proboards.dialog("rate-dialog",{width:"auto",title:"Rate Forum Theme",buttons:[{text:"Submit",id:"rate-submit-button",click:function(){$("#rate-submit-button").attr("disabled","disabled"),proboards.ajax({url:proboards.data("rate_theme_url"),data:{score:i,comments:$("#rate-dialog textarea").val()},complete:function(){proboards.alert("Theme Rated","Thank you for rating this theme."),$("#rate-dialog").dialog("close")}})}}]}).dialog("open").show()}})});var i=$(".help_link");$('input[name="help_link"]').on("change",function(){var e=$(this).val();$.check_url(e)?i.attr("href",e).show():i.attr("href","#").hide()}).change(),$('#settings-container input[name="name"], textarea[name="description"], select[name="forum_title"], textarea[name="change_log"], input[name="help_link"]').autoSubmit({url:proboards.data("admin_theme_settings_save_url"),success:function(){"name"==$(this).attr("name")&&$('select[name="theme"] option:selected').text($(this).val())}}),$('input[name^="version_"]').change(function(){$(this).closest("form").find('input[name="version"]').val($(this).closest("form").find('input[name="version_major"]').val()+"."+$(this).closest("form").find('input[name="version_minor"]').val()+"."+$(this).closest("form").find('input[name="version_revision"]').val()).trigger("change")}).trigger("change"),$('input[name="version"]').autoSubmit({url:proboards.data("admin_theme_settings_save_url"),instantUpdate:!0,statusElement:$(".version-status")}),$("#save-theme").click(function(e){e.preventDefault();var t=$(".admin-content").overlay();proboards.unsaved_changes=0,$("#save-theme").removeClass("highlight");var i=$(this).val(),a=this;$(this).attr("disabled","disabled"),$(this).val("Saving...");var n={},o=$("#settings-container form").serializeArray();$.each(o,function(){n[this.name]=this.value}),$('input[name="default"]').attr("checked")&&(n["default"]=1),$('input[name="disabled"]').attr("checked")&&(n.disabled=1),proboards.ajax({method:"post",url:proboards.route("admin_theme_flags_save",{theme_id:proboards.data("theme_id")}),data:n,success:function(e){$('select[name="theme"] option:selected').text(n.name),n["default"]&&(updateThemeDropdown(e.old_default),$("#permissions-delete").remove())},complete:function(){$(a).removeAttr("disabled"),$(a).val(i),t.remove()}})}),$(".delete-theme-link").bind("click",function(t){t.preventDefault(),proboards.dialog("delete-theme-container",{width:550,title:"Delete Forum Theme",modal:!0,buttons:[{text:"Delete Forum Theme",id:"delete-theme-button",click:function(){"delete"!=$('input[name="verify"]').val().toLowerCase()?$.inputError($('input[name="verify"]'),'You must type "delete" in the box.'):proboards.ajax({url:proboards.data("delete_theme_url"),success:function(){e("Theme successfully deleted.")},error:function(){e("There was an error.")}})}}]}),$('input[name="verify"]').val("")})});var e=function(e){$("#delete-theme-container").html(e+"<br />Please click the Continue button below to go to the default theme settings."),$("#delete-theme-button").text("Continue").unbind("click").bind("click",function(){$("#delete-theme-container").dialog("close")}),proboards.unsaved_changes=0,$("#delete-theme-container").bind("dialogclose",function(){window.location=proboards.data("admin_theme_settings_url")})},t=function(e,t){var i=100-t/5*100;i<100?$(e).css("left","-"+i+"px").parent().css("opacity","1"):$(e).css("left","-100px").parent().css("opacity",".5")},i=function(){$(this).parent().next().html(""!=$(this).val()?'<img src="'+proboards.data("group_stars")[$(this).val()]+'" alt="*" />':"")};$(document).ready(function(){if(!proboards.data("loaded-groups")){proboards.data("loaded-groups",!0),$("#groups-container select").each(i),$("#groups-container select").change(i);var e=proboards.data("group_stars");for(s in e)$('<img src="'+e[s]+'" />');$("#settings-group-list .disclaimer a").click(function(e){return e.preventDefault(),$("#confirm_dialog_div").html("You are about to reset all group settings to their default values."),proboards.dialog("confirm_dialog_div",{title:"Warning!",buttons:{OK:function(){$(".group-row").each(function(){
var e=$(this).attr("class"),t=e.match(/group\-stars\-(\d*)/)[1],a=e.match(/group\-star\-type\-(\d*)/)[1],n=e.match(/group\-color\-([A-Fa-f0-9]*)/)[1];$('input[type="text"]',this).val(t),$("select",this).val(a),$("select",this).each(i),$('.group-color input[type="hidden"]',this).val(n),$(".group-color .color_preview",this).attr("style",$(".group-default-color .color_preview",this).attr("style")),$(".group-color .color_preview",this).html($(".group-default-color .color_preview",this).html()+(""!=n?'<div class="delete-wrapper"><div class="delete"></div></div>':""))}),proboards.ajax({url:proboards.data("custom_groups_reset_url"),data:{reset:!0}}),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}).dialog("open"),!1}),$("#settings-rank-list .disclaimer a").click(function(e){return e.preventDefault(),$("#confirm_dialog_div").html("You are about to reset all rank settings to their default values.").dialog({title:"Warning!",buttons:{OK:function(){$(".rank-row").each(function(){var e=$(this).attr("class"),t=e.match(/rank\-stars\-(\d*)/)[1],a=e.match(/rank\-star\-type\-(\d*)/)[1];$('input[type="text"]',this).val(t),$("select",this).val(a),$("select",this).each(i)}),proboards.ajax({url:proboards.data("custom_ranks_reset_url"),data:{reset:!0}}),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}).dialog("open"),!1}),$("#color_picker_div").colorPicker({autoUpdate:!1}),$(".group-color .color_preview .delete").live("click",function(e){e.stopPropagation(),$(this).parent().parent().css("background-color","#ffffff"),$(this).parent().parent().prev().val(""),$(this).parent().parent().prev().change(),$(this).parent().parent().html('<div class="text">None</div>')}),$(".group-color .color_preview").live("click tabFocus",function(){var e=this,t=$(this).prev().val(),i=$(this).offset();$("#color_picker_div").colorPicker("show",{hex:t,offset:{left:i.left,top:i.top+22},update:function(t){$("#colorPicker-preview").css({backgroundColor:"#"+t}),$(e).css("background-color","#"+t),$(e).html('<div class="delete-wrapper"><div class="delete"></div></div>'),$(e).prev().val(t),$(e).prev().change(),$(e).focus().select(),$(this).colorPicker("hide")}}),$("#colorPicker-input input").focus().select()})}}),$(document).ready(function(){$.tabinate({tabs:$(".ui-tabMenu .tabs"),content:$(".containers"),useHash:!0})}),$(document).ready(function(){function e(e){for(var i=$(e).data("action"),a=proboards.data("image_list"),n=proboards.data("theme_list"),o='Select the images you want to export:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',r=0;r<a.length;r++)o+='<label><input type="checkbox" name="images[]" value="'+a[r].value+'"'+(a[r].present?' checked="checked"':"")+">"+a[r].name+"</label><br />",12!=r&&25!=r||(o+="</td><td>");o+='</td></tr></table><br /><br /> Select a theme to export the selected images to: <br /><br /><select name="theme">';for(var r=0;r<n.length;r++)n[r].id!=proboards.data("theme_id")&&(o+='<option value="'+n[r].id+'">'+n[r].name+"</option>");o+="</select>",proboards.dialog("advanced-export-dialog",{title:"Export Images",html:o,height:450,width:500,buttons:[{id:"advanced-export-button",text:"Export Images",click:function(){var e=this;proboards.confirm("Are you sure you want to replace all the selected images?",function(){var t=$("#advanced-export-dialog input, #advanced-export-dialog select").serializeArray();t.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:i,data:t,success:function(){proboards.alert("Success","Export Successful")},complete:function(){$(e).dialog("close")}})},{title:"Confirm"})}}]}),t("#advanced-export-dialog","#advanced-export-button"),$("#advanced-export-dialog input").change(function(){t("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .select_all").click(function(){$('input[name="images[]"]').attr("checked","checked"),t("#advanced-export-dialog","#advanced-export-button")}),$("#advanced-export-dialog .deselect_all").click(function(){$('input[name="images[]"]').removeAttr("checked"),t("#advanced-export-dialog","#advanced-export-button")})}function t(e,t){$(e+" input:checked").length>0?$(t).button("enable"):$(t).button("disable")}$(".section h3").click(function(){var e=$(".arrow",this),t=$(this).parents(".section");e.hasClass("down")?(e.addClass("right"),e.removeClass("down"),$(".image-modules",t).hide("blind")):(e.addClass("down"),e.removeClass("right"),$(".image-modules",t).show("blind"))}),$("#images-container .section h3 .default").click(function(e){e.preventDefault(),e.stopPropagation();var t=$(this).parents(".section");proboards.confirm("Are you sure you wish to delete all custom images and links in this section?",function(){var e=[];$(".image-module",t).each(function(){var t=proboards.image_module.get_id($(this));"new"!=t.substr(0,3)&&e.push(t)}),e.length&&proboards.ajax({url:proboards.data("image-module-reset-url"),data:{ids:e.join(","),theme_id:proboards.data("theme_id")},success:function(e){proboards.image_module.apply_defaults(e.images)}})})}),$("#images-container .reset-all").click(function(e){e.preventDefault(),proboards.confirm("Are you sure you wish to delete all custom images and links?",function(){var e=[];$(".image-module").each(function(){var t=proboards.image_module.get_id($(this));"new"!=t.substr(0,3)&&e.push(t)}),e.length&&proboards.ajax({url:proboards.data("image-module-reset-url"),data:{ids:e.join(","),theme_id:proboards.data("theme_id")},success:function(e){proboards.image_module.apply_defaults(e.images)}})})}),$("#images-container a.import").bind("click",function(e){e.preventDefault();for(var i=$(this).data("action"),a=proboards.data("image_list"),n=proboards.data("theme_list"),o='Select the images you want to import:<br /><br /><a class="button select_all">Select All</a> <a class="button deselect_all">Deselect All</a><br /><br /><table><tr><td>',r=0;r<a.length;r++)o+='<label><input type="checkbox" name="images[]" value="'+a[r].value+'">'+a[r].name+"</label><br />",12!=r&&25!=r||(o+="</td><td>");o+='</td></tr></table><br /><br /> Select a theme to import the selected images from: <br /><br /><select name="theme">';for(var r=0;r<n.length;r++)n[r].id!=proboards.data("theme_id")&&(o+='<option value="'+n[r].id+'">'+n[r].name+"</option>");o+="</select>",proboards.dialog("advanced-import-dialog",{title:"Import Images",html:o,height:450,width:500,buttons:[{id:"advanced-import-button",text:"Import Images",click:function(){var e=this;proboards.confirm("Are you sure you want to replace all the selected images?",function(){var t=$("#advanced-import-dialog input, #advanced-import-dialog select").serializeArray();t.push({name:"csrf_token",value:proboards.data("csrf_token")}),proboards.ajax({url:i,data:t,success:function(){location.reload()},complete:function(){$(e).dialog("close")}})},{title:"Confirm"})}}]}),t("#advanced-import-dialog","#advanced-import-button"),$("#advanced-import-dialog input").change(function(){t("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .select_all").click(function(){$('input[name="images[]"]').attr("checked","checked"),t("#advanced-import-dialog","#advanced-import-button")}),$("#advanced-import-dialog .deselect_all").click(function(){$('input[name="images[]"]').removeAttr("checked"),t("#advanced-import-dialog","#advanced-import-button")})}),$("#images-container a.export").bind("click",function(t){t.preventDefault();var i=$(this);proboards.unsaved_changes?proboards.confirm("You have unsaved changes.  If you try to export now, your changes will not be included.  Continue?",function(){e(i)},{title:"Unsaved Changes"}):e(i)});var a="div.category-3",n=function(){var e='<option value="">None</option>';$(".image-module:not(.new,.deleted)",$("#images-container "+a)).each(function(){var t=proboards.image_module.get_id(this),i=$(".name .text",this).html();e+='<option value="'+t+'">'+proboards.escape_html(i)+"</option>"}),$("#groups-container select").each(function(){var t=$(this).val();$(this).html(e),$(this).val(t)}),$("#groups-container select").each(i)};$(".image-module").live("module.update",function(e,t){if($(this).parents("div.category-0").length&&0!=$('select[name="forum_title"]').val()&&("undefined"!=typeof t.type&&"default"==t.type?$('select[name="forum_title"]').val(1):$('select[name="forum_title"]').val(2)),$(this).parents(a).length){var i=proboards.image_module.get_id(this),o=t?t.url:$(".image img",this).attr("src"),r=proboards.data("group_stars");r[i]=o,proboards.data("group_stars",r),$(".group-default-star.star-type-"+i+" img").attr("src",o),$(".rank-default-star.star-type-"+i+" img").attr("src",o),n()}}),$(".image-module").live("module.delete",function(){if($(this).parents(a).length){var e=proboards.image_module.get_id(this),t=proboards.data("group_stars");delete t[e],proboards.data("group_stars",t),$(".group-default-star.star-type-"+e+" img").attr("src",""),$(".rank-default-star.star-type-"+e+" img").attr("src",""),n()}})})},theme_settings={options:{previewContents:null,selectors:{},stylesheet:null,styleElem:null,stylesheetData:null,stylesheetW:null,styleElemW:null,stylesheetDataW:null,stylesheetM:null,validations:{background:"background","background-color":"hexCode","background-image":"urlSurround","banner-image":"urlSurround","background-image-texture":"urlSurround",border:"border","border-width":"borderWidth","border-style":"borderStyle","border-color":"hexCode","border-radius":"borderRadius","box-shadow":"boxShadow",height:"size",color:"hexCode",font:"font","font-style":"fontStyle","font-weight":"fontWeight","font-size":"fontSize","font-family":"fontFamily","text-align":"textAlign","text-decoration":"textDecoration","font-variant":"fontVariant","text-transform":"textTransform","text-shadow":"boxShadow",width:"size"},zoomSetup:!1,gradient_background:"#000000",page_background:"#000000",banner_text:"#000000"},build_editor:function(e){var t=this;"undefined"==typeof e&&(e=0);var i=function(a,n,o){"undefined"==typeof o&&(o=0);for(var r=0;r<a.length;r++){var s=a[r],l=$('<div class="property_wrapper '+proboards.escape_html(s.type)+'" />');n.append(l),"section"===s.type?(l.attr("class","section"),s=$.extend({name:"Section"},s),0===o&&l.addClass("heading"),l.append("<h2>"+(0!==o?'<span class="arrow right"><span></span></span>':"")+'<span class="section_name">'+s.name+"</span></h2>"),"undefined"!=typeof s.children&&i(s.children,l,o+1),l.data("item",s)):t.select_editor_options(l,s,e)}0===o&&n.append('<div style="margin-bottom: 0px;">&nbsp;</div>')};i(JSON.parse(proboards.data("editor_forum")),$("#forum-related"))},select_editor_options:function(e,t,i){if(t=1==i?$.extend({value:""},t):$.extend({value:this.get_variable_value(t.variable)},t),"background"===t.type)if(1==i){var a=t.name;"undefined"==typeof t.name&&(a="Background"),e.append(this.gen_color($.extend({},t,{name:a,value:""}),1)),e.append(this.gen_background_image($.extend({},t,{name:a,value:""}),1)),e.append(this.gen_background_attachment($.extend({},t,{name:a,value:""}),1)),e.append(this.gen_background_repeat($.extend({},t,{name:a,value:""}),1)),e.append(this.gen_background_position($.extend({},t,{name:a,value:""}),1))}else e.append(this.gen_color($.extend({name:"Background Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1)),e.append(this.gen_background_image($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-image")}),1)),e.append(this.gen_background_attachment($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-attachment")}),1)),e.append(this.gen_background_repeat($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-repeat")}),1)),e.append(this.gen_background_position($.extend(t,{value:this.get_variable_multivalue(t.variable,"background-position")}),1));else if("background-color"===t.type)e.append(this.gen_color($.extend({name:"Background Color"},t)));else if("background-image"===t.type)e.append(this.gen_background_image(t));else if("banner-image"===t.type)e.append(this.gen_banner_image(t));else if("background-image-texture"===t.type)e.append(this.gen_background_image_texture(t));else if("background-attachment"===t.type)e.append(this.gen_background_attachment(t));else if("background-repeat"===t.type)e.append(this.gen_background_repeat(t));else if("background-position"===t.type)e.append(this.gen_background_position(t));else if("border"===t.type)if(1==i){var a=t.name;"undefined"==typeof t.name&&(a="Border"),e.append(this.gen_border_width($.extend({},t,{name:a},{value:""}),!1,1)),e.append(this.gen_border_style($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_color($.extend({},t,{name:a},{value:""}),1))}else e.append(this.gen_border_width($.extend(t,{value:this.get_variable_multivalue(t.variable,"border-width")}),!1,1)),e.append(this.gen_border_style($.extend(t,{value:this.get_variable_multivalue(t.variable,"border-style")}),1)),e.append(this.gen_color($.extend({name:"Border Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1));else if("border-width"===t.type)e.append(this.gen_border_width(t));else if("border-style"===t.type)e.append(this.gen_border_style(t));else if("border-color"===t.type)e.append(this.gen_color($.extend({name:"Color"},t)));else if("border-radius"===t.type)e.append(this.gen_border_radius(t));else if("box-shadow"===t.type)if(1==i){var a=t.name;"undefined"==typeof t.name&&(a="Shadow"),e.append(this.gen_shadow_size($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_shadow_position($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_color($.extend({},t,{name:a},{value:""}),1))}else{var n=this.get_shadow_dimensions(t.variable);e.append(this.gen_shadow_size($.extend(t,{value:n.size}),1)),e.append(this.gen_shadow_position($.extend(t,{value:n.position}),1)),e.append(this.gen_color($.extend({name:"Shadow Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1))}else if("color"===t.type)e.append(this.gen_color($.extend({name:"Text Color"},t)));else if("height"===t.type)e.append(this.gen_size($.extend({name:"Height"},t)));else if("width"===t.type)e.append(this.gen_size($.extend({name:"Width"},t)));else if("font"===t.type)if(1==i){var a=t.name;"undefined"==typeof t.name&&(a="Font"),e.append(this.gen_font_style($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_font_weight($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_font_size($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_font_family($.extend({},t,{name:a},{value:""}),1))}else e.append(this.gen_font_style($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-style")}),1)),e.append(this.gen_font_weight($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-weight")}),1)),e.append(this.gen_font_size($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-size")}),1)),e.append(this.gen_font_family($.extend(t,{value:this.get_variable_multivalue(t.variable,"font-family")}),1));else if("font-style"===t.type)e.append(this.gen_font_style(t));else if("font-variant"===t.type)e.append(this.gen_font_variant(t));else if("text-transform"===t.type)e.append(this.gen_text_transform(t));else if("font-weight"===t.type)e.append(this.gen_font_weight(t));else if("font-size"===t.type)e.append(this.gen_font_size(t));else if("font-family"===t.type)e.append(this.gen_font_family(t));else if("text-decoration"===t.type)e.append(this.gen_text_decoration(t));else if("text-align"===t.type)e.append(this.gen_text_align(t));else if("text-shadow"===t.type)if(1==i){var a=t.name;"undefined"==typeof t.name&&(a="Text Shadow"),e.append(this.gen_shadow_size($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_shadow_position($.extend({},t,{name:a},{value:""}),1)),e.append(this.gen_color($.extend({},t,{name:a},{value:""}),1))}else{var n=this.get_shadow_dimensions(t.variable);e.append(this.gen_shadow_size($.extend({name:"Text Shadow Size"},t,{value:n.size}),1)),e.append(this.gen_shadow_position($.extend({name:"Text Shadow Position"},t,{value:n.position}),1)),e.append(this.gen_color($.extend({name:"Text Shadow Color"},t,{value:this.get_variable_multivalue(t.variable,"color")}),1))}},gen_color:function(e,t){var i=$.extend({name:"Color"},e);"undefined"==typeof t&&(t=0),"#"==i.value.charAt(0)&&(i.value=i.value.substr(1));var a=proboards.escape_html(i.name)+(t?" Color":"");return $('<div class="property color"><label title="'+a+'">'+a+'</label><input class="width-7" type="text" value="'+proboards.escape_html(i.value)+'" /></div>').data("item",i)},gen_background_image:function(e,t){var i=$.extend({name:"Background Image"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Image":"");i.presets=1;var n=i.value;return"url("==n.slice(0,4)&&(n=n.slice(5,-2)),$('<div class="property background-image"><label title="'+a+'">'+a+'</label><span class="style-wrapper">'+(i.presets?'<span class="combobox presets"><input class="width-20" type="text" value="'+proboards.escape_html(n)+'" /><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-background-image-menu"></span>':'<input class="width-20" type="text" value="'+proboards.escape_html(n)+'" />')+' <span class="upload-button" role="button">'+proboards.get_image({src:"/admin/themes/icons/upload.png"})+'<input type="file" name="background-image" class="bg-upload"></span><span class="status"></span></span></div>').data("item",i)},gen_background_image_texture:function(e,t){var i=$.extend({name:"Background Image"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Image":""),n=i.value;return"url("==n.slice(0,4)&&(n=n.slice(5,-2)),$('<div class="property background-image-texture"><label title="'+a+'">'+a+'</label><span class="style-wrapper"><span class="combobox presets background-texture"><input class="width-20" type="text" value="'+proboards.escape_html(n)+'" /><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-background-image-texture-menu"></span> <span class="upload-button" role="button">'+proboards.get_image({src:"/admin/themes/icons/upload.png"})+'<input type="file" name="background-image-texture" class="bg-upload"></span><span class="status"></span></span></div>').data("item",i)},gen_banner_image:function(e,t){var i=$.extend({name:"Banner Image"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Image":""),n=i.value;return"url("==n.slice(0,4)&&(n=n.slice(5,-2)),$('<div class="property banner-image"><label title="'+a+'">'+a+'</label><span class="style-wrapper"><span class="combobox presets banner"><input class="width-20" type="text" value="'+proboards.escape_html(n)+'" /><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-banner-image-menu"></span> <span class="upload-button" role="button">'+proboards.get_image({src:"/admin/themes/icons/upload.png"})+'<input type="file" name="banner-image" class="bg-upload"></span><span class="status"></span></span></div>').data("item",i)},gen_background_repeat:function(e,t){var i=$.extend({name:"Background Repeat"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Repeat":""),n=$('<div class="property background-repeat"><label title="'+a+'">'+a+'</label><select><option value="">-- Select --</option><option value="repeat">repeat</option><option value="repeat-x">repeat horizontally</option><option value="repeat-y">repeat vertically</option><option value="no-repeat">no repeat</option></select></div>').data("item",i);return n.find("> select").val(i.value),n},gen_background_attachment:function(e,t){var i=$.extend({name:"Background Attachment"},e);"undefined"==typeof t&&(t=0);var a=$.unique_id(),n=$.unique_id(),o=proboards.escape_html(i.name)+(t?" Attachment":""),r=$('<div class="property background-attachment"><label title="'+o+'">'+o+'</label><span class="style-wrapper"><input type="radio" name="'+a+'" id="'+a+'" value="fixed" /><label for="'+a+'">Fixed</label>&nbsp;<input type="radio" name="'+a+'" id="'+n+'" value="scroll" /><label for="'+n+'">Scroll with Page</label></span></div>').data("item",i);return r.find('input[value="'+i.value+'"]').attr("checked","checked"),r},gen_background_position:function(e,t){var i=$.extend({name:"Background Position"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Position":"");return $('<div class="property background-position"><label title="'+a+'">'+a+'</label><span class="style-wrapper img-menu"><input type="text" value="'+proboards.escape_html(i.value)+'" readonly="readonly"/> <span class="combobox background-position-button image-button">'+proboards.get_image({src:"/admin/themes/sides/direction-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-position-menu"></span></span></div>').data("item",i)},gen_border_width:function(e,t,i){var a=$.extend({name:"Border Width"},e);"undefined"==typeof t&&(t=!0),"undefined"==typeof i&&(i=0);var n=proboards.escape_html(a.name)+(i?" Width":""),o=this.get_multidimensional_value(a.value);return $('<div class="property border-width"><label title="'+n+'">'+n+'</label><span class="style-wrapper img-menu">'+(t?'<input class="width-6" name="width" type="text" value="'+proboards.escape_html(o.value)+'"/> <span class="combobox border-width-button image-button">'+proboards.get_image({src:"/admin/themes/sides/direction-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-sides-menu"></span><input type="hidden" name="type" value="'+o.flags+'"/>':'<input class="width-6" name="width" type="text" value="'+proboards.escape_html(a.value)+'"/>')+"</span></div>").data("item",a)},gen_border_style:function(e,t){var i=$.extend({name:"Border Style"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Style":""),n=$('<div class="property border-style"><label title="'+a+'">'+a+'</label><select><option value="">-- Select --</option><option value="none">none</option><option value="dashed">dashed</option><option value="dotted">dotted</option><option value="double">double</option><option value="groove">groove</option><option value="hidden">hidden</option><option value="inset">inset</option><option value="outset">outset</option><option value="ridge">ridge</option><option value="solid">solid</option></select></div>').data("item",i);return n.find("select").val(i.value),n},gen_border_radius:function(e){var t=$.extend({name:"Border Radius"},e),i=this.get_multidimensional_value(t.value),a=proboards.escape_html(t.name),n=$('<div class="property border-radius"><label title="'+a+'">'+a+'</label><span class="style-wrapper img-menu"><input class="width-6" name="radius" type="text" value="'+proboards.escape_html(i.value)+'"/> <span class="combobox border-radius-button image-button">'+proboards.get_image({src:"/admin/themes/corners/border-radius-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-corners-menu"></span><input type="hidden" name="type" value="'+i.flags+'"/></span></div>').data("item",t);return n},gen_shadow_position:function(e,t){var i=$.extend({name:"Shadow Position"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Position":"");return $('<div class="property box-shadow-position"><label title="'+a+'">'+a+'</label><span class="style-wrapper img-menu"><input type="text" value="'+proboards.escape_html(i.value)+'" readonly="readonly"/> <span class="combobox shadow-position-button image-button">'+proboards.get_image({src:"/admin/themes/sides/direction-13.png"})+'<span class="arrow down"><span></span></span></span><span class="c-position-menu"></span></span></div>').data("item",i)},gen_shadow_size:function(e,t){var i=$.extend({name:"Shadow Size"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Size":""),n=$('<div class="property box-shadow-size"><label title="'+a+'">'+a+'</label><select><option value="">-- Select --</option><option value="none">none</option><option value="small">small</option><option value="medium">medium</option><option value="large">large</option></select></div>').data("item",i);return n.find("select").val(i.value),n},gen_size:function(e){var t=$.extend({name:"Size"},e),i=proboards.escape_html(t.name);return $('<div class="property size"><label title="'+i+'">'+i+'</label><input class="width-6" type="text" value="'+proboards.escape_html(t.value)+'" /></div>').data("item",t)},gen_font_style:function(e,t){var i=$.extend({name:"Font Style"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Style":"");return $('<div class="property font-style"><label title="'+a+'">'+a+'</label><span class="combobox style-wrapper"><input class="width-6" type="text" value="'+proboards.escape_html(i.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-style-menu"></span></div>').data("item",i)},gen_font_variant:function(e){var t=$.extend({name:"Small Caps"},e),i=proboards.escape_html(t.name);return $('<div class="property font-variant"><label title="'+i+'">'+i+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(t.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-variant-menu"></span></div>').data("item",t)},gen_text_transform:function(e){var t=$.extend({name:"Font Case"},e),i=proboards.escape_html(t.name);return $('<div class="property text-transform"><label title="'+i+'">'+i+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(t.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-text-transform-menu"></span></div>').data("item",t)},gen_font_weight:function(e,t){var i=$.extend({name:"Font Weight"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Weight":"");return $('<div class="property font-weight"><label title="'+a+'">'+a+'</label><span class="combobox style-wrapper"><input class="width-6" type="text" value="'+proboards.escape_html(i.value)+'"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-weight-menu"></span></div>').data("item",i)},gen_font_size:function(e,t){var i=$.extend({name:"Font Size"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Size":"");return $('<div class="property font-size"><label title="'+a+'">'+a+'</label><span class="combobox style-wrapper"><input class="width-6" type="text" value="'+proboards.escape_html(i.value)+'"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-size-menu"></span><input type="hidden" name="$[leaf_id]_line-height" value="$[leaf.css.properties.line_height]" /></div>').data("item",i)},gen_font_family:function(e,t){var i=$.extend({name:"Font Family"},e);"undefined"==typeof t&&(t=0);var a=proboards.escape_html(i.name)+(t?" Family":"");return $('<div class="property font-family"><label title="'+a+'">'+a+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(i.value)+'"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-font-family-menu"></span></div>').data("item",i)},gen_text_decoration:function(e){var t=$.extend({name:"Text Decoration"},e),i=proboards.escape_html(t.name);return $('<div class="property text-decoration"><label title="'+i+'">'+i+'</label><span class="combobox style-wrapper"><input class="width-17" type="text" value="'+proboards.escape_html(t.value)+'" readonly="readonly"/><span class="faux-dropdown arrow down"><span></span></span></span><span class="c-text-decoration-menu"></span></div>').data("item",t)},gen_text_align:function(e){var t=$.extend({name:"Text Align"},e),i=proboards.escape_html(t.name),a=$('<div class="property text-align"><label title="'+i+'">'+i+'</label><select><option value="">-- Select --</option><option value="left">left</option><option value="right">right</option><option value="center">center</option><option value="justify">justify</option></select></div>').data("item",t);return a.find("select").val(t.value),a},get_variable_value:function(e){return"undefined"==typeof this.options.variables[e]?"":this.options.variables[e].value},get_variable_multivalue:function(e,t){if("undefined"==typeof this.options.variables[e])return"";var i=this.options.variables[e].rule.value.value;if(!(i.length&&i[0]instanceof less.tree.Expression))return"";i=i[0].value;var a="";if("font-family"===t||"font-weight"===t||"font-style"===t){var n=$("<span />");return n.css("font",this.options.variables[e].value),a=n.css(t),n.remove(),a}for(var o=0;o<i.length;++o)switch(t){case"color":if(i[o]instanceof less.tree.Color)return i[o].toCSS({frames:[]}).replace(/^#/,"");break;case"background-image":if(i[o]instanceof less.tree.URL)return i[o].value.value;break;case"background-attachment":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/scroll|fixed/))return i[o].value;break;case"background-position":i[o]instanceof less.tree.Keyword&&i[o].value.match(/top|left|bottom|right|center/)&&(a+=(""!=a?" ":"")+i[o].value);case"shadow-dimensions":case"border-width":i[o]instanceof less.tree.Dimension&&(a+=(""!=a?" ":"")+i[o].value+(null!=i[o].unit?i[o].unit:""));break;case"background-repeat":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/repeat|repeat-x|repeat-y|no-repeat/))return i[o].value;break;case"font-size":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/xx-small|x-small|small|medium|large|x-large|xx-large|smaller|larger/))return i[o].value;if(i[o]instanceof less.tree.Dimension)return i[o].value+(null!=i[o].unit?i[o].unit:"");break;case"border-style":if(i[o]instanceof less.tree.Keyword&&i[o].value.match(/hidden|dotted|dashed|solid|double|groove|ridge|inset|outset/))return i[o].value;break;case"font-weight":if((i[o]instanceof less.tree.Keyword||i[o]instanceof less.tree.Anonymous)&&i[o].value.match(/normal|bold|bolder|lighter|\d{1}00/))return i[o].value}return a},get_multidimensional_value:function(e){var t={value:"",flags:""},i=e.split(" ");if(i.length){for(var a=0;a<i.length;++a){var n=parseFloat(i[a]),o=isNaN(n)||0==n?0:1;""===t.value&&o&&(t.value=i[a]),t.flags+=o}1===i.length?t.flags+=t.flags+t.flags+t.flags:2===i.length?t.flags+=t.flags:2===i.length&&(t.flags+="0")}return t},get_shadow_dimensions:function(e){var t=this.get_variable_multivalue(e,"shadow-dimensions"),i={size:"",position:""},a=t.split(" ");if(a.length){var n={"":"none",0:"none","0px":"none","2px":"small","4px":"medium","6px":"large"},o=function(e,t){return e=parseInt(e),e>0?t?"bottom":"right":e<0?t?"top":"left":"center"};i.position=o(a[0])+" "+o(a[1],!0),i.size="undefined"!=typeof n[a[2]]?n[a[2]]:""}return i},setup_editor:function(e){var t=this;t.options.selectors=proboards.data("selectors"),t.options.stylesheet=proboards.data("css_forum"),t.options.stylesheetW=proboards.data("css_wysiwyg"),t.options.stylesheetM=proboards.data("css_mobile"),t.setup_variables(),t.build_editor(e),this.setup_alternating_bg(),this.setup_collapsable("#settings .section .section h2"),this.setup_color_picker(".property.color > input"),this.setup_preview(e),this.setup_image_selector(proboards.data("bg_presets"),{imgPath:proboards.image_path()+"/gradients/",listId:"c-background-image-menu",listClass:"bg-presets"}),this.setup_image_selector(proboards.data("banner_presets"),{imgPath:proboards.image_path()+"/banners/",listId:"c-banner-image-menu",listClass:"banner-presets"}),this.setup_image_selector(proboards.data("bg_presets_texture"),{imgPath:proboards.image_path()+"/banners/",listId:"c-background-image-texture-menu",listClass:"banner-presets"}),this.apply_image_menu_values(),"undefined"!=typeof e&&1==e||this.bind_data_change(),this.bind_upload_buttons(".bg-upload",e);var i=$(".combobox");this.setup_comboboxes(i,"simple",e),this.setup_comboboxes(i.filter(".image-button"),"image",e),this.setup_comboboxes(i.filter(".banner"),"banner",e),
this.setup_comboboxes(i.filter(".background-texture"),"background-texture",e)},setup_comboboxes:function(e,t,i,a){var n=this,o={simple:{onOpen:function(){if(this.hasClass("etc"))$("#c-background-image-menu li").css("backgroundColor",n.options.gradient_background);else if(this.hasClass("presets")){var e="";e=0!=this.closest(".property").siblings().length?this.closest(".property_wrapper").find(".color input").val():this.closest(".property_wrapper").prev().find(".color input").val(),e=validate.hexCode(e)||"transparent",$("#c-background-image-menu li").css("backgroundColor",e)}},onClick:function(e){var t=this.find("input");t.val($(e).text()),"undefined"!=typeof i&&1==i||n.trigger_data_change(t)}},image:{onClick:function(e){"img"!=e.nodeName.toLowerCase()&&(e=$("img",e).get(0));var t=$(e).attr("alt"),a=$(e).attr("src"),o=this.siblings("input");o.filter('[type="hidden"]').length>0&&(o=o.filter('[type="hidden"]')),o.val(t),this.find("img").attr("src",a),"undefined"!=typeof i&&1==i||n.trigger_data_change(o)}},banner:{onOpen:function(){var e="#"+$(this).closest(".property_wrapper").prev().find("input").val();$("#c-banner-image-menu li").css("background-color",e)},onClick:function(e){var t=this.find("input");t.val($(e).text()),"undefined"!=typeof i&&1==i||n.trigger_data_change(t)}},"background-texture":{onOpen:function(){if(this.hasClass("etc"))$("#c-background-image-texture-menu li").css("backgroundColor",n.options.page_background);else if(this.hasClass("presets")){var e=this.closest(".section").find("div.color input"),t="transparent";e.length>0&&""!=e.val()&&(t="#"+e.val()),$("#c-background-image-texture-menu li").css("backgroundColor",t)}},onClick:function(e){var t=this.find("input");t.val($(e).text()),"undefined"!=typeof i&&1==i||n.trigger_data_change(t)}}},o=o[t]||{},r=$.extend({position:{my:"right top",at:"right bottom",of:"self",collision:"flipfit",offset:"0 2"}},o,a);$(e).combobox(r)},setup_image_selector:function(e,t){for(var i=t.imgPath,a=t.imgType||"png",n=t.listId,o=t.listClass,r=0;r<e.length;r++)e[r]=i+e[r]+"."+a;proboards.preload(e);for(var s='<li alt="none" title="none"></li>',r=0;r<e.length;r++)s+='<li alt="'+e[r]+'" title="'+e[r]+"\">url('"+e[r]+"')</li>";$(".content-container:first").append('<ul id="'+n+'" class="hide c-menu '+o+'">'+s+"</ul>");var l="#c-background-image-menu"==n?"repeat-x":"repeat";$("#"+n+" li").each(function(){var e=$(this).text();$(this).css({backgroundImage:e,backgroundRepeat:l,backgroundPosition:"left center",color:"transparent"})})},setup_variables:function(){var e=this;e.options.stylesheetData=proboards.css.parse(e.options.stylesheet),e.options.stylesheetDataW=proboards.css.parse(e.options.stylesheetW),e.options.variables=proboards.css.variables(e.options.stylesheetData),e.options.variableSelectors=proboards.css.variableSelectors(e.options.stylesheetData),e.options.variableSelectorsW=proboards.css.variableSelectors(e.options.stylesheetDataW);for(s in e.options.variableSelectorsW)"undefined"!=typeof e.options.variableSelectors[s]?$.extend(e.options.variableSelectors[s],e.options.variableSelectorsW[s]):e.options.variableSelectors[s]=e.options.variableSelectorsW[s];for(s in e.options.variableSelectors){var t=[];for(var i in e.options.variableSelectors[s])t.push(i);e.options.variableSelectors[s]=t.join(",")}},apply_image_menu_values:function(){for(var e=[{type:"background-position-button",input:"background-position",menu:"c-position-menu"},{type:"border-radius-button",input:"border-radius-type",menu:"c-corners-menu"},{type:"border-width-button",input:"border-width-type",menu:"c-sides-menu"},{type:"shadow-position-button",input:"shadow-position",menu:"c-position-menu"},{type:"text-shadow-position-button",input:"text-shadow-position",menu:"c-position-menu"}],t=0;t<e.length;t++)$("."+e[t].type).each(function(){var i=$(this).parent(),a=$('input[type="hidden"]',i);a.length||(a=$('input[type="text"]',i));var n=$("#"+e[t].menu+' li img[alt="'+a.val()+'"]');if(n.length>0){var o=n.attr("src");$("img",this).attr("src",o)}})},bind_data_change:function(){var e=this;$('#settings input[type!="file"], #settings select, .etc_dialog input[type="text"]').bind("change.data change.color",function(){e.trigger_data_change($(this))})},bind_upload_buttons:function(selector,builder){var self=this,url=proboards.data("image-module-upload-url");proboards.data("custom_image_category_id")&&(url+="/id/new-"+proboards.data("custom_image_category_id")),proboards.data("theme_id")&&(url+="/theme_id/"+proboards.data("theme_id")),1==builder?$(selector).on("change",function(){var e=$(this).closest(".style-wrapper"),t=e.find('input[type="text"]');t.val("url('http://your.file/here.png')")}):$(selector).fileupload({maxFileSize:proboards.data("image_size_limit"),acceptFileTypes:new RegExp(eval(proboards.data("image_regex"))),add:function(e,t){$(this).closest(".style-wrapper").find(".status").html('<img alt="Uploading image..." src="'+proboards.image_module.image_pending()+'">'),t.submit()},done:function(e,t){var i=t.result.cssUrl,a=$(this).closest(".style-wrapper"),n=a.find('input[type="text"]');n.val(i),n.trigger("change"),self.bind_upload_buttons(selector),a.find(".status").html("")},fail:function(e,t){var i="Upload failed.",a=t&&$.isArray(t.files)&&t.files.length?t.files[0].error:"";if("maxFileSize"==a)i="The file exceeds the maximum size of "+$.byteSize(t.maxFileSize)+".";else if("acceptFileTypes"==a)i="Filetype not allowed.";else if(t&&t.result&&"string"==typeof t.result.responseText){var n=$.parseJSON(t.result.responseText);n&&n.error&&(i=n.error)}proboards.error(i);var o=$(this).closest(".style-wrapper");o.find(".status").html("")},url:url,dropZone:null,sequentialUploads:!0,dataType:"json"})},setup_alternating_bg:function(e){"undefined"==typeof e?$(".heading").each(function(){$(this).children("div").filter(":even").css("background-color","#EEEEEE").end().filter(":odd").css("background-color","transparent")}):$(e).closest(".heading").children("div").filter(":even").css("background-color","#EEEEEE").end().filter(":odd").css("background-color","transparent")},setup_color_picker:function(e,t){"undefined"==typeof t&&(t=!0),$(e).colorPickMe({update:function(e){$(this).trigger("change.color")}},{allowTransparent:t,autoUpdate:!1})},setup_collapsable:function(e,t){var i=$(e);"undefined"==typeof t&&i.siblings("div").hide(),i.bind("click",function(e){$(".arrow",this).hasClass("down")?($(this).siblings("div").hide(),$(".arrow",this).removeClass("down").addClass("right")):($(this).siblings("div").show(),$(".arrow",this).removeClass("right").addClass("down"))})},setup_preview:function(e){var t,i=this,a=function(){var a=i.options.previewContents=$("#preview iframe").contents(),n=a.get(0);if(""!=proboards.data("css_style")&&n){var o=n.getElementById("forum_style");o&&o.setAttribute("href",proboards.data("css_style"));var r="//storage.proboards.com/forum/css/0/forum_base.css";0==$('link[href="'+r+'"]').length&&$(o).before('<link rel="stylesheet" type="text/css" media="screen" href="'+r+'">')}if(""!=proboards.data("css_wysiwyg_style")){var s=a.find(".visual-editor iframe").contents().get(0);if(s){var o=s.getElementById("wysiwyg_style");o&&o.setAttribute("href",proboards.data("css_wysiwyg_style"))}}ssHelper(e),"undefined"!=typeof t&&t.remove()};$("#preview iframe").data("loaded")&&a(),$("#preview iframe").load(a);var n=$("#preview-container"),o=n.height(),r=document.createElement("div");r.id="preview-placeholder",r.style.height=o+"px";var s=n.offset(),l=function(){if($(window).width()<1310||$("html").is(".ie7"))return $("#preview-placeholder").remove(),void n.css({marginTop:"",position:"",width:""});var e=$(".half-editor.left").height();if(n.length&&$(this).scrollTop()>=s.top){var t=e-o,i=t+s.top;$(this).scrollTop()>=i?($("#preview-placeholder").remove(),i<0?n.css({position:"",width:""}):n.css({marginTop:t+"px",position:"",width:""})):(n.before(r),n.css({marginTop:"",position:"fixed",top:0,left:s.left+"px",width:n.css("width")}))}else n.length&&($("#preview-placeholder").remove(),n.css({marginTop:"",position:"",width:""}))};0==$('textarea[name="css"]').length&&$(window).bind("scroll.preview",l).resize(function(){$("#preview-placeholder").remove(),n.css({marginTop:"",position:"",width:""}),s=n.offset(),l.apply(this)}),$("#change-page").change(function(){t=$("#preview-container").overlay();var e=$(this).val();e&&($("#preview iframe")[0].src=$(this).val(),$("option",this).first().attr("selected","selected"))})},setup_zoom_controls:function(){var e=this,t=$("#zoom-slider"),i=$("#preview-wrapper").width(),a=(e.options.previewContents.find("#wrapper").width(),function(t){var i=parseInt(100*t);if($("html").is(".ie7, ie8"))$("#preview #preview-wrapper").css("zoom",t),$("#preview #preview-wrapper").css("height",500*(100/i));else{var a="scale("+t+","+t+")";$("#preview iframe").css({transform:a})}var n=500*(100/i);$("#preview iframe").attr("height",n),$("html").is(".ie7")||$("#preview iframe").attr("width",Math.round(1e5/i)/10+"%"),$("#zoom-value").html(i+"%"),e.options.zoomSetup=!0});$(window).resize(function(){e.resizeIframeWindow(),i=$("#preview-wrapper").width(),a(t.slider("value"))});var n=.2;t.slider({min:n,max:1,value:1,step:.01,create:function(e,t){$(this).slider("value",.75)},slide:function(e,t){a(t.value),$(this).find(".ui-slider-handle").css("backgroundColor","#CCC")},change:function(e,t){a(t.value)},stop:function(e,t){$(this).find(".ui-slider-handle").css("backgroundColor","")}}),$("#zoom-out").click(function(){var e=t.slider("value")-.05;t.slider("value",e)}),$("#zoom-in").click(function(){var e=t.slider("value")+.05;t.slider("value",e)})},resizeIframeWindow:function(e){var t=this;t.options.previewContents||(t.options.previewContents=$("#preview iframe").contents());var i=t.options.previewContents,a=$("html",i),n=i.get(0),o=n.styleSheets,r=e;if($("#wrapper",i).length){if(!e)for(var s=o.length-1;s>0;s--){var l=o[s],d=l.rules;if(l.rules){for(var c=0,u=d.length;c<u;c++){var p=d[c];if(p.selectorText&&"#wrapper"==p.selectorText.toLowerCase()){r=p.style.width;break}}if(r)break}}if(r){var h="%"==r.substr(-1),f=h?$(window).width()+"px":"auto";a.css({width:f,margin:"auto"})}}},trigger_data_change:function(e){var t=this,i=$(e).closest(".property"),a=$.trim(i.attr("class").replace(/property/,"")),n=i.data("item"),o=n.variable,r=e.val(),s=(t.options.selectors,t.options.validations);"undefined"!=typeof s[n.type]&&(r=validate[s[n.type]](r,e,n.type)),"color"!=n.type&&"background-color"!=n.type&&"border-color"!=n.type&&"banner-image"!=n.type&&"background-image"!=n.type||$(e).val(cleanField(r,n.type,a)),"object"!=typeof r&&(r={"":r});for(v in r){var o=t.options.variables[n.variable+(""!=v?"-"+v:"")];"undefined"!=typeof o&&t.changeVariable(n,o,r[v])}t.updateLivePreview(),proboards.unsaved_changes=1,$("#save-theme").addClass("highlight")},changeVariable:function(e,t,i){var a=this;i=checkForDefaultValue(i,e.type);var n=t.setValue(i);if(n){var o=a.options.stylesheet.indexOf(":",t.index),r=a.options.stylesheet.indexOf(";",o);if(o!==-1&&r!==-1){i=" "+i;var s=i.length-(r-o-1);for(v in a.options.variables)a.options.variables[v].index>t.index&&(a.options.variables[v].index+=s);a.options.stylesheet=a.options.stylesheet.substr(0,o+1)+i+a.options.stylesheet.substr(r)}}},updateLivePreview:function(e){var t=this;if(null!=t.options.styleElem&&t.options.styleElem.length){t.options.styleElem.next("#styleAfter").remove();try{t.options.styleElem.after('<style type="text/css" id="styleAfter">'+t.options.stylesheetData.toCSS()+"</style>");var i=proboards.css.variables(t.options.stylesheetData,["#wrapper"]),a=i["#wrapper @wrapper_width"].value;t.resizeIframeWindow(a)}catch(n){proboards.error(n.message)}}if(null!=t.options.styleElemW&&t.options.styleElemW.length){var o=proboards.css.parse(t.options.stylesheetW);proboards.css.extendVariables(o,t.options.stylesheetData),proboards.css.extendVariables(o,proboards.css.parse(proboards.data("css_required_vars"))),t.options.styleElemW.next("#styleAfterW").remove();try{t.options.styleElemW.after('<style type="text/css" id="styleAfterW">'+o.toCSS()+"</style>")}catch(n){proboards.error(n.message)}}}},validate={background:function(e,t){var i=$(t).closest(".background"),a=i.find(".color input"),n=i.find('.background-image input[type="text"]'),o=i.find(".background-attachment input:checked"),r=i.find(".background-repeat select"),s=i.find('.background-position input[type="text"]');o.length||(o=i.find(".background-attachment input:last"));var l=this.hexCode(a.val(),a)+" "+s.val()+" "+r.val()+" "+o.val()+" "+this.urlSurround(n.val(),n);return l},border:function(e,t){var i=$(t).closest(".border"),a=i.find('.border-width input[name="width"]'),n=i.find(".border-style select"),o=i.find(".color input"),r=a.val()+" "+this.borderStyle(n.val(),n)+" "+this.hexCode(o.val(),o);return r},borderWidth:function(e,t){var i=this,a=$(t).closest(".property"),n=$('input[name="width"]',a).val(),o=$('input[name="type"]',a).val();return n=i.size(n,o)},borderRadius:function(e,t){var i=this,a=$(t).closest(".property"),n=$('input[name="radius"]',a).val(),o=$('input[name="type"]',a).val();return n=i.size(n,o)},borderStyle:function(e){return/(none|dashed|dotted|double|groove|hidden|inset|outset|ridge|solid)/i.test(e)?RegExp.$1:""},boxShadow:function(e,t){var i=this,a=$(t).closest(".box-shadow,.text-shadow"),n=a.find(".color input"),o=a.find(".box-shadow-size select"),r=a.find(".box-shadow-position input"),s=n.val(),l=o.val(),d=r.val();s=i.hexCode(s);var c=0,u=0;switch(l){case"small":c="2px",u=1;break;case"medium":c="4px",u=2;break;case"large":c="6px",u=3;break;default:return""}var p="",h=d.split(" ");switch(h[0]){case"center":p="0 ";break;case"right":p=2*u+"px ";break;case"left":p=-2*u+"px ";break;default:p="0 "}switch(h[1]){case"center":p+="0";break;case"bottom":p+=2*u+"px";break;case"top":p+=-2*u+"px";break;default:p+="0"}var f=[p,c,s].join(" ");return f},fontVariant:function(e){return/(normal|small-caps)/i.test(e)?RegExp.$1:""},fontStyle:function(e){return/(normal|italic|oblique)/i.test(e)?RegExp.$1:""},fontSize:function(e){if("0"!=e&&/(\d+\.?\d*|\.\d*)(%|in|cm|mm|em|ex|pt|pc|px)?/i.test(e)){var t=RegExp.$1;if(t+=RegExp.$2?RegExp.$2:"px","string"==typeof type&&/^[01]{4}$/.test(type)){for(var i=type.split(""),a=0;a<i.length;a++)"1"==i[a]&&(i[a]=t);t=i.join(" ")}return t}return"xx-small"==e||"x-small"==e||"small"==e||"medium"==e||"large"==e||"x-large"==e||"xx-large"==e?e:""},fontFamily:function(e){for(var t=e.split(","),i=0;i<t.length;i++)t[i]=t[i].replace(/(^\s+|\s+$)/g,""),t[i].indexOf(" ")!=-1&&/([a-z\s]+)/i.test(t[i])&&(t[i]='"'+RegExp.$1+'"');return t.join(", ")},fontWeight:function(e){return/(normal|bold|bolder|lighter|[1-9]00)/i.test(e)?RegExp.$1:""},hexCode:function(e){return/((?:[a-f\d]{3})(?:[a-f\d]{3})?)/i.test(e)?"#"+RegExp.$1:""},size:function(e,t){if("auto"==e&&("height"==t||"width"==t))return e;if("0"!=e&&/(\d+\.?\d*|\.\d*)(%|in|cm|mm|em|ex|pt|pc|px)?/i.test(e)){var i=RegExp.$1;if(i+=RegExp.$2?RegExp.$2:"px","string"==typeof t&&/^[01]{4}$/.test(t)){for(var a=t.split(""),n=0;n<a.length;n++)"1"==a[n]&&(a[n]=i);i=a.join(" ")}return i}return""},font:function(e,t){var i=$(t).closest(".font"),a=i.find(".font-style input"),n=i.find(".font-weight input"),o=i.find(".font-size input"),r=i.find(".font-family input"),s=o.val(),l=r.val(),d=a.val()+" "+n.val()+" "+(""===s&&""!=l?"1em":s)+" "+(""===l&&""!=s?"Arial":l);return d},textAlign:function(e){return/(left|right|center|justify)/i.test(e)?RegExp.$1:""},textDecoration:function(e){var t=e.match(/(none|underline|overline|line-through)/gi);return null!=t?t.join(" "):""},textTransform:function(e){return/(none|capitalize|lowercase|uppercase)/i.test(e)?RegExp.$1:""},urlSurround:function(e){var t=e.indexOf("@{image_path}")!=-1;return t||proboards.is_valid_image_url(e)?("none"==e||""==e||/^url\(.*\)$/i.test(e)||(e="url('"+e+"')"),e):""}},admin_themes_visual_helper=function(){},admin_upgrades_ad_free=function(){$(document).ready(function(){$(".adfree-item-row .item").each(function(){$(this).data("item",proboards.data("data_hash")[$(this).attr("id").substr(2)])}),$(".adfree-item-row").sortable({handle:".drag-handle",stop:function(e,t){var i=this,a=t.item.data("item");$(t.item).hasClass("active")||0!=a.type||1!=a.active||is_scheduled(t.item)||!would_be_active(t.item)?($("#adfree-item-container .item:nth-child(1n)").css("background-color","#FFFFFF"),$("#adfree-item-container .item:nth-child(2n)").css("background-color","#F3F3F3"),update_active()):active_warn_dialog(t.item,function(){$("#adfree-item-container .item:nth-child(1n)").css("background-color","#FFFFFF"),$("#adfree-item-container .item:nth-child(2n)").css("background-color","#F3F3F3"),update_active()},function(){$(i).sortable("cancel")})}}),$(".adfree-item-row .item:nth-child(1n)").css("background-color","#FFFFFF"),$(".adfree-item-row .item:nth-child(2n)").css("background-color","#F3F3F3"),update_active(),$("#adfree-item-container select").each(function(){var e=$(this).closest(".item").data("item");$(this).val(e.start_date)}),proboards.data("total_used_pageviews")>.8*proboards.data("total_pageviews")&&$(".adfree_purchase_button").addClass("highlight"),proboards.unsaved_changes=0,$(".adfree-item-row .adfree_purchased a").click(function(){var e=this,t=$(e).closest(".item"),i="Purchased by "+t.data("item").purchased_by+"<br />";i+="Purchased "+t.data("item").purchased_date+"<br /><br />",t.data("item").purchased_message.length&&(i+="Gift Note: "+t.data("item").purchased_message+"<br /><br />");var a=[];1==t.data("item").type&&a.push({text:"Cancel Recurring Plan",click:function(){$(this).dialog("close"),delete_dialog(e)}}),a.push({text:"Close",click:function(){$(this).dialog("close")}});proboards.dialog("note_dialog",{html:i,title:"Note",width:500,resizable:!1,buttons:a})}),$("#adfree-item-container .delete").click(function(){delete_dialog(this)}),$("#adfree-item-container select").change(function(){var e=$(this).closest(".item"),t=e.data("item").start_date;e.data("item").start_date=$(this).val(),$(this).val()==proboards.data("current_month")?(e.children(".adfree_status").html("One Time"),1==e.data("item").active&&update_totals(e.data("item"),1)):t==proboards.data("current_month")&&(e.children(".adfree_status").html('<span class="adfree_purple">One Time</span>'),1==e.data("item").active&&update_totals(e.data("item"),0)),update_active()}),$('#adfree-item-container input[type="checkbox"]').change(function(){var e=this,t=$(this).parents(".item"),i=t.data("item");$(this).is(":checked")?0==t.data("item").type&&!is_scheduled(t)&&would_be_active(t)?active_warn_dialog(t,function(){i.active=1,t.removeClass("inactive"),is_scheduled(t)||update_totals(i,1),update_active()},function(){$(e).removeAttr("checked")}):(i.active=1,t.removeClass("inactive"),is_scheduled(t)||update_totals(i,1)):(i.active=0,t.addClass("inactive"),is_scheduled(t)||update_totals(i,0)),update_active()}),$("#adfree_save_button").click(function(e){var t=this;e.preventDefault(),proboards.saving(t,!0),proboards.unsaved_changes=0;var i=[];$("#adfree-item-container .item").each(function(){i.push({id:$(this).data("item").id,active:$(this).data("item").active,start_date:$(this).data("item").start_date})}),proboards.ajax({method:"post",url:proboards.data("save_url"),data:{data:JSON.stringify(i)},success:function(e){},complete:function(e,i){proboards.saving(t,!1,i)}})}),$(".under-headings select").each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})})})},is_scheduled=function(e){return $(e).data("item").start_date>proboards.data("current_month")},update_active=function(){$("#adfree-item-container .item.active").removeClass("active");var e=0;$("#adfree-item-container .item").each(function(){if(!$(this).hasClass("inactive")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").pageviews))return $(this).addClass("active"),e=1,!1}),e||$("#adfree-item-container .item").each(function(){if(!$(this).hasClass("inactive")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").maximum_views))return $(this).addClass("active"),!1}),$("#adfree-item-container .item").length>1&&(proboards.unsaved_changes=1)},update_totals=function(e,t){t?(proboards.data("total_used_pageviews",parseInt(proboards.data("total_used_pageviews"))+parseInt(e.views_used)),proboards.data("total_pageviews",parseInt(proboards.data("total_pageviews"))+parseInt(e.pageviews)),proboards.data("total_max_pageviews",parseInt(proboards.data("total_max_pageviews"))+parseInt(e.maximum_views))):(proboards.data("total_used_pageviews",parseInt(proboards.data("total_used_pageviews"))-parseInt(e.views_used)),proboards.data("total_pageviews",parseInt(proboards.data("total_pageviews"))-parseInt(e.pageviews)),proboards.data("total_max_pageviews",parseInt(proboards.data("total_max_pageviews"))-parseInt(e.maximum_views))),$("#total_used_pageviews").text(proboards.commify(proboards.data("total_used_pageviews"))),$("#total_pageviews").text(proboards.commify(proboards.data("total_pageviews"))),$("#total_max_pageviews").text(proboards.commify(proboards.data("total_max_pageviews"))),proboards.data("total_used_pageviews")>.8*proboards.data("total_pageviews")?$(".adfree_purchase_button").addClass("highlight"):$(".adfree_purchase_button").removeClass("highlight")},would_be_active=function(e){var t=0,i=0,a=0;return $("#adfree-item-container .item").each(function(){$(this).find('input[type="checkbox"]').is(":checked")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").pageviews)&&($(this).is(e)&&0==i&&(a=1),i=1,t=1)}),t||$("#adfree-item-container .item").each(function(){$(this).find('input[type="checkbox"]').is(":checked")&&!is_scheduled($(this))&&parseInt($(this).data("item").views_used)<parseInt($(this).data("item").maximum_views)&&($(this).is(e)&&0==i&&(a=1),i=1)}),a},active_warn_dialog=function(e,t,i){proboards.dialog("warn_dialog",{html:"Are you sure you want to activate this plan?",title:"Are you sure?",width:500,resizable:!1,buttons:[{text:"Yes",click:function(){return $(this).dialog("close"),t(),proboards.unsaved_changes=1,1}},{text:"No",click:function(){return $(this).dialog("close"),i(),proboards.unsaved_changes=0,0}}]})},delete_dialog=function(e){var t=e,i=$(t).closest(".item"),a="Are you sure you want to cancel this recurring plan?<br /><br />";a+="Purchased by "+i.data("item").purchased_by+"<br />",a+="Purchased "+i.data("item").purchased_date+"<br />",a+=proboards.commify(i.data("item").pageviews)+" Pageviews<br />",a+=proboards.commify(i.data("item").maximum_views)+" Maximum<br /><br />";proboards.dialog("delete_dialog",{html:a,title:"Are you sure?",width:500,resizable:!1,buttons:[{text:"No, don't cancel",click:function(){$(this).dialog("close")}},{text:"Yes, I'm sure",click:function(){var e=this;proboards.ajax({url:proboards.data("cancel_url"),data:{id:i.attr("id").substr(2)},dataType:"json",success:function(t){i.hasClass("active")&&update_active(),i.hasClass("inactive")||update_totals(i.data("item"),0),i.children(".adfree_status").html('<span class="adfree_red">Cancelled</span>'),$(e).dialog("close")}})}}]})},admin_upgrades_change_forum_url=function(){$(document).ready(function(){function e(e){return e.which==Keys.enter?void(n=!0):(a=!1,i("#url-checking"),l&&clearTimeout(l),void(l=setTimeout(function(){t()},300)))}function t(){return""==$("form input[name=username]").val()?($(".url-status").hide(),void $("#url-spacer").show()):(l=0,void proboards.ajax({url:proboards.data("check_forum_url_availability_url"),data:{username:$("form input[name=username]").val(),domain:$("form select[name=domain]").val()},success:function(e){s.prop("disabled",!e.available),a=e.available,i("#url-"+(e.available?"available":"taken")),n&&$("form").submit(),n=!1},error:function(e){s.prop("disabled",!0),$("#url-general-error").text(e.error),i("#url-general-error"),n=!1},ignorePending:!0}))}function i(e){$(".url-status").hide(),$(e).show()}var a=!1,n=!1,o=$("form input[name=username]"),r=$("form select[name=domain]"),s=$('form input[type="submit"]');o.bind("keyup",e),r.bind("change",e);var l=0;s.click(function(e){e.preventDefault(),$("form").submit()}),s.prop("disabled",!0),$("form").submit(function(e){e.preventDefault(),a&&(window.location=proboards.data("change_forum_url_add_cart_url")+"/value/"+o.val()+"."+r.val())})})},admin_upgrades_custom_domains=function(){$(document).ready(function(){$("#domains-content .domains-expandable").prepend('<span class="arrow-wrapper"><span class="arrow-direction">&#9654;</span><span class="arrow-direction hide">&#9660;</span></span>'),$(".domains-expandable").bind("click",function(){var e=$(this).attr("id");$("#"+e+"-expanded").toggle(),$(".arrow-direction",this).toggle()}),$("form.form_admin_upgrades_custom_domains").submit(function(e){e.preventDefault();var t=$(this);if(t.data("form").validateAll()){var i=$('input[name="domain"]',t).val(),a=$('select[name="years"]',t).val();proboards.loading(!0),proboards.ajax({url:proboards.route("custom_domain_check"),data:{domain:i},error:function(e){proboards.loading(!1),proboards.error(e.error),$('input[name="sendform"]',t).prop("disabled",!1)},success:function(e){window.location=proboards.data("custom_domain_add_cart_url").replace(/:item_id/,a)+"/value/"+e.domain}})}}),$("#existing-domains input").click(function(){var e=$(this).closest(".domain"),t=e.data("domain"),i=e.find("select").val();window.location=proboards.data("custom_domain_add_cart_url").replace(/:item_id/,i)+"/value/"+t}),$('select[name="default_domain"]').autoSubmit({url:proboards.data("save_url"),statusElement:$(".status-box")})})},standard_board_moderators=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_board_id"),type:"mods",user_search_box:!0},id:proboards.data("lm_id")})})},standard_board_password=function(){$(document).ready(function(){$('input[name="password"]').focus();var e=$('input[name="redirect"]');location.hash&&e.val().indexOf("#")==-1&&e.val(e.val()+location.hash)})},standard_board_show=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_thread_count"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:{board_id:proboards.data("board_id")}}),$("#moderators-link").bind("click",function(e){return e.preventDefault(),0==$("#moderators-link-tooltip").length&&($(document.body).append('<div id="moderators-link-tooltip"></div>'),proboards.dialog("moderators-link-tooltip",{autoOpen:!1,close:function(){$("#moderators-link-tooltip").remove()},width:460,title:"Moderators"})),proboards.ajax({url:proboards.route("moderators"),data:{id:proboards.data("board_id")},dataType:"html",success:function(e){$("#moderators-link-tooltip").html(e),$("#moderators-link-tooltip").dialog("open")}}),!1}),$(".guests-online-link").on("click",function(e){e.preventDefault(),proboards.guestsOnlineDialog(proboards.data("board_id"))})})},standard_calendar_base=function(){$(document).ready(function(){load_month_previews(),load_month_form(),add_cal_nav(),setup_cal(),$(".calendar-selection").click(function(e){e.preventDefault()}),proboards.data("can_calendar_event")&&($("#calendar-new-event-button").click(function(e){e.preventDefault(),proboards.calendar.new_event()}),$(".cal-current-panel .day").click(function(e){if("a"!=e.target.nodeName.toLowerCase()){var t=$(this).attr("class").match(/date-(\d+-\d+-\d+)/);t&&t[1]&&proboards.calendar.new_event(t[1])}}))})},load_month_previews=function(){var e=proboards.data("event_tips");for(var t in e)$(".cal-preview-panel .date-"+e[t].date).tipTip({content:e[t].tip})},load_month_form=function(){proboards.calendar.init({type:"",year:proboards.data("calendar_year"),month:proboards.data("calendar_month")})},add_cal_nav=function(){$("#select_calendar_type li").click(function(){window.location=$(this).attr("id")})},setup_cal=function(){proboards.data("can_calendar_event")&&(proboards.calendar.set_board_tree(proboards.data("cat_board_tree_params")),proboards.calendar.set_date({month:proboards.data("calendar_month"),day:proboards.data("calendar_day"),year:proboards.data("calendar_year")}))},standard_conversation_index=function(){$(document).ready(function(){listMan=new listManager("conversations",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{user_id:proboards.data("lm_user_id"),folder:proboards.data("lm_folder"),label_id:proboards.data("lm_label_id")},id:proboards.data("lm_id")}),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove()})},listMan,update_labels_preview_hex=function(e,t,i){$("#manage-label-"+e+"-preview").css({color:"#"+t}),i&&$("#"+proboards.data("manage_form_id")+"_color_"+e+"_input").val(t)},update_labels_preview_text=function(e,t){""==t&&(t=" "),$("#manage-label-"+e+"-preview").text(t)},standard_conversation_new=function(){$(document).ready(function(){$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove(),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.messagePageManager.init({type:"conversation",form_id:proboards.data("form_id")}),proboards.hotkeys.wysiwyg()})},standard_conversation_participants=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:1,id:proboards.data("lm_id"),data:{id:proboards.data("lm_conversation_id"),json:1,user_search_box:!0}},{route_name:"list_participants"})})},standard_conversation_show=function(){$(document).ready(function(){proboards.data("enable_autosave")&&proboards.autosave.init(6),proboards.messageManager.init(),listMan=new listManager("messages",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{conversation_id:proboards.data("lm_conversation_id")},id:proboards.data("lm_id")}),$(".quick-reply .message").resizable({alsoResize:".message textarea",handles:"s",maxWidth:898,minWidth:200,minHeight:160}),proboards.hotkeys.reply(),proboards.hotkeys.quick_reply(),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove(),$(".user-link").live("click",function(e){if(e.altKey)return $(this).parent().hasClass("shoutbox-post")||$(".quick-reply form textarea").replaceSelection($(this).attr("title")).focus(),!1}),$(".conversation-participants").on("click",function(e){e.preventDefault(),e.stopPropagation(),proboards.loading(!0),proboards.ajax({url:proboards.route("list_participants"),data:{id:proboards.data("lm_conversation_id")},dataType:"html",success:function(e){proboards.dialog("conversation-participants",{width:535,title:"Participants",html:e})},complete:function(){proboards.loading(!1)}})})})},listMan,standard_custompage_edit_visual_iframe=function(){var e="#C2FFA5",t="#FFB2B2",i="Wraps the contents with a title bar and border.",a={bookmarked_threads:"Bookmarked Threads",calendar:"Calendar",display_poll:"Display Poll",display_specific_post:"Display Post",forum_navigation_menu:"Forum Navigation Menu",forum_search:"Forum Search",forum_statistics:"Forum Statistics",html_box:"HTML Box",member_lists:"Member Lists",member_profile:"Member Profile",notifications:"Notifications",participated_threads:"Participated Threads",personal_messages:"Personal Messages",recent_threads_posts:"Recent Threads/Posts",staff_assistant:"Staff Assistant"};$(document).ready(function(){0==$("#forum_style").length&&$(document.body).attr("id","pbcpe-plain");var t=proboards.data("zone"),n=proboards.data("widget"),o=function(){var o=$(".pbcpe-zone"),r='<div class="pbcpe-zone-header"><div class="pbcpe-zone-label"></div><div class="pbcpe-zone-controls"><div class="pbcpe-add-widget pbcpe-btn"><span></span>Add Widget</div><div class="pbcpe-zone-settings pbcpe-btn"><span></span>Zone Settings</div></div><br class="clear" /></div><div class="pbcpe-settings-container pbcpe-hide"><div class="pbcpe-common-zone-settings"><div class="pbcpe-czs-left"><input class="pbcpe-make-container" type="checkbox" name="make_container" value="1" /><label class="pbcpe-make-container">Container</label><img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png" title="'+i+'"><span>Title</span></div><div class="pbcpe-czs-right"><input type="text" name="zone_title" /></div><div class="status"></div></div></div><div class="pbcpe-settings-handle"><span></span></div>';
o.prepend(r),o.each(function(){var e=$(this).attr("id"),i=e.replace("zone_",""),a="Zone "+i,n=t[i].title;n&&(a=a+" | "+n);var o=$(".pbcpe-zone-label",this).text(a);$("input.pbcpe-make-container",this).attr("id","make-container-"+i).data("zone",$(this)),$("label.pbcpe-make-container",this).attr("for","make-container-"+i),$(this).data({zoneId:i,labelElem:o,settingsElem:$(".pbcpe-settings-container",this),settingsStatusElem:$(".status",this)})}),$(".pbcpe-zone-settings, .pbcpe-settings-handle").on("click",function(){$(this).parents(".pbcpe-zone").data("settingsElem").slideToggle("easeOutExpo",function(){s()})}),$("input.pbcpe-make-container").each(function(){var e=$(this),i=e.data("zone"),a=i.data("zoneId");1==t[a].container&&e.attr("checked","checked"),e.autoSubmit({url:proboards.data("custom_page_zone_settings_save_url"),beforeSendData:function(e){e.zone_id=a},statusElement:i.data("settingsStatusElem"),success:function(n){e.attr("checked")?(i.addClass("container"),t[a].container=1):(i.removeClass("container"),t[a].container=0),s()}})}),$('.pbcpe-settings-container input[name="zone_title"]').each(function(){var i=$(this).parents(".pbcpe-zone"),a=i.data("zoneId");$(this).val(t[a].title).autoSubmit({url:proboards.data("custom_page_zone_settings_save_url"),beforeSendData:function(e){e.zone_id=a},statusElement:i.data("settingsStatusElem"),success:function(n){var o="Zone "+a;n.title&&(o=o+" | "+n.title),i.data("labelElem").text(o),$(".pbcpe-zone-title",i).text(n.title).pulse(e),t[a].title=n.title,s()}})});var l=null;$(document).on("mouseenter",".pbcpe-widget:not(.pbcpe-new, .pbcpe-edit, .pbcpe-deleted)",function(){if(!proboards.data("sorting")&&(l&&l.remove(),0==$("#pbcpe-widget-menu:visible").length&&0==proboards.active_ajax_calls)){var e=$(this),t=e.attr("id"),i=n[t].zone,o=n[t].type,r=a[o]||"(Unknown Widget)";l=e.overlay({"class":"pbcpe-js-overlay",css:{backgroundImage:"none",opacity:.85,zIndex:"9999"}},!0);var d=$('<div class="pbcpe-overlay-controls"></div>'),c=$('<div class="pbcpe-edit-button"><span></span>Settings</div>'),u=$('<div class="pbcpe-delete-button"><span></span>Delete</div>'),p=$('<div class="pbcpe-reorder-button" title="Drag to reorder"><span></span></div>');d.append(c,p,u);var h=$('<div class="pbcpe-overlay-label">'+r+"</div>");l.append(h,d),"(Unknown Widget)"!=r?c.on("click",function(){var a=n[t].data;"html_box"==o?proboards.ajax({url:proboards.data("custom_page_widget_html_box"),data:{id:t,zone_id:i},success:function(t){a.html=t.html,l&&l.remove(),widgetForms.generateForm(e,n,"edit",a),e.next(".pbcpe-form").prepend('<div class="pbcpe-widget-header">Widget Settings: '+r+"</div>"),s()}}):(l&&l.remove(),widgetForms.generateForm(e,n,"edit",a),e.next(".pbcpe-form").prepend('<div class="pbcpe-widget-header">Widget Settings: '+r+"</div>"),s())}):c.css({opacity:"0.15",cursor:"default"}),u.on("click",function(){confirm("Are you sure you want to delete the widget?")&&proboards.ajax({url:proboards.data("custom_page_widget_delete_url"),data:{id:t,type:o,zone_id:i},success:function(i){l&&l.remove(),e.addClass("pbcpe-deleted"),e.fadeOut(function(){$(this).remove(),s()}),delete n[t]}})}),l.on("mouseleave",function(e){proboards.data("sorting")||(l.unbind("mouseleave"),l&&l.remove())})}}),$(document).on("click",":not(.pbcpe-js-overlay)",function(){$(".pbcpe-js-overlay",this).remove()}),$(".pbcpe-widgets").sortable({connectWith:".pbcpe-widgets",forcePlaceholderSize:!0,handle:".pbcpe-reorder-button",items:".pbcpe-widget:not(.pbcpe-new)",placeholder:"pbcpe-widget-placeholder",tolerance:"pointer",start:function(e,t){$("body").data("currentSortable",$(this)),proboards.data("sorting",!0);var i=$(t.item).height()-2;$(".pbcpe-widget-placeholder").css({height:i,backgroundColor:"lightyellow",border:"1px solid goldenrod"})},update:function(t,i){var a=$(i.item),o=a.attr("id"),r=[];$(".pbcpe-widget:not(.pbcpe-new, .pbcpe-edit)",this).each(function(){var e=$(this).attr("id");e&&r.push(e)});var l=n[o].zone,d=a.parents(".pbcpe-zone").attr("id").replace("zone_",""),c={ids:r,zone_id:d};if(l!=d&&null!=i.sender)n[o].zone=d,c.old_zone_id=l,c.widget_id=o;else if(l!=d&&null==i.sender)return;proboards.ajax({url:proboards.data("custom_page_widget_order_url"),data:c,success:function(){a.attr("style","position: relative;").pulse(e),s()}})},stop:function(e,t){$("body").data("currentSortable",null),proboards.data("sorting",!1)}})};o()}),widgetForms={commonFieldData:[{std_input_wrapper:0,type:"freestyle",html:'<div class="pbcpe-common-widget-settings"><div class="pbcpe-cws-left"></div><div class="pbcpe-cws-right"></div></div>',css:{borderBottom:"1px dashed goldenrod"}},{std_input_wrapper:0,type:"text",name:"title",parent:".pbcpe-cws-right"},{std_input_wrapper:0,type:"checkbox",name:"container",label:"Container",tip:i,parent:".pbcpe-cws-left"},{std_input_wrapper:0,type:"freestyle",html:"<span>Title</span>",parent:".pbcpe-cws-left"}],fieldData:{bookmarked_threads:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)}],calendar:[{type:"select",name:"calendar_type",label:"Type",options:[{value:"list",text:"List"},{value:"chart",text:"Chart"}]},{type:"freestyle",html:'<div class="num-events-wrapper"></div>'},{type:"select",name:"num_events",label:"Display",options:proboards.form.genOptionRange(1,20,1,10),std_input_wrapper:0,parent:".num-events-wrapper"},{type:"freestyle",html:"<span>Upcoming Events</span>",css:{marginBottom:"4px",verticalAlign:"middle"},parent:".num-events-wrapper",std_input_wrapper:0},{type:"color",name:"border_color",label:"Border",value:"aaaaaa"}],display_poll:[{type:"text",name:"thread_id",placeholder:"Enter Thread ID Here"},{type:"freestyle",html:'<div class="poll-colors-wrapper"><div class="input">Poll Colors</div></div>',std_input_wrapper:0},{type:"color",name:"first",label:"1st",parent:".poll-colors-wrapper"},{type:"color",name:"second",label:"2nd",parent:".poll-colors-wrapper"},{type:"color",name:"third",label:"3rd",parent:".poll-colors-wrapper"},{type:"color",name:"fourth",label:"4th+",parent:".poll-colors-wrapper"}],display_specific_post:[{type:"text",name:"post_id",placeholder:"Enter Post ID Here"}],forum_navigation_menu:[{type:"select",name:"orientation",label:"Type",options:[{value:"horizontal",text:"Horizontal"},{value:"vertical",text:"Vertical"}]},{type:"checkbox",name:"customize_colors",label:"Customize Colors"},{type:"color",name:"color_background",label:"Background"},{type:"color",name:"color_text",label:"Text"},{type:"color",name:"color_highlight",label:"Highlight"},{type:"color",name:"color_border",label:"Border"}],forum_search:[{type:"radio",name:"result_type",breaks:!0,options:[{value:"posts",text:"display results as posts",selected:!0},{value:"threads",text:"display results as threads"}]}],forum_statistics:[{type:"freestyle",html:'<div class="checkbox-wrapper"><div class="input">Display</div></div>'},{parent:".checkbox-wrapper",type:"checkbox",name:"total_threads",label:"Total Threads"},{parent:".checkbox-wrapper",type:"checkbox",name:"total_posts",label:"Total Posts"},{parent:".checkbox-wrapper",type:"checkbox",name:"total_members",label:"Total Members"},{parent:".checkbox-wrapper",type:"checkbox",name:"newest_user",label:"Newest Member"},{parent:".checkbox-wrapper",type:"checkbox",name:"most_users_online",label:"Most Users Online"}],html_box:[{type:"code_editor",name:"html",label:"HTML",options:proboards.form.genOptionRange(1,40,1,10)}],member_lists:[{type:"select",name:"view",label:"Type",options:[{value:"birthdays",text:"Birthdays"},{value:"staff",text:"Staff"},{value:"top_posters",text:"Top Posters"},{value:"online",text:"Users Online",selected:!0}]},{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,40,1,10)}],member_profile:[{type:"radio",name:"view_self",breaks:!0,options:[{value:"1",text:"Show members their own profile",selected:!0},{value:"0",text:"Specific Member"}]},{type:"user",name:"user_id",allowManualInput:!0,eventError:!0},{type:"color",name:"border_color",label:"Border",value:"aaaaaa"}],notifications:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)}],participated_threads:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)}],personal_messages:[{type:"select",name:"limit",label:"Display How Many",options:proboards.form.genOptionRange(0,20,1,10)}],recent_threads_posts:[{type:"select",name:"recent_type",label:"Type",options:[{value:"threads",text:"Recent Threads"},{value:"posts",text:"Recent Posts"}]},{type:"radio",name:"where",label:"Display From",breaks:!0,options:[{value:"forum",text:"Entire Forum",selected:!0},{value:"board",text:"Specific Board"}]},{type:"board_select",name:"board_id"},{type:"radio",name:"post_display",label:"Display",breaks:!0,options:[{value:"all",text:"All Posts",selected:!0},{value:"open",text:"Only Opening Posts"}]},{type:"select",name:"display_how_many_threads",label:"Display How Many",options:proboards.form.genOptionRange(1,20,1,10)},{type:"select",name:"display_how_many_posts",label:"Display How Many",options:proboards.form.genOptionRange(1,10,1,5)}],staff_assistant:[]},generateForm:function(i,a,l,d){var c=this,u=i.attr("id"),p=u?a[u].zone:i.data("zone"),h=u?a[u].type:i.data("type");i.hide();var f="add"==l?"pbcpe-new":"pbcpe-edit";f+=" pbcpe-form widget-"+h+" "+i.attr("class");var m=$("<div></div>").addClass(f),g=$("<form></form>");u&&g.append('<input type="hidden" name="id" value="'+u+'"/>'),g.append('<input type="hidden" name="type" value="'+h+'"/>'),g.append('<input type="hidden" name="zone_id" value="'+p+'"/>'),m.append(g);var v=$.extend(!0,[],c.fieldData[h]);v=c.commonFieldData.concat(v);for(var b=0;b<v.length;b++){fieldOpts=v[b];var _=fieldOpts.name,y=null;"undefined"!=typeof fieldOpts.value&&(y=fieldOpts.value,delete fieldOpts.value);for(var A in d)d.hasOwnProperty(A)&&0==A.indexOf(_)&&(A===_?y=d[A]:fieldOpts[A]=d[A]);var w=fieldOpts.parent?$(fieldOpts.parent,g):g;proboards.form.generateInput(fieldOpts,y,w)}var x=$('<input type="submit" value="Save" />'),k=$('<button class="pbcpe-widget-cancel">Cancel</button>'),C=$("<div></div>").append(x,k);g.append(C),i.after(m),"function"==typeof n[h]&&n[h](m,l),k.on("click",function(){return $.clearInputError(),"add"==l?(i.remove(),m.remove()):(m.remove(),i.show()),s(),!1}),$(g).on("submit",function(){"function"==typeof o[h]&&o[h](m),$.clearInputError();var n={},d=g.serializeArray();$.each(d,function(){n[this.name]=this.value});var c=m.overlay({},!0),u="add"==l?proboards.data("custom_page_widget_add_url"):proboards.data("custom_page_widget_edit_url");return proboards.ajax({url:u,data:{settings:n},success:function(e){m.remove();var t=$(".title-bar",i).clone();i.html(e.html).prepend(t),"add"==l&&i.attr("id",e.id),1==n.container?i.addClass("container"):i.removeClass("container");var o=n.title||"";$(".pbcpe-widget-title",i).text(o),$.extend(a,e.pb_data_update);var s=i.attr("id");i.data({added:!0,formData:e.pb_data_update[s].data}),"function"==typeof r[h]&&r[h](i),i.show()},error:function(e){var t=$('input[name="'+e.field+'"]',m);if(t.length)$.inputError(t,e.error);else{var i=$(".pbcpe-widget-corner-error",m);0==i.length&&(i=$('<div class="pbcpe-widget-corner-error"></div>'),i.appendTo(m)),i.text(e.error).stop(!0,!0).show().delay(1e4).fadeOut()}},complete:function(){c.remove();var a=i.data("added")?i:m,n=i.data("added")?e:t;a.pulse(n),s()}}),!1})}};var n={bookmarked_threads:function(e,t){if("add"==t){var i=$('input[name="title"]',e);i.val("Bookmarked Threads")}},calendar:function(e,t){var i=$('input[name="title"]',e),a=i.val(),n=$('select[name="calendar_type"]',e),o=$(".num-events-wrapper",e),r=$(".input-border_color",e);n.on("change",function(){"list"==n.val()?(o.show(),r.hide(),""==i.val()&&i.val("Upcoming Events")):(o.hide(),r.show(),"Upcoming Events"==i.val()&&i.val(""))}).trigger("change"),"add"!=t&&i.val(a)},display_poll:function(e,t){if("add"==t){var i=$('input[name="title"]',e);i.val("Poll Question")}$(".input-thread_id",e).before("<label>"+proboards.data("forum_url")+"/thread/</label>")},display_specific_post:function(e,t){$(".input-post_id",e).before('<div class="custom-label-wrapper"><label>'+proboards.data("forum_url")+'/post/</label><img class="help-icon" src="'+proboards.image_path()+'/admin/pbhelpicon.png" title="Use the \'Link to Post\' feature to get the ID when viewing posts."></div>')},forum_navigation_menu:function(e,t){$('input[name="customize_colors"]',e).bind("change",function(){var t=$(".input-color_background,.input-color_border,.input-color_highlight,.input-color_text",e);$(this).is(":checked")?t.show():t.hide()}).trigger("change")},forum_search:function(e,t){if("add"==t){var i=$('input[name="title"]',e);i.val("Search Forum...")}},forum_statistics:function(e,t){var i=$('input[name="title"]',e);"add"==t&&(i.val("Forum Statistics"),$('input[name="total_threads"], input[name="total_posts"], input[name="total_members"], input[name="newest_user"], input[name="most_users_online"]',e).attr("checked","checked"))},html_box:function(e,t){},member_lists:function(e,t){var i=$('input[name="title"]',e),a=$('select[name="view"]',e);if("add"==t){var n=a.find("option:selected").text();i.val(n)}a.on("change",function(){var e=i.val();if("Birthdays"==e||"Staff"==e||"Top Posters"==e||"Users Online"==e){var t=a.find("option:selected").text();i.val(t)}})},member_profile:function(e,t){$('input[name="view_self"]',e).on("change",function(){$(".input-user_id",e).toggle(0==$('input[name="view_self"]:checked',e).val())}).trigger("change")},notifications:function(e,t){if("add"==t){var i=$('input[name="title"]',e);i.val("Notifications")}},participated_threads:function(e,t){if("add"==t){var i=$('input[name="title"]',e);i.val("Participated Threads")}},personal_messages:function(e,t){if("add"==t){var i=$('input[name="title"]',e);i.val("Personal Messages")}},recent_threads_posts:function(e,t){var i=$('input[name="title"]',e),a=(i.val(),$('select[name="recent_type"]',e)),n=$(".input-post_display",e),o=$(".input-display_how_many_threads",e),r=$(".input-display_how_many_posts",e);a.on("change",function(){"threads"==a.val()?(n.hide(),o.show(),r.hide(),"add"!=t||i.data("changed")||i.val("Recent Threads")):(n.show(),o.hide(),r.show(),"add"!=t||i.data("changed")||i.val("Recent Posts"))}).trigger("change");var s=$('input[name="board_id_display"]',e),l=$('input[name="where"]',e),d=l.filter(":checked").val();"forum"==d&&s.hide(),l.on("change",function(){var e=$(this).val();"forum"==e?s.hide():s.show()}),"add"==t&&(s.on("change.widget",function(e,t){i.val(t.name)}),i.on("change",function(){i.data("changed",!0),s.unbind("change.widget")}))},staff_assistant:function(e,t){}},o={html_box:function(e){$('textarea[name="html"].CodeMirror-textarea',e).data("editor").save()}},r={display_poll:function(e){var t=e.data("formData");"undefined"!=typeof t.poll_opts&&(t.poll_opts.pollImgSrc=proboards.data("poll_img_src"),t.poll_opts.checkImgSrc=proboards.data("check_img_src"),$(".poll.show",e).poll(t.poll_opts),$(".view-voters, .poll-closed",e).remove())},display_specific_post:function(e){proboards.embedded.processEmbedded()},recent_threads_posts:function(e){proboards.embedded.processEmbedded()}},s=function(){$("body").trigger("resizeIframe")}},standard_custompage_widgets=function(){$(document).ready(function(){var e=null;$(".widget-member_profile form").on("submit",function(t){var i=$('input[name="user_id"]',this).val(),a=$('input[name="update"]',this),n=a.val(),o=$(".personal-text",$(this).parents(".widget-content"));return e!=n&&proboards.ajax({url:$(this).attr("action"),data:{status:n,user_id:i},success:function(e){o.html(e.entered_text),a.attr("value","")},complete:function(t){e=n}}),!1}),$(".poll.show").each(function(){var e=$(this),t=e.parents(".widget-display_poll").attr("id"),i=proboards.data("widget");if("undefined"!=typeof i[t].data.poll_opts){var a=i[t].data.poll_opts;a.pollImgSrc=proboards.data("poll_img_src"),a.checkImgSrc=proboards.data("check_img_src"),e.poll(a),$(".view-voters, .poll-closed",e).remove(),$("h3",e).on("click",function(){window.location=proboards.route("thread",{thread_id:i[t].data.thread_id})})}}),proboards.embedded.processEmbedded()})},standard_post_base=function(){$(document).ready(function(){proboards.postManager.init({id:proboards.data("lm_id")}),listMan=new listManager("posts",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},listMan,standard_thread_by_ip=function(){$(document).ready(function(){$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove()})},standard_post_edit=function(){$(document).ready(function(){proboards.postPageManager.init({type:"post",form_id:proboards.data("form_id")}),proboards.hotkeys.wysiwyg()})},standard_post_likes=function(){$(document).ready(function(){listMan=new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_post_id"),type:"likes",user_search_box:!0},id:proboards.data("lm_id")})})},listMan,standard_post_new=function(){$(document).ready(function(){proboards.postPageManager.init({type:"post",form_id:proboards.data("form_id")}),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.hotkeys.wysiwyg()})},standard_registration_register=function(){$(document).ready(function(){var e=$('input[name="username"]'),t="";e.on("keyup change",function(){var i=$("tr#username-available"),a=$("td#username-available-msg",i),n=e.val();t&&clearTimeout(t),n.length?t=setTimeout(function(){proboards.ajax({url:proboards.route("e_register_check_username"),ignorePending:!0,data:{username:n},dataType:"json",success:function(e){""!=e.available&&(a.html('<span class="success">'+e.available+"</span>"),i.show())},error:function(e){""!=e.error&&(a.html('<span class="error">'+e.error+"</span>"),i.show())},complete:function(){e.val().length||(i.hide(),a.html(""))}})},500):(i.hide(),a.html(""))})})},standard_search_index=function(){$(document).ready(function(){window.onunload=function(){},$('input[name="what_at_least_one"]').focus();var e=proboards.data("locale_settings"),t=e.input_date_placeholder,i={options:{formId:""},init:function(){var e=this,t=e.options.formId=proboards.data("form_id"),i=$('input[name="what_at_least_one"]'),a=$('input[name="what_all"]'),n=$('input[name="what_exact_phrase"]'),o=$('input[name="what_without"]'),r=$('input[name="where_thread_title"]'),s=$('input[name="where_board_subboard_placeholder"]'),l=$('input[name="where_category_placeholder"]'),d=$('input[name="where_without_placeholder"]'),c=$('input[name="when_hours"]'),u=$('input[name="when_days"]'),p=$('input[name="when_between_start"]'),h=$('input[name="when_between_end"]'),f=$('input[name="when_exact_date"]'),m=$('input[name="when_before_date"]'),g=$('input[name="who_at_least_one_placeholder"]'),v=$('select[name="who_only_made_by"]'),b=$('input[name="who_except_placeholder"]'),_=$('input[name="who_member_group_placeholder"]'),y=$('input[name="who_threads_created_by_placeholder"]'),A=[i,a,n,o,r,s,l,d,c,u,p,h,f,m,g,v,b,_,y];s.data({dialog:$("#board-list"),hidden:$('input[name="where_board_subboard"]'),dialogTitle:"Select Boards",type:"checkbox"}),l.data({dialog:$("#category-list"),hidden:$('input[name="where_category"]'),dialogTitle:"Select Categories",type:"checkbox"}),d.data({dialog:$("#exclude-list"),hidden:$('input[name="where_without"]'),dialogTitle:"Select Boards to Exclude",type:"checkbox"}),g.data({dialog:$("#"+t+"_who_at_least_one_pick_input-searchbox-container"),hidden:$('input[name="who_at_least_one"]'),hiddenName:"who_at_least_one",dialogTitle:"Select Who",searchField:$('input[name="who_at_least_one_pick"]'),type:"usersearch"}),v.data({hidden:$('input[name="who_made_by"]'),hiddenName:"who_made_by"}),b.data({dialog:$("#"+t+"_who_except_pick_input-searchbox-container"),hidden:$('input[name="who_except"]'),hiddenName:"who_except",dialogTitle:"Select Who",searchField:$('input[name="who_except_pick"]'),type:"usersearch"}),_.data({dialog:$("#group-list"),hidden:$('input[name="who_member_group"]'),hiddenName:"who_member_group",dialogTitle:"Select Groups",type:"checkbox"}),y.data({dialog:$("#"+t+"_who_threads_created_by_pick_input-searchbox-container"),hidden:$('input[name="who_threads_created_by"]'),dialogTitle:"Select Who",searchField:$('input[name="who_threads_created_by_pick"]'),type:"usersearch"});for(var w=$("#transcription"),x=0;x<A.length;x++){var k=A[x];k.prop("disabled")&&(k.data("hidden")?k.add(k.data("hidden")).prop("disabled",!1):k.prop("disabled",!1))}for(var C=[s,l,d,_],x=0;x<C.length;x++)0!=C[x].length&&!function(){var t=C[x],i=t.data("dialog"),a=t.data("hidden"),n=t.data("dialogTitle");i.dialog({title:n,autoOpen:!1,width:510,height:455,buttons:[{text:"Select All",click:function(){$(this).find(":checkbox").attr("checked","checked")}},{text:"Select None",click:function(){$(this).find(":checkbox").removeAttr("checked")}},{text:"Done",click:function(){$(this).dialog("close")}}],close:function(){var i=e.set_values($("input:checked",this));a.val(i[0]),t.val(i[1]),w.html(e.transcribe_search())}}),e.setup_dialog(t)}();for(var S=[g,b,y],x=0;x<S.length;x++)0!=S[x].length&&!function(){var t=S[x],i=t.data("searchField"),a=t.data("dialog"),n=t.data("hidden"),o=t.data("dialogTitle");a.dialog({title:o,autoOpen:!1,width:525,buttons:{Done:function(){$(this).dialog("close")}},close:function(){var a=i.val();n.val(a),t.val(e.set_values_pick(this)),w.html(e.transcribe_search())}}),e.setup_dialog(t)}();setTimeout(function(){e.apply_query_string(C,S)},1500);for(var T=["#"+t+"_when_days_input","#"+t+"_when_hours_input","#"+t+"_when_between_start_input","#"+t+"_when_between_end_input","#"+t+"_when_exact_date_input","#"+t+"_when_before_date_input"],D=$(T.join(",")),I=[{clickSelectors:["#"+t+"_when_days_input","#"+t+"_when_hours_input"],names:["when_days","when_hours"]},{clickSelectors:["#"+t+"_when_between_start_input","#"+t+"_when_between_end_input"],names:["when_between_start","when_between_end"]},{clickSelectors:["#"+t+"_when_exact_date_input"],names:["when_exact_date"]},{clickSelectors:["#"+t+"_when_before_date_input"],names:["when_before_date"]}],x=0;x<I.length;x++){var E=I[x].clickSelectors,P=I[x].names;$(E.join(",")).bind("click focus",{clickSelectors:E,names:P},function(e){var t=e.data.clickSelectors,i=e.data.names;D.addClass("disabled").removeAttr("name"),$(t.join(",")).removeClass("disabled");for(var a=0;a<i.length;a++)$(t[a]).attr("name",i[a])}).bind("focusout change",{clickSelectors:E,names:P},function(t){e.check_disabled($(t.data.clickSelectors.join(",")),t.data.names)})}var M=g.add(v).add(b).add(_),O=g.data("hidden").add(v).add(b.data("hidden")).add(_.data("hidden"));M.on("focus click",function(){if(M.addClass("disabled"),O.removeAttr("name"),"select"==this.nodeName.toLowerCase())$(this).removeClass("disabled").attr("name","who_only_made_by");else{var e=$(this).removeClass("disabled").data("hiddenName");$(this).data("hidden").attr("name",e)}}),this.check_without(),i.add(a).add(n).on("keyup",function(){e.check_without()}),w.html(this.transcribe_search()),$("input, select").on("click change focus",function(){w.html(e.transcribe_search())});var L=function(){for(var e=0;e<A.length;e++){var t=A[e];(""==t.val()||t.is(".disabled"))&&(t.data("hidden")?t.add(t.data("hidden")).prop("disabled",!0).val(""):t.prop("disabled",!0).val(""))}for(var i=[s,l,d,g,b,_,y],e=0;e<i.length;e++)i[e].prop("disabled",!0)},N=40,j=function(){return!$("#"+t).data("form")&&N--?setTimeout(j,250):void(proboards.data("user").is_logged_in?$("#"+t).form("option","submit",L):$("#"+t).on("captcha-submit",function(e,t,i){"formSubmit"==t&&L()}))};j()},transcribe_search:function(){for(var e=this,i=e.options.formId,a=[],n=[i+"_what_at_least_one_input",i+"_what_all_input",i+"_what_exact_phrase_input",i+"_what_without_input",i+"_where_thread_title_input",i+"_where_board_subboard_placeholder_input",i+"_where_category_placeholder_input",i+"_where_without_placeholder_input",[i+"_when_days_input",i+"_when_hours_input"],[i+"_when_between_start_input",i+"_when_between_end_input"],i+"_when_exact_date_input",i+"_when_before_date_input",i+"_who_at_least_one_placeholder_input",i+"_who_only_made_by_input",i+"_who_except_placeholder_input",i+"_who_member_group_placeholder_input",i+"_who_threads_created_by_placeholder_input",[i+"_display_as_input_radio_0",i+"_display_as_input_radio_1"]],o=0;o<n.length;o++){var r=n[o];"string"!=typeof r&&(r=r[0]);var s=$("#"+r);if(0!=s.length){var l=s.val(),d=""!=l;switch(r){case i+"_what_at_least_one_input":if(d){var c=e.escape_and_bold(l);a.push("with at least "+e.check_plural(c," ","the word ","one of the words ")+c)}break;case i+"_what_all_input":if(d){var c=e.escape_and_bold(l);a.push(e.check_plural(c," ","with the word ","with all the words ")+c)}break;case i+"_what_exact_phrase_input":if(d){var c=e.escape_and_bold(l);a.push("with the phrase "+c)}break;case i+"_what_without_input":if(d){var c=e.escape_and_bold(l);a.push("without the "+e.check_plural(c," ","word ","words ")+c)}break;case i+"_where_thread_title_input":if(d){var c=e.escape_and_bold(l);a.push("where the thread title contains "+c)}break;case i+"_where_board_subboard_placeholder_input":if(d){var c=e.escape_and_bold(l);a.push("in the "+e.check_plural(c,",","board ","boards ")+c)}break;case i+"_where_category_placeholder_input":if(d){var c=e.escape_and_bold(l);a.push("in the "+e.check_plural(c,",","category ","categories ")+c)}break;case i+"_where_without_placeholder_input":if(d){var c=e.escape_and_bold(l);a.push("without searching in the "+e.check_plural(c,",","board ","boards ")+c)}break;case i+"_when_days_input":var u=n[o],p=$("#"+u[0]),h=$("#"+u[1]);p=p.hasClass("disabled")?"":parseInt(e.strip_html(p.val())),h=h.hasClass("disabled")?"":parseInt(e.strip_html(h.val()));var f=1==p?" day":" days",m=1==h?" hour":" hours";""==h||isNaN(h)||""==p||isNaN(p)?""==h||isNaN(h)?""==p||isNaN(p)||a.push("posted within the last "+e.bold(p)+f):a.push("posted within the last "+e.bold(h)+m):a.push("posted within the last "+e.bold(p)+f+" and "+e.bold(h)+m);break;case i+"_when_between_start_input":var u=n[o],g=$("#"+u[0]),v=$("#"+u[1]);g=g.hasClass("disabled")?"":e.strip_html(g.val()),v=v.hasClass("disabled")?"":e.strip_html(v.val()),""!=g&&g!=t&&""!=v&&v!=t&&a.push("posted between the dates "+e.bold(g)+" and "+e.bold(v));break;case i+"_when_exact_date_input":if(l!=t&&d&&!s.hasClass("disabled")){var c=e.escape_and_bold(l);a.push("posted only on the exact date "+c)}break;case i+"_when_before_date_input":if(l!=t&&d&&!s.hasClass("disabled")){var c=e.escape_and_bold(l);a.push("posted before the date "+c)}break;case i+"_who_at_least_one_placeholder_input":if(d&&!s.hasClass("disabled")){var c=e.escape_and_bold(l);a.push(e.check_plural(c,",","by the member ","by at least one of the members ")+c)}break;case i+"_who_only_made_by_input":if(!s.hasClass("disabled")){var c=e.escape_and_bold($("option:selected",s).text());a.push("made by  "+c)}break;case i+"_who_except_placeholder_input":if(d&&!s.hasClass("disabled")){var c=e.escape_and_bold(l);a.push("except posts by the "+e.check_plural(c,",","member ","members ")+c)}break;case i+"_who_member_group_placeholder_input":if(d&&!s.hasClass("disabled")){var c=e.escape_and_bold(l);a.push("by the member "+e.check_plural(c,",","group ","groups ")+c)}break;case i+"_who_threads_created_by_placeholder_input":if(d&&!s.hasClass("disabled")){var c=e.escape_and_bold(l);a.push("in threads created by "+e.check_plural(c,",","the member ","at least one of the members ")+c)}break;case i+"_display_as_input_radio_0":var b=$('input[name="display_as"]:checked');b=0==b.val()?"and display results as <strong>posts</strong>.":"and display results as <strong>threads</strong>.",a.push(b)}}}var _="Search for posts "+a.join(", ");return _},bold:function(e){return"<strong>"+e+"</strong>"},check_disabled:function(e,i){for(var a=!1,n=0;n<e.length;n++){var o=$(e[n]).val();if(o&&o!=t){a=!0;break}}for(var n=0;n<e.length;n++){var o=$(e[n]).val();a||""!=o&&o!=t?$(e[n]).removeClass("disabled").attr("name",i[n]):$(e[n]).addClass("disabled").removeAttr("name")}},check_plural:function(e,t,i,a){return e.indexOf(t)>=0?a:i},check_without:function(){for(var e=$('input[name="what_at_least_one"]'),t=$('input[name="what_all"]'),i=$('input[name="what_exact_phrase"]'),a=$('input[name="what_without"]'),n=[e,t,i],o=!1,r=0;r<n.length;r++)$(n[r]).val()&&(o=!0);o?$(a).removeAttr("readonly").removeClass("disabled"):$(a).attr("readonly","readonly").addClass("disabled").val("")},clear_fields:function(e){for(var i=0;i<e.length;i++){var a=e[i];a.hasClass("date")?a.val(t):a.val(""),a.data("hidden")&&a.data("hidden").val(""),a.data("dialog")&&!a.data("searchField")&&$("input:checked",a.data("dialog")).removeAttr("checked"),a.data("searchField")&&a.data("searchField").val("")}},escape_and_bold:function(e){return e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),this.bold(e)},setup_dialog:function(e){e.on("focus",function(){e.data("dialog").dialog("open")}),e.one("focus.onetime",function(t){var i=e.data("dialog"),a=e.data("hidden").val();switch(e.data("type")){case"checkbox":for(var n=a.split(","),o={},r=0;r<n.length;r++)o[n[r]]=!0;$('input[type="checkbox"]',i).each(function(){o[$(this).val()]&&$(this).prop("checked",!0)});break;case"usersearch":if(!a)break;var s=$(".user-search",i).attr("id"),l=$("."+s+"-selectlist");proboards.loading(!0),proboards.ajax({url:proboards.route("get_selected_users"),data:{ids:a},success:function(e){l.selectlist("apply_selected",e.results)},complete:function(){proboards.loading(!1)}})}})},set_values:function(e){var t=[],i=[];return e.each(function(){var e=$(this);t.push(e.val()),i.push(e.next("label").text())}),t.join(", "),i.join(", "),[t,i]},set_values_pick:function(e){var t=[];return $(" .micro-profile .name",e).each(function(){t.push($(this).text())}),t.join(", "),t},strip_html:function(e){return e?e.replace(/(<([^>]+)>)/gi,""):""},apply_query_string:function(e,t){var i=this;if(!(location.search.length<=1)){for(var a=proboards.consolidateParams(["search"]),n=0;n<e.length;n++)if(0!=e[n].length){var o=e[n],r=o.data("dialog"),s=o.data("hidden");if(a[s.attr("name")]){var l=s.val();l=l.split(",");for(var d=0,c=l.length;d<c;d++)$('input[value="'+parseInt(l[d])+'"]',r).prop("checked",!0);var u=i.set_values($("input:checked",r));s.val(u[0]),o.val(u[1])}}for(var n=0;n<t.length;n++)0!=t[n].length&&!function(){var e=t[n],o=e.data("searchField"),r=e.data("dialog"),s=e.data("hidden"),l=$(".user-search",r).attr("id"),d=$("."+l+"-selectlist");if(a[s.attr("name")]){var c=s.val();c&&proboards.ajax({url:proboards.route("get_selected_users"),data:{ids:c},success:function(t){d.selectlist("apply_selected",t.results);var a=o.val();s.val(a),e.val(i.set_values_pick(r)),e.off("focus.onetime")}})}}();$("#transcription").html(i.transcribe_search())}}};i.init()})},standard_search_results_posts=function(){$(document).ready(function(){proboards.postManager.init({id:proboards.data("lm_id")}),listMan=new listManager("posts",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},listMan,standard_search_results_threads=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")})})},standard_thread_edit=function(){$(document).ready(function(){proboards.postPageManager.init({type:"thread",form_id:proboards.data("form_id")}),proboards.hotkeys.wysiwyg()})},standard_thread_find_threads=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),
data:proboards.data("lm_data"),id:proboards.data("lm_id")}),$(".nav-tree-labels ul:has(.placeholder)").parentsUntil(".nav-tree").menu("hideOption",["nav-tree-labels"]),$(".nav-tree-labels .placeholder").remove()})},standard_thread_new=function(){$(document).ready(function(){proboards.postPageManager.init({type:"thread",form_id:proboards.data("form_id")}),proboards.data("type")&&proboards.autosave.init(proboards.data("type")),proboards.hotkeys.wysiwyg()})},standard_thread_participants=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:1,id:proboards.data("lm_id"),data:{thread_id:proboards.data("lm_thread_id"),json:1,user_search_box:!0}},{route_name:"thread_participants_list"})})},standard_thread_participated=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:proboards.data("lm_data"),id:proboards.data("lm_id")},{search:!1})})},standard_thread_recent=function(){$(document).ready(function(){new listManager("threads",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),id:proboards.data("lm_id"),data:{recent:1}})})},standard_thread_show=function(){$(document).ready(function(){if($(".control-icons .event_icon").click(function(){0==$("#event_range").length&&$("body").append($("<div>").attr("id","event_range"));$("#event_range").dialog({autoOpen:!1,width:360,height:120,maxHeight:600,title:"Event"}),$("#event_range").html(proboards.data("range_string")),$("#event_range").dialog("open"),$("#event_range").height()>553&&($("#event_range").dialog("option","height",600),$("#event_range").dialog("close"),$("#event_range").dialog("open"))}),proboards.data("poll_opts")){var e=proboards.data("poll_opts");e.pollImgSrc=proboards.data("poll_img_src"),e.checkImgSrc=proboards.data("check_img_src"),$(".poll.show").poll(e)}proboards.data("quick_reply")&&$(".user-link").live("click",function(e){if(e.altKey)return $(this).parent().hasClass("shoutbox-post")||$(".quick-reply form textarea").replaceSelection($(this).attr("title")).focus(),!1}),proboards.data("enable_autosave")&&proboards.autosave.init(3),$(".quick-reply .message").resizable({alsoResize:".message textarea",handles:"s",maxWidth:898,minWidth:200,minHeight:160}),proboards.hotkeys.reply(),proboards.hotkeys.quick_reply()})},standard_unsubscribe_index=function(){$(document).ready(function(){proboards.form.confirm_ignore_changes(".confirm-ignore-changes form:first"),$("#s-none").on("click",function(){$(".form_user_edit_notifications select").not(":disabled").val("n")})})},standard_user_edit_admin=function(){function e(){var e=$("#account-disabled-until"),t=$("#blank-placeholder"),i=$('input[id*="account_disabled_input_radio_0"]'),a=$('input[id*="account_disabled_input_radio_1"]'),n=$('input[name="account_disabled_until_date"]'),o=$('input[name="account_disabled_until_time"]');0!==i.length&&0!==a.length&&(i.prop("checked")?(proboards.data("user_id")===proboards.data("profile_id")&&proboards.alert("You have checked the option to disable your own account. Please make certain as an admin you fully intend to disable your account before saving."),""==o.val()&&o.val(o.hasClass("military")?"00:00":"12:00 AM"),e.show(),t.hide()):(e.hide(),t.show(),n.val(""),o.val("")))}function t(){var e=$("#pms-disabled-until"),t=$("#pms-blank-placeholder"),i=$('input[id*="pms_disabled_input_radio_1"]'),a=$('input[name="pms_disabled_until_date"]'),n=$('input[name="pms_disabled_until_time"]');i.attr("checked")?(e.hide(),t.show(),a.val(""),n.val("")):(""==n.val()&&n.val(n.hasClass("military")?"00:00":"12:00 AM"),e.show(),t.hide())}$(document).ready(function(){$(".js-staff-exists").length&&(e(),$('input[id*="account_disabled_input"]').bind("click",function(){e()}),t(),$('input[id*="pms_disabled_input"]').bind("click",function(){t()}))})},standard_user_edit_avatar=function(){$(document).ready(function(){proboards.avatar.setAttributes(proboards.data("avatar_attributes")),imageAdded=!1,flashAdded=!1,forumImageAdded=!1,is_loaded=0,isForumAvatarsLoaded=!1,$previewImageAvatar=$("#avatar-preview #image-avatar"),$previewFlashAvatar=$("#avatar-preview .flash-avatar"),$previewNoAvatar=$("#avatar-preview-empty"),$previewForumAvatar=$("#avatar-preview #forum-avatar");var yes_clicked=!1;change("r"+proboards.data("avatar_type"),!0),proboards.avatar.setEditorData(proboards.data("user_id"),proboards.data("encrypted_flash_data")),proboards.avatar.loadEditorThumb("flash-avatar"),proboards.dialog("forum-avatar-editor-container",{title:"Pick a Forum Avatar",autoOpen:!1,width:549,height:415}),proboards.dialog("image-avatar-editor-container",{title:"Upload/Change Avatar",autoOpen:!1,width:560,minWidth:560,height:"auto",open:function(){$(".fileinput-button").css("overflow","hidden")},close:function(){$(".fileinput-button").css("overflow","visible")}}),proboards.dialog("flash-avatar-editor-container",{autoOpen:!1,title:"Avatar Maker",resizable:!1,width:820,height:560,open:function(){yes_clicked=!1},beforeClose:function(){if(1==proboards.avatar.avatar_changed&&!yes_clicked)return proboards.confirm("Are you sure you want to close without saving changes?",function(){yes_clicked=!0,$("#flash-avatar-editor-container").dialog("close")},{onNo:function(){return!1}}),!1}}),$("#link-image").click(function(){var e=$("#link-text").val();if(""!=e&&"http://"!=e){if(!check_image_link(e))return!1;proboards.ajax({url:proboards.data("avatar_link_url"),data:{link:e,user_id:proboards.data("profile_id")},success:function(e){$("#image-avatar").html('<img class="max-size" src="'+e.url+'" />'),$("#image-avatar-preview").html('<img class="max-size" src="'+e.url+'" />'),$("#image-avatar-editor-container").dialog("close"),$("#link-text").val("http://"),$("#link-image").removeClass("button").addClass("button-disabled"),change("r1")},error:function(e){link_image_error(e.error)}})}return!1}),$("#link-text").bind("keyup change",function(){""==$("#link-text").val()||"http://"==$("#link-text").val()?$("#link-image").addClass("button-disabled"):$("#link-image").removeClass("button-disabled")}),$("#link-text").bind("keydown",function(e){if(13==e.which)return $("#link-image").click(),!1}),pbFileUpload.init({onDragEnter:edit_image_avatar},{acceptFileTypes:new RegExp(eval(proboards.data("image_regex"))),url:proboards.route("upload_avatar",{user_id:proboards.data("profile_id")}),maxNumberOfFiles:1,maxFileSize:proboards.data("avatar_size_limit")}),$("#fileupload").on("fileuploadsend",function(){$(".fileupload-buttonbar").hide()}).on("fileuploaddone",function(e,t){if($.isArray(t.result)&&t.result.length){var i=t.result[0].thumbnail_url;$("#image-avatar").add("#image-avatar-preview").html('<img class="max-size" src="'+i+'">'),change("r1")}window.setTimeout(function(){$("#image-avatar-editor-container").dialog("close"),$(".fileupload-buttonbar").show(),$("table.files tbody").remove()},2e3)})})},imageAdded,flashAdded,forumImageAdded,is_loaded,isForumAvatarsLoaded,$previewImageAvatar,$previewFlashAvatar,$previewNoAvatar,$previewForumAvatar,standard_user_edit_badges=function(){$(document).ready(function(){$(".badges-have .badge-gift").on("click",function(e){var t=$(this),i=/badge-(\d+)/.test(t.attr("class"))?RegExp.$1:null,a=proboards.data("page"),n=a.member.id;return i&&proboards.badge.gift.dialog(i,n),!1}),$(".badges-have .badge-use-action").on("click",function(e){var t=$(this),i=/badge-(\d+)/.test(t.attr("class"))?RegExp.$1:null;return i&&proboards.badge.action.dialog(i),!1});var e=$('input[name="miniprofile_badges[]"]'),t=proboards.data("miniprofile_badge_limit"),i=function(){for(var i=e.filter(":checked"),a=t;a<i.length;a++)$(i[a]).removeAttr("checked");i.length>=t?e.not(":checked").attr("disabled","disabled"):e.removeAttr("disabled")};e.length>t&&(e.on("change",i),i())})},standard_user_edit_common=function(){$(document).ready(function(){function e(e){$(".js-edit").addClass("hide"),$(".js-edit."+e.page+"-edit").removeClass("hide"),$(".js-tab").parent().removeClass("ui-active"),$('[data-page="'+e.page+'"]').parent().addClass("ui-active")}function t(e){for(var t=e.split(" ");t.length;){var i=t.pop().trim();if(0===i.indexOf("form_"))return i.substr("form_user_edit_".length)}}proboards.form.init(),$.fn.storeFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).data("stored",$(this).val())}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).data("stored","checked")})},$.fn.resetFormValues=function(){var e=$(this);$('input[type="text"], select, textarea',e).each(function(){$(this).val($(this).data("stored"))}),$('input[type="checkbox"], input[type="radio"]',e).each(function(){$(this).is(":checked")&&$(this).prop("checked",!0)})},$.fn.trackFormChanges=function(){var e=$(this);return e.on("change","input, select, textarea",function(){$(this).parents(e).data("changed",!0)}),e},$.fn.setFormStatus=function(e,t){var i=$(this);if(i.data("status")!==e){var a=$('input[type="submit"]',i);return a.setButtonStatus(e,t),i.data("status",e),i}},$.fn.setButtonStatus=function(e,t){var i=$(this);if(i.data("status")!==e){switch(e){case"ready":var a=function(){return t?(i.prop("disabled",!1),i.prev().remove(),void i.unwrap()):void(i.data("wait")?setTimeout(a,500):i.parent("processing")&&(i.parent().css("width","-=40"),setTimeout(function(){i.prev().remove(),i.unwrap().prop("disabled",!1)},500)))};a();break;case"saving":var n='style="width: '+(i.width()+30)+'px;"';i.prop("disabled",!0).wrap('<div class="processing" '+n+"></div>");i.parent().prepend('<div class="processing-img"></div>').css("width","+=40");i.data("wait",!0);setTimeout(function(){i.data("wait",!1)},1e3)}return i.data("status",e),i}};var i="";$(".js-tab").click(function(){$(".js-tab").parent().removeClass("ui-active"),$(this).parent().addClass("ui-active");var t=$(this).data(t),a=proboards.data("profileUserId");t!==i&&(i=t,e(t),history.pushState({page:t},"Edit"+t,"/user/"+a+"/"+t.page))}),window.onpopstate=function(){var t=history.state?history.state.page:null;return t?void e(t):($(".js-edit").addClass("hide"),void $(".js-edit.avatar-edit").removeClass("hide"))};var a=function(e){return e.storeFormValues(),!1},n=function(){var e=$(this),i=$('input[type="submit"]',$(this)),n=e.serialize(),o=t(e.prop("class"));n+="&tabSection="+o,proboards.ajax({url:proboards.route("update_unified",{user_id:proboards.data("profileUserId")}),data:n,success:function(t){t.alert_message&&proboards.alert(t.alert_message),e.data("changed",!1),i.setStatus("saved",{position:"after",style:"display",styleOpt:"inline"});var a={background:"#90EE90",color:"#006400",padding:"5px",top:"3px",position:"relative"};$(".js-edit .status-box").css(a)},error:function(t){i.setStatus("error",{position:"after",style:"display",styleOpt:"inline",text:t.error});var a={background:"#EE9090",color:"#640000",padding:"5px",top:"3px",position:"relative"};$(".js-edit .status-box").css(a),proboards.form.handleFormError(e,t)},complete:function(){e.setFormStatus("ready"["true"]),a(e)}})},o=$(".edit-user form");o.data("generic_submit",n),$(".delete-user-link").bind("click",function(){proboards.confirm_dialog("users","delete",[proboards.data("page").member.id],function(){window.onbeforeunload=null,window.location=proboards.route("home")})})})},standard_user_edit_notifications=function(){var e=function(e,t,a){var n=$(boardTemplate);return n.data("board-id",e),$(".title-bar h1",n).text(t+" Notifications"),$("#notification-controls").before(n),$(".title-bar",n).click(),a&&i(n,a),$("#add-board-desc").trigger("boardaddremove"),n},t=function(t,i){proboards.ajax({url:proboards.route("update_user_notifications_add_board",{user_id:proboards.data("user").id}),data:{board_id:t},success:function(a){e(t,i,a.settings)}})},i=function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var a=t[i],n=$('.notification-option-wrapper[data-type="'+i+'"]',e),o=$('input[name="forum"]',n),r=$('select[name="freq"]',n);o.is(":disabled")||o.prop("checked",1==a[0]),r.is(":disabled")||r.val(a[2])}};$(document).ready(function(){$(".confirm-ignore-changes form:first").off("change"),$(".js-only").show();var i=$("#add-board-desc").show();i.on("boardaddremove",function(){i.toggle(0==$(".board-notifications").length)});var a=proboards.data("board_settings"),n=proboards.data("board_names");for(var o in a)a.hasOwnProperty(o)&&e(o,n[o],a[o]);$(".notification-option-wrapper","#forum-notifications").each(function(){$('input[type="checkbox"], select',this).autoSubmit({url:proboards.route("update_user_notifications_forum",{user_id:proboards.data("user").id}),statusElement:$(".status",this)})}),$("#content").on("click",".notification-block-wrapper .title-bar",function(){var e=$(this),t=e.closest(".notification-block-wrapper");if(t.toggleClass("expand"),t.is(".board-notifications")){var i=t.data("board-id");$(".notification-option-wrapper",t).each(function(){$('input[type="checkbox"], select',this).autoSubmit({url:proboards.route("update_user_notifications_board",{user_id:proboards.data("user").id,board_id:i,type:$(this).data("type")}),statusElement:$(".status",this)})})}}),$("#add-board").on("click",function(e){e.preventDefault();var i=[];$(".board-notifications").each(function(){i.push($(this).data("board-id"))}),proboards.board.select(t,{accessible:!0,useExisting:!0,title:"Add a board",prepend:"Please select a board to customize its notification settings.<br><br>",disabledIds:i})}),$("#content").on("click",".notification-block-wrapper .delete-board",function(e){e.stopPropagation();var t=$(this),a=t.closest(".notification-block-wrapper"),n=$("h1",a).text(),o=a.data("board-id");proboards.confirm("Are you sure you want to delete the "+n+" settings?",function(){proboards.ajax({url:proboards.route("update_user_notifications_remove_board",{user_id:proboards.data("user").id}),data:{board_id:o},success:function(){a.remove(),i.trigger("boardaddremove")}})})})})},standard_user_edit_personal=function(){$(document).ready(function(){dialog_opened=0,proboards.dialog("signature_preview_pane",{title:"Signature Preview",autoOpen:!1,width:550,height:415,close:function(){dialog_opened=0}}),$("#signature_preview").click(function(){var e=$(".form_user_edit_personal").data("form");e.validateSpecified(["signature"])&&0==dialog_opened&&proboards.ajax({url:proboards.data("signature_preview_url"),data:{signature:$("#"+proboards.data("form_id")+"_signature_input").val()},dataType:"json",success:function(e){$("#signature_preview_pane").html(e.signature),$("#signature_preview_pane").dialog("open"),dialog_opened=1}})})})},dialog_opened,standard_user_edit_privacy=function(){$(document).ready(function(){$('input[name^="block-list-"][name$="_2"]').live("change",function(){0==$('select[name="show_activity"]').val()&&$(this).is(":checked")&&proboards.alert("We detect that your activity feed is currently set to be visible by guests; this member will still be able to view your activity feed unless you change this setting.")}),$('input[name="change_birthday"]').attr("checked")||$("#change-birthday").hide(),$('input[name="change_birthday"]').bind("change",function(){var e=$(this);$("#change-birthday").toggle(e.prop("checked"))})})},standard_user_edit_settings=function(){$(document).ready(function(){function e(){i.attr("checked")?a.show():a.hide()}var t=$('textarea[name="default_post_content"]');t.input_placeholder(proboards.data("placeholder_text"));var i=$('input[id*="default_post_mode_input_radio_1"]'),a=$("#bbcode");$('input[id*="default_post_mode_input_radio"]').bind("click",function(){e()}),e(),"undefined"!=typeof Storage&&$("#drafts").show()})},standard_user_edit_social=function(){$(document).ready(function(){$(".social a").click(function(){var e=$(this).prev().text(),t=$(this).prev().children("input").val(),i=e+t;return window.open(i),!1})})},standard_user_group_leaders=function(){$(document).ready(function(){new listManager("users",{total:proboards.data("lm_total"),limit:proboards.data("lm_limit"),page:proboards.data("lm_page"),data:{id:proboards.data("lm_group_id"),type:"leads",user_search_box:!0},id:proboards.data("lm_id")})})},standard_user_show_activity=function(){$(document).ready(function(){var e=proboards.data("page"),t=proboards.data("form_id"),i=proboards.data("last_activity_id"),a=null;proboards.data("show_activity_delete")&&($(document).on("mouseover",".activity-item",function(){$(this).find(".delete-button").show()}).on("mouseout",".activity-item",function(){$(this).find(".delete-button").hide()}),$(document).on("click",".delete-button",function(){var e=$(this),t=e.attr("class").match(/activity-(\d+)/);if(2==t.length){var i=t[0],a=t[1];proboards.ajax({url:proboards.route("delete_activities"),data:{activity_id:a},success:function(e){$("."+i).remove()}})}})),$("#"+t).submit(function(){var t=$('input[name="update"]',this),i=t.val();return a!=i&&proboards.ajax({url:proboards.route("update_status"),data:{status:i,user_id:e.member.id,html:1},success:function(e){$("#no-activity-row").remove(),"undefined"!=typeof e.html&&$(".activities-container").prepend(e.html),0!=e.deleted_id&&$(".activity-"+e.deleted_id).remove(),t.attr("value","")},complete:function(e){a=i}}),!1}),$(".show-more").on("click",function(t){proboards.active_ajax_calls||(proboards.ajax({url:proboards.route("show_more_activities"),data:{user_id:e.member.id,last_id:i},success:function(e){$(".activities-container").append(e.html),e.more?i=e.last_id:$(".show-more").unbind("click").remove(),proboards.events.run("moreActivity")}}),t.preventDefault(),t.stopPropagation())})})},standard_user_show_following=function(){$(document).ready(function(){var e=proboards.data("page"),t=proboards.data("last_following_id");$(".show-more").on("click",function(i){var a=$(".activities-container");proboards.ajax({url:proboards.route("show_more_following"),data:{user_id:e.member.id,last_id:t},success:function(e){a.append(e.html),e.more?t=e.last_id:$(".show-more").unbind("click").remove(),proboards.events.run("moreActivity")}}),i.preventDefault(),i.stopPropagation()})})},standard_user_show_friends=function(){$(document).ready(function(){var e=0;$(".mini-user-inside").each(function(){$(this).height()>e&&(e=$(this).height())}).css("height",e+"px"),$(".follow-member").click(function(e){var t=this;e.preventDefault(),$(t).attr("disabled","disabled");var i=$(t).attr("id").substr("follow-".length);return proboards.ajax({url:proboards.route("follow_user"),data:{user_id:i},success:function(e){$(t).remove(),$(".user-"+i).remove()},complete:function(){$(t).removeAttr("disabled")}}),!1}),$("#invite-button").bind("click",function(e){return e.preventDefault(),proboards.ajax({url:proboards.data("invite_dialog_url"),data:{},dataType:"json",success:function(e){proboards.dialog("invite-dialog",{title:"Invite Friends",html:e.html,width:530,height:410,buttons:e.already?{Close:function(){$("#invite-dialog").dialog("close")}}:{"Send Invite":function(e){e.preventDefault(),proboards.dialog_toggle_buttons("invite-dialog"),proboards.ajax({url:$("#invite-dialog form").attr("action"),data:$("#invite-dialog form").serialize(),dataType:"html",success:function(e){$("#invite-dialog").html(e),$("#invite-dialog").dialog("option","buttons",{Close:function(){$("#invite-dialog").dialog("close")}})},error:function(e){proboards.dialog_toggle_buttons("invite-dialog"),proboards.error(e)}})}}})}}),!1})})},standard_user_show_groups=function(){$(document).ready(function(){var e=proboards.data("page").member.id;$(document).on("click",".group-leaders",function(e){e.preventDefault();var t=$(this).attr("id").substr("group-leaders-".length),i="group-leaders-dialog-"+t;proboards.dialog(i,{autoOpen:!1,width:460,maxHeight:600,title:"Leaders"}),proboards.ajax({url:proboards.route("show_group_leaders"),data:{id:t},dataType:"json",success:function(e){$("#"+i).html(e.html).dialog("open"),standard_user_group_leaders()}})}),$(document).on("click",".join-group",function(t){var i=$(this),a=i.attr("id").substr("join-group-".length);i.hide(),proboards.ajax({url:proboards.route("join_group"),data:{group_id:a,user_id:e},dataType:"html",success:function(e){var t=jQuery.parseJSON(e);if(i.replaceWith(t.status),$("#leave-group-"+a).html(t.leave_tag),!$("#group-"+a).hasClass("restricted")){var n=$("#count-"+a),o=proboards.add_commified_numbers([n.html(),t.increment]);n.html(o),$("#no-groups-msg").hide()}1==$("#manage-link-"+a+":visible").length&&$("#manage-link-"+a+":visible").siblings(".group-control-separator").show(),$("#leave-group-"+a).show(),1==t.mod_flag&&$(".manage-link").each(function(){$(this).show();var e=$(this).siblings();1==e.filter(".leave-group:visible").length&&e.filter(".group-control-separator").show()})}}),t.preventDefault()}),$(document).on("click",".leave-group",function(e){var t=$(this),i=t.attr("id").substr("leave-group-".length);t.prop("disabled",!0),proboards.confirm("Are you sure?",function(){proboards.ajax({url:proboards.route("leave_group"),data:{group_id:i,pending:t.text()},dataType:"html",success:function(e){var t=jQuery.parseJSON(e)||{};if($("#manage-link-"+i).siblings().hide(),!$("#group-"+i).hasClass("restricted")){0==t.mod_flag&&$("#manage-link-"+i).hide();var a=$("#count-"+i),n=proboards.add_commified_numbers([a.html(),-1]);n<0&&(n=0),a.html(n),$("#group-"+i).removeClass("leader")}$("#status-"+i).html(t.status),0==t.mod_flag&&$(".group:not(.leader)").each(function(){var e=$(this).attr("id").substr("group-".length);$("#leave-group-"+e).siblings().hide()});var o=!1;$(".leave-group:visible").each(function(){var e=$(this).attr("id").substr(".leave-group-".length);if(!$("#group-"+e).hasClass("restricted"))return o=!0}),o&&$("#no-groups-msg").show()},complete:function(){t.prop("disabled",!1)}})},{onNo:function(){t.prop("disabled",!1)}}),e.preventDefault()}),$(document).on("click",".remove-from-group",function(t){var i=$(this),a=i.attr("id").substr("remove-from-group-".length);i.prop("disabled",!0),proboards.confirm("Are you sure?",function(){proboards.ajax({url:proboards.route("change_group_members",{type:"remove"}),data:{group_id:a,user_ids:[e]},success:function(e){i.hide(),$("#add-to-group-"+a).show(),$("#status-"+a).html("Not a Member");var t=$("#count-"+a),n=proboards.add_commified_numbers([t.html(),-1]);n<0&&(n=0),t.html(n),0===$(".remove-from-group:visible").length&&$("#no-groups-msg").show()},complete:function(){i.prop("disabled",!1)}})},{onNo:function(){i.prop("disabled",!1)}}),t.preventDefault()}),$(document).on("click",".add-to-group",function(t){var i=$(this),a=i.attr("id").substr("add-to-group-".length);i.prop("disabled",!0),proboards.ajax({url:proboards.route("change_group_members",{type:"adding"}),data:{group_id:a,user_ids:[e]},success:function(e){i.hide(),$("#remove-from-group-"+a).show(),$("#status-"+a).html("Member");var t=$("#count-"+a),n=proboards.add_commified_numbers([t.html(),1]);t.html(n),$("#no-groups-msg").hide()},complete:function(){i.prop("disabled",!1)}}),t.preventDefault()})})},standard_user_show_notifications=function(){$(document).ready(function(){var e=proboards.data("page"),t=proboards.data("last_notification_id");$(".show-more").on("click",function(i){var a=$(".notifications-container");proboards.ajax({url:proboards.route("show_more_notifications"),data:{user_id:e.member.id,last_id:t},success:function(e){a.append(e.html),e.more?t=e.last_id:$(".show-more").unbind("click").remove(),proboards.events.run("moreNotification")}}),i.preventDefault(),i.stopPropagation()})})},standard_user_show_summary=function(){$(document).ready(function(){var e=proboards.data("form_id"),t=proboards.data("page").member.id,i=null;$("#"+e).on("submit",function(){var e=$('input[name="update"]',this),a=e.val();return i!=a&&proboards.ajax({url:proboards.route("update_status"),data:{status:a,user_id:t},success:function(t){$(".personal-text").html(t.entered_text),e.attr("value","")},complete:function(e){i=a}}),$('input[name="submit"]').removeAttr("disabled"),!1})})},standard_user_show_user_common=function(){$(document).ready(function(){var e=proboards.data("page").member.id;if($(".follow_button").click(function(t){var i=this;return t.preventDefault(),$(i).hasClass("ui-state-disabled")||($(i).addClass("ui-state-disabled"),proboards.ajax({url:proboards.route("follow_user"),data:{user_id:e},success:function(e){$(i).text(e.new_button_text)},complete:function(){$(i).removeClass("ui-state-disabled")}})),!1}),proboards.data("show_user_options")){var t="#options-container",i=$(t);i.show(),$(".user-menu").selectMenu({container:t,status:'<img src="'+proboards.data("options_img_src")+'" alt="Profile Options" title="Profile Options" />',staticStatus:!0,beforeShow:function(){i.addClass("open-menu")},onClose:function(){i.removeClass("open-menu")},menuOptions:{click:function(t,i){var a=$(i.item).attr("class");switch(a){case"block_user":0==$("#block-dialog").length&&($(document.body).append('<div id="block-dialog"></div>'),proboards.dialog("block-dialog",{autoOpen:!1,width:500,title:"Block Member",buttons:[{text:"Block Member",click:function(){$("#block-dialog form").submit()}}]}),proboards.ajax({url:proboards.route("block_user_dialog"),data:{user_id:e},dataType:"html",success:function(e){$("#block-dialog").html(e)}})),$("#block-dialog").dialog("open");break;case"ban_user":proboards.member.ban({id:e,checked:["user_name"],success:function(){$("li.ban_user").remove()}});break;case"warn_user":window.location.href=proboards.data("user_staff_url");break;case"disable":window.location.href=proboards.data("user_staff_url");break;case"delete_user":proboards.confirm_dialog("users","delete",[e],function(e){window.location=proboards.route("members")});break;case"searchIP actionable ui-menu-has-sub-menu":proboards.dialog("ip_copy",{title:"IP Address"}).html('Below is the IP address associated with this user: <br /><br /><input type="text" name="easy_copy_ip" style="width: 270px;" value="'+$(i.item).data("ip")+'" />'),$('input[name="easy_copy_ip"]').select();break;case"ipSearchThreads":window.location=proboards.route("threads_by_ip",{type:"user",id:e});break;case"ipSearchPosts":window.location=proboards.route("posts_by_ip",{type:"user",id:e});break;case"ipSearchMembers":window.location=proboards.route("members")+"?view=ip&type=user&id="+e;break;case"ipSearchLogs":window.location=proboards.route("security_logs_by_ip",{type:"user",id:e});break;case"badge_action":proboards.badge.action.dialog($(i.item).data("badge-id"),$(i.item).data("user-id"))}}}})}})},admin_settings_forum_calendar=function(){$(document).ready(function(){$('select[name="enabled"]').autoSubmit({url:proboards.data("settings_save_url"),statusElement:$('select[name="enabled"]').parent().nextAll(".status-box")}),$('input[name="display_birthdays"]').autoSubmit({url:proboards.data("settings_save_url"),statusElement:$('input[name="display_birthdays"]').parent().nextAll(".status-box")})})},admin_settings_forum_delete_forum=function(){$(document).ready(function(){var e=$("#delete_forum div.exit-block");e.hide(),$("#delete_forum button#continue").on("click",function(t){t.preventDefault();var i=$("#delete_forum form");i.data("form").validateAll()&&proboards.ajax({url:proboards.route("delete_forum_validate"),data:{password:$('input[name="password"]',i).val()},dataType:"json",success:function(t){t.validated&&($("div.delete-forum",i).hide(),e.show())},error:function(e){e.form_error&&proboards.form.handleFormError(i,{form_error:{password:[e.form_error]}}),e.error&&"invalid_user"==e.error&&proboards.error("User cannot be found.")}})})})},admin_settings_forum_directory=function(){function e(){0==$(".thumb_type input:checked").val()?($("#upload_own").show(),$("#link_own").hide(),$("#take_new").hide(),$("#use_default").hide()):1==$(".thumb_type input:checked").val()?($("#upload_own").hide(),$("#link_own").show(),$("#take_new").hide(),$("#use_default").hide()):2==$(".thumb_type input:checked").val()?($("#upload_own").hide(),$("#link_own").hide(),$("#take_new").show(),$("#use_default").hide()):3==$(".thumb_type input:checked").val()?($("#upload_own").hide(),$("#link_own").hide(),$("#take_new").hide(),$("#use_default").show(),$('select[name="forum_image_category"]').change()):4==$(".thumb_type input:checked").val()&&($("#upload_own").hide(),$("#link_own").hide(),$("#take_new").hide(),$("#use_default").hide())}$(document).ready(function(){var t=proboards.data("category_data"),i=proboards.data("directory_url"),a=proboards.data("thumbnail_preview"),n=proboards.data("forum_name"),o=$('input[name="forum_name"]');null!=a&&($(".thumbnail_preview").append('<img src="'+a+'" alt="Current Thumbnail" />'),$('input[name="thumb_type"][value="4"]').attr("checked","checked")),$(".thumb_type input").change(function(){e()}),$('select[name="forum_image_category"]').change(function(){$("#default_icons").empty();for(var e=t[$(this).val()].images,a=0;a<e.length;a++)$("#default_icons").append('<img src="'+i+$(this).val()+"/"+e[a]+'.png" alt="'+$(this).val()+"/"+e[a]+'" />')}),$(".remove_entry").click(function(e){e.preventDefault(),proboards.confirm("Are you sure you want to delete this directory entry?",function(){proboards.instapost(proboards.data("delete_url"))})}),$(document).on("click","#default_icons img",function(){$('input[name="use_default"]').val($(this).attr("src")),$("#default_icons img").removeClass("chosen"),$(this).addClass("chosen")}),$('input[name="submit_entry"]').on("click",function(e){var t=$("#general-settings form");if(t.data("form").validateAll()){if(o.val()==n&&""!=n)return!0;e.preventDefault();var i=""==n?"Forums without titles cannot be accepted into the directory. Please set a forum title.":"The chosen forum directory name differs from the forum title.";proboards.confirm(i+"<br /><br />Would you like to set the chosen directory name as your forum title?",function(){$('input[name="new_forum_name"]').val("1"),t.submit()},{title:"Forum Title Change",onNo:function(){""==!n&&t.submit()}})}})})},admin_settings_forum_forum=function(){$(document).ready(function(){$("select, input, textarea").not('[name="hex"]').not('[name="maintenance_mode"]').each(function(){$(this).parents(".image-module").length||$(this).parents(".js-not-auto-submit").length||$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})});var e=$(".maintenance_mode_message").parents(".option"),t=$('input[name="maintenance_mode"]'),i=$('input[name="maintenance_mode"]:checked'),a=$("#remove_limit");t.on("change",function(){e.toggle(1==$(this).val())}),i.trigger("change"),t.each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})}),2==proboards.data("maintenance_mode")&&(t.closest(".option").hide(),e.siblings(".default-message").hide()),a.on("click",function(){var i="Are you sure you want to disable maintenance mode?";i="Disabling maintenance mode will reset your monthly bill<br />limit and allow unlimited pageviews. You will be charged<br />for additional pageviews according to your chosen plan.<br /><br />"+i,proboards.confirm(i,function(){t.filter('input[value="0"]').prop("checked",!0).trigger("change"),a.hide(),a.siblings(".warning-message").remove(),e.siblings(".default-message").show(),t.closest(".option").show()},{title:"Maintenance Mode"})})})},admin_settings_forum_login_registration=function(){$(document).ready(function(){$('select, input[name!="hex"], textarea').filter(":not(.autosave-exclude)").each(function(){$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})});var e=function(e){var t=e.val();if(t.match(/^([0-9A-F]{3}|[0-9A-F]{6})?/i)){switch(e.attr("name")){case"gradient_bg_color":""==t&&(t="0e7fff"),$("#pbn-preview").css("background-color","#"+t);break;case"gradient_text_color":""==t&&(t="ffffff"),$("#pbn-preview .forum-title").css("color","#"+t);break;case"container1_color":""==t&&(t="ff7113"),$("#pbn-preview .container1_color").css("background-color","#"+t);
break;case"container2_color":""==t&&(t="0e7fff"),$("#pbn-preview .container2_color").css("background-color","#"+t);break;case"container_text_color":""==t&&(t="ffffff"),$("#pbn-preview .container1_color").css("color","#"+t),$("#pbn-preview .container2_color").css("color","#"+t)}e.siblings(".color-picker-preview").css("background-color","#"+t)}};$("#pbn-options .color-option").each(function(){$(this).colorPickMe({update:function(){$(this).trigger("keyup"),e($(this))}}),$(this).on("change",function(){e($(this))})});var t=$("#registration_send_invite"),i=$('input[name="registration_email_invite"]',t),a=$('input[name="registration_email_invite_send"]',t),n=$(".status-box",t);n.loadingStatus({loadingClass:"saved",loadingText:"Sending...",successClass:"saved",successText:"Sent!"});var o=n.data("loadingStatus");a.on("click",function(){var e=i.val();return $.check_email(e)?(a.prop("disabled",!0),o.setStatus("loading"),void proboards.ajax({url:proboards.data("email_invite_key_url"),data:{email:e},success:function(){o.setStatus("success")},error:function(e){o.setStatus("error",e.error)},complete:function(){a.prop("disabled",!1)}})):o.setStatus("error","Please enter a valid email.")}),i.on("keydown",function(e){13!=e.keyCode&&13!=e.which||a.trigger("click")});var r=$('input[name="guests_must_login"]'),s=$('input[name="registration_welcome_pm"]'),l=$('input[name="disable_registration"]'),d=$('input[name="require_new_account_approval"]'),c=$("#registration_welcome_subject"),u=$("#registration_welcome_message"),p=$("#registration_send_invite"),h=$("#registration_request_message"),f=$("#restrict_registration_message");r.on("change update",function(){var e="1"==r.filter(":checked").val();$("#guests_must_login_message").toggle(e)}).trigger("update"),l.on("change update",function(){var e="1"==l.filter(":checked").val();p.toggle(e)}).trigger("update"),d.on("change update",function(){var e="1"==$('input[name="require_new_account_approval"]:checked').val();$([h,f]).toggle(e)}).trigger("update"),s.on("change update",function(){var e="1"==s.filter(":checked").val();$([c,u]).toggle(e)}).trigger("update")})},admin_settings_forum_social_media=function(){$(document).ready(function(){$(".under-headings .option input").each(function(){$(this).parents(".image-module").length||$(this).autoSubmit({url:proboards.data("settings_save_url"),statusElement:$(".status-box",$(this).closest(".option"))})})})};